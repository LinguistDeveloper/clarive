(function(){function s(e,t,n){return function(){if(t.target==arguments[0]){e.apply(n,Array.prototype.slice.call(arguments,0))}}}function o(t,n,r,i){r.task=new e.DelayedTask;return function(){r.task.delay(n.buffer,t,i,Array.prototype.slice.call(arguments,0))}}function u(e,t,n,r){return function(){t.removeListener(n,r);return e.apply(r,arguments)}}function a(t,n,r,i){return function(){var s=new e.DelayedTask,o=Array.prototype.slice.call(arguments,0);if(!r.tasks){r.tasks=[]}r.tasks.push(s);s.delay(n.delay||10,function(){r.tasks.remove(s);t.apply(i,o)},i)}}var e=Ext.util,t=Ext.each,n=true,r=false;e.Observable=function(){var e=this,t=e.events;if(e.listeners){e.on(e.listeners);delete e.listeners}e.events=t||{}};e.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var e=Array.prototype.slice.call(arguments,0),t=e[0].toLowerCase(),i=this,s=n,o=i.events[t],u,a,f;if(i.eventsSuspended===n){if(a=i.eventQueue){a.push(e)}}else if(typeof o=="object"){if(o.bubble){if(o.fire.apply(o,e.slice(1))===r){return r}f=i.getBubbleTarget&&i.getBubbleTarget();if(f&&f.enableBubble){u=f.events[t];if(!u||typeof u!="object"||!u.bubble){f.enableBubble(t)}return f.fireEvent.apply(f,e)}}else{e.shift();s=o.fire.apply(o,e)}}return s},addListener:function(t,r,i,s){var o=this,u,a,f;if(typeof t=="object"){s=t;for(u in s){a=s[u];if(!o.filterOptRe.test(u)){o.addListener(u,a.fn||a,a.scope||s.scope,a.fn?a:s)}}}else{t=t.toLowerCase();f=o.events[t]||n;if(typeof f=="boolean"){o.events[t]=f=new e.Event(o,t)}f.addListener(r,i,typeof s=="object"?s:{})}},removeListener:function(e,t,n){var r=this.events[e.toLowerCase()];if(typeof r=="object"){r.removeListener(t,n)}},purgeListeners:function(){var e=this.events,t,n;for(n in e){t=e[n];if(typeof t=="object"){t.clearListeners()}}},addEvents:function(e){var t=this;t.events=t.events||{};if(typeof e=="string"){var r=arguments,i=r.length;while(i--){t.events[r[i]]=t.events[r[i]]||n}}else{Ext.applyIf(t.events,e)}},hasListener:function(e){var t=this.events[e.toLowerCase()];return typeof t=="object"&&t.listeners.length>0},suspendEvents:function(e){this.eventsSuspended=n;if(e&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var e=this,n=e.eventQueue||[];e.eventsSuspended=r;delete e.eventQueue;t(n,function(t){e.fireEvent.apply(e,t)})}};var i=e.Observable.prototype;i.on=i.addListener;i.un=i.removeListener;e.Observable.releaseCapture=function(e){e.fireEvent=i.fireEvent};e.Event=function(e,t){this.name=t;this.obj=e;this.listeners=[]};e.Event.prototype={addListener:function(e,t,n){var r=this,i;t=t||r.obj;if(!r.isListening(e,t)){i=r.createListener(e,t,n);if(r.firing){r.listeners=r.listeners.slice(0)}r.listeners.push(i)}},createListener:function(e,t,n){n=n||{};t=t||this.obj;var r={fn:e,scope:t,options:n},i=e;if(n.target){i=s(i,n,t)}if(n.delay){i=a(i,n,r,t)}if(n.single){i=u(i,this,e,t)}if(n.buffer){i=o(i,n,r,t)}r.fireFn=i;return r},findListener:function(e,t){var n=this.listeners,r=n.length,i;t=t||this.obj;while(r--){i=n[r];if(i){if(i.fn==e&&i.scope==t){return r}}}return-1},isListening:function(e,t){return this.findListener(e,t)!=-1},removeListener:function(e,t){var i,s,o,u=this,a=r;if((i=u.findListener(e,t))!=-1){if(u.firing){u.listeners=u.listeners.slice(0)}s=u.listeners[i];if(s.task){s.task.cancel();delete s.task}o=s.tasks&&s.tasks.length;if(o){while(o--){s.tasks[o].cancel()}delete s.tasks}u.listeners.splice(i,1);a=n}return a},clearListeners:function(){var e=this,t=e.listeners,n=t.length;while(n--){e.removeListener(t[n].fn,t[n].scope)}},fire:function(){var e=this,t=e.listeners,i=t.length,s=0,o;if(i>0){e.firing=n;var u=Array.prototype.slice.call(arguments,0);for(;s<i;s++){o=t[s];if(o&&o.fireFn.apply(o.scope||e.obj||window,u)===r){return e.firing=r}}}e.firing=r;return n}}})();Ext.DomHelper=function(){function y(e,t,n,r,i,s){var o=u.insertHtml(r,Ext.getDom(e),b(t));return n?Ext.get(o,true):o}function b(e){var n="",i,s,o,u;if(typeof e=="string"){n=e}else if(Ext.isArray(e)){for(var a=0;a<e.length;a++){if(e[a]){n+=b(e[a])}}}else{n+="<"+(e.tag=e.tag||"div");for(i in e){s=e[i];if(!r.test(i)){if(typeof s=="object"){n+=" "+i+'="';for(o in s){n+=o+":"+s[o]+";"}n+='"'}else{n+=" "+({cls:"class",htmlFor:"for"}[i]||i)+'="'+s+'"'}}}if(t.test(e.tag)){n+="/>"}else{n+=">";if(u=e.children||e.cn){n+=b(u)}else if(e.html){n+=e.html}n+="</"+e.tag+">"}}return n}function w(t,n,r,i){e.innerHTML=[n,r,i].join("");var s=-1,o=e,u;while(++s<t){o=o.firstChild}if(u=o.nextSibling){var a=document.createDocumentFragment();while(o){u=o.nextSibling;a.appendChild(o);o=u}o=a}return o}function E(t,n,r,s){var o,u;e=e||document.createElement("div");if(t=="td"&&(n==a||n==c)||!i.test(t)&&(n==l||n==f)){return}u=n==l?r:n==f?r.nextSibling:n==a?r.firstChild:null;if(n==l||n==f){r=r.parentNode}if(t=="td"||t=="tr"&&(n==c||n==a)){o=w(4,m,s,g)}else if(t=="tbody"&&(n==c||n==a)||t=="tr"&&(n==l||n==f)){o=w(3,d,s,v)}else{o=w(2,h,s,p)}r.insertBefore(o,u);return o}function S(e){var t=document.createElement("div"),n=document.createDocumentFragment(),r=0,i,s;t.innerHTML=e;s=t.childNodes;i=s.length;for(;r<i;r++){n.appendChild(s[r].cloneNode(true))}return n}var e=null,t=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,n=/^table|tbody|tr|td$/i,r=/tag|children|cn|html$/i,i=/td|tr|tbody/i,s=/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,o=/end/i,u,a="afterbegin",f="afterend",l="beforebegin",c="beforeend",h="<table>",p="</table>",d=h+"<tbody>",v="</tbody>"+p,m=d+"<tr>",g="</tr>"+v;u={markup:function(e){return b(e)},applyStyles:function(e,t){if(t){var n;e=Ext.fly(e);if(typeof t=="function"){t=t.call()}if(typeof t=="string"){s.lastIndex=0;while(n=s.exec(t)){e.setStyle(n[1],n[2])}}else if(typeof t=="object"){e.setStyle(t)}}},insertHtml:function(e,t,r){var i={},s,u,h,p,d,v;e=e.toLowerCase();i[l]=["BeforeBegin","previousSibling"];i[f]=["AfterEnd","nextSibling"];if(t.insertAdjacentHTML){if(n.test(t.tagName)&&(v=E(t.tagName.toLowerCase(),e,t,r))){return v}i[a]=["AfterBegin","firstChild"];i[c]=["BeforeEnd","lastChild"];if(s=i[e]){t.insertAdjacentHTML(s[0],r);return t[s[1]]}}else{u=t.ownerDocument.createRange();p="setStart"+(o.test(e)?"After":"Before");if(i[e]){u[p](t);if(!u.createContextualFragment){d=S(r)}else{d=u.createContextualFragment(r)}t.parentNode.insertBefore(d,e==l?t:t.nextSibling);return t[(e==l?"previous":"next")+"Sibling"]}else{h=(e==a?"first":"last")+"Child";if(t.firstChild){u[p](t[h]);if(!u.createContextualFragment){d=S(r)}else{d=u.createContextualFragment(r)}if(e==a){t.insertBefore(d,t.firstChild)}else{t.appendChild(d)}}else{t.innerHTML=r}return t[h]}}throw'Illegal insertion point -> "'+e+'"'},insertBefore:function(e,t,n){return y(e,t,n,l)},insertAfter:function(e,t,n){return y(e,t,n,f,"nextSibling")},insertFirst:function(e,t,n){return y(e,t,n,a,"firstChild")},append:function(e,t,n){return y(e,t,n,c,"",true)},overwrite:function(e,t,n){e=Ext.getDom(e);e.innerHTML=b(t);return n?Ext.get(e.firstChild):e.firstChild},createHtml:b};return u}();Ext.Template=function(e){var t=this,n=arguments,r=[],i;if(Ext.isArray(e)){e=e.join("")}else if(n.length>1){for(var s=0,o=n.length;s<o;s++){i=n[s];if(typeof i=="object"){Ext.apply(t,i)}else{r.push(i)}}e=r.join("")}t.html=e;if(t.compiled){t.compile()}};Ext.Template.prototype={re:/\{([\w\-]+)\}/g,applyTemplate:function(e){var t=this;return t.compiled?t.compiled(e):t.html.replace(t.re,function(t,n){return e[n]!==undefined?e[n]:""})},set:function(e,t){var n=this;n.html=e;n.compiled=null;return t?n.compile():n},compile:function(){function fn(e,t){t="values['"+t+"']";return"'"+sep+"("+t+" == undefined ? '' : "+t+")"+sep+"'"}var me=this,sep=Ext.isGecko?"+":",";eval("this.compiled = function(values){ return "+(Ext.isGecko?"'":"['")+me.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+(Ext.isGecko?"';};":"'].join('');};"));return me},insertFirst:function(e,t,n){return this.doInsert("afterBegin",e,t,n)},insertBefore:function(e,t,n){return this.doInsert("beforeBegin",e,t,n)},insertAfter:function(e,t,n){return this.doInsert("afterEnd",e,t,n)},append:function(e,t,n){return this.doInsert("beforeEnd",e,t,n)},doInsert:function(e,t,n,r){t=Ext.getDom(t);var i=Ext.DomHelper.insertHtml(e,t,this.applyTemplate(n));return r?Ext.get(i,true):i},overwrite:function(e,t,n){e=Ext.getDom(e);e.innerHTML=this.applyTemplate(t);return n?Ext.get(e.firstChild,true):e.firstChild}};Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.Template.from=function(e,t){e=Ext.getDom(e);return new Ext.Template(e.value||e.innerHTML,t||"")};Ext.DomQuery=function(){function child(e,t){var n=0,r=e.firstChild;while(r){if(r.nodeType==1){if(++n==t){return r}}r=r.nextSibling}return null}function next(e){while((e=e.nextSibling)&&e.nodeType!=1);return e}function prev(e){while((e=e.previousSibling)&&e.nodeType!=1);return e}function children(e){var t=e.firstChild,n=-1,r;while(t){r=t.nextSibling;if(t.nodeType==3&&!nonSpace.test(t.nodeValue)){e.removeChild(t)}else{t.nodeIndex=++n}t=r}return this}function byClassName(e,t){if(!t){return e}var n=[],r=-1;for(var i=0,s;s=e[i];i++){if((" "+s.className+" ").indexOf(t)!=-1){n[++r]=s}}return n}function attrValue(e,t){if(!e.tagName&&typeof e.length!="undefined"){e=e[0]}if(!e){return null}if(t=="for"){return e.htmlFor}if(t=="class"||t=="className"){return e.className}return e.getAttribute(t)||e[t]}function getNodes(e,t,n){var r=[],i=-1,s;if(!e){return r}n=n||"*";if(typeof e.getElementsByTagName!="undefined"){e=[e]}if(!t){for(var o=0,u;u=e[o];o++){s=u.getElementsByTagName(n);for(var a=0,f;f=s[a];a++){r[++i]=f}}}else if(t=="/"||t==">"){var l=n.toUpperCase();for(var o=0,u,c;u=e[o];o++){c=u.childNodes;for(var a=0,h;h=c[a];a++){if(h.nodeName==l||h.nodeName==n||n=="*"){r[++i]=h}}}}else if(t=="+"){var l=n.toUpperCase();for(var o=0,p;p=e[o];o++){while((p=p.nextSibling)&&p.nodeType!=1);if(p&&(p.nodeName==l||p.nodeName==n||n=="*")){r[++i]=p}}}else if(t=="~"){var l=n.toUpperCase();for(var o=0,p;p=e[o];o++){while(p=p.nextSibling){if(p.nodeName==l||p.nodeName==n||n=="*"){r[++i]=p}}}}return r}function concat(e,t){if(t.slice){return e.concat(t)}for(var n=0,r=t.length;n<r;n++){e[e.length]=t[n]}return e}function byTag(e,t){if(e.tagName||e==document){e=[e]}if(!t){return e}var n=[],r=-1;t=t.toLowerCase();for(var i=0,s;s=e[i];i++){if(s.nodeType==1&&s.tagName.toLowerCase()==t){n[++r]=s}}return n}function byId(e,t){if(e.tagName||e==document){e=[e]}if(!t){return e}var n=[],r=-1;for(var i=0,s;s=e[i];i++){if(s&&s.id==t){n[++r]=s;return n}}return n}function byAttribute(e,t,n,r,i){var s=[],o=-1,u=i=="{",a=Ext.DomQuery.operators[r],f,l,c;for(var h=0,p;p=e[h];h++){if(p.nodeType!=1){continue}if(!c){l=Ext.DomQuery.isXml(p);c=true}if(!l){if(u){f=Ext.DomQuery.getStyle(p,t)}else if(t=="class"||t=="className"){f=p.className}else if(t=="for"){f=p.htmlFor}else if(t=="href"){f=p.getAttribute("href",2)}else{f=p.getAttribute(t)}}else{f=p.getAttribute(t)}if(a&&a(f,n)||!a&&f){s[++o]=p}}return s}function byPseudo(e,t,n){return Ext.DomQuery.pseudos[t](e,n)}function nodupIEXml(e){var t=++key,n;e[0].setAttribute("_nodup",t);n=[e[0]];for(var r=1,i=e.length;r<i;r++){var s=e[r];if(!s.getAttribute("_nodup")!=t){s.setAttribute("_nodup",t);n[n.length]=s}}for(var r=0,i=e.length;r<i;r++){e[r].removeAttribute("_nodup")}return n}function nodup(e){if(!e){return[]}var t=e.length,n,r,i=e,s,o=-1;if(!t||typeof e.nodeType!="undefined"||t==1){return e}if(isIE&&typeof e[0].selectSingleNode!="undefined"){return nodupIEXml(e)}var u=++key;e[0]._nodup=u;for(r=1;n=e[r];r++){if(n._nodup!=u){n._nodup=u}else{i=[];for(var a=0;a<r;a++){i[++o]=e[a]}for(a=r+1;s=e[a];a++){if(s._nodup!=u){s._nodup=u;i[++o]=s}}return i}}return i}function quickDiffIEXml(e,t){var n=++key,r=[];for(var i=0,s=e.length;i<s;i++){e[i].setAttribute("_qdiff",n)}for(var i=0,s=t.length;i<s;i++){if(t[i].getAttribute("_qdiff")!=n){r[r.length]=t[i]}}for(var i=0,s=e.length;i<s;i++){e[i].removeAttribute("_qdiff")}return r}function quickDiff(e,t){var n=e.length,r=++key,i=[];if(!n){return t}if(isIE&&typeof e[0].selectSingleNode!="undefined"){return quickDiffIEXml(e,t)}for(var s=0;s<n;s++){e[s]._qdiff=r}for(var s=0,o=t.length;s<o;s++){if(t[s]._qdiff!=r){i[i.length]=t[s]}}return i}function quickId(e,t,n,r){if(e==n){var i=n.ownerDocument||n;return i.getElementById(r)}e=getNodes(e,t,"*");return byId(e,r)}var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w\-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,isIE=window.ActiveXObject?true:false,key=30803;eval("var batch = 30803;");return{getStyle:function(e,t){return Ext.fly(e).getStyle(t)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],mode,lastPath,matchers=Ext.DomQuery.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe);if(lmode&&lmode[1]){fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";';path=path.replace(lmode[1],"")}while(path.substr(0,1)=="/"){path=path.substr(1)}while(path&&lastPath!=path){lastPath=path;var tokenMatch=path.match(tagTokenRe);if(type=="select"){if(tokenMatch){if(tokenMatch[1]=="#"){fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");'}else{fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");'}path=path.replace(tokenMatch[0],"")}else if(path.substr(0,1)!="@"){fn[fn.length]='n = getNodes(n, mode, "*");'}}else{if(tokenMatch){if(tokenMatch[1]=="#"){fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");'}else{fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");'}path=path.replace(tokenMatch[0],"")}}while(!(modeMatch=path.match(modeRe))){var matched=false;for(var j=0;j<matchersLn;j++){var t=matchers[j];var m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(e,t){return m[t]});path=path.replace(m[0],"");matched=true;break}}if(!matched){throw'Error parsing selector, parsing failed at "'+path+'"'}}if(modeMatch[1]){fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";';path=path.replace(modeMatch[1],"")}}fn[fn.length]="return nodup(n);\n}";eval(fn.join(""));return f},jsSelect:function(e,t,n){t=t||document;if(typeof t=="string"){t=document.getElementById(t)}var r=e.split(","),i=[];for(var s=0,o=r.length;s<o;s++){var u=r[s].replace(trimRe,"");if(!cache[u]){cache[u]=Ext.DomQuery.compile(u);if(!cache[u]){throw u+" is not a valid selector"}}var a=cache[u](t);if(a&&a!=document){i=i.concat(a)}}if(r.length>1){return nodup(i)}return i},isXml:function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":false},select:document.querySelectorAll?function(e,t,n){t=t||document;if(!Ext.DomQuery.isXml(t)){try{var r=t.querySelectorAll(e);return Ext.toArray(r)}catch(i){}}return Ext.DomQuery.jsSelect.call(this,e,t,n)}:function(e,t,n){return Ext.DomQuery.jsSelect.call(this,e,t,n)},selectNode:function(e,t){return Ext.DomQuery.select(e,t)[0]},selectValue:function(e,t,n){e=e.replace(trimRe,"");if(!valueCache[e]){valueCache[e]=Ext.DomQuery.compile(e,"select")}var r=valueCache[e](t),i;r=r[0]?r[0]:r;if(typeof r.normalize=="function")r.normalize();i=r&&r.firstChild?r.firstChild.nodeValue:null;return i===null||i===undefined||i===""?n:i},selectNumber:function(e,t,n){var r=Ext.DomQuery.selectValue(e,t,n||0);return parseFloat(r)},is:function(e,t){if(typeof e=="string"){e=document.getElementById(e)}var n=Ext.isArray(e),r=Ext.DomQuery.filter(n?e:[e],t);return n?r.length==e.length:r.length>0},filter:function(e,t,n){t=t.replace(trimRe,"");if(!simpleCache[t]){simpleCache[t]=Ext.DomQuery.compile(t,"simple")}var r=simpleCache[t](e);return n?quickDiff(r,e):r},matchers:[{re:/^\.([\w\-]+)/,select:'n = byClassName(n, " {1} ");'},{re:/^\:([\w\-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w\-]+)\s?(?:(=|.=)\s?(["']?)(.*?)\4)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{5}", "{3}", "{1}");'},{re:/^#([\w\-]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w\-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(e,t){return e==t},"!=":function(e,t){return e!=t},"^=":function(e,t){return e&&e.substr(0,t.length)==t},"$=":function(e,t){return e&&e.substr(e.length-t.length)==t},"*=":function(e,t){return e&&e.indexOf(t)!==-1},"%=":function(e,t){return e%t==0},"|=":function(e,t){return e&&(e==t||e.substr(0,t.length+1)==t+"-")},"~=":function(e,t){return e&&(" "+e+" ").indexOf(" "+t+" ")!=-1}},pseudos:{"first-child":function(e){var t=[],n=-1,r;for(var i=0,s;s=r=e[i];i++){while((r=r.previousSibling)&&r.nodeType!=1);if(!r){t[++n]=s}}return t},"last-child":function(e){var t=[],n=-1,r;for(var i=0,s;s=r=e[i];i++){while((r=r.nextSibling)&&r.nodeType!=1);if(!r){t[++n]=s}}return t},"nth-child":function(e,t){var n=[],r=-1,i=nthRe.exec(t=="even"&&"2n"||t=="odd"&&"2n+1"||!nthRe2.test(t)&&"n+"+t||t),s=(i[1]||1)-0,o=i[2]-0;for(var u=0,a;a=e[u];u++){var f=a.parentNode;if(batch!=f._batch){var l=0;for(var c=f.firstChild;c;c=c.nextSibling){if(c.nodeType==1){c.nodeIndex=++l}}f._batch=batch}if(s==1){if(o==0||a.nodeIndex==o){n[++r]=a}}else if((a.nodeIndex+o)%s==0){n[++r]=a}}return n},"only-child":function(e){var t=[],n=-1;for(var r=0,i;i=e[r];r++){if(!prev(i)&&!next(i)){t[++n]=i}}return t},empty:function(e){var t=[],n=-1;for(var r=0,i;i=e[r];r++){var s=i.childNodes,o=0,u,a=true;while(u=s[o]){++o;if(u.nodeType==1||u.nodeType==3){a=false;break}}if(a){t[++n]=i}}return t},contains:function(e,t){var n=[],r=-1;for(var i=0,s;s=e[i];i++){if((s.textContent||s.innerText||"").indexOf(t)!=-1){n[++r]=s}}return n},nodeValue:function(e,t){var n=[],r=-1;for(var i=0,s;s=e[i];i++){if(s.firstChild&&s.firstChild.nodeValue==t){n[++r]=s}}return n},checked:function(e){var t=[],n=-1;for(var r=0,i;i=e[r];r++){if(i.checked==true){t[++n]=i}}return t},not:function(e,t){return Ext.DomQuery.filter(e,t,true)},any:function(e,t){var n=t.split("|"),r=[],i=-1,s;for(var o=0,u;u=e[o];o++){for(var a=0;s=n[a];a++){if(Ext.DomQuery.is(u,s)){r[++i]=u;break}}}return r},odd:function(e){return this["nth-child"](e,"odd")},even:function(e){return this["nth-child"](e,"even")},nth:function(e,t){return e[t-1]||[]},first:function(e){return e[0]||[]},last:function(e){return e[e.length-1]||[]},has:function(e,t){var n=Ext.DomQuery.select,r=[],i=-1;for(var s=0,o;o=e[s];s++){if(n(t,o).length>0){r[++i]=o}}return r},next:function(e,t){var n=Ext.DomQuery.is,r=[],i=-1;for(var s=0,o;o=e[s];s++){var u=next(o);if(u&&n(u,t)){r[++i]=o}}return r},prev:function(e,t){var n=Ext.DomQuery.is,r=[],i=-1;for(var s=0,o;o=e[s];s++){var u=prev(o);if(u&&n(u,t)){r[++i]=o}}return r}}}}();Ext.query=Ext.DomQuery.select;Ext.util.DelayedTask=function(e,t,n){var r=this,i,s=function(){clearInterval(i);i=null;e.apply(t,n||[])};r.delay=function(o,u,a,f){r.cancel();e=u||e;t=a||t;n=f||n;i=setInterval(s,o)};r.cancel=function(){if(i){clearInterval(i);i=null}}};(function(){function u(){if(!Ext.enableGarbageCollector){clearInterval(n.collectorThreadId)}else{var t,i,s,o;for(t in r){o=r[t];if(o.skipGC){Ext.EventManager.removeFromSpecialCache(o.el);continue}i=o.el;s=i.dom;if(!s||!s.parentNode||!s.offsetParent&&!e.getElementById(t)){if(Ext.enableListenerCollection){Ext.EventManager.removeAll(s)}delete r[t]}}if(Ext.isIE){var u={};for(t in r){u[t]=r[t]}r=Ext.elCache=u}}}var e=document;Ext.Element=function(t,n){var r=typeof t=="string"?e.getElementById(t):t,i;if(!r)return null;i=r.id;if(!n&&i&&Ext.elCache[i]){return Ext.elCache[i].el}this.dom=r;this.id=i||Ext.id(r)};var t=Ext.DomHelper,n=Ext.Element,r=Ext.elCache;n.prototype={set:function(e,n){var r=this.dom,i,s,n=n!==false&&!!r.setAttribute;for(i in e){if(e.hasOwnProperty(i)){s=e[i];if(i=="style"){t.applyStyles(r,s)}else if(i=="cls"){r.className=s}else if(n){r.setAttribute(i,s)}else{r[i]=s}}}return this},defaultUnit:"px",is:function(e){return Ext.DomQuery.is(this.dom,e)},focus:function(e,t){var n=this,t=t||n.dom;try{if(Number(e)){n.focus.defer(e,null,[null,t])}else{t.focus()}}catch(r){}return n},blur:function(){try{this.dom.blur()}catch(e){}return this},getValue:function(e){var t=this.dom.value;return e?parseInt(t,10):t},addListener:function(e,t,n,r){Ext.EventManager.on(this.dom,e,t,n||this,r);return this},removeListener:function(e,t,n){Ext.EventManager.removeListener(this.dom,e,t,n||this);return this},removeAllListeners:function(){Ext.EventManager.removeAll(this.dom);return this},purgeAllListeners:function(){Ext.EventManager.purgeElement(this,true);return this},addUnits:function(e){if(e===""||e=="auto"||e===undefined){e=e||""}else if(!isNaN(e)||!s.test(e)){e=e+(this.defaultUnit||"px")}return e},load:function(e,t,n){Ext.Ajax.request(Ext.apply({params:t,url:e.url||e,callback:n,el:this.dom,indicatorText:e.indicatorText||""},Ext.isObject(e)?e:{}));return this},isBorderBox:function(){return Ext.isBorderBox||Ext.isForcedBorderBox||f[(this.dom.tagName||"").toLowerCase()]},remove:function(){var e=this,t=e.dom;if(t){delete e.dom;Ext.removeNode(t)}},hover:function(e,t,n,r){var i=this;i.on("mouseenter",e,n||i.dom,r);i.on("mouseleave",t,n||i.dom,r);return i},contains:function(e){return!e?false:Ext.lib.Dom.isAncestor(this.dom,e.dom?e.dom:e)},getAttributeNS:function(e,t){return this.getAttribute(t,e)},getAttribute:function(){var e=document.createElement("table"),t=false,n="getAttribute"in e,r=/undefined|unknown/;if(n){try{e.getAttribute("ext:qtip")}catch(i){t=true}return function(e,n){var r=this.dom,i;if(r.getAttributeNS){i=r.getAttributeNS(n,e)||null}if(i==null){if(n){if(t&&r.tagName.toUpperCase()=="TABLE"){try{i=r.getAttribute(n+":"+e)}catch(s){i=""}}else{i=r.getAttribute(n+":"+e)}}else{i=r.getAttribute(e)||r[e]}}return i||""}}else{return function(e,t){var n=this.om,i,s;if(t){s=n[t+":"+e];i=r.test(typeof s)?undefined:s}else{i=n[e]}return i||""}}e=null}(),update:function(e){if(this.dom){this.dom.innerHTML=e}return this}};var i=n.prototype;n.addMethods=function(e){Ext.apply(i,e)};i.on=i.addListener;i.un=i.removeListener;i.autoBoxAdjust=true;var s=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,o;n.get=function(t){var i,s,u;if(!t){return null}if(typeof t=="string"){if(!(s=e.getElementById(t))){return null}if(r[t]&&r[t].el){i=r[t].el;i.dom=s}else{i=n.addToCache(new n(s))}return i}else if(t.tagName){if(!(u=t.id)){u=Ext.id(t)}if(r[u]&&r[u].el){i=r[u].el;i.dom=t}else{i=n.addToCache(new n(t))}return i}else if(t instanceof n){if(t!=o){if(Ext.isIE&&(t.id==undefined||t.id=="")){t.dom=t.dom}else{t.dom=e.getElementById(t.id)||t.dom}}return t}else if(t.isComposite){return t}else if(Ext.isArray(t)){return n.select(t)}else if(t==e){if(!o){var a=function(){};a.prototype=n.prototype;o=new a;o.dom=e}return o}return null};n.addToCache=function(e,t){t=t||e.id;r[t]={el:e,data:{},events:{}};return e};n.data=function(e,t,i){e=n.get(e);if(!e){return null}var s=r[e.id].data;if(arguments.length==2){return s[t]}else{return s[t]=i}};n.collectorThreadId=setInterval(u,3e4);var a=function(){};a.prototype=n.prototype;n.Flyweight=function(e){this.dom=e};n.Flyweight.prototype=new a;n.Flyweight.prototype.isFlyweight=true;n._flyweights={};n.fly=function(e,t){var r=null;t=t||"_global";if(e=Ext.getDom(e)){(n._flyweights[t]=n._flyweights[t]||new n.Flyweight).dom=e;r=n._flyweights[t]}return r};Ext.get=n.get;Ext.fly=n.fly;var f=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko){f["button"]=1}})();Ext.Element.addMethods(function(){var e="parentNode",t="nextSibling",n="previousSibling",r=Ext.DomQuery,i=Ext.get;return{findParent:function(e,t,n){var s=this.dom,o=document.body,u=0,a;if(Ext.isGecko&&Object.prototype.toString.call(s)=="[object XULElement]"){return null}t=t||50;if(isNaN(t)){a=Ext.getDom(t);t=Number.MAX_VALUE}while(s&&s.nodeType==1&&u<t&&s!=o&&s!=a){if(r.is(s,e)){return n?i(s):s}u++;s=s.parentNode}return null},findParentNode:function(e,t,n){var r=Ext.fly(this.dom.parentNode,"_internal");return r?r.findParent(e,t,n):null},up:function(e,t){return this.findParentNode(e,t,true)},select:function(e){return Ext.Element.select(e,this.dom)},query:function(e){return r.select(e,this.dom)},child:function(e,t){var n=r.selectNode(e,this.dom);return t?n:i(n)},down:function(e,t){var n=r.selectNode(" > "+e,this.dom);return t?n:i(n)},parent:function(t,n){return this.matchNode(e,e,t,n)},next:function(e,n){return this.matchNode(t,t,e,n)},prev:function(e,t){return this.matchNode(n,n,e,t)},first:function(e,n){return this.matchNode(t,"firstChild",e,n)},last:function(e,t){return this.matchNode(n,"lastChild",e,t)},matchNode:function(e,t,n,s){var o=this.dom[t];while(o){if(o.nodeType==1&&(!n||r.is(o,n))){return!s?i(o):o}o=o[e]}return null}}}());Ext.Element.addMethods(function(){var e=Ext.getDom,t=Ext.get,n=Ext.DomHelper;return{appendChild:function(e){return t(e).appendTo(this)},appendTo:function(t){e(t).appendChild(this.dom);return this},insertBefore:function(t){(t=e(t)).parentNode.insertBefore(this.dom,t);return this},insertAfter:function(t){(t=e(t)).parentNode.insertBefore(this.dom,t.nextSibling);return this},insertFirst:function(n,r){n=n||{};if(n.nodeType||n.dom||typeof n=="string"){n=e(n);this.dom.insertBefore(n,this.dom.firstChild);return!r?t(n):n}else{return this.createChild(n,this.dom.firstChild,r)}},replace:function(e){e=t(e);this.insertBefore(e);e.remove();return this},replaceWith:function(t){var r=this;if(t.nodeType||t.dom||typeof t=="string"){t=e(t);r.dom.parentNode.insertBefore(t,r.dom)}else{t=n.insertBefore(r.dom,t)}delete Ext.elCache[r.id];Ext.removeNode(r.dom);r.id=Ext.id(r.dom=t);Ext.Element.addToCache(r.isFlyweight?new Ext.Element(r.dom):r);return r},createChild:function(e,t,r){e=e||{tag:"div"};return t?n.insertBefore(t,e,r!==true):n[!this.dom.firstChild?"overwrite":"append"](this.dom,e,r!==true)},wrap:function(e,t){var r=n.insertBefore(this.dom,e||{tag:"div"},!t);r.dom?r.dom.appendChild(this.dom):r.appendChild(this.dom);return r},insertHtml:function(e,t,r){var i=n.insertHtml(e,this.dom,t);return r?Ext.get(i):i}}}());Ext.Element.addMethods(function(){function L(e,t){return t.charAt(1).toUpperCase()}function A(r){return t[r]||(t[r]=r=="float"?e.cssFloat?"cssFloat":"styleFloat":r.replace(n,L))}var e=Ext.supports,t={},n=/(-[a-z])/gi,r=document.defaultView,i=/alpha\(opacity=(.*)\)/i,s=/^\s+|\s+$/g,o=Ext.Element,u=/\s+/,a=/\w/g,f="padding",l="margin",c="border",h="-left",p="-right",d="-top",v="-bottom",m="-width",g=Math,y="hidden",b="isClipped",w="overflow",E="overflow-x",S="overflow-y",x="originalClip",T={l:c+h+m,r:c+p+m,t:c+d+m,b:c+v+m},N={l:f+h,r:f+p,t:f+d,b:f+v},C={l:l+h,r:l+p,t:l+d,b:l+v},k=Ext.Element.data;return{adjustWidth:function(e){var t=this;var n=typeof e=="number";if(n&&t.autoBoxAdjust&&!t.isBorderBox()){e-=t.getBorderWidth("lr")+t.getPadding("lr")}return n&&e<0?0:e},adjustHeight:function(e){var t=this;var n=typeof e=="number";if(n&&t.autoBoxAdjust&&!t.isBorderBox()){e-=t.getBorderWidth("tb")+t.getPadding("tb")}return n&&e<0?0:e},addClass:function(e){var t=this,n,r,i,s=[];if(!Ext.isArray(e)){if(typeof e=="string"&&!this.hasClass(e)){t.dom.className+=" "+e}}else{for(n=0,r=e.length;n<r;n++){i=e[n];if(typeof i=="string"&&(" "+t.dom.className+" ").indexOf(" "+i+" ")==-1){s.push(i)}}if(s.length){t.dom.className+=" "+s.join(" ")}}return t},removeClass:function(e){var t=this,n,r,i,o,a;if(!Ext.isArray(e)){e=[e]}if(t.dom&&t.dom.className){a=t.dom.className.replace(s,"").split(u);for(n=0,i=e.length;n<i;n++){o=e[n];if(typeof o=="string"){o=o.replace(s,"");r=a.indexOf(o);if(r!=-1){a.splice(r,1)}}}t.dom.className=a.join(" ")}return t},radioClass:function(e){var t=this.dom.parentNode.childNodes,n,r,i;e=Ext.isArray(e)?e:[e];for(r=0,i=t.length;r<i;r++){n=t[r];if(n&&n.nodeType==1){Ext.fly(n,"_internal").removeClass(e)}}return this.addClass(e)},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},hasClass:function(e){return e&&(" "+this.dom.className+" ").indexOf(" "+e+" ")!=-1},replaceClass:function(e,t){return this.removeClass(e).addClass(t)},isStyle:function(e,t){return this.getStyle(e)==t},getStyle:function(){return r&&r.getComputedStyle?function(t){var n=this.dom,i,s,o,u;if(n==document){return null}t=A(t);o=(i=n.style[t])?i:(s=r.getComputedStyle(n,""))?s[t]:null;if(t=="marginRight"&&o!="0px"&&!e.correctRightMargin){u=n.style.display;n.style.display="inline-block";o=r.getComputedStyle(n,"").marginRight;n.style.display=u}if(t=="backgroundColor"&&o=="rgba(0, 0, 0, 0)"&&!e.correctTransparentColor){o="transparent"}return o}:function(e){var t=this.dom,n,r;if(t==document)return null;if(e=="opacity"){if(t.style.filter.match){if(n=t.style.filter.match(i)){var s=parseFloat(n[1]);if(!isNaN(s)){return s?s/100:0}}}return 1}e=A(e);return t.style[e]||((r=t.currentStyle)?r[e]:null)}}(),getColor:function(e,t,n){var r=this.getStyle(e),i=typeof n!="undefined"?n:"#",s;if(!r||/transparent|inherit/.test(r)){return t}if(/^r/.test(r)){Ext.each(r.slice(4,r.length-1).split(","),function(e){s=parseInt(e,10);i+=(s<16?"0":"")+s.toString(16)})}else{r=r.replace("#","");i+=r.length==3?r.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):r}return i.length>5?i.toLowerCase():t},setStyle:function(e,t){var n,r;if(typeof e!="object"){n={};n[e]=t;e=n}for(r in e){t=e[r];r=="opacity"?this.setOpacity(t):this.dom.style[A(r)]=t}return this},setOpacity:function(e,t){var n=this,r=n.dom.style;if(!t||!n.anim){if(Ext.isIE9m){var o=e<1?"alpha(opacity="+e*100+")":"",u=r.filter.replace(i,"").replace(s,"");r.zoom=1;r.filter=u+(u.length>0?" ":"")+o}else{r.opacity=e}}else{n.anim({opacity:{to:e}},n.preanim(arguments,1),null,.35,"easeIn")}return n},clearOpacity:function(){var e=this.dom.style;if(Ext.isIE9m){if(!Ext.isEmpty(e.filter)){e.filter=e.filter.replace(i,"").replace(s,"")}}else{e.opacity=e["-moz-opacity"]=e["-khtml-opacity"]=""}return this},getHeight:function(e){var t=this,n=t.dom,r=Ext.isIE9m&&t.isStyle("display","none"),i=g.max(n.offsetHeight,r?0:n.clientHeight)||0;i=!e?i:i-t.getBorderWidth("tb")-t.getPadding("tb");return i<0?0:i},getWidth:function(e){var t=this,n=t.dom,r=Ext.isIE9m&&t.isStyle("display","none"),i=g.max(n.offsetWidth,r?0:n.clientWidth)||0;i=!e?i:i-t.getBorderWidth("lr")-t.getPadding("lr");return i<0?0:i},setWidth:function(e,t){var n=this;e=n.adjustWidth(e);!t||!n.anim?n.dom.style.width=n.addUnits(e):n.anim({width:{to:e}},n.preanim(arguments,1));return n},setHeight:function(e,t){var n=this;e=n.adjustHeight(e);!t||!n.anim?n.dom.style.height=n.addUnits(e):n.anim({height:{to:e}},n.preanim(arguments,1));return n},getBorderWidth:function(e){return this.addStyles(e,T)},getPadding:function(e){return this.addStyles(e,N)},clip:function(){var e=this,t=e.dom;if(!k(t,b)){k(t,b,true);k(t,x,{o:e.getStyle(w),x:e.getStyle(E),y:e.getStyle(S)});e.setStyle(w,y);e.setStyle(E,y);e.setStyle(S,y)}return e},unclip:function(){var e=this,t=e.dom;if(k(t,b)){k(t,b,false);var n=k(t,x);if(n.o){e.setStyle(w,n.o)}if(n.x){e.setStyle(E,n.x)}if(n.y){e.setStyle(S,n.y)}}return e},addStyles:function(e,t){var n=0,r=e.match(a),i,s,o,u=r.length;for(o=0;o<u;o++){i=r[o];s=i&&parseInt(this.getStyle(t[i]),10);if(s){n+=g.abs(s)}}return n},margins:C}}());(function(){var e=Ext.lib.Dom,t="left",n="right",r="top",i="bottom",s="position",o="static",u="relative",a="auto",f="z-index";Ext.Element.addMethods({getX:function(){return e.getX(this.dom)},getY:function(){return e.getY(this.dom)},getXY:function(){return e.getXY(this.dom)},getOffsetsTo:function(e){var t=this.getXY(),n=Ext.fly(e,"_internal").getXY();return[t[0]-n[0],t[1]-n[1]]},setX:function(e,t){return this.setXY([e,this.getY()],this.animTest(arguments,t,1))},setY:function(e,t){return this.setXY([this.getX(),e],this.animTest(arguments,t,1))},setLeft:function(e){this.setStyle(t,this.addUnits(e));return this},setTop:function(e){this.setStyle(r,this.addUnits(e));return this},setRight:function(e){this.setStyle(n,this.addUnits(e));return this},setBottom:function(e){this.setStyle(i,this.addUnits(e));return this},setXY:function(t,n){var r=this;if(!n||!r.anim){e.setXY(r.dom,t)}else{r.anim({points:{to:t}},r.preanim(arguments,1),"motion")}return r},setLocation:function(e,t,n){return this.setXY([e,t],this.animTest(arguments,n,2))},moveTo:function(e,t,n){return this.setXY([e,t],this.animTest(arguments,n,2))},getLeft:function(e){return!e?this.getX():parseInt(this.getStyle(t),10)||0},getRight:function(e){var t=this;return!e?t.getX()+t.getWidth():t.getLeft(true)+t.getWidth()||0},getTop:function(e){return!e?this.getY():parseInt(this.getStyle(r),10)||0},getBottom:function(e){var t=this;return!e?t.getY()+t.getHeight():t.getTop(true)+t.getHeight()||0},position:function(e,t,n,r){var i=this;if(!e&&i.isStyle(s,o)){i.setStyle(s,u)}else if(e){i.setStyle(s,e)}if(t){i.setStyle(f,t)}if(n||r)i.setXY([n||false,r||false])},clearPositioning:function(e){e=e||"";this.setStyle({left:e,right:e,top:e,bottom:e,"z-index":"",position:o});return this},getPositioning:function(){var e=this.getStyle(t);var o=this.getStyle(r);return{position:this.getStyle(s),left:e,right:e?"":this.getStyle(n),top:o,bottom:o?"":this.getStyle(i),"z-index":this.getStyle(f)}},setPositioning:function(e){var t=this,n=t.dom.style;t.setStyle(e);if(e.right==a){n.right=""}if(e.bottom==a){n.bottom=""}return t},translatePoints:function(e,n){n=isNaN(e[1])?n:e[1];e=isNaN(e[0])?e:e[0];var i=this,o=i.isStyle(s,u),a=i.getXY(),f=parseInt(i.getStyle(t),10),l=parseInt(i.getStyle(r),10);f=!isNaN(f)?f:o?0:i.dom.offsetLeft;l=!isNaN(l)?l:o?0:i.dom.offsetTop;return{left:e-a[0]+f,top:n-a[1]+l}},animTest:function(e,t,n){return!!t&&this.preanim?this.preanim(e,n):false}})})();Ext.Element.addMethods({isScrollable:function(){var e=this.dom;return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},scrollTo:function(e,t){this.dom["scroll"+(/top/i.test(e)?"Top":"Left")]=t;return this},getScroll:function(){var e=this.dom,t=document,n=t.body,r=t.documentElement,i,s,o;if(e==t||e==n){if(Ext.isIE&&Ext.isStrict){i=r.scrollLeft;s=r.scrollTop}else{i=window.pageXOffset;s=window.pageYOffset}o={left:i||(n?n.scrollLeft:0),top:s||(n?n.scrollTop:0)}}else{o={left:e.scrollLeft,top:e.scrollTop}}return o}});Ext.Element.VISIBILITY=1;Ext.Element.DISPLAY=2;Ext.Element.OFFSETS=3;Ext.Element.ASCLASS=4;Ext.Element.visibilityCls="x-hide-nosize";Ext.Element.addMethods(function(){var e=Ext.Element,t="opacity",n="visibility",r="display",i="hidden",s="offsets",o="asclass",u="none",a="nosize",f="originalDisplay",l="visibilityMode",c="isVisible",h=e.data,p=function(e){var t=h(e,f);if(t===undefined){h(e,f,t="")}return t},d=function(e){var t=h(e,l);if(t===undefined){h(e,l,t=1)}return t};return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(e){h(this.dom,l,e);return this},animate:function(e,t,n,r,i){this.anim(e,{duration:t,callback:n,easing:r},i);return this},anim:function(e,t,n,r,i,s){n=n||"run";t=t||{};var o=this,u=Ext.lib.Anim[n](o.dom,e,t.duration||r||.35,t.easing||i||"easeOut",function(){if(s)s.call(o);if(t.callback)t.callback.call(t.scope||o,o,t)},o);t.anim=u;return u},preanim:function(e,t){return!e[t]?false:typeof e[t]=="object"?e[t]:{duration:e[t+1],callback:e[t+2],easing:e[t+3]}},isVisible:function(){var t=this,s=t.dom,o=h(s,c);if(typeof o=="boolean"){return o}o=!t.isStyle(n,i)&&!t.isStyle(r,u)&&!(d(s)==e.ASCLASS&&t.hasClass(t.visibilityCls||e.visibilityCls));h(s,c,o);return o},setVisible:function(t,u){var f=this,l,p,v,m,g=f.dom,y=d(g);if(typeof u=="string"){switch(u){case r:y=e.DISPLAY;break;case n:y=e.VISIBILITY;break;case s:y=e.OFFSETS;break;case a:case o:y=e.ASCLASS;break}f.setVisibilityMode(y);u=false}if(!u||!f.anim){if(y==e.ASCLASS){f[t?"removeClass":"addClass"](f.visibilityCls||e.visibilityCls)}else if(y==e.DISPLAY){return f.setDisplayed(t)}else if(y==e.OFFSETS){if(!t){f.hideModeStyles={position:f.getStyle("position"),top:f.getStyle("top"),left:f.getStyle("left")};f.applyStyles({position:"absolute",top:"-10000px",left:"-10000px"})}else{f.applyStyles(f.hideModeStyles||{position:"",top:"",left:""});delete f.hideModeStyles}}else{f.fixDisplay();g.style.visibility=t?"visible":i}}else{if(t){f.setOpacity(.01);f.setVisible(true)}f.anim({opacity:{to:t?1:0}},f.preanim(arguments,1),null,.35,"easeIn",function(){t||f.setVisible(false).setOpacity(1)})}h(g,c,t);return f},hasMetrics:function(){var t=this.dom;return this.isVisible()||d(t)==e.VISIBILITY},toggle:function(e){var t=this;t.setVisible(!t.isVisible(),t.preanim(arguments,0));return t},setDisplayed:function(e){if(typeof e=="boolean"){e=e?p(this.dom):u}this.setStyle(r,e);return this},fixDisplay:function(){var e=this;if(e.isStyle(r,u)){e.setStyle(n,i);e.setStyle(r,p(this.dom));if(e.isStyle(r,u)){e.setStyle(r,"block")}}},hide:function(e){if(typeof e=="string"){this.setVisible(false,e);return this}this.setVisible(false,this.preanim(arguments,0));return this},show:function(e){if(typeof e=="string"){this.setVisible(true,e);return this}this.setVisible(true,this.preanim(arguments,0));return this}}}());(function(){var e=null,t=undefined,n=true,r=false,i="setX",s="setY",o="setXY",u="left",a="bottom",f="top",l="right",c="height",h="width",p="points",d="hidden",v="absolute",m="visible",g="motion",y="position",b="easeOut",w=new Ext.Element.Flyweight,E={},S=function(e){return e||{}},x=function(e){w.dom=e;w.id=Ext.id(e);return w},T=function(e){if(!E[e]){E[e]=[]}return E[e]},N=function(e,t){E[e]=t};Ext.enableFx=n;Ext.Fx={switchStatements:function(e,t,n){return t.apply(this,n[e])},slideIn:function(t,n){n=S(n);var r=this,c=r.dom,h=c.style,p,y,w,E,T,h,N,C,k,L;t=t||"t";r.queueFx(n,function(){function r(){x(c).fxUnwrap(E,y.pos,n);h.width=y.width;h.height=y.height;x(c).afterFx(n)}function S(e,t,n,r,i,s,o,u,a,f,l){var c={};x(e).setWidth(n).setHeight(r);if(x(e)[i]){x(e)[i](s)}t[o]=t[u]="0";if(a){c.width=a}if(f){c.height=f}if(l){c.points=l}return c}p=x(c).getXY();x(c).fixDisplay();y=x(c).getFxRestore();w={x:p[0],y:p[1],0:p[0],1:p[1],width:c.offsetWidth,height:c.offsetHeight};w.right=w.x+w.width;w.bottom=w.y+w.height;x(c).setWidth(w.width).setHeight(w.height);E=x(c).fxWrap(y.pos,n,d);h.visibility=m;h.position=v;C={to:[w.x,w.y]};k={to:w.width};L={to:w.height};N=x(c).switchStatements(t.toLowerCase(),S,{t:[E,h,w.width,0,e,e,u,a,e,L,e],l:[E,h,0,w.height,e,e,l,f,k,e,e],r:[E,h,w.width,w.height,i,w.right,u,f,e,e,C],b:[E,h,w.width,w.height,s,w.bottom,u,f,e,L,C],tl:[E,h,0,0,e,e,l,a,k,L,C],bl:[E,h,0,0,s,w.y+w.height,l,f,k,L,C],br:[E,h,0,0,o,[w.right,w.bottom],u,f,k,L,C],tr:[E,h,0,0,i,w.x+w.width,u,a,k,L,C]});h.visibility=m;x(E).show();arguments.callee.anim=x(E).fxanim(N,n,g,.5,b,r)});return r},slideOut:function(e,t){t=S(t);var n=this,i=n.dom,s=i.style,o=n.getXY(),d,y,w,E,T={to:0};e=e||"t";n.queueFx(t,function(){function n(){t.useDisplay?x(i).setDisplayed(r):x(i).hide();x(i).fxUnwrap(d,y.pos,t);s.width=y.width;s.height=y.height;x(i).afterFx(t)}function S(e,t,n,r,i,s,o,u,a){var f={};e[t]=e[n]="0";f[r]=i;if(s){f[s]=o}if(u){f[u]=a}return f}y=x(i).getFxRestore();w={x:o[0],y:o[1],0:o[0],1:o[1],width:i.offsetWidth,height:i.offsetHeight};w.right=w.x+w.width;w.bottom=w.y+w.height;x(i).setWidth(w.width).setHeight(w.height);d=x(i).fxWrap(y.pos,t,m);s.visibility=m;s.position=v;x(d).setWidth(w.width).setHeight(w.height);E=x(i).switchStatements(e.toLowerCase(),S,{t:[s,u,a,c,T],l:[s,l,f,h,T],r:[s,u,f,h,T,p,{to:[w.right,w.y]}],b:[s,u,f,c,T,p,{to:[w.x,w.bottom]}],tl:[s,l,a,h,T,c,T],bl:[s,l,f,h,T,c,T,p,{to:[w.x,w.bottom]}],br:[s,u,f,h,T,c,T,p,{to:[w.x+w.width,w.bottom]}],tr:[s,u,a,h,T,c,T,p,{to:[w.right,w.y]}]});arguments.callee.anim=x(d).fxanim(E,t,g,.5,b,n)});return n},puff:function(e){e=S(e);var t=this,n=t.dom,i=n.style,s,o,u;t.queueFx(e,function(){function t(){e.useDisplay?x(n).setDisplayed(r):x(n).hide();x(n).clearOpacity();x(n).setPositioning(u.pos);i.width=u.width;i.height=u.height;i.fontSize="";x(n).afterFx(e)}s=x(n).getWidth();o=x(n).getHeight();x(n).clearOpacity();x(n).show();u=x(n).getFxRestore();arguments.callee.anim=x(n).fxanim({width:{to:x(n).adjustWidth(s*2)},height:{to:x(n).adjustHeight(o*2)},points:{by:[-s*.5,-o*.5]},opacity:{to:0},fontSize:{to:200,unit:"%"}},e,g,.5,b,t)});return t},switchOff:function(t){t=S(t);var n=this,i=n.dom,s=i.style,o;n.queueFx(t,function(){function n(){t.useDisplay?x(i).setDisplayed(r):x(i).hide();x(i).clearOpacity();x(i).setPositioning(o.pos);s.width=o.width;s.height=o.height;x(i).afterFx(t)}x(i).clearOpacity();x(i).clip();o=x(i).getFxRestore();x(i).fxanim({opacity:{to:.3}},e,e,.1,e,function(){x(i).clearOpacity();(function(){x(i).fxanim({height:{to:1},points:{by:[0,x(i).getHeight()*.5]}},t,g,.3,"easeIn",n)}).defer(100)})});return n},highlight:function(e,t){t=S(t);var n=this,r=n.dom,i=t.attr||"backgroundColor",s={},o;n.queueFx(t,function(){function n(){r.style[i]=o;x(r).afterFx(t)}x(r).clearOpacity();x(r).show();o=r.style[i];s[i]={from:e||"ffff9c",to:t.endColor||x(r).getColor(i)||"ffffff"};arguments.callee.anim=x(r).fxanim(s,t,"color",1,"easeIn",n)});return n},frame:function(e,t,n){n=S(n);var r=this,i=r.dom,s,o;r.queueFx(n,function(){function f(){var e=Ext.isBorderBox?2:1;o=s.anim({top:{from:u.y,to:u.y-20},left:{from:u.x,to:u.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:u.height,to:u.height+20*e},width:{from:u.width,to:u.width+20*e}},{duration:n.duration||1,callback:function(){s.remove();--t>0?a():x(i).afterFx(n)}});arguments.callee.anim={isAnimated:true,stop:function(){o.stop()}}}e=e||"#C3DAF9";if(e.length==6){e="#"+e}t=t||1;x(i).show();var r=x(i).getXY(),u={x:r[0],y:r[1],0:r[0],1:r[1],width:i.offsetWidth,height:i.offsetHeight},a=function(){s=x(document.body||document.documentElement).createChild({style:{position:v,"z-index":35e3,border:"0px solid "+e}});return s.queueFx({},f)};arguments.callee.anim={isAnimated:true,stop:function(){t=0;s.stopFx()}};a()});return r},pause:function(e){var t=this.dom,n;this.queueFx({},function(){n=setTimeout(function(){x(t).afterFx({})},e*1e3);arguments.callee.anim={isAnimated:true,stop:function(){clearTimeout(n);x(t).afterFx({})}}});return this},fadeIn:function(t){t=S(t);var n=this,r=n.dom,i=t.endOpacity||1;n.queueFx(t,function(){x(r).setOpacity(0);x(r).fixDisplay();r.style.visibility=m;arguments.callee.anim=x(r).fxanim({opacity:{to:i}},t,e,.5,b,function(){if(i==1){x(r).clearOpacity()}x(r).afterFx(t)})});return n},fadeOut:function(t){t=S(t);var n=this,r=n.dom,i=r.style,s=t.endOpacity||0;n.queueFx(t,function(){arguments.callee.anim=x(r).fxanim({opacity:{to:s}},t,e,.5,b,function(){if(s==0){Ext.Element.data(r,"visibilityMode")==Ext.Element.DISPLAY||t.useDisplay?i.display="none":i.visibility=d;x(r).clearOpacity()}x(r).afterFx(t)})});return n},scale:function(e,t,n){this.shift(Ext.apply({},n,{width:e,height:t}));return this},shift:function(e){e=S(e);var n=this.dom,r={};this.queueFx(e,function(){for(var i in e){if(e[i]!=t){r[i]={to:e[i]}}}r.width?r.width.to=x(n).adjustWidth(e.width):r;r.height?r.height.to=x(n).adjustWidth(e.height):r;if(r.x||r.y||r.xy){r.points=r.xy||{to:[r.x?r.x.to:x(n).getX(),r.y?r.y.to:x(n).getY()]}}arguments.callee.anim=x(n).fxanim(r,e,g,.35,b,function(){x(n).afterFx(e)})});return this},ghost:function(e,t){t=S(t);var n=this,i=n.dom,s=i.style,o={opacity:{to:0},points:{}},u=o.points,a,f,l;e=e||"b";n.queueFx(t,function(){function n(){t.useDisplay?x(i).setDisplayed(r):x(i).hide();x(i).clearOpacity();x(i).setPositioning(a.pos);s.width=a.width;s.height=a.height;x(i).afterFx(t)}a=x(i).getFxRestore();f=x(i).getWidth();l=x(i).getHeight();u.by=x(i).switchStatements(e.toLowerCase(),function(e,t){return[e,t]},{t:[0,-l],l:[-f,0],r:[f,0],b:[0,l],tl:[-f,-l],bl:[-f,l],br:[f,l],tr:[f,-l]});arguments.callee.anim=x(i).fxanim(o,t,g,.5,b,n)});return n},syncFx:function(){var e=this;e.fxDefaults=Ext.apply(e.fxDefaults||{},{block:r,concurrent:n,stopFx:r});return e},sequenceFx:function(){var e=this;e.fxDefaults=Ext.apply(e.fxDefaults||{},{block:r,concurrent:r,stopFx:r});return e},nextFx:function(){var e=T(this.dom.id)[0];if(e){e.call(this)}},hasActiveFx:function(){return T(this.dom.id)[0]},stopFx:function(e){var t=this,r=t.dom.id;if(t.hasActiveFx()){var i=T(r)[0];if(i&&i.anim){if(i.anim.isAnimated){N(r,[i]);i.anim.stop(e!==undefined?e:n)}else{N(r,[])}}}return t},beforeFx:function(e){if(this.hasActiveFx()&&!e.concurrent){if(e.stopFx){this.stopFx();return n}return r}return n},hasFxBlock:function(){var e=T(this.dom.id);return e&&e[0]&&e[0].block},queueFx:function(e,t){var n=x(this.dom);if(!n.hasFxBlock()){Ext.applyIf(e,n.fxDefaults);if(!e.concurrent){var r=n.beforeFx(e);t.block=e.block;T(n.dom.id).push(t);if(r){n.nextFx()}}else{t.call(n)}}return n},fxWrap:function(e,t,n){var r=this.dom,i,s;if(!t.wrap||!(i=Ext.getDom(t.wrap))){if(t.fixPosition){s=x(r).getXY()}var o=document.createElement("div");o.style.visibility=n;i=r.parentNode.insertBefore(o,r);x(i).setPositioning(e);if(x(i).isStyle(y,"static")){x(i).position("relative")}x(r).clearPositioning("auto");x(i).clip();i.appendChild(r);if(s){x(i).setXY(s)}}return i},fxUnwrap:function(e,t,n){var r=this.dom;x(r).clearPositioning();x(r).setPositioning(t);if(!n.wrap){var i=x(e).dom.parentNode;i.insertBefore(r,e);x(e).remove()}},getFxRestore:function(){var e=this.dom.style;return{pos:this.getPositioning(),width:e.width,height:e.height}},afterFx:function(e){var t=this.dom,r=t.id;if(e.afterStyle){x(t).setStyle(e.afterStyle)}if(e.afterCls){x(t).addClass(e.afterCls)}if(e.remove==n){x(t).remove()}if(e.callback){e.callback.call(e.scope,x(t))}if(!e.concurrent){T(r).shift();x(t).nextFx()}},fxanim:function(e,t,n,r,i,s){n=n||"run";t=t||{};var o=Ext.lib.Anim[n](this.dom,e,t.duration||r||.35,t.easing||i||b,s,this);t.anim=o;return o}};Ext.Fx.resize=Ext.Fx.scale;Ext.Element.addMethods(Ext.Fx)})();Ext.CompositeElementLite=function(e,t){this.elements=[];this.add(e,t);this.el=new Ext.Element.Flyweight};Ext.CompositeElementLite.prototype={isComposite:true,getElement:function(e){var t=this.el;t.dom=e;t.id=e.id;return t},transformElement:function(e){return Ext.getDom(e)},getCount:function(){return this.elements.length},add:function(e,t){var n=this,r=n.elements;if(!e){return this}if(typeof e=="string"){e=Ext.Element.selectorFunction(e,t)}else if(e.isComposite){e=e.elements}else if(!Ext.isIterable(e)){e=[e]}for(var i=0,s=e.length;i<s;++i){r.push(n.transformElement(e[i]))}return n},invoke:function(e,t){var n=this,r=n.elements,i=r.length,s,o;for(o=0;o<i;o++){s=r[o];if(s){Ext.Element.prototype[e].apply(n.getElement(s),t)}}return n},item:function(e){var t=this,n=t.elements[e],r=null;if(n){r=t.getElement(n)}return r},addListener:function(e,t,n,r){var i=this.elements,s=i.length,o,u;for(o=0;o<s;o++){u=i[o];if(u){Ext.EventManager.on(u,e,t,n||u,r)}}return this},each:function(e,t){var n=this,r=n.elements,i=r.length,s,o;for(s=0;s<i;s++){o=r[s];if(o){o=this.getElement(o);if(e.call(t||o,o,n,s)===false){break}}}return n},fill:function(e){var t=this;t.elements=[];t.add(e);return t},filter:function(e){var t=[],n=this,r=Ext.isFunction(e)?e:function(t){return t.is(e)};n.each(function(e,i,s){if(r(e,s)!==false){t[t.length]=n.transformElement(e)}});n.elements=t;return n},indexOf:function(e){return this.elements.indexOf(this.transformElement(e))},replaceElement:function(e,t,n){var r=!isNaN(e)?e:this.indexOf(e),i;if(r>-1){t=Ext.getDom(t);if(n){i=this.elements[r];i.parentNode.insertBefore(t,i);Ext.removeNode(i)}this.elements.splice(r,1,t)}return this},clear:function(){this.elements=[]}};Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;Ext.CompositeElementLite.importElementMethods=function(){var e,t=Ext.Element.prototype,n=Ext.CompositeElementLite.prototype;for(e in t){if(typeof t[e]=="function"){(function(e){n[e]=n[e]||function(){return this.invoke(e,arguments)}}).call(n,e)}}};Ext.CompositeElementLite.importElementMethods();if(Ext.DomQuery){Ext.Element.selectorFunction=Ext.DomQuery.select}Ext.Element.select=function(e,t){var n;if(typeof e=="string"){n=Ext.Element.selectorFunction(e,t)}else if(e.length!==undefined){n=e}else{throw"Invalid selector"}return new Ext.CompositeElementLite(n)};Ext.select=Ext.Element.select;(function(){var e="beforerequest",t="requestcomplete",n="requestexception",r=undefined,i="load",s="POST",o="GET",u=window;Ext.data.Connection=function(r){Ext.apply(this,r);this.addEvents(e,t,n);Ext.data.Connection.superclass.constructor.call(this)};Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:3e4,autoAbort:false,disableCaching:true,disableCachingParam:"_dc",request:function(t){var n=this;if(n.fireEvent(e,n,t)){if(t.el){if(!Ext.isEmpty(t.indicatorText)){n.indicatorText='<div class="loading-indicator">'+t.indicatorText+"</div>"}if(n.indicatorText){Ext.getDom(t.el).innerHTML=n.indicatorText}t.success=(Ext.isFunction(t.success)?t.success:function(){}).createInterceptor(function(e){Ext.getDom(t.el).innerHTML=e.responseText})}var i=t.params,a=t.url||n.url,f,l={success:n.handleResponse,failure:n.handleFailure,scope:n,argument:{options:t},timeout:Ext.num(t.timeout,n.timeout)},c,h;if(Ext.isFunction(i)){i=i.call(t.scope||u,t)}i=Ext.urlEncode(n.extraParams,Ext.isObject(i)?Ext.urlEncode(i):i);if(Ext.isFunction(a)){a=a.call(t.scope||u,t)}if(c=Ext.getDom(t.form)){a=a||c.action;if(t.isUpload||/multipart\/form-data/i.test(c.getAttribute("enctype"))){return n.doFormUpload.call(n,t,i,a)}h=Ext.lib.Ajax.serializeForm(c);i=i?i+"&"+h:h}f=t.method||n.method||(i||t.xmlData||t.jsonData?s:o);if(f===o&&n.disableCaching&&t.disableCaching!==false||t.disableCaching===true){var p=t.disableCachingParam||n.disableCachingParam;a=Ext.urlAppend(a,p+"="+(new Date).getTime())}t.headers=Ext.applyIf(t.headers||{},n.defaultHeaders||{});if(t.autoAbort===true||n.autoAbort){n.abort()}if((f==o||t.xmlData||t.jsonData)&&i){a=Ext.urlAppend(a,i);i=""}return n.transId=Ext.lib.Ajax.request(f,a,l,i,t)}else{return t.callback?t.callback.apply(t.scope,[t,r,r]):null}},isLoading:function(e){return e?Ext.lib.Ajax.isCallInProgress(e):!!this.transId},abort:function(e){if(e||this.isLoading()){Ext.lib.Ajax.abort(e||this.transId)}},handleResponse:function(e){this.transId=false;var n=e.argument.options;e.argument=n?n.argument:null;this.fireEvent(t,this,e,n);if(n.success){n.success.call(n.scope,e,n)}if(n.callback){n.callback.call(n.scope,n,true,e)}},handleFailure:function(e,t){this.transId=false;var r=e.argument.options;e.argument=r?r.argument:null;this.fireEvent(n,this,e,r,t);if(r.failure){r.failure.call(r.scope,e,r)}if(r.callback){r.callback.call(r.scope,r,false,e)}},doFormUpload:function(e,n,r){function v(){function c(e,t,n){if(Ext.isFunction(e)){e.apply(t,n)}}var n=this,r={responseText:"",responseXML:null,argument:e.argument},s,a;try{s=f.contentWindow.document||f.contentDocument||u.frames[o].document;if(s){if(s.body){if(/textarea/i.test((a=s.body.firstChild||{}).tagName)){r.responseText=a.value}else{r.responseText=s.body.innerHTML}}r.responseXML=s.XMLDocument||s}}catch(l){}Ext.EventManager.removeListener(f,i,v,n);n.fireEvent(t,n,r,e);c(e.success,e.scope,[r,e]);c(e.callback,e.scope,[e,true,r]);if(!n.debugUploads){setTimeout(function(){Ext.removeNode(f)},100)}}var o=Ext.id(),a=document,f=a.createElement("iframe"),l=Ext.getDom(e.form),c=[],h,p="multipart/form-data",d={target:l.target,method:l.method,encoding:l.encoding,enctype:l.enctype,action:l.action};Ext.fly(f).set({id:o,name:o,cls:"x-hidden",src:Ext.SSL_SECURE_URL});a.body.appendChild(f);if(Ext.isIE){document.frames[o].name=o}Ext.fly(l).set({target:o,method:s,enctype:p,encoding:p,action:r||d.action});Ext.iterate(Ext.urlDecode(n,false),function(e,t){h=a.createElement("input");Ext.fly(h).set({type:"hidden",value:t,name:e});l.appendChild(h);c.push(h)});Ext.EventManager.on(f,i,v,this);l.submit();Ext.fly(l).set(d);Ext.each(c,function(e){Ext.removeNode(e)})}})})();Ext.Ajax=new Ext.data.Connection({autoAbort:false,serializeForm:function(e){return Ext.lib.Ajax.serializeForm(e)}});Ext.util.JSON=new function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var e=null;return function(){if(e===null){e=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"}return e}}(),pad=function(e){return e<10?"0"+e:e},doDecode=function(json){return json?eval("("+json+")"):""},doEncode=function(e){if(!Ext.isDefined(e)||e===null){return"null"}else if(Ext.isArray(e)){return encodeArray(e)}else if(Ext.isDate(e)){return Ext.util.JSON.encodeDate(e)}else if(Ext.isString(e)){return encodeString(e)}else if(typeof e=="number"){return isFinite(e)?String(e):"null"}else if(Ext.isBoolean(e)){return String(e)}else{var t=["{"],n,r,i;for(r in e){if(!e.getElementsByTagName){if(!useHasOwn||e.hasOwnProperty(r)){i=e[r];switch(typeof i){case"undefined":case"function":case"unknown":break;default:if(n){t.push(",")}t.push(doEncode(r),":",i===null?"null":doEncode(i));n=true}}}}t.push("}");return t.join("")}},m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=function(e){if(/["\\\x00-\x1f]/.test(e)){return'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,t){var n=m[t];if(n){return n}n=t.charCodeAt();return"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16)})+'"'}return'"'+e+'"'},encodeArray=function(e){var t=["["],n,r,i=e.length,s;for(r=0;r<i;r+=1){s=e[r];switch(typeof s){case"undefined":case"function":case"unknown":break;default:if(n){t.push(",")}t.push(s===null?"null":Ext.util.JSON.encode(s));n=true}}t.push("]");return t.join("")};this.encodeDate=function(e){return'"'+e.getFullYear()+"-"+pad(e.getMonth()+1)+"-"+pad(e.getDate())+"T"+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds())+'"'};this.encode=function(){var e;return function(t){if(!e){e=isNative()?JSON.stringify:doEncode}return e(t)}}();this.decode=function(){var e;return function(t){if(!e){e=isNative()?JSON.parse:doDecode}return e(t)}}()};Ext.encode=Ext.util.JSON.encode;Ext.decode=Ext.util.JSON.decode;Ext.EventManager=function(){function h(e){var t=false,n=0,r=c.length,i=false,s;if(e){if(e.getElementById||e.navigator){for(;n<r;++n){s=c[n];if(s.el===e){t=s.id;break}}if(!t){t=Ext.id(e);c.push({id:t,el:e});i=true}}else{t=Ext.id(e)}if(!Ext.elCache[t]){Ext.Element.addToCache(new Ext.Element(e),t);if(i){Ext.elCache[t].skipGC=true}}}return t}function p(e,t,n,r,s,a){e=Ext.getDom(e);var f=h(e),l=Ext.elCache[f].events,c;c=i.on(e,t,s);l[t]=l[t]||[];l[t].push([n,s,a,c,r]);if(e.addEventListener&&t=="mousewheel"){var p=["DOMMouseScroll",s,false];e.addEventListener.apply(e,p);Ext.EventManager.addListener(u,"unload",function(){e.removeEventListener.apply(e,p)})}if(e==o&&t=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.addListener(s)}}function d(){if(window!=top){return false}try{o.documentElement.doScroll("left")}catch(e){return false}b();return true}function v(e){if(Ext.isIE9m&&d()){return true}if(o.readyState==f){b();return true}n||(t=setTimeout(arguments.callee,2));return false}function g(e){m||(m=Ext.query("style, link[rel=stylesheet]"));if(m.length==o.styleSheets.length){b();return true}n||(t=setTimeout(arguments.callee,2));return false}function y(e){o.removeEventListener(a,arguments.callee,false);g()}function b(s){if(!n){n=true;if(t){clearTimeout(t)}if(r){o.removeEventListener(a,b,false)}if(Ext.isIE9m&&v.bindIE){o.detachEvent("onreadystatechange",v)}i.un(u,"load",arguments.callee)}if(e&&!Ext.isReady){Ext.isReady=true;e.fire();e.listeners=[]}}function w(){e||(e=new Ext.util.Event);if(r){o.addEventListener(a,b,false)}if(Ext.isIE9m){if(!v()){v.bindIE=true;o.attachEvent("onreadystatechange",v)}}else if(Ext.isOpera){o.readyState==f&&g()||o.addEventListener(a,y,false)}else if(Ext.isWebKit){v()}i.on(u,"load",b)}function E(e,t){return function(){var n=Ext.toArray(arguments);if(t.target==Ext.EventObject.setEvent(n[0]).target){e.apply(this,n)}}}function S(e,t,n){return function(r){n.delay(t.buffer,e,null,[new Ext.EventObjectImpl(r)])}}function x(e,t,n,r,i){return function(s){Ext.EventManager.removeListener(t,n,r,i);e(s)}}function T(e,t,n){return function(r){var i=new Ext.util.DelayedTask(e);if(!n.tasks){n.tasks=[]}n.tasks.push(i);i.delay(t.delay||10,e,null,[new Ext.EventObjectImpl(r)])}}function N(e,t,n,r,i){function a(e){if(!Ext){return}e=Ext.EventObject.setEvent(e);var t;if(s.delegate){if(!(t=e.getTarget(s.delegate,o))){return}}else{t=e.target}if(s.stopEvent){e.stopEvent()}if(s.preventDefault){e.preventDefault()}if(s.stopPropagation){e.stopPropagation()}if(s.normalized===false){e=e.browserEvent}r.call(i||o,e,t,s)}var s=!n||typeof n=="boolean"?{}:n,o=Ext.getDom(e),u;r=r||s.fn;i=i||s.scope;if(!o){throw'Error listening for "'+t+'". Element "'+e+"\" doesn't exist."}if(s.target){a=E(a,s)}if(s.delay){a=T(a,s,r)}if(s.single){a=x(a,o,t,r,i)}if(s.buffer){u=new Ext.util.DelayedTask(a);a=S(a,s,u)}p(o,t,r,u,a,i);return a}var e,t,n=false,r=Ext.isGecko||Ext.isWebKit||Ext.isSafari||Ext.isIE10p,i=Ext.lib.Event,s=Ext.lib.Dom,o=document,u=window,a="DOMContentLoaded",f="complete",l=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,c=[];var m;var C={addListener:function(e,t,n,r,i){if(typeof t=="object"){var s=t,o,u;for(o in s){u=s[o];if(!l.test(o)){if(Ext.isFunction(u)){N(e,o,s,u,s.scope)}else{N(e,o,u)}}}}else{N(e,t,i,n,r)}},removeListener:function(e,t,n,r){e=Ext.getDom(e);var s=h(e),u=e&&Ext.elCache[s].events[t]||[],a,f,l,c,p,d;for(f=0,p=u.length;f<p;f++){if(Ext.isArray(d=u[f])&&d[0]==n&&(!r||d[2]==r)){if(d[4]){d[4].cancel()}c=n.tasks&&n.tasks.length;if(c){while(c--){n.tasks[c].cancel()}delete n.tasks}a=d[1];i.un(e,t,i.extAdapter?d[3]:a);if(a&&e.addEventListener&&t=="mousewheel"){e.removeEventListener("DOMMouseScroll",a,false)}if(a&&e==o&&t=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.removeListener(a)}u.splice(f,1);if(u.length===0){delete Ext.elCache[s].events[t]}for(c in Ext.elCache[s].events){return false}Ext.elCache[s].events={};return false}}},removeAll:function(e){e=Ext.getDom(e);var t=h(e),n=Ext.elCache[t]||{},r=n.events||{},s,u,a,f,l,c,p;for(f in r){if(r.hasOwnProperty(f)){s=r[f];for(u=0,a=s.length;u<a;u++){l=s[u];if(l[4]){l[4].cancel()}if(l[0].tasks&&(c=l[0].tasks.length)){while(c--){l[0].tasks[c].cancel()}delete l.tasks}p=l[1];i.un(e,f,i.extAdapter?l[3]:p);if(e.addEventListener&&p&&f=="mousewheel"){e.removeEventListener("DOMMouseScroll",p,false)}if(p&&e==o&&f=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.removeListener(p)}}}}if(Ext.elCache[t]){Ext.elCache[t].events={}}},getListeners:function(e,t){e=Ext.getDom(e);var n=h(e),r=Ext.elCache[n]||{},i=r.events||{},s=[];if(i&&i[t]){return i[t]}else{return null}},removeFromSpecialCache:function(e){var t=0,n=c.length;for(;t<n;++t){if(c[t].el==e){c.splice(t,1)}}},purgeElement:function(e,t,n){e=Ext.getDom(e);var r=h(e),i=Ext.elCache[r]||{},s=i.events||{},o,u,a;if(n){if(s&&s.hasOwnProperty(n)){u=s[n];for(o=0,a=u.length;o<a;o++){Ext.EventManager.removeListener(e,n,u[o][0])}}}else{Ext.EventManager.removeAll(e)}if(t&&e&&e.childNodes){for(o=0,a=e.childNodes.length;o<a;o++){Ext.EventManager.purgeElement(e.childNodes[o],t,n)}}},_unload:function(){var e;for(e in Ext.elCache){Ext.EventManager.removeAll(e)}delete Ext.elCache;delete Ext.Element._flyweights;var t,n,r,i=Ext.lib.Ajax;typeof i.conn=="object"?n=i.conn:n={};for(r in n){t=n[r];if(t){i.abort({conn:t,tId:r})}}},onDocumentReady:function(t,n,r){if(Ext.isReady){e||(e=new Ext.util.Event);e.addListener(t,n,r);e.fire();e.listeners=[]}else{if(!e){w()}r=r||{};r.delay=r.delay||1;e.addListener(t,n,r)}},fireDocReady:b};C.on=C.addListener;C.un=C.removeListener;C.stoppedMouseDownEvent=new Ext.util.Event;return C}();Ext.onReady=Ext.EventManager.onDocumentReady;(function(){var e=function(){var e=document.body||document.getElementsByTagName("body")[0];if(!e){return false}var t=[];if(Ext.isIE){if(!Ext.isIE10p){t.push("ext-ie")}if(Ext.isIE6){t.push("ext-ie6")}else if(Ext.isIE7){t.push("ext-ie7","ext-ie7m")}else if(Ext.isIE8){t.push("ext-ie8","ext-ie8m")}else if(Ext.isIE9){t.push("ext-ie9","ext-ie9m")}else if(Ext.isIE10){t.push("ext-ie10")}}if(Ext.isGecko){if(Ext.isGecko2){t.push("ext-gecko2")}else{t.push("ext-gecko3")}}if(Ext.isOpera){t.push("ext-opera")}if(Ext.isWebKit){t.push("ext-webkit")}if(Ext.isSafari){t.push("ext-safari "+(Ext.isSafari2?"ext-safari2":Ext.isSafari3?"ext-safari3":"ext-safari4"))}else if(Ext.isChrome){t.push("ext-chrome")}if(Ext.isMac){t.push("ext-mac")}if(Ext.isLinux){t.push("ext-linux")}if(Ext.isStrict||Ext.isBorderBox){var n=e.parentNode;if(n){if(!Ext.isStrict){Ext.fly(n,"_internal").addClass("x-quirks");if(Ext.isIE9m&&!Ext.isStrict){Ext.isIEQuirks=true}}Ext.fly(n,"_internal").addClass(Ext.isStrict&&Ext.isIE||!Ext.enableForcedBoxModel&&!Ext.isIE?" ext-strict":" ext-border-box")}}if(Ext.enableForcedBoxModel&&!Ext.isIE){Ext.isForcedBorderBox=true;t.push("ext-forced-border-box")}Ext.fly(e,"_internal").addClass(t);return true};if(!e()){Ext.onReady(e)}})();(function(){var e=Ext.apply(Ext.supports,{correctRightMargin:true,correctTransparentColor:true,cssFloat:true});var t=function(){var t=document.createElement("div"),n=document,r,i;t.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="float:left;background-color:transparent;">';n.body.appendChild(t);i=t.lastChild;if(r=n.defaultView){if(r.getComputedStyle(t.firstChild.firstChild,null).marginRight!="0px"){e.correctRightMargin=false}if(r.getComputedStyle(i,null).backgroundColor!="transparent"){e.correctTransparentColor=false}}e.cssFloat=!!i.style.cssFloat;n.body.removeChild(t)};if(Ext.isReady){t()}else{Ext.onReady(t)}})();Ext.EventObject=function(){var e=Ext.lib.Event,t=/(dbl)?click/,n={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},r=Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2};Ext.EventObjectImpl=function(e){if(e){this.setEvent(e.browserEvent||e)}};Ext.EventObjectImpl.prototype={setEvent:function(n){var i=this;if(n==i||n&&n.browserEvent){return n}i.browserEvent=n;if(n){i.button=n.button?r[n.button]:n.which?n.which-1:-1;if(t.test(n.type)&&i.button==-1){i.button=0}i.type=n.type;i.shiftKey=n.shiftKey;i.ctrlKey=n.ctrlKey||n.metaKey||false;i.altKey=n.altKey;i.keyCode=n.keyCode;i.charCode=n.charCode;i.target=e.getTarget(n);i.xy=e.getXY(n)}else{i.button=-1;i.shiftKey=false;i.ctrlKey=false;i.altKey=false;i.keyCode=0;i.charCode=0;i.target=null;i.xy=[0,0]}return i},stopEvent:function(){var t=this;if(t.browserEvent){if(t.browserEvent.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(t)}e.stopEvent(t.browserEvent)}},preventDefault:function(){if(this.browserEvent){e.preventDefault(this.browserEvent)}},stopPropagation:function(){var t=this;if(t.browserEvent){if(t.browserEvent.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(t)}e.stopPropagation(t.browserEvent)}},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(e){return Ext.isSafari?n[e]||e:e},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(e,t,n){return e?Ext.fly(this.target).findParent(e,t,n):n?Ext.get(this.target):this.target},getRelatedTarget:function(){return this.browserEvent?e.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var e=this.browserEvent;var t=0;if(e.wheelDelta){t=e.wheelDelta/120}else if(e.detail){t=-e.detail/3}return t},within:function(e,t,n){if(e){var r=this[t?"getRelatedTarget":"getTarget"]();return r&&((n?r==Ext.getDom(e):false)||Ext.fly(e).contains(r))}return false}};return new Ext.EventObjectImpl}();Ext.Loader=Ext.apply({},{load:function(e,t,n,r){var n=n||this,i=document.getElementsByTagName("head")[0],s=document.createDocumentFragment(),o=e.length,u=0,a=this;var f=function(t){i.appendChild(a.buildScriptTag(e[t],l))};var l=function(){u++;if(o==u&&typeof t=="function"){t.call(n)}else{if(r===true){f(u)}}};if(r===true){f.call(this,0)}else{Ext.each(e,function(e,t){s.appendChild(this.buildScriptTag(e,l))},this);i.appendChild(s)}},buildScriptTag:function(e,t){var n=document.createElement("script");n.type="text/javascript";n.src=e;if(n.readyState){n.onreadystatechange=function(){if(n.readyState=="loaded"||n.readyState=="complete"){n.onreadystatechange=null;t()}}}else{n.onload=t}return n}});Ext.ns("Ext.grid","Ext.list","Ext.dd","Ext.tree","Ext.form","Ext.menu","Ext.state","Ext.layout.boxOverflow","Ext.app","Ext.ux","Ext.chart","Ext.direct","Ext.slider");Ext.apply(Ext,function(){var e=Ext,t=0,n=null;return{emptyFn:function(){},BLANK_IMAGE_URL:Ext.isIE6||Ext.isIE7||Ext.isAir?"http:/"+"/www.extjs.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",extendX:function(e,t){return Ext.extend(e,t(e.prototype))},getDoc:function(){return Ext.get(document)},num:function(e,t){e=Number(Ext.isEmpty(e)||Ext.isArray(e)||typeof e=="boolean"||typeof e=="string"&&e.trim().length==0?NaN:e);return isNaN(e)?t:e},value:function(e,t,n){return Ext.isEmpty(e,n)?t:e},escapeRe:function(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},sequence:function(e,t,n,r){e[t]=e[t].createSequence(n,r)},addBehaviors:function(e){if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(e)})}else{var t={},n,r,i;for(r in e){if((n=r.split("@"))[1]){i=n[0];if(!t[i]){t[i]=Ext.select(i)}t[i].on(n[1],e[r])}}t=null}},getScrollBarWidth:function(e){if(!Ext.isReady){return 0}if(e===true||n===null){var t=Ext.getBody().createChild('<div class="x-hide-offsets" style="width:100px;height:50px;overflow:hidden;"><div style="height:200px;"></div></div>'),r=t.child("div",true);var i=r.offsetWidth;t.setStyle("overflow",Ext.isWebKit||Ext.isGecko?"auto":"scroll");var s=r.offsetWidth;t.remove();n=i-s+2}return n},combine:function(){var e=arguments,t=e.length,n=[];for(var r=0;r<t;r++){var i=e[r];if(Ext.isArray(i)){n=n.concat(i)}else if(i.length!==undefined&&!i.substr){n=n.concat(Array.prototype.slice.call(i,0))}else{n.push(i)}}return n},copyTo:function(e,t,n){if(typeof n=="string"){n=n.split(/[,;\s]/)}Ext.each(n,function(n){if(t.hasOwnProperty(n)){e[n]=t[n]}},this);return e},destroy:function(){Ext.each(arguments,function(e){if(e){if(Ext.isArray(e)){this.destroy.apply(this,e)}else if(typeof e.destroy=="function"){e.destroy()}else if(e.dom){e.remove()}}},this)},destroyMembers:function(e,t,n,r){for(var i=1,s=arguments,o=s.length;i<o;i++){Ext.destroy(e[s[i]]);delete e[s[i]]}},clean:function(e){var t=[];Ext.each(e,function(e){if(!!e){t.push(e)}});return t},unique:function(e){var t=[],n={};Ext.each(e,function(e){if(!n[e]){t.push(e)}n[e]=true});return t},flatten:function(e){function n(e){Ext.each(e,function(e){if(Ext.isArray(e)){n(e)}else{t.push(e)}});return t}var t=[];return n(e)},min:function(e,t){var n=e[0];t=t||function(e,t){return e<t?-1:1};Ext.each(e,function(e){n=t(n,e)==-1?n:e});return n},max:function(e,t){var n=e[0];t=t||function(e,t){return e>t?1:-1};Ext.each(e,function(e){n=t(n,e)==1?n:e});return n},mean:function(e){return e.length>0?Ext.sum(e)/e.length:undefined},sum:function(e){var t=0;Ext.each(e,function(e){t+=e});return t},partition:function(e,t){var n=[[],[]];Ext.each(e,function(e,r,i){n[t&&t(e,r,i)||!t&&e?0:1].push(e)});return n},invoke:function(e,t){var n=[],r=Array.prototype.slice.call(arguments,2);Ext.each(e,function(e,i){if(e&&typeof e[t]=="function"){n.push(e[t].apply(e,r))}else{n.push(undefined)}});return n},pluck:function(e,t){var n=[];Ext.each(e,function(e){n.push(e[t])});return n},zip:function(){var e=Ext.partition(arguments,function(e){return typeof e!="function"}),t=e[0],n=e[1][0],r=Ext.max(Ext.pluck(t,"length")),i=[];for(var s=0;s<r;s++){i[s]=[];if(n){i[s]=n.apply(n,Ext.pluck(t,s))}else{for(var o=0,u=t.length;o<u;o++){i[s].push(t[o][s])}}}return i},getCmp:function(e){return Ext.ComponentMgr.get(e)},useShims:e.isIE6||e.isMac&&e.isGecko2,type:function(e){if(e===undefined||e===null){return false}if(e.htmlElement){return"element"}var t=typeof e;if(t=="object"&&e.nodeName){switch(e.nodeType){case 1:return"element";case 3:return/\S/.test(e.nodeValue)?"textnode":"whitespace"}}if(t=="object"||t=="function"){switch(e.constructor){case Array:return"array";case RegExp:return"regexp";case Date:return"date"}if(typeof e.length=="number"&&typeof e.item=="function"){return"nodelist"}}return t},intercept:function(e,t,n,r){e[t]=e[t].createInterceptor(n,r)},callback:function(e,t,n,r){if(typeof e=="function"){if(r){e.defer(r,t,n||[])}else{e.apply(t,n||[])}}}}}());Ext.apply(Function.prototype,{createSequence:function(e,t){var n=this;return typeof e!="function"?this:function(){var r=n.apply(this||window,arguments);e.apply(t||this||window,arguments);return r}}});Ext.applyIf(String,{escape:function(e){return e.replace(/('|\\)/g,"\\$1")},leftPad:function(e,t,n){var r=String(e);if(!n){n=" "}while(r.length<t){r=n+r}return r}});String.prototype.toggle=function(e,t){return this==e?t:e};String.prototype.trim=function(){var e=/^\s+|\s+$/g;return function(){return this.replace(e,"")}}();Date.prototype.getElapsed=function(e){return Math.abs((e||new Date).getTime()-this.getTime())};Ext.applyIf(Number.prototype,{constrain:function(e,t){return Math.min(Math.max(this,e),t)}});Ext.lib.Dom.getRegion=function(e){return Ext.lib.Region.getRegion(e)};Ext.lib.Region=function(e,t,n,r){var i=this;i.top=e;i[1]=e;i.right=t;i.bottom=n;i.left=r;i[0]=r};Ext.lib.Region.prototype={contains:function(e){var t=this;return e.left>=t.left&&e.right<=t.right&&e.top>=t.top&&e.bottom<=t.bottom},getArea:function(){var e=this;return(e.bottom-e.top)*(e.right-e.left)},intersect:function(e){var t=this,n=Math.max(t.top,e.top),r=Math.min(t.right,e.right),i=Math.min(t.bottom,e.bottom),s=Math.max(t.left,e.left);if(i>=n&&r>=s){return new Ext.lib.Region(n,r,i,s)}},union:function(e){var t=this,n=Math.min(t.top,e.top),r=Math.max(t.right,e.right),i=Math.max(t.bottom,e.bottom),s=Math.min(t.left,e.left);return new Ext.lib.Region(n,r,i,s)},constrainTo:function(e){var t=this;t.top=t.top.constrain(e.top,e.bottom);t.bottom=t.bottom.constrain(e.top,e.bottom);t.left=t.left.constrain(e.left,e.right);t.right=t.right.constrain(e.left,e.right);return t},adjust:function(e,t,n,r){var i=this;i.top+=e;i.left+=t;i.right+=r;i.bottom+=n;return i}};Ext.lib.Region.getRegion=function(e){var t=Ext.lib.Dom.getXY(e),n=t[1],r=t[0]+e.offsetWidth,i=t[1]+e.offsetHeight,s=t[0];return new Ext.lib.Region(n,r,i,s)};Ext.lib.Point=function(e,t){if(Ext.isArray(e)){t=e[1];e=e[0]}var n=this;n.x=n.right=n.left=n[0]=e;n.y=n.top=n.bottom=n[1]=t};Ext.lib.Point.prototype=new Ext.lib.Region;Ext.apply(Ext.DomHelper,function(){function o(t,n,r,i,s,o){t=Ext.getDom(t);var a;if(e.useDom){a=u(n,null);if(o){t.appendChild(a)}else{(s=="firstChild"?t:t.parentNode).insertBefore(a,t[s]||t)}}else{a=Ext.DomHelper.insertHtml(i,t,Ext.DomHelper.createHtml(n))}return r?Ext.get(a,true):a}function u(e,t){var n,r=document,i,o,a,f;if(Ext.isArray(e)){n=r.createDocumentFragment();for(var l=0,c=e.length;l<c;l++){u(e[l],n)}}else if(typeof e=="string"){n=r.createTextNode(e)}else{n=r.createElement(e.tag||"div");i=!!n.setAttribute;for(var o in e){if(!s.test(o)){a=e[o];if(o=="cls"){n.className=a}else{if(i){n.setAttribute(o,a)}else{n[o]=a}}}}Ext.DomHelper.applyStyles(n,e.style);if(f=e.children||e.cn){u(f,n)}else if(e.html){n.innerHTML=e.html}}if(t){t.appendChild(n)}return n}var e,t="afterbegin",n="afterend",r="beforebegin",i="beforeend",s=/tag|children|cn|html$/i;e={createTemplate:function(e){var t=Ext.DomHelper.createHtml(e);return new Ext.Template(t)},useDom:false,insertBefore:function(e,t,n){return o(e,t,n,r)},insertAfter:function(e,t,r){return o(e,t,r,n,"nextSibling")},insertFirst:function(e,n,r){return o(e,n,r,t,"firstChild")},append:function(e,t,n){return o(e,t,n,i,"",true)},createDom:u};return e}());Ext.apply(Ext.Template.prototype,{disableFormats:false,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,argsRe:/^\s*['"](.*)["']\s*$/,compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,applyTemplate:function(e){function s(s,o,u,a){if(u&&n){if(u.substr(0,5)=="this."){return i.call(u.substr(5),e[o],e)}else{if(a){var f=t.argsRe;a=a.split(",");for(var l=0,c=a.length;l<c;l++){a[l]=a[l].replace(f,"$1")}a=[e[o]].concat(a)}else{a=[e[o]]}return r[u].apply(r,a)}}else{return e[o]!==undefined?e[o]:""}}var t=this,n=t.disableFormats!==true,r=Ext.util.Format,i=t;if(t.compiled){return t.compiled(e)}return t.html.replace(t.re,s)},compile:function(){function fn(e,t,n,r){if(n&&useF){r=r?","+r:"";if(n.substr(0,5)!="this."){n="fm."+n+"("}else{n='this.call("'+n.substr(5)+'", ';r=", values"}}else{r="";n="(values['"+t+"'] == undefined ? '' : "}return"'"+sep+n+"values['"+t+"']"+r+")"+sep+"'"}var me=this,fm=Ext.util.Format,useF=me.disableFormats!==true,sep=Ext.isGecko?"+":",",body;if(Ext.isGecko){body="this.compiled = function(values){ return '"+me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn)+"';};"}else{body=["this.compiled = function(values){ return ['"];body.push(me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn));body.push("'].join('');};");body=body.join("")}eval(body);return me},call:function(e,t,n){return this[e](t,n)}});Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.util.Functions={createInterceptor:function(e,t,n){var r=e;if(!Ext.isFunction(t)){return e}else{return function(){var r=this,i=arguments;t.target=r;t.method=e;return t.apply(n||r||window,i)!==false?e.apply(r||window,i):null}}},createDelegate:function(e,t,n,r){if(!Ext.isFunction(e)){return e}return function(){var i=n||arguments;if(r===true){i=Array.prototype.slice.call(arguments,0);i=i.concat(n)}else if(Ext.isNumber(r)){i=Array.prototype.slice.call(arguments,0);var s=[r,0].concat(n);Array.prototype.splice.apply(i,s)}return e.apply(t||window,i)}},defer:function(e,t,n,r,i){e=Ext.util.Functions.createDelegate(e,n,r,i);if(t>0){return setTimeout(e,t)}e();return 0},createSequence:function(e,t,n){if(!Ext.isFunction(t)){return e}else{return function(){var r=e.apply(this||window,arguments);t.apply(n||this||window,arguments);return r}}}};Ext.defer=Ext.util.Functions.defer;Ext.createInterceptor=Ext.util.Functions.createInterceptor;Ext.createSequence=Ext.util.Functions.createSequence;Ext.createDelegate=Ext.util.Functions.createDelegate;Ext.apply(Ext.util.Observable.prototype,function(){function e(e){var t=(this.methodEvents=this.methodEvents||{})[e],n,r,i,s=this;if(!t){this.methodEvents[e]=t={};t.originalFn=this[e];t.methodName=e;t.before=[];t.after=[];var o=function(e,t,o){if((r=e.apply(t||s,o))!==undefined){if(typeof r=="object"){if(r.returnValue!==undefined){n=r.returnValue}else{n=r}i=!!r.cancel}else if(r===false){i=true}else{n=r}}};this[e]=function(){var e=Array.prototype.slice.call(arguments,0),u;n=r=undefined;i=false;for(var a=0,f=t.before.length;a<f;a++){u=t.before[a];o(u.fn,u.scope,e);if(i){return n}}if((r=t.originalFn.apply(s,e))!==undefined){n=r}for(var a=0,f=t.after.length;a<f;a++){u=t.after[a];o(u.fn,u.scope,e);if(i){return n}}return n}}return t}return{beforeMethod:function(t,n,r){e.call(this,t).before.push({fn:n,scope:r})},afterMethod:function(t,n,r){e.call(this,t).after.push({fn:n,scope:r})},removeMethodListener:function(e,t,n){var r=this.getMethodEvent(e);for(var i=0,s=r.before.length;i<s;i++){if(r.before[i].fn==t&&r.before[i].scope==n){r.before.splice(i,1);return}}for(var i=0,s=r.after.length;i<s;i++){if(r.after[i].fn==t&&r.after[i].scope==n){r.after.splice(i,1);return}}},relayEvents:function(e,t){function r(e){return function(){return n.fireEvent.apply(n,[e].concat(Array.prototype.slice.call(arguments,0)))}}var n=this;for(var i=0,s=t.length;i<s;i++){var o=t[i];n.events[o]=n.events[o]||true;e.on(o,r(o),n)}},enableBubble:function(e){var t=this;if(!Ext.isEmpty(e)){e=Ext.isArray(e)?e:Array.prototype.slice.call(arguments,0);for(var n=0,r=e.length;n<r;n++){var i=e[n];i=i.toLowerCase();var s=t.events[i]||true;if(typeof s=="boolean"){s=new Ext.util.Event(t,i);t.events[i]=s}s.bubble=true}}}}}());Ext.util.Observable.capture=function(e,t,n){e.fireEvent=e.fireEvent.createInterceptor(t,n)};Ext.util.Observable.observeClass=function(e,t){if(e){if(!e.fireEvent){Ext.apply(e,new Ext.util.Observable);Ext.util.Observable.capture(e.prototype,e.fireEvent,e)}if(typeof t=="object"){e.on(t)}return e}};Ext.apply(Ext.EventManager,function(){var e,t,n,r,i=Ext.lib.Dom,s=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,o=Ext.EventManager._unload,u=0,a=0,f=Ext.isWebKit?Ext.num(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1])>=525:!(Ext.isGecko&&!Ext.isWindows||Ext.isOpera);return{_unload:function(){Ext.EventManager.un(window,"resize",this.fireWindowResize,this);o.call(Ext.EventManager)},doResizeEvent:function(){var t=i.getViewHeight(),n=i.getViewWidth();if(a!=t||u!=n){e.fire(u=n,a=t)}},onWindowResize:function(n,r,i){if(!e){e=new Ext.util.Event;t=new Ext.util.DelayedTask(this.doResizeEvent);Ext.EventManager.on(window,"resize",this.fireWindowResize,this)}e.addListener(n,r,i)},fireWindowResize:function(){if(e){t.delay(100)}},onTextResize:function(e,t,i){if(!n){n=new Ext.util.Event;var s=new Ext.Element(document.createElement("div"));s.dom.className="x-text-resize";s.dom.innerHTML="X";s.appendTo(document.body);r=s.dom.offsetHeight;setInterval(function(){if(s.dom.offsetHeight!=r){n.fire(r,r=s.dom.offsetHeight)}},this.textResizeInterval)}n.addListener(e,t,i)},removeResizeListener:function(t,n){if(e){e.removeListener(t,n)}},fireResize:function(){if(e){e.fire(i.getViewWidth(),i.getViewHeight())}},textResizeInterval:50,ieDeferSrc:false,getKeyEvent:function(){return f?"keydown":"keypress"},useKeydown:f}}());Ext.EventManager.on=Ext.EventManager.addListener;Ext.apply(Ext.EventObjectImpl.prototype,{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,isNavKeyPress:function(){var e=this,t=this.normalizeKey(e.keyCode);return t>=33&&t<=40||t==e.RETURN||t==e.TAB||t==e.ESC},isSpecialKey:function(){var e=this.normalizeKey(this.keyCode);return this.type=="keypress"&&this.ctrlKey||this.isNavKeyPress()||e==this.BACKSPACE||e>=16&&e<=20||e>=44&&e<=46},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])},hasModifier:function(){return this.ctrlKey||this.altKey||this.shiftKey}});Ext.Element.addMethods({swallowEvent:function(e,t){function r(e){e.stopPropagation();if(t){e.preventDefault()}}var n=this;if(Ext.isArray(e)){Ext.each(e,function(e){n.on(e,r)});return n}n.on(e,r);return n},relayEvent:function(e,t){this.on(e,function(n){t.fireEvent(e,n)})},clean:function(e){var t=this,n=t.dom,r=n.firstChild,i=-1;if(Ext.Element.data(n,"isCleaned")&&e!==true){return t}while(r){var s=r.nextSibling;if(r.nodeType==3&&!/\S/.test(r.nodeValue)){n.removeChild(r)}else{r.nodeIndex=++i}r=s}Ext.Element.data(n,"isCleaned",true);return t},load:function(){var e=this.getUpdater();e.update.apply(e,arguments);return this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this))},update:function(e,t,n){if(!this.dom){return this}e=e||"";if(t!==true){this.dom.innerHTML=e;if(typeof n=="function"){n()}return this}var r=Ext.id(),i=this.dom;e+='<span id="'+r+'"></span>';Ext.lib.Event.onAvailable(r,function(){var t=document,i=t.getElementsByTagName("head")[0],s=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,o=/\ssrc=([\'\"])(.*?)\1/i,u=/\stype=([\'\"])(.*?)\1/i,a,f,l,c,h,p;while(a=s.exec(e)){f=a[1];l=f?f.match(o):false;if(l&&l[2]){p=t.createElement("script");p.src=l[2];c=f.match(u);if(c&&c[2]){p.type=c[2]}i.appendChild(p)}else if(a[2]&&a[2].length>0){if(window.execScript){window.execScript(a[2])}else{window.eval(a[2])}}}h=t.getElementById(r);if(h){Ext.removeNode(h)}if(typeof n=="function"){n()}});i.innerHTML=e.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,"");return this},removeAllListeners:function(){this.removeAnchor();Ext.EventManager.removeAll(this.dom);return this},createProxy:function(e,t,n){e=typeof e=="object"?e:{tag:"div",cls:e};var r=this,i=t?Ext.DomHelper.append(t,e,true):Ext.DomHelper.insertBefore(r.dom,e,true);if(n&&r.setBox&&r.getBox){i.setBox(r.getBox())}return i}});Ext.Element.prototype.getUpdateManager=Ext.Element.prototype.getUpdater;Ext.Element.addMethods({getAnchorXY:function(e,t,n){e=(e||"tl").toLowerCase();n=n||{};var r=this,i=r.dom==document.body||r.dom==document,s=n.width||i?Ext.lib.Dom.getViewWidth():r.getWidth(),o=n.height||i?Ext.lib.Dom.getViewHeight():r.getHeight(),u,a=Math.round,f=r.getXY(),l=r.getScroll(),c=i?l.left:!t?f[0]:0,h=i?l.top:!t?f[1]:0,p={c:[a(s*.5),a(o*.5)],t:[a(s*.5),0],l:[0,a(o*.5)],r:[s,a(o*.5)],b:[a(s*.5),o],tl:[0,0],bl:[0,o],br:[s,o],tr:[s,0]};u=p[e];return[u[0]+c,u[1]+h]},anchorTo:function(e,t,n,r,i,s){var o=this,u=o.dom,a=!Ext.isEmpty(i),f=function(){Ext.fly(u).alignTo(e,t,n,r);Ext.callback(s,Ext.fly(u))},l=this.getAnchor();this.removeAnchor();Ext.apply(l,{fn:f,scroll:a});Ext.EventManager.onWindowResize(f,null);if(a){Ext.EventManager.on(window,"scroll",f,null,{buffer:!isNaN(i)?i:50})}f.call(o);return o},removeAnchor:function(){var e=this,t=this.getAnchor();if(t&&t.fn){Ext.EventManager.removeResizeListener(t.fn);if(t.scroll){Ext.EventManager.un(window,"scroll",t.fn)}delete t.fn}return e},getAnchor:function(){var e=Ext.Element.data,t=this.dom;if(!t){return}var n=e(t,"_anchor");if(!n){n=e(t,"_anchor",{})}return n},getAlignToXY:function(e,t,n){e=Ext.get(e);if(!e||!e.dom){throw"Element.alignToXY with an element that doesn't exist"}n=n||[0,0];t=(!t||t=="?"?"tl-bl?":!/-/.test(t)&&t!==""?"tl-"+t:t||"tl-bl").toLowerCase();var r=this,i=r.dom,s,o,u,a,f,l,c,h=Ext.lib.Dom.getViewWidth()-10,p=Ext.lib.Dom.getViewHeight()-10,d,v,m,g,y,b,w=document,E=w.documentElement,S=w.body,x=(E.scrollLeft||S.scrollLeft||0)+5,T=(E.scrollTop||S.scrollTop||0)+5,N=false,C="",k="",L=t.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!L){throw"Element.alignTo with an invalid alignment "+t}C=L[1];k=L[2];N=!!L[3];s=r.getAnchorXY(C,true);o=e.getAnchorXY(k,false);u=o[0]-s[0]+n[0];a=o[1]-s[1]+n[1];if(N){f=r.getWidth();l=r.getHeight();c=e.getRegion();d=C.charAt(0);v=C.charAt(C.length-1);m=k.charAt(0);g=k.charAt(k.length-1);y=d=="t"&&m=="b"||d=="b"&&m=="t";b=v=="r"&&g=="l"||v=="l"&&g=="r";if(u+f>h+x){u=b?c.left-f:h+x-f}if(u<x){u=b?c.right:x}if(a+l>p+T){a=y?c.top-l:p+T-l}if(a<T){a=y?c.bottom:T}}return[u,a]},alignTo:function(e,t,n,r){var i=this;return i.setXY(i.getAlignToXY(e,t,n),i.preanim&&!!r?i.preanim(arguments,3):false)},adjustForConstraints:function(e,t,n){return this.getConstrainToXY(t||document,false,n,e)||e},getConstrainToXY:function(e,t,n,r){var i={top:0,left:0,bottom:0,right:0};return function(e,t,n,r){e=Ext.get(e);n=n?Ext.applyIf(n,i):i;var s,o,u=0,a=0;if(e.dom==document.body||e.dom==document){s=Ext.lib.Dom.getViewWidth();o=Ext.lib.Dom.getViewHeight()}else{s=e.dom.clientWidth;o=e.dom.clientHeight;if(!t){var f=e.getXY();u=f[0];a=f[1]}}var l=e.getScroll();u+=n.left+l.left;a+=n.top+l.top;s-=n.right;o-=n.bottom;var c=u+s,h=a+o,p=r||(!t?this.getXY():[this.getLeft(true),this.getTop(true)]),d=p[0],v=p[1],m=this.getConstrainOffset(),g=this.dom.offsetWidth+m,y=this.dom.offsetHeight+m;var b=false;if(d+g>c){d=c-g;b=true}if(v+y>h){v=h-y;b=true}if(d<u){d=u;b=true}if(v<a){v=a;b=true}return b?[d,v]:false}}(),getConstrainOffset:function(){return 0},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(e){return this.alignTo(e||document,"c-c")}});Ext.Element.addMethods({select:function(e,t){return Ext.Element.select(e,t,this.dom)}});Ext.apply(Ext.Element.prototype,function(){var e=Ext.getDom,t=Ext.get,n=Ext.DomHelper;return{insertSibling:function(r,i,s){var o=this,u,a=(i||"before").toLowerCase()=="after",f;if(Ext.isArray(r)){f=o;Ext.each(r,function(e){u=Ext.fly(f,"_internal").insertSibling(e,i,s);if(a){f=u}});return u}r=r||{};if(r.nodeType||r.dom){u=o.dom.parentNode.insertBefore(e(r),a?o.dom.nextSibling:o.dom);if(!s){u=t(u)}}else{if(a&&!o.dom.nextSibling){u=n.append(o.dom.parentNode,r,!s)}else{u=n[a?"insertAfter":"insertBefore"](o.dom,r,!s)}}return u}}}());Ext.Element.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>';Ext.Element.addMethods(function(){var e="_internal",t=/(\d+\.?\d+)px/;return{applyStyles:function(e){Ext.DomHelper.applyStyles(this.dom,e);return this},getStyles:function(){var e={};Ext.each(arguments,function(t){e[t]=this.getStyle(t)},this);return e},setOverflow:function(e){var t=this.dom;if(e=="auto"&&Ext.isMac&&Ext.isGecko2){t.style.overflow="hidden";(function(){t.style.overflow="auto"}).defer(1)}else{t.style.overflow=e}},boxWrap:function(e){e=e||"x-box";var t=Ext.get(this.insertHtml("beforeBegin","<div class='"+e+"'>"+String.format(Ext.Element.boxMarkup,e)+"</div>"));Ext.DomQuery.selectNode("."+e+"-mc",t.dom).appendChild(this.dom);return t},setSize:function(e,t,n){var r=this;if(typeof e=="object"){t=e.height;e=e.width}e=r.adjustWidth(e);t=r.adjustHeight(t);if(!n||!r.anim){r.dom.style.width=r.addUnits(e);r.dom.style.height=r.addUnits(t)}else{r.anim({width:{to:e},height:{to:t}},r.preanim(arguments,2))}return r},getComputedHeight:function(){var e=this,t=Math.max(e.dom.offsetHeight,e.dom.clientHeight);if(!t){t=parseFloat(e.getStyle("height"))||0;if(!e.isBorderBox()){t+=e.getFrameWidth("tb")}}return t},getComputedWidth:function(){var e=Math.max(this.dom.offsetWidth,this.dom.clientWidth);if(!e){e=parseFloat(this.getStyle("width"))||0;if(!this.isBorderBox()){e+=this.getFrameWidth("lr")}}return e},getFrameWidth:function(e,t){return t&&this.isBorderBox()?0:this.getPadding(e)+this.getBorderWidth(e)},addClassOnOver:function(t){this.hover(function(){Ext.fly(this,e).addClass(t)},function(){Ext.fly(this,e).removeClass(t)});return this},addClassOnFocus:function(t){this.on("focus",function(){Ext.fly(this,e).addClass(t)},this.dom);this.on("blur",function(){Ext.fly(this,e).removeClass(t)},this.dom);return this},addClassOnClick:function(t){var n=this.dom;this.on("mousedown",function(){Ext.fly(n,e).addClass(t);var r=Ext.getDoc(),i=function(){Ext.fly(n,e).removeClass(t);r.removeListener("mouseup",i)};r.on("mouseup",i)});return this},getViewSize:function(){var e=document,t=this.dom,n=t==e||t==e.body;if(n){var r=Ext.lib.Dom;return{width:r.getViewWidth(),height:r.getViewHeight()}}else{return{width:t.clientWidth,height:t.clientHeight}}},getStyleSize:function(){var e=this,t,n,r=document,i=this.dom,s=i==r||i==r.body,o=i.style;if(s){var u=Ext.lib.Dom;return{width:u.getViewWidth(),height:u.getViewHeight()}}if(o.width&&o.width!="auto"){t=parseFloat(o.width);if(e.isBorderBox()){t-=e.getFrameWidth("lr")}}if(o.height&&o.height!="auto"){n=parseFloat(o.height);if(e.isBorderBox()){n-=e.getFrameWidth("tb")}}return{width:t||e.getWidth(true),height:n||e.getHeight(true)}},getSize:function(e){return{width:this.getWidth(e),height:this.getHeight(e)}},repaint:function(){var e=this.dom;this.addClass("x-repaint");setTimeout(function(){Ext.fly(e).removeClass("x-repaint")},1);return this},unselectable:function(){this.dom.unselectable="on";return this.swallowEvent("selectstart",true).addClass("x-unselectable")},getMargins:function(e){var t=this,n,r={t:"top",l:"left",r:"right",b:"bottom"},i={};if(!e){for(n in t.margins){i[r[n]]=parseFloat(t.getStyle(t.margins[n]))||0}return i}else{return t.addStyles.call(t,e,t.margins)}}}}());Ext.Element.addMethods({setBox:function(e,t,n){var r=this,i=e.width,s=e.height;if(t&&!r.autoBoxAdjust&&!r.isBorderBox()){i-=r.getBorderWidth("lr")+r.getPadding("lr");s-=r.getBorderWidth("tb")+r.getPadding("tb")}r.setBounds(e.x,e.y,i,s,r.animTest.call(r,arguments,n,2));return r},getBox:function(e,t){var n=this,r,i,s,o=n.getBorderWidth,u=n.getPadding,a,f,l,c;if(!t){r=n.getXY()}else{i=parseInt(n.getStyle("left"),10)||0;s=parseInt(n.getStyle("top"),10)||0;r=[i,s]}var h=n.dom,p=h.offsetWidth,d=h.offsetHeight,v;if(!e){v={x:r[0],y:r[1],0:r[0],1:r[1],width:p,height:d}}else{a=o.call(n,"l")+u.call(n,"l");f=o.call(n,"r")+u.call(n,"r");l=o.call(n,"t")+u.call(n,"t");c=o.call(n,"b")+u.call(n,"b");v={x:r[0]+a,y:r[1]+l,0:r[0]+a,1:r[1]+l,width:p-(a+f),height:d-(l+c)}}v.right=v.x+v.width;v.bottom=v.y+v.height;return v},move:function(e,t,n){var r=this,i=r.getXY(),s=i[0],o=i[1],u=[s-t,o],a=[s+t,o],f=[s,o-t],l=[s,o+t],c={l:u,left:u,r:a,right:a,t:f,top:f,up:f,b:l,bottom:l,down:l};e=e.toLowerCase();r.moveTo(c[e][0],c[e][1],r.animTest.call(r,arguments,n,2))},setLeftTop:function(e,t){var n=this,r=n.dom.style;r.left=n.addUnits(e);r.top=n.addUnits(t);return n},getRegion:function(){return Ext.lib.Dom.getRegion(this.dom)},setBounds:function(e,t,n,r,i){var s=this;if(!i||!s.anim){s.setSize(n,r);s.setLocation(e,t)}else{s.anim({points:{to:[e,t]},width:{to:s.adjustWidth(n)},height:{to:s.adjustHeight(r)}},s.preanim(arguments,4),"motion")}return s},setRegion:function(e,t){return this.setBounds(e.left,e.top,e.right-e.left,e.bottom-e.top,this.animTest.call(this,arguments,t,1))}});Ext.Element.addMethods({scrollTo:function(e,t,n){var r=/top/i.test(e),i=this,s=i.dom,o;if(!n||!i.anim){o="scroll"+(r?"Top":"Left");s[o]=t}else{o="scroll"+(r?"Left":"Top");i.anim({scroll:{to:r?[s[o],t]:[t,s[o]]}},i.preanim(arguments,2),"scroll")}return i},scrollIntoView:function(e,t){var n=Ext.getDom(e)||Ext.getBody().dom,r=this.dom,i=this.getOffsetsTo(n),s=i[0]+n.scrollLeft,o=i[1]+n.scrollTop,u=o+r.offsetHeight,a=s+r.offsetWidth,f=n.clientHeight,l=parseInt(n.scrollTop,10),c=parseInt(n.scrollLeft,10),h=l+f,p=c+n.clientWidth;if(r.offsetHeight>f||o<l){n.scrollTop=o}else if(u>h){n.scrollTop=u-f}n.scrollTop=n.scrollTop;if(t!==false){if(r.offsetWidth>n.clientWidth||s<c){n.scrollLeft=s}else if(a>p){n.scrollLeft=a-n.clientWidth}n.scrollLeft=n.scrollLeft}return this},scrollChildIntoView:function(e,t){Ext.fly(e,"_scrollChildIntoView").scrollIntoView(this,t)},scroll:function(e,t,n){if(!this.isScrollable()){return false}var r=this.dom,i=r.scrollLeft,s=r.scrollTop,o=r.scrollWidth,u=r.scrollHeight,a=r.clientWidth,f=r.clientHeight,l=false,c,h={l:Math.min(i+t,o-a),r:c=Math.max(i-t,0),t:Math.max(s-t,0),b:Math.min(s+t,u-f)};h.d=h.b;h.u=h.t;e=e.substr(0,1);if((c=h[e])>-1){l=true;this.scrollTo(e=="l"||e=="r"?"left":"top",c,this.preanim(arguments,2))}return l}});Ext.Element.addMethods(function(){var e="visibility",t="display",n="hidden",r="none",i="x-masked",s="x-masked-relative",o=Ext.Element.data;return{isVisible:function(i){var s=!this.isStyle(e,n)&&!this.isStyle(t,r),o=this.dom.parentNode;if(i!==true||!s){return s}while(o&&!/^body/i.test(o.tagName)){if(!Ext.fly(o,"_isVisible").isVisible()){return false}o=o.parentNode}return true},isDisplayed:function(){return!this.isStyle(t,r)},enableDisplayMode:function(e){this.setVisibilityMode(Ext.Element.DISPLAY);if(!Ext.isEmpty(e)){o(this.dom,"originalDisplay",e)}return this},mask:function(e,t){var n=this,r=n.dom,u=Ext.DomHelper,a="ext-el-mask-msg",f,l;if(!/^body/i.test(r.tagName)&&n.getStyle("position")=="static"){n.addClass(s)}if(f=o(r,"maskMsg")){f.remove()}if(f=o(r,"mask")){f.remove()}l=u.append(r,{cls:"ext-el-mask"},true);o(r,"mask",l);n.addClass(i);l.setDisplayed(true);if(typeof e=="string"){var c=u.append(r,{cls:a,cn:{tag:"div"}},true);o(r,"maskMsg",c);c.dom.className=t?a+" "+t:a;c.dom.firstChild.innerHTML=e;c.setDisplayed(true);c.center(n)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&n.getStyle("height")=="auto"){l.setSize(undefined,n.getHeight())}return l},unmask:function(){var e=this,t=e.dom,n=o(t,"mask"),r=o(t,"maskMsg");if(n){if(r){r.remove();o(t,"maskMsg",undefined)}n.remove();o(t,"mask",undefined);e.removeClass([i,s])}},isMasked:function(){var e=o(this.dom,"mask");return e&&e.isVisible()},createShim:function(){var e=document.createElement("iframe"),t;e.frameBorder="0";e.className="ext-shim";e.src=Ext.SSL_SECURE_URL;t=Ext.get(this.dom.parentNode.insertBefore(e,this.dom));t.autoBoxAdjust=false;return t}}}());Ext.Element.addMethods({addKeyListener:function(e,t,n){var r;if(typeof e!="object"||Ext.isArray(e)){r={key:e,fn:t,scope:n}}else{r={key:e.key,shift:e.shift,ctrl:e.ctrl,alt:e.alt,fn:t,scope:n}}return new Ext.KeyMap(this,r)},addKeyMap:function(e){return new Ext.KeyMap(this,e)}});Ext.CompositeElementLite.importElementMethods();Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(e,t){if(!e){return this}if(typeof e=="string"){e=Ext.Element.selectorFunction(e,t)}var n=this.elements;Ext.each(e,function(e){n.push(Ext.get(e))});return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(e){return this.indexOf(e)!=-1},removeElement:function(e,t){var n=this,r=this.elements,i;Ext.each(e,function(e){if(i=r[e]||r[e=n.indexOf(e)]){if(t){if(i.dom){i.remove()}else{Ext.removeNode(i)}}r.splice(e,1)}});return this}});Ext.CompositeElement=Ext.extend(Ext.CompositeElementLite,{constructor:function(e,t){this.elements=[];this.add(e,t)},getElement:function(e){return e},transformElement:function(e){return Ext.get(e)}});Ext.Element.select=function(e,t,n){var r;if(typeof e=="string"){r=Ext.Element.selectorFunction(e,n)}else if(e.length!==undefined){r=e}else{throw"Invalid selector"}return t===true?new Ext.CompositeElement(r):new Ext.CompositeElementLite(r)};Ext.select=Ext.Element.select;Ext.UpdateManager=Ext.Updater=Ext.extend(Ext.util.Observable,function(){function r(e){var t=this;t.transaction=null;if(e.argument.form&&e.argument.reset){try{e.argument.form.reset()}catch(n){}}if(t.loadScripts){t.renderer.render(t.el,e,t,i.createDelegate(t,[e]))}else{t.renderer.render(t.el,e,t);i.call(t,e)}}function i(e,n,r){this.fireEvent(n||t,this.el,e);if(Ext.isFunction(e.argument.callback)){e.argument.callback.call(e.argument.scope,this.el,Ext.isEmpty(r)?true:false,e,e.argument.options)}}function s(e){i.call(this,e,n,!!(this.transaction=null))}var e="beforeupdate",t="update",n="failure";return{constructor:function(r,i){var s=this;r=Ext.get(r);if(!i&&r.updateManager){return r.updateManager}s.el=r;s.defaultUrl=null;s.addEvents(e,t,n);Ext.apply(s,Ext.Updater.defaults);s.transaction=null;s.refreshDelegate=s.refresh.createDelegate(s);s.updateDelegate=s.update.createDelegate(s);s.formUpdateDelegate=(s.formUpdate||function(){}).createDelegate(s);s.renderer=s.renderer||s.getDefaultRenderer();Ext.Updater.superclass.constructor.call(s)},setRenderer:function(e){this.renderer=e},getRenderer:function(){return this.renderer},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer},setDefaultUrl:function(e){this.defaultUrl=e},getEl:function(){return this.el},update:function(t,n,i,o){var u=this,a,f;if(u.fireEvent(e,u.el,t,n)!==false){if(Ext.isObject(t)){a=t;t=a.url;n=n||a.params;i=i||a.callback;o=o||a.discardUrl;f=a.scope;if(!Ext.isEmpty(a.nocache)){u.disableCaching=a.nocache}if(!Ext.isEmpty(a.text)){u.indicatorText='<div class="loading-indicator">'+a.text+"</div>"}if(!Ext.isEmpty(a.scripts)){u.loadScripts=a.scripts}if(!Ext.isEmpty(a.timeout)){u.timeout=a.timeout}}u.showLoading();if(!o){u.defaultUrl=t}if(Ext.isFunction(t)){t=t.call(u)}var l=Ext.apply({},{url:t,params:Ext.isFunction(n)&&f?n.createDelegate(f):n,success:r,failure:s,scope:u,callback:undefined,timeout:u.timeout*1e3,disableCaching:u.disableCaching,argument:{options:a,url:t,form:null,callback:i,scope:f||window,params:n}},a);u.transaction=Ext.Ajax.request(l)}},formUpdate:function(t,n,i,o){var u=this;if(u.fireEvent(e,u.el,t,n)!==false){if(Ext.isFunction(n)){n=n.call(u)}t=Ext.getDom(t);u.transaction=Ext.Ajax.request({form:t,url:n,success:r,failure:s,scope:u,timeout:u.timeout*1e3,argument:{url:n,form:t,callback:o,reset:i}});u.showLoading.defer(1,u)}},startAutoRefresh:function(e,t,n,r,i){var s=this;if(i){s.update(t||s.defaultUrl,n,r,true)}if(s.autoRefreshProcId){clearInterval(s.autoRefreshProcId)}s.autoRefreshProcId=setInterval(s.update.createDelegate(s,[t||s.defaultUrl,n,r,true]),e*1e3)},stopAutoRefresh:function(){if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId);delete this.autoRefreshProcId}},isAutoRefreshing:function(){return!!this.autoRefreshProcId},showLoading:function(){if(this.showLoadIndicator){this.el.dom.innerHTML=this.indicatorText}},abort:function(){if(this.transaction){Ext.Ajax.abort(this.transaction)}},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):false},refresh:function(e){if(this.defaultUrl){this.update(this.defaultUrl,null,e,true)}}}}());Ext.Updater.defaults={timeout:30,disableCaching:false,showLoadIndicator:true,indicatorText:'<div class="loading-indicator">Loading...</div>',loadScripts:false,sslBlankUrl:Ext.SSL_SECURE_URL};Ext.Updater.updateElement=function(e,t,n,r){var i=Ext.get(e).getUpdater();Ext.apply(i,r);i.update(t,n,r?r.callback:null)};Ext.Updater.BasicRenderer=function(){};Ext.Updater.BasicRenderer.prototype={render:function(e,t,n,r){e.update(t.responseText,n.loadScripts,r)}};(function(){function e(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/\{(\d+)\}/g,function(e,n){return t[n]})}Date.useStrict=false;Date.formatCodeToRegex=function(t,n){var r=Date.parseCodes[t];if(r){r=typeof r=="function"?r():r;Date.parseCodes[t]=r}return r?Ext.applyIf({c:r.c?e(r.c,n||"{0}"):r.c},r):{g:0,c:null,s:Ext.escapeRe(t)}};var t=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{M$:function(e,t){var n=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/");var r=(e||"").match(n);return r?new Date(((r[1]||"")+r[2])*1):null}},parseRegexes:[],formatFunctions:{M$:function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(e){return Date.monthNames[e].substring(0,3)},getShortDayName:function(e){return Date.dayNames[e].substring(0,3)},getMonthNumber:function(e){return Date.monthNumbers[e.substring(0,1).toUpperCase()+e.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(){var e=/(\\.)/g,t=/([gGhHisucUOPZ]|M\$)/;return function(n){return t.test(n.replace(e,""))}}(),formatCodes:{d:"String.leftPad(this.getDate(), 2, '0')",D:"Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"this.getSuffix()",w:"this.getDay()",z:"this.getDayOfYear()",W:"String.leftPad(this.getWeekOfYear(), 2, '0')",F:"Date.monthNames[this.getMonth()]",m:"String.leftPad(this.getMonth() + 1, 2, '0')",M:"Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"this.getDaysInMonth()",L:"(this.isLeapYear() ? 1 : 0)",o:"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"String.leftPad(this.getHours(), 2, '0')",i:"String.leftPad(this.getMinutes(), 2, '0')",s:"String.leftPad(this.getSeconds(), 2, '0')",u:"String.leftPad(this.getMilliseconds(), 3, '0')",O:"this.getGMTOffset()",P:"this.getGMTOffset(true)",T:"this.getTimezone()",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var e="Y-m-dTH:i:sP",t=[],n=0,r=e.length;n<r;++n){var i=e.charAt(n);t.push(i=="T"?"'T'":Date.getFormatCode(i))}return t.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(e,t,n,r,i,s,o){r=r||0;i=i||0;s=s||0;o=o||0;var u=(new Date(e<100?100:e,t-1,n,r,i,s,o)).add(Date.YEAR,e<100?e-100:0);return e==u.getFullYear()&&t==u.getMonth()+1&&n==u.getDate()&&r==u.getHours()&&i==u.getMinutes()&&s==u.getSeconds()&&o==u.getMilliseconds()},parseDate:function(e,t,n){var r=Date.parseFunctions;if(r[t]==null){Date.createParser(t)}return r[t](e,Ext.isDefined(n)?n:Date.useStrict)},getFormatCode:function(e){var t=Date.formatCodes[e];if(t){t=typeof t=="function"?t():t;Date.formatCodes[e]=t}return t||"'"+String.escape(e)+"'"},createFormat:function(e){var t=[],n=false,r="";for(var i=0;i<e.length;++i){r=e.charAt(i);if(!n&&r=="\\"){n=true}else if(n){n=false;t.push("'"+String.escape(r)+"'")}else{t.push(Date.getFormatCode(r))}}Date.formatFunctions[e]=new Function("return "+t.join("+"))},createParser:function(){var n=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Date.defaults,","results = String(input).match(Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = (new Date()).clearTime();","y = Ext.num(y, Ext.num(def.y, dt.getFullYear()));","m = Ext.num(m, Ext.num(def.m - 1, dt.getMonth()));","d = Ext.num(d, Ext.num(def.d, dt.getDate()));","h  = Ext.num(h, Ext.num(def.h, dt.getHours()));","i  = Ext.num(i, Ext.num(def.i, dt.getMinutes()));","s  = Ext.num(s, Ext.num(def.s, dt.getSeconds()));","ms = Ext.num(ms, Ext.num(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);","}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = new Date(y < 100 ? 100 : y, m, d, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);","}","}","}","if(v){","if(zz != null){","v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(r){var i=Date.parseRegexes.length,s=1,o=[],u=[],a=false,f="",l=0,c,h;for(;l<r.length;++l){f=r.charAt(l);if(!a&&f=="\\"){a=true}else if(a){a=false;u.push(String.escape(f))}else{c=t(f,s);s+=c.g;u.push(c.s);if(c.g&&c.c){if(c.calcLast){h=c.c}else{o.push(c.c)}}}}if(h){o.push(h)}Date.parseRegexes[i]=new RegExp("^"+u.join("")+"$","i");Date.parseFunctions[r]=new Function("input","strict",e(n,i,o.join("")))}}(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var e=[],t=0;t<7;e.push(Date.getShortDayName(t)),++t);return{g:0,c:null,s:"(?:"+e.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\n",s:"("+Date.monthNames.join("|")+")"}},M:function(){for(var e=[],n=0;n<12;e.push(Date.getShortMonthName(n)),++n);return Ext.applyIf({s:"("+e.join("|")+")"},t("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return t("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\n"+"y = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:function(){return t("A")},A:{calcLast:true,g:1,c:"if (/(am)/i.test(results[{0}])) {\n"+"if (!h || h == 12) { h = 0; }\n"+"} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)"},g:function(){return t("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return t("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\n"+"zz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var e=[],n=[t("Y",1),t("m",2),t("d",3),t("h",4),t("i",5),t("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",t("P",8).c,"}else{",t("O",8).c,"}","}"].join("\n")}];for(var r=0,i=n.length;r<i;++r){e.push(n[r].c)}return{g:1,c:e.join(""),s:[n[0].s,"(?:","-",n[1].s,"(?:","-",n[2].s,"(?:","(?:T| )?",n[3].s,":",n[4].s,"(?::",n[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}}})})();Ext.apply(Date.prototype,{dateFormat:function(e){if(Date.formatFunctions[e]==null){Date.createFormat(e)}return Date.formatFunctions[e].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(e){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+(e?":":"")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,"0")},getDayOfYear:function(){var e=0,t=this.clone(),n=this.getMonth(),r;for(r=0,t.setDate(1),t.setMonth(0);r<n;t.setMonth(++r)){e+=t.getDaysInMonth()}return e+this.getDate()-1},getWeekOfYear:function(){var e=864e5,t=7*e;return function(){var n=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/e,r=Math.floor(n/7),i=(new Date(r*t)).getUTCFullYear();return r-Math.floor(Date.UTC(i,0,7)/t)+1}}(),isLeapYear:function(){var e=this.getFullYear();return!!((e&3)==0&&(e%100||e%400==0&&e))},getFirstDayOfMonth:function(){var e=(this.getDay()-(this.getDate()-1))%7;return e<0?e+7:e},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var e=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var t=this.getMonth();return t==1&&this.isLeapYear()?29:e[t]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(){return new Date(this.getTime())},isDST:function(){return(new Date(this.getFullYear(),0,1)).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(e){if(e){return this.clone().clearTime()}var t=this.getDate();this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);if(this.getDate()!=t){for(var n=1,r=this.add(Date.HOUR,n);r.getDate()!=t;n++,r=this.add(Date.HOUR,n));this.setDate(t);this.setHours(r.getHours())}return this},add:function(e,t){var n=this.clone();if(!e||t===0)return n;switch(e.toLowerCase()){case Date.MILLI:n.setMilliseconds(this.getMilliseconds()+t);break;case Date.SECOND:n.setSeconds(this.getSeconds()+t);break;case Date.MINUTE:n.setMinutes(this.getMinutes()+t);break;case Date.HOUR:n.setHours(this.getHours()+t);break;case Date.DAY:n.setDate(this.getDate()+t);break;case Date.MONTH:var r=this.getDate();if(r>28){r=Math.min(r,this.getFirstDateOfMonth().add("mo",t).getLastDateOfMonth().getDate())}n.setDate(r);n.setMonth(this.getMonth()+t);break;case Date.YEAR:n.setFullYear(this.getFullYear()+t);break}return n},between:function(e,t){var n=this.getTime();return e.getTime()<=n&&n<=t.getTime()}});Date.prototype.format=Date.prototype.dateFormat;if(Ext.isSafari&&(navigator.userAgent.match(/WebKit\/(\d+)/)[1]||NaN)<420){Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(e){if(e<=-1){var t=Math.ceil(-e),n=Math.ceil(t/12),r=t%12?12-t%12:0;this.setFullYear(this.getFullYear()-n);return this._xMonth(r)}else{return this._xMonth(e)}},setDate:function(e){return this.setTime(this.getTime()-(this.getDate()-e)*864e5)}})}Ext.util.MixedCollection=function(e,t){this.items=[];this.map={};this.keys=[];this.length=0;this.addEvents("clear","add","replace","remove","sort");this.allowFunctions=e===true;if(t){this.getKey=t}Ext.util.MixedCollection.superclass.constructor.call(this)};Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:false,add:function(e,t){if(arguments.length==1){t=arguments[0];e=this.getKey(t)}if(typeof e!="undefined"&&e!==null){var n=this.map[e];if(typeof n!="undefined"){return this.replace(e,t)}this.map[e]=t}this.length++;this.items.push(t);this.keys.push(e);this.fireEvent("add",this.length-1,t,e);return t},getKey:function(e){return e.id},replace:function(e,t){if(arguments.length==1){t=arguments[0];e=this.getKey(t)}var n=this.map[e];if(typeof e=="undefined"||e===null||typeof n=="undefined"){return this.add(e,t)}var r=this.indexOfKey(e);this.items[r]=t;this.map[e]=t;this.fireEvent("replace",e,n,t);return t},addAll:function(e){if(arguments.length>1||Ext.isArray(e)){var t=arguments.length>1?arguments:e;for(var n=0,r=t.length;n<r;n++){this.add(t[n])}}else{for(var i in e){if(this.allowFunctions||typeof e[i]!="function"){this.add(i,e[i])}}}},each:function(e,t){var n=[].concat(this.items);for(var r=0,i=n.length;r<i;r++){if(e.call(t||n[r],n[r],r,i)===false){break}}},eachKey:function(e,t){for(var n=0,r=this.keys.length;n<r;n++){e.call(t||window,this.keys[n],this.items[n],n,r)}},find:function(e,t){for(var n=0,r=this.items.length;n<r;n++){if(e.call(t||window,this.items[n],this.keys[n])){return this.items[n]}}return null},insert:function(e,t,n){if(arguments.length==2){n=arguments[1];t=this.getKey(n)}if(this.containsKey(t)){this.suspendEvents();this.removeKey(t);this.resumeEvents()}if(e>=this.length){return this.add(t,n)}this.length++;this.items.splice(e,0,n);if(typeof t!="undefined"&&t!==null){this.map[t]=n}this.keys.splice(e,0,t);this.fireEvent("add",e,n,t);return n},remove:function(e){return this.removeAt(this.indexOf(e))},removeAt:function(e){if(e<this.length&&e>=0){this.length--;var t=this.items[e];this.items.splice(e,1);var n=this.keys[e];if(typeof n!="undefined"){delete this.map[n]}this.keys.splice(e,1);this.fireEvent("remove",t,n);return t}return false},removeKey:function(e){return this.removeAt(this.indexOfKey(e))},getCount:function(){return this.length},indexOf:function(e){return this.items.indexOf(e)},indexOfKey:function(e){return this.keys.indexOf(e)},item:function(e){var t=this.map[e],n=t!==undefined?t:typeof e=="number"?this.items[e]:undefined;return typeof n!="function"||this.allowFunctions?n:null},itemAt:function(e){return this.items[e]},key:function(e){return this.map[e]},contains:function(e){return this.indexOf(e)!=-1},containsKey:function(e){return typeof this.map[e]!="undefined"},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(e,t,n){var r,i,s=String(t).toUpperCase()=="DESC"?-1:1,o=[],u=this.keys,a=this.items;n=n||function(e,t){return e-t};for(r=0,i=a.length;r<i;r++){o[o.length]={key:u[r],value:a[r],index:r}}o.sort(function(t,r){var i=n(t[e],r[e])*s;if(i===0){i=t.index<r.index?-1:1}return i});for(r=0,i=o.length;r<i;r++){a[r]=o[r].value;u[r]=o[r].key}this.fireEvent("sort",this)},sort:function(e,t){this._sort("value",e,t)},reorder:function(e){this.suspendEvents();var t=this.items,n=0,r=t.length,i=[],s=[],o;for(o in e){i[e[o]]=t[o]}for(n=0;n<r;n++){if(e[n]==undefined){s.push(t[n])}}for(n=0;n<r;n++){if(i[n]==undefined){i[n]=s.shift()}}this.clear();this.addAll(i);this.resumeEvents();this.fireEvent("sort",this)},keySort:function(e,t){this._sort("key",e,t||function(e,t){var n=String(e).toUpperCase(),r=String(t).toUpperCase();return n>r?1:n<r?-1:0})},getRange:function(e,t){var n=this.items;if(n.length<1){return[]}e=e||0;t=Math.min(typeof t=="undefined"?this.length-1:t,this.length-1);var r,i=[];if(e<=t){for(r=e;r<=t;r++){i[i.length]=n[r]}}else{for(r=e;r>=t;r--){i[i.length]=n[r]}}return i},filter:function(e,t,n,r){if(Ext.isEmpty(t,false)){return this.clone()}t=this.createValueMatcher(t,n,r);return this.filterBy(function(n){return n&&t.test(n[e])})},filterBy:function(e,t){var n=new Ext.util.MixedCollection;n.getKey=this.getKey;var r=this.keys,i=this.items;for(var s=0,o=i.length;s<o;s++){if(e.call(t||this,i[s],r[s])){n.add(r[s],i[s])}}return n},findIndex:function(e,t,n,r,i){if(Ext.isEmpty(t,false)){return-1}t=this.createValueMatcher(t,r,i);return this.findIndexBy(function(n){return n&&t.test(n[e])},null,n)},findIndexBy:function(e,t,n){var r=this.keys,i=this.items;for(var s=n||0,o=i.length;s<o;s++){if(e.call(t||this,i[s],r[s])){return s}}return-1},createValueMatcher:function(e,t,n,r){if(!e.exec){var i=Ext.escapeRe;e=String(e);if(t===true){e=i(e)}else{e="^"+i(e);if(r===true){e+="$"}}e=new RegExp(e,n?"":"i")}return e},clone:function(){var e=new Ext.util.MixedCollection;var t=this.keys,n=this.items;for(var r=0,i=n.length;r<i;r++){e.add(t[r],n[r])}e.getKey=this.getKey;return e}});Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item;Ext.AbstractManager=Ext.extend(Object,{typeName:"type",constructor:function(e){Ext.apply(this,e||{});this.all=new Ext.util.MixedCollection;this.types={}},get:function(e){return this.all.get(e)},register:function(e){this.all.add(e)},unregister:function(e){this.all.remove(e)},registerType:function(e,t){this.types[e]=t;t[this.typeName]=e},isRegistered:function(e){return this.types[e]!==undefined},create:function(e,t){var n=e[this.typeName]||e.type||t,r=this.types[n];if(r==undefined){throw new Error(String.format("The '{0}' type has not been registered with this manager",n))}return new r(e)},onAvailable:function(e,t,n){var r=this.all;r.on("add",function(i,s){if(s.id==e){t.call(n||s,s);r.un("add",t,n)}})}});Ext.util.Format=function(){var trimRe=/^\s+|\s+$/g,stripTagsRE=/<\/?[^>]+>/gi,stripScriptsRe=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe=/\r?\n/g;return{ellipsis:function(e,t,n){if(e&&e.length>t){if(n){var r=e.substr(0,t-2),i=Math.max(r.lastIndexOf(" "),r.lastIndexOf("."),r.lastIndexOf("!"),r.lastIndexOf("?"));if(i==-1||i<t-15){return e.substr(0,t-3)+"..."}else{return r.substr(0,i)+"..."}}else{return e.substr(0,t-3)+"..."}}return e},undef:function(e){return e!==undefined?e:""},defaultValue:function(e,t){if(!t&&t!==0){t=""}return e!==undefined&&e!==""?e:t},htmlEncode:function(e){return!e?e:String(e).replace(/&/g,"&").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},htmlDecode:function(e){return!e?e:String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&/g,"&")},trim:function(e){return String(e).replace(trimRe,"")},substr:function(e,t,n){return String(e).substr(t,n)},lowercase:function(e){return String(e).toLowerCase()},uppercase:function(e){return String(e).toUpperCase()},capitalize:function(e){return!e?e:e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);args.unshift(value);return eval(fn).apply(window,args)}else{return eval(fn).call(window,value)}},usMoney:function(e){e=Math.round((e-0)*100)/100;e=e==Math.floor(e)?e+".00":e*10==Math.floor(e*10)?e+"0":e;e=String(e);var t=e.split("."),n=t[0],r=t[1]?"."+t[1]:".00",i=/(\d+)(\d{3})/;while(i.test(n)){n=n.replace(i,"$1"+","+"$2")}e=n+r;if(e.charAt(0)=="-"){return"-$"+e.substr(1)}return"$"+e},date:function(e,t){if(!e){return""}if(!Ext.isDate(e)){e=new Date(Date.parse(e))}return e.dateFormat(t||"m/d/Y")},dateRenderer:function(e){return function(t){return Ext.util.Format.date(t,e)}},stripTags:function(e){return!e?e:String(e).replace(stripTagsRE,"")},stripScripts:function(e){return!e?e:String(e).replace(stripScriptsRe,"")},fileSize:function(e){if(e<1024){return e+" bytes"}else if(e<1048576){return Math.round(e*10/1024)/10+" KB"}else{return Math.round(e*10/1048576)/10+" MB"}},math:function(){var e={};return function(t,n){if(!e[n]){e[n]=new Function("v","return v "+n+";")}return e[n](t)}}(),round:function(e,t){var n=Number(e);if(typeof t=="number"){t=Math.pow(10,t);n=Math.round(e*t)/t}return n},number:function(e,t){if(!t){return e}e=Ext.num(e,NaN);if(isNaN(e)){return""}var n=",",r=".",i=false,s=e<0;e=Math.abs(e);if(t.substr(t.length-2)=="/i"){t=t.substr(0,t.length-2);i=true;n=".";r=","}var o=t.indexOf(n)!=-1,u=(i?t.replace(/[^\d\,]/g,""):t.replace(/[^\d\.]/g,"")).split(r);if(1<u.length){e=e.toFixed(u[1].length)}else if(2<u.length){throw"NumberFormatException: invalid format, formats should have no more than 1 period: "+t}else{e=e.toFixed(0)}var a=e.toString();u=a.split(".");if(o){var f=u[0],l=[],c=f.length,h=Math.floor(c/3),p=f.length%3||3,d;for(d=0;d<c;d+=p){if(d!=0){p=3}l[l.length]=f.substr(d,p);h-=1}a=l.join(n);if(u[1]){a+=r+u[1]}}else{if(u[1]){a=u[0]+r+u[1]}}return(s?"-":"")+t.replace(/[\d,?\.?]+/,a)},numberRenderer:function(e){return function(t){return Ext.util.Format.number(t,e)}},plural:function(e,t,n){return e+" "+(e==1?t:n?n:t+"s")},nl2br:function(e){return Ext.isEmpty(e)?"":e.replace(nl2brRe,"<br/>")}}}();Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var e=this,t=e.html,n=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,r=/^<tpl\b[^>]*?for="(.*?)"/,i=/^<tpl\b[^>]*?if="(.*?)"/,s=/^<tpl\b[^>]*?exec="(.*?)"/,o,u=0,a=[],f="values",l="parent",c="xindex",h="xcount",p="return ",d="with(values){ ";t=["<tpl>",t,"</tpl>"].join("");while(o=t.match(n)){var v=o[0].match(r),m=o[0].match(i),g=o[0].match(s),y=null,b=null,w=null,E=v&&v[1]?v[1]:"";if(m){y=m&&m[1]?m[1]:null;if(y){b=new Function(f,l,c,h,d+p+Ext.util.Format.htmlDecode(y)+"; }")}}if(g){y=g&&g[1]?g[1]:null;if(y){w=new Function(f,l,c,h,d+Ext.util.Format.htmlDecode(y)+"; }")}}if(E){switch(E){case".":E=new Function(f,l,d+p+f+"; }");break;case"..":E=new Function(f,l,d+p+l+"; }");break;default:E=new Function(f,l,d+p+E+"; }")}}a.push({id:u,target:E,exec:w,test:b,body:o[1]||""});t=t.replace(o[0],"{xtpl"+u+"}");++u}for(var S=a.length-1;S>=0;--S){e.compileTpl(a[S])}e.master=a[a.length-1];e.tpls=a};Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w\-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(e,t,n,r,i){var s=this,o,u=s.tpls[e],a,f=[];if(u.test&&!u.test.call(s,t,n,r,i)||u.exec&&u.exec.call(s,t,n,r,i)){return""}a=u.target?u.target.call(s,t,n):t;o=a.length;n=u.target?t:n;if(u.target&&Ext.isArray(a)){for(var l=0,o=a.length;l<o;l++){f[f.length]=u.compiled.call(s,a[l],n,l+1,o)}return f.join("")}return u.compiled.call(s,a,n,r,i)},compileTpl:function(tpl){function fn(e,t,n,r,i){if(t.substr(0,4)=="xtpl"){return"'"+sep+"this.applySubTemplate("+t.substr(4)+", values, parent, xindex, xcount)"+sep+"'"}var s;if(t==="."){s="values"}else if(t==="#"){s="xindex"}else if(t.indexOf(".")!=-1){s=t}else{s="values['"+t+"']"}if(i){s="("+s+i+")"}if(n&&useF){r=r?","+r:"";if(n.substr(0,5)!="this."){n="fm."+n+"("}else{n='this.call("'+n.substr(5)+'", ';r=", values"}}else{r="";n="("+s+" === undefined ? '' : "}return"'"+sep+n+s+r+")"+sep+"'"}function codeFn(e,t){return"'"+sep+"("+t.replace(/\\'/g,"'")+")"+sep+"'"}var fm=Ext.util.Format,useF=this.disableFormats!==true,sep=Ext.isGecko?"+":",",body;if(Ext.isGecko){body="tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};"}else{body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"];body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn));body.push("'].join('');};");body=body.join("")}eval(body);return this},applyTemplate:function(e){return this.master.compiled.call(this,e,{},1,1)},compile:function(){return this}});Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate;Ext.XTemplate.from=function(e){e=Ext.getDom(e);return new Ext.XTemplate(e.value||e.innerHTML)};Ext.util.CSS=function(){var e=null;var t=document;var n=/(-[a-z])/gi;var r=function(e,t){return t.charAt(1).toUpperCase()};return{createStyleSheet:function(e,n){var r;var i=t.getElementsByTagName("head")[0];var s=t.createElement("style");s.setAttribute("type","text/css");if(n){s.setAttribute("id",n)}if(Ext.isIE){i.appendChild(s);r=s.styleSheet;r.cssText=e}else{try{s.appendChild(t.createTextNode(e))}catch(o){s.cssText=e}i.appendChild(s);r=s.styleSheet?s.styleSheet:s.sheet||t.styleSheets[t.styleSheets.length-1]}this.cacheStyleSheet(r);return r},removeStyleSheet:function(e){var n=t.getElementById(e);if(n){n.parentNode.removeChild(n)}},swapStyleSheet:function(e,n){this.removeStyleSheet(e);var r=t.createElement("link");r.setAttribute("rel","stylesheet");r.setAttribute("type","text/css");r.setAttribute("id",e);r.setAttribute("href",n);t.getElementsByTagName("head")[0].appendChild(r)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(t){if(!e){e={}}try{var n=t.cssRules||t.rules;for(var r=n.length-1;r>=0;--r){e[n[r].selectorText.toLowerCase()]=n[r]}}catch(i){}},getRules:function(n){if(e===null||n){e={};var r=t.styleSheets;for(var i=0,s=r.length;i<s;i++){try{this.cacheStyleSheet(r[i])}catch(o){}}}return e},getRule:function(e,t){var n=this.getRules(t);if(!Ext.isArray(e)){return n[e.toLowerCase()]}for(var r=0;r<e.length;r++){if(n[e[r]]){return n[e[r].toLowerCase()]}}return null},updateRule:function(e,t,i){if(!Ext.isArray(e)){var s=this.getRule(e);if(s){s.style[t.replace(n,r)]=i;return true}}else{for(var o=0;o<e.length;o++){if(this.updateRule(e[o],t,i)){return true}}}return false}}}();Ext.util.ClickRepeater=Ext.extend(Ext.util.Observable,{constructor:function(e,t){this.el=Ext.get(e);this.el.unselectable();Ext.apply(this,t);this.addEvents("mousedown","click","mouseup");if(!this.disabled){this.disabled=true;this.enable()}if(this.handler){this.on("click",this.handler,this.scope||this)}Ext.util.ClickRepeater.superclass.constructor.call(this)},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(e){if(e||!this.disabled){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeAllListeners()}this.disabled=true},setDisabled:function(e){this[e?"disable":"enable"]()},eventOptions:function(e){if(this.preventDefault){e.preventDefault()}if(this.stopDefault){e.stopEvent()}},destroy:function(){this.disable(true);Ext.destroy(this.el);this.purgeListeners()},handleDblClick:function(e){clearTimeout(this.timer);this.el.blur();this.fireEvent("mousedown",this,e);this.fireEvent("click",this,e)},handleMouseDown:function(e){clearTimeout(this.timer);this.el.blur();if(this.pressClass){this.el.addClass(this.pressClass)}this.mousedownTime=new Date;Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,e);this.fireEvent("click",this,e);if(this.accelerate){this.delay=400}this.timer=this.click.defer(this.delay||this.interval,this,[e])},click:function(e){this.fireEvent("click",this,e);this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12e3):this.interval,this,[e])},easeOutExpo:function(e,t,n,r){return e==r?t+n:n*(-Math.pow(2,-10*e/r)+1)+t},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressClass){this.el.addClass(this.pressClass)}this.click()},handleMouseUp:function(e){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeClass(this.pressClass);this.fireEvent("mouseup",this,e)}});Ext.KeyNav=function(e,t){this.el=Ext.get(e);Ext.apply(this,t);if(!this.disabled){this.disabled=true;this.enable()}};Ext.KeyNav.prototype={disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,relay:function(e){var t=e.getKey(),n=this.keyToHandler[t];if(n&&this[n]){if(this.doRelay(e,this[n],n)!==true){e[this.defaultEventAction]()}}},doRelay:function(e,t,n){return t.call(this.scope||this,e,n)},enter:false,left:false,right:false,up:false,down:false,tab:false,esc:false,pageUp:false,pageDown:false,del:false,home:false,end:false,space:false,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab",32:"space"},stopKeyUp:function(e){var t=e.getKey();if(t>=37&&t<=40){e.stopEvent()}},destroy:function(){this.disable()},enable:function(){if(this.disabled){if(Ext.isSafari2){this.el.on("keyup",this.stopKeyUp,this)}this.el.on(this.isKeydown()?"keydown":"keypress",this.relay,this);this.disabled=false}},disable:function(){if(!this.disabled){if(Ext.isSafari2){this.el.un("keyup",this.stopKeyUp,this)}this.el.un(this.isKeydown()?"keydown":"keypress",this.relay,this);this.disabled=true}},setDisabled:function(e){this[e?"disable":"enable"]()},isKeydown:function(){return this.forceKeyDown||Ext.EventManager.useKeydown}};Ext.KeyMap=function(e,t,n){this.el=Ext.get(e);this.eventName=n||"keydown";this.bindings=[];if(t){this.addBinding(t)}this.enable()};Ext.KeyMap.prototype={stopEvent:false,addBinding:function(e){if(Ext.isArray(e)){Ext.each(e,function(e){this.addBinding(e)},this);return}var t=e.key,n=e.fn||e.handler,r=e.scope;if(e.stopEvent){this.stopEvent=e.stopEvent}if(typeof t=="string"){var i=[];var s=t.toUpperCase();for(var o=0,u=s.length;o<u;o++){i.push(s.charCodeAt(o))}t=i}var a=Ext.isArray(t);var f=function(i){if(this.checkModifiers(e,i)){var s=i.getKey();if(a){for(var o=0,u=t.length;o<u;o++){if(t[o]==s){if(this.stopEvent){i.stopEvent()}n.call(r||window,s,i);return}}}else{if(s==t){if(this.stopEvent){i.stopEvent()}n.call(r||window,s,i)}}}};this.bindings.push(f)},checkModifiers:function(e,t){var n,r,i=["shift","ctrl","alt"];for(var s=0,o=i.length;s<o;++s){r=i[s];n=e[r];if(!(n===undefined||n===t[r+"Key"])){return false}}return true},on:function(e,t,n){var r,i,s,o;if(typeof e=="object"&&!Ext.isArray(e)){r=e.key;i=e.shift;s=e.ctrl;o=e.alt}else{r=e}this.addBinding({key:r,shift:i,ctrl:s,alt:o,fn:t,scope:n})},handleKeyDown:function(e){if(this.enabled){var t=this.bindings;for(var n=0,r=t.length;n<r;n++){t[n].call(this,e)}}},isEnabled:function(){return this.enabled},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.handleKeyDown,this);this.enabled=true}},disable:function(){if(this.enabled){this.el.removeListener(this.eventName,this.handleKeyDown,this);this.enabled=false}},setDisabled:function(e){this[e?"disable":"enable"]()}};Ext.util.TextMetrics=function(){var e;return{measure:function(t,n,r){if(!e){e=Ext.util.TextMetrics.Instance(t,r)}e.bind(t);e.setFixedWidth(r||"auto");return e.getSize(n)},createInstance:function(e,t){return Ext.util.TextMetrics.Instance(e,t)}}}();Ext.util.TextMetrics.Instance=function(e,t){var n=new Ext.Element(document.createElement("div"));document.body.appendChild(n.dom);n.position("absolute");n.setLeftTop(-1e3,-1e3);n.hide();if(t){n.setWidth(t)}var r={getSize:function(e){n.update(e);var t=n.getSize();n.update("");return t},bind:function(e){n.setStyle(Ext.fly(e).getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(e){n.setWidth(e)},getWidth:function(e){n.dom.style.width="auto";return this.getSize(e).width},getHeight:function(e){return this.getSize(e).height}};r.bind(e);return r};Ext.Element.addMethods({getTextWidth:function(e,t,n){return Ext.util.TextMetrics.measure(this.dom,Ext.value(e,this.dom.innerHTML,true)).width.constrain(t||0,n||1e6)}});Ext.util.Cookies={set:function(e,t){var n=arguments;var r=arguments.length;var i=r>2?n[2]:null;var s=r>3?n[3]:"/";var o=r>4?n[4]:null;var u=r>5?n[5]:false;document.cookie=e+"="+escape(t)+(i===null?"":"; expires="+i.toGMTString())+(s===null?"":"; path="+s)+(o===null?"":"; domain="+o)+(u===true?"; secure":"")},get:function(e){var t=e+"=";var n=t.length;var r=document.cookie.length;var i=0;var s=0;while(i<r){s=i+n;if(document.cookie.substring(i,s)==t){return Ext.util.Cookies.getCookieVal(s)}i=document.cookie.indexOf(" ",i)+1;if(i===0){break}}return null},clear:function(e){if(Ext.util.Cookies.get(e)){document.cookie=e+"="+"; expires=Thu, 01-Jan-70 00:00:01 GMT"}},getCookieVal:function(e){var t=document.cookie.indexOf(";",e);if(t==-1){t=document.cookie.length}return unescape(document.cookie.substring(e,t))}};Ext.handleError=function(e){throw e};Ext.Error=function(e){this.message=this.lang[e]?this.lang[e]:e};Ext.Error.prototype=new Error;Ext.apply(Ext.Error.prototype,{lang:{},name:"Ext.Error",getName:function(){return this.name},getMessage:function(){return this.message},toJson:function(){return Ext.encode(this)}});Ext.ComponentMgr=function(){var e=new Ext.util.MixedCollection;var t={};var n={};return{register:function(t){e.add(t)},unregister:function(t){e.remove(t)},get:function(t){return e.get(t)},onAvailable:function(t,n,r){e.on("add",function(i,s){if(s.id==t){n.call(r||s,s);e.un("add",n,r)}})},all:e,types:t,ptypes:n,isRegistered:function(e){return t[e]!==undefined},isPluginRegistered:function(e){return n[e]!==undefined},registerType:function(e,n){t[e]=n;n.xtype=e},create:function(e,n){return e.render?e:new t[e.xtype||n](e)},registerPlugin:function(e,t){n[e]=t;t.ptype=e},createPlugin:function(e,t){var r=n[e.ptype||t];if(r.init){return r}else{return new r(e)}}}}();Ext.reg=Ext.ComponentMgr.registerType;Ext.preg=Ext.ComponentMgr.registerPlugin;Ext.create=Ext.ComponentMgr.create;Ext.Component=function(e){e=e||{};if(e.initialConfig){if(e.isAction){this.baseAction=e}e=e.initialConfig}else if(e.tagName||e.dom||Ext.isString(e)){e={applyTo:e,id:e.id||e}}this.initialConfig=e;Ext.apply(this,e);this.addEvents("added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave");this.getId();Ext.ComponentMgr.register(this);Ext.Component.superclass.constructor.call(this);if(this.baseAction){this.baseAction.addComponent(this)}this.initComponent();if(this.plugins){if(Ext.isArray(this.plugins)){for(var t=0,n=this.plugins.length;t<n;t++){this.plugins[t]=this.initPlugin(this.plugins[t])}}else{this.plugins=this.initPlugin(this.plugins)}}if(this.stateful!==false){this.initState()}if(this.applyTo){this.applyToMarkup(this.applyTo);delete this.applyTo}else if(this.renderTo){this.render(this.renderTo);delete this.renderTo}};Ext.Component.AUTO_ID=1e3;Ext.extend(Ext.Component,Ext.util.Observable,{disabled:false,hidden:false,autoEl:"div",disabledClass:"x-item-disabled",allowDomMove:true,autoShow:false,hideMode:"display",hideParent:false,rendered:false,tplWriteMode:"overwrite",bubbleEvents:[],ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initPlugin:function(e){if(e.ptype&&!Ext.isFunction(e.init)){e=Ext.ComponentMgr.createPlugin(e)}else if(Ext.isString(e)){e=Ext.ComponentMgr.createPlugin({ptype:e})}e.init(this);return e},initComponent:function(){if(this.listeners){this.on(this.listeners);delete this.listeners}this.enableBubble(this.bubbleEvents)},render:function(e,t){if(!this.rendered&&this.fireEvent("beforerender",this)!==false){if(!e&&this.el){this.el=Ext.get(this.el);e=this.el.dom.parentNode;this.allowDomMove=false}this.container=Ext.get(e);if(this.ctCls){this.container.addClass(this.ctCls)}this.rendered=true;if(t!==undefined){if(Ext.isNumber(t)){t=this.container.dom.childNodes[t]}else{t=Ext.getDom(t)}}this.onRender(this.container,t||null);if(this.autoShow){this.el.removeClass(["x-hidden","x-hide-"+this.hideMode])}if(this.cls){this.el.addClass(this.cls);delete this.cls}if(this.style){this.el.applyStyles(this.style);delete this.style}if(this.overCls){this.el.addClassOnOver(this.overCls)}this.fireEvent("render",this);var n=this.getContentTarget();if(this.html){n.update(Ext.DomHelper.markup(this.html));delete this.html}if(this.contentEl){var r=Ext.getDom(this.contentEl);Ext.fly(r).removeClass(["x-hidden","x-hide-display"]);n.appendChild(r)}if(this.tpl){if(!this.tpl.compile){this.tpl=new Ext.XTemplate(this.tpl)}if(this.data){this.tpl[this.tplWriteMode](n,this.data);delete this.data}}this.afterRender(this.container);if(this.hidden){this.doHide()}if(this.disabled){this.disable(true)}if(this.stateful!==false){this.initStateEvents()}this.fireEvent("afterrender",this)}return this},update:function(e,t,n){var r=this.getContentTarget();if(this.tpl&&typeof e!=="string"){this.tpl[this.tplWriteMode](r,e||{})}else{var i=Ext.isObject(e)?Ext.DomHelper.markup(e):e;r.update(i,t,n)}},onAdded:function(e,t){this.ownerCt=e;this.initRef();this.fireEvent("added",this,e,t)},onRemoved:function(){this.removeRef();this.fireEvent("removed",this,this.ownerCt);delete this.ownerCt},initRef:function(){if(this.ref&&!this.refOwner){var e=this.ref.split("/"),t=e.length,n=0,r=this;while(r&&n<t){r=r.ownerCt;++n}if(r){r[this.refName=e[--n]]=this;this.refOwner=r}}},removeRef:function(){if(this.refOwner&&this.refName){delete this.refOwner[this.refName];delete this.refOwner}},initState:function(){if(Ext.state.Manager){var e=this.getStateId();if(e){var t=Ext.state.Manager.get(e);if(t){if(this.fireEvent("beforestaterestore",this,t)!==false){this.applyState(Ext.apply({},t));this.fireEvent("staterestore",this,t)}}}}},getStateId:function(){return this.stateId||(/^(ext-comp-|ext-gen)/.test(String(this.id))?null:this.id)},initStateEvents:function(){if(this.stateEvents){for(var e=0,t;t=this.stateEvents[e];e++){this.on(t,this.saveState,this,{delay:100})}}},applyState:function(e){if(e){Ext.apply(this,e)}},getState:function(){return null},saveState:function(){if(Ext.state.Manager&&this.stateful!==false){var e=this.getStateId();if(e){var t=this.getState();if(this.fireEvent("beforestatesave",this,t)!==false){Ext.state.Manager.set(e,t);this.fireEvent("statesave",this,t)}}}},applyToMarkup:function(e){this.allowDomMove=false;this.el=Ext.get(e);this.render(this.el.dom.parentNode)},addClass:function(e){if(this.el){this.el.addClass(e)}else{this.cls=this.cls?this.cls+" "+e:e}return this},removeClass:function(e){if(this.el){this.el.removeClass(e)}else if(this.cls){this.cls=this.cls.split(" ").remove(e).join(" ")}return this},onRender:function(e,t){if(!this.el&&this.autoEl){if(Ext.isString(this.autoEl)){this.el=document.createElement(this.autoEl)}else{var n=document.createElement("div");Ext.DomHelper.overwrite(n,this.autoEl);this.el=n.firstChild}if(!this.el.id){this.el.id=this.getId()}}if(this.el){this.el=Ext.get(this.el);if(this.allowDomMove!==false){e.dom.insertBefore(this.el.dom,t);if(n){Ext.removeNode(n);n=null}}}},getAutoCreate:function(){var e=Ext.isObject(this.autoCreate)?this.autoCreate:Ext.apply({},this.defaultAutoCreate);if(this.id&&!e.id){e.id=this.id}return e},afterRender:Ext.emptyFn,destroy:function(){if(!this.isDestroyed){if(this.fireEvent("beforedestroy",this)!==false){this.destroying=true;this.beforeDestroy();if(this.ownerCt&&this.ownerCt.remove){this.ownerCt.remove(this,false)}if(this.rendered){this.el.remove();if(this.actionMode=="container"||this.removeMode=="container"){this.container.remove()}}if(this.focusTask&&this.focusTask.cancel){this.focusTask.cancel()}this.onDestroy();Ext.ComponentMgr.unregister(this);this.fireEvent("destroy",this);this.purgeListeners();this.destroying=false;this.isDestroyed=true}}},deleteMembers:function(){var e=arguments;for(var t=0,n=e.length;t<n;++t){delete this[e[t]]}},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getContentTarget:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+ ++Ext.Component.AUTO_ID)},getItemId:function(){return this.itemId||this.getId()},focus:function(e,t){if(t){this.focusTask=new Ext.util.DelayedTask(this.focus,this,[e,false]);this.focusTask.delay(Ext.isNumber(t)?t:10);return this}if(this.rendered&&!this.isDestroyed){this.el.focus();if(e===true){this.el.dom.select()}}return this},blur:function(){if(this.rendered){this.el.blur()}return this},disable:function(e){if(this.rendered){this.onDisable()}this.disabled=true;if(e!==true){this.fireEvent("disable",this)}return this},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.el.dom.disabled=true},enable:function(){if(this.rendered){this.onEnable()}this.disabled=false;this.fireEvent("enable",this);return this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.el.dom.disabled=false},setDisabled:function(e){return this[e?"disable":"enable"]()},show:function(){if(this.fireEvent("beforeshow",this)!==false){this.hidden=false;if(this.autoRender){this.render(Ext.isBoolean(this.autoRender)?Ext.getBody():this.autoRender)}if(this.rendered){this.onShow()}this.fireEvent("show",this)}return this},onShow:function(){this.getVisibilityEl().removeClass("x-hide-"+this.hideMode)},hide:function(){if(this.fireEvent("beforehide",this)!==false){this.doHide();this.fireEvent("hide",this)}return this},doHide:function(){this.hidden=true;if(this.rendered){this.onHide()}},onHide:function(){this.getVisibilityEl().addClass("x-hide-"+this.hideMode)},getVisibilityEl:function(){return this.hideParent?this.container:this.getActionEl()},setVisible:function(e){return this[e?"show":"hide"]()},isVisible:function(){return this.rendered&&this.getVisibilityEl().isVisible()},cloneConfig:function(e){e=e||{};var t=e.id||Ext.id();var n=Ext.applyIf(e,this.initialConfig);n.id=t;return new this.constructor(n)},getXType:function(){return this.constructor.xtype},isXType:function(e,t){if(Ext.isFunction(e)){e=e.xtype}else if(Ext.isObject(e)){e=e.constructor.xtype}return!t?("/"+this.getXTypes()+"/").indexOf("/"+e+"/")!=-1:this.constructor.xtype==e},getXTypes:function(){var e=this.constructor;if(!e.xtypes){var t=[],n=this;while(n&&n.constructor.xtype){t.unshift(n.constructor.xtype);n=n.constructor.superclass}e.xtypeChain=t;e.xtypes=t.join("/")}return e.xtypes},findParentBy:function(e){for(var t=this.ownerCt;t!=null&&!e(t,this);t=t.ownerCt);return t||null},findParentByType:function(e,t){return this.findParentBy(function(n){return n.isXType(e,t)})},bubble:function(e,t,n){var r=this;while(r){if(e.apply(t||r,n||[r])===false){break}r=r.ownerCt}return this},getPositionEl:function(){return this.positionEl||this.el},purgeListeners:function(){Ext.Component.superclass.purgeListeners.call(this);if(this.mons){this.on("beforedestroy",this.clearMons,this,{single:true})}},clearMons:function(){Ext.each(this.mons,function(e){e.item.un(e.ename,e.fn,e.scope)},this);this.mons=[]},createMons:function(){if(!this.mons){this.mons=[];this.on("beforedestroy",this.clearMons,this,{single:true})}},mon:function(e,t,n,r,i){this.createMons();if(Ext.isObject(t)){var s=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/;var o=t;for(var u in o){if(s.test(u)){continue}if(Ext.isFunction(o[u])){this.mons.push({item:e,ename:u,fn:o[u],scope:o.scope});e.on(u,o[u],o.scope,o)}else{this.mons.push({item:e,ename:u,fn:o[u],scope:o.scope});e.on(u,o[u])}}return}this.mons.push({item:e,ename:t,fn:n,scope:r});e.on(t,n,r,i)},mun:function(e,t,n,r){var i,s;this.createMons();for(var o=0,u=this.mons.length;o<u;++o){s=this.mons[o];if(e===s.item&&t==s.ename&&n===s.fn&&r===s.scope){this.mons.splice(o,1);e.un(t,n,r);i=true;break}}return i},nextSibling:function(){if(this.ownerCt){var e=this.ownerCt.items.indexOf(this);if(e!=-1&&e+1<this.ownerCt.items.getCount()){return this.ownerCt.items.itemAt(e+1)}}return null},previousSibling:function(){if(this.ownerCt){var e=this.ownerCt.items.indexOf(this);if(e>0){return this.ownerCt.items.itemAt(e-1)}}return null},getBubbleTarget:function(){return this.ownerCt}});Ext.reg("component",Ext.Component);Ext.Action=Ext.extend(Object,{constructor:function(e){this.initialConfig=e;this.itemId=e.itemId=e.itemId||e.id||Ext.id();this.items=[]},isAction:true,setText:function(e){this.initialConfig.text=e;this.callEach("setText",[e])},getText:function(){return this.initialConfig.text},setIconClass:function(e){this.initialConfig.iconCls=e;this.callEach("setIconClass",[e])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(e){this.initialConfig.disabled=e;this.callEach("setDisabled",[e])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(e){this.initialConfig.hidden=e;this.callEach("setVisible",[!e])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(e,t){this.initialConfig.handler=e;this.initialConfig.scope=t;this.callEach("setHandler",[e,t])},each:function(e,t){Ext.each(this.items,e,t)},callEach:function(e,t){var n=this.items;for(var r=0,i=n.length;r<i;r++){n[r][e].apply(n[r],t)}},addComponent:function(e){this.items.push(e);e.on("destroy",this.removeComponent,this)},removeComponent:function(e){this.items.remove(e)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}});(function(){Ext.Layer=function(e,t){e=e||{};var n=Ext.DomHelper,r=e.parentEl,i=r?Ext.getDom(r):document.body;if(t){this.dom=Ext.getDom(t)}if(!this.dom){var s=e.dh||{tag:"div",cls:"x-layer"};this.dom=n.append(i,s)}if(e.cls){this.addClass(e.cls)}this.constrain=e.constrain!==false;this.setVisibilityMode(Ext.Element.VISIBILITY);if(e.id){this.id=this.dom.id=e.id}else{this.id=Ext.id(this.dom)}this.zindex=e.zindex||this.getZIndex();this.position("absolute",this.zindex);if(e.shadow){this.shadowOffset=e.shadowOffset||4;this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:e.shadow})}else{this.shadowOffset=0}this.useShim=e.shim!==false&&Ext.useShims;this.useDisplay=e.useDisplay;this.hide()};var e=Ext.Element.prototype;var t=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle("z-index"),10)||11e3},getShim:function(){if(!this.useShim){return null}if(this.shim){return this.shim}var e=t.shift();if(!e){e=this.createShim();e.enableDisplayMode("block");e.dom.style.display="none";e.dom.style.visibility="visible"}var n=this.dom.parentNode;if(e.dom.parentNode!=n){n.insertBefore(e.dom,this.dom)}e.setStyle("z-index",this.getZIndex()-2);this.shim=e;return e},hideShim:function(){if(this.shim){this.shim.setDisplayed(false);t.push(this.shim);delete this.shim}},disableShadow:function(){if(this.shadow){this.shadowDisabled=true;this.shadow.hide();this.lastShadowOffset=this.shadowOffset;this.shadowOffset=0}},enableShadow:function(e){if(this.shadow){this.shadowDisabled=false;if(Ext.isDefined(this.lastShadowOffset)){this.shadowOffset=this.lastShadowOffset;delete this.lastShadowOffset}if(e){this.sync(true)}}},sync:function(e){var t=this.shadow;if(!this.updating&&this.isVisible()&&(t||this.useShim)){var n=this.getShim(),r=this.getWidth(),i=this.getHeight(),s=this.getLeft(true),o=this.getTop(true);if(t&&!this.shadowDisabled){if(e&&!t.isVisible()){t.show(this)}else{t.realign(s,o,r,i)}if(n){if(e){n.show()}var u=t.el.getXY(),a=n.dom.style,f=t.el.getSize();a.left=u[0]+"px";a.top=u[1]+"px";a.width=f.width+"px";a.height=f.height+"px"}}else if(n){if(e){n.show()}n.setSize(r,i);n.setLeftTop(s,o)}}},destroy:function(){this.hideShim();if(this.shadow){this.shadow.hide()}this.removeAllListeners();Ext.removeNode(this.dom);delete this.dom},remove:function(){this.destroy()},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(e){if(this.shadow){this.shadow.hide()}this.hideShim()},constrainXY:function(){if(this.constrain){var t=Ext.lib.Dom.getViewWidth(),n=Ext.lib.Dom.getViewHeight();var r=Ext.getDoc().getScroll();var i=this.getXY();var s=i[0],o=i[1];var u=this.shadowOffset;var a=this.dom.offsetWidth+u,f=this.dom.offsetHeight+u;var l=false;if(s+a>t+r.left){s=t-a-u;l=true}if(o+f>n+r.top){o=n-f-u;l=true}if(s<r.left){s=r.left;l=true}if(o<r.top){o=r.top;l=true}if(l){if(this.avoidY){var c=this.avoidY;if(o<=c&&o+f>=c){o=c-f-5}}i=[s,o];this.storeXY(i);e.setXY.call(this,i);this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},isVisible:function(){return this.visible},showAction:function(){this.visible=true;if(this.useDisplay===true){this.setDisplayed("")}else if(this.lastXY){e.setXY.call(this,this.lastXY)}else if(this.lastLT){e.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])}},hideAction:function(){this.visible=false;if(this.useDisplay===true){this.setDisplayed(false)}else{this.setLeftTop(-1e4,-1e4)}},setVisible:function(t,n,r,i,s){if(t){this.showAction()}if(n&&t){var o=function(){this.sync(true);if(i){i()}}.createDelegate(this);e.setVisible.call(this,true,true,r,o,s)}else{if(!t){this.hideUnders(true)}var o=i;if(n){o=function(){this.hideAction();if(i){i()}}.createDelegate(this)}e.setVisible.call(this,t,n,r,o,s);if(t){this.sync(true)}else if(!n){this.hideAction()}}return this},storeXY:function(e){delete this.lastLT;this.lastXY=e},storeLeftTop:function(e,t){delete this.lastXY;this.lastLT=[e,t]},beforeFx:function(){this.beforeAction();return Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible())},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(t){this.storeLeftTop(t,this.getTop(true));e.setLeft.apply(this,arguments);this.sync();return this},setTop:function(t){this.storeLeftTop(this.getLeft(true),t);e.setTop.apply(this,arguments);this.sync();return this},setLeftTop:function(t,n){this.storeLeftTop(t,n);e.setLeftTop.apply(this,arguments);this.sync();return this},setXY:function(t,n,r,i,s){this.fixDisplay();this.beforeAction();this.storeXY(t);var o=this.createCB(i);e.setXY.call(this,t,n,r,o,s);if(!n){o()}return this},createCB:function(e){var t=this;return function(){t.constrainXY();t.sync(true);if(e){e()}}},setX:function(e,t,n,r,i){this.setXY([e,this.getY()],t,n,r,i);return this},setY:function(e,t,n,r,i){this.setXY([this.getX(),e],t,n,r,i);return this},setSize:function(t,n,r,i,s,o){this.beforeAction();var u=this.createCB(s);e.setSize.call(this,t,n,r,i,u,o);if(!r){u()}return this},setWidth:function(t,n,r,i,s){this.beforeAction();var o=this.createCB(i);e.setWidth.call(this,t,n,r,o,s);if(!n){o()}return this},setHeight:function(t,n,r,i,s){this.beforeAction();var o=this.createCB(i);e.setHeight.call(this,t,n,r,o,s);if(!n){o()}return this},setBounds:function(t,n,r,i,s,o,u,a){this.beforeAction();var f=this.createCB(u);if(!s){this.storeXY([t,n]);e.setXY.call(this,[t,n]);e.setSize.call(this,r,i,s,o,f,a);f()}else{e.setBounds.call(this,t,n,r,i,s,o,f,a)}return this},setZIndex:function(e){this.zindex=e;this.setStyle("z-index",e+2);if(this.shadow){this.shadow.setZIndex(e+1)}if(this.shim){this.shim.setStyle("z-index",e)}return this}})})();Ext.Shadow=function(e){Ext.apply(this,e);if(typeof this.mode!="string"){this.mode=this.defaultMode}var t=this.offset,n={h:0},r=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":n.w=0;n.l=n.t=t;n.t-=1;if(Ext.isIE9m){n.l-=this.offset+r;n.t-=this.offset+r;n.w-=r;n.h-=r;n.t+=1}break;case"sides":n.w=t*2;n.l=-t;n.t=t-1;if(Ext.isIE9m){n.l-=this.offset-r;n.t-=this.offset+r;n.l+=1;n.w-=(this.offset-r)*2;n.w-=r+1;n.h-=1}break;case"frame":n.w=n.h=t*2;n.l=n.t=-t;n.t+=1;n.h-=2;if(Ext.isIE9m){n.l-=this.offset-r;n.t-=this.offset-r;n.l+=1;n.w-=this.offset+r+1;n.h-=this.offset+r;n.h+=1}break}this.adjusts=n};Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(e){e=Ext.get(e);if(!this.el){this.el=Ext.Shadow.Pool.pull();if(this.el.dom.nextSibling!=e.dom){this.el.insertBefore(e)}}this.el.setStyle("z-index",this.zIndex||parseInt(e.getStyle("z-index"),10)-1);if(Ext.isIE9m){this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")"}this.realign(e.getLeft(true),e.getTop(true),e.getWidth(),e.getHeight());this.el.dom.style.display="block"},isVisible:function(){return this.el?true:false},realign:function(e,t,n,r){if(!this.el){return}var i=this.adjusts,s=this.el.dom,o=s.style,u=0,a=n+i.w,f=r+i.h,l=a+"px",c=f+"px",h,p;o.left=e+i.l+"px";o.top=t+i.t+"px";if(o.width!=l||o.height!=c){o.width=l;o.height=c;if(!Ext.isIE9m){h=s.childNodes;p=Math.max(0,a-12)+"px";h[0].childNodes[1].style.width=p;h[1].childNodes[1].style.width=p;h[2].childNodes[1].style.width=p;h[1].style.height=Math.max(0,f-12)+"px"}}},hide:function(){if(this.el){this.el.dom.style.display="none";Ext.Shadow.Pool.push(this.el);delete this.el}},setZIndex:function(e){this.zIndex=e;if(this.el){this.el.setStyle("z-index",e)}}};Ext.Shadow.Pool=function(){var e=[],t=Ext.isIE9m?'<div class="x-ie-shadow"></div>':'<div class="x-shadow"><div class="xst"><div class="xstl"></div><div class="xstc"></div><div class="xstr"></div></div><div class="xsc"><div class="xsml"></div><div class="xsmc"></div><div class="xsmr"></div></div><div class="xsb"><div class="xsbl"></div><div class="xsbc"></div><div class="xsbr"></div></div></div>';return{pull:function(){var n=e.shift();if(!n){n=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,t));n.autoBoxAdjust=false}return n},push:function(t){e.push(t)}}}();Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this);this.addEvents("resize","move")},boxReady:false,deferHeight:false,setSize:function(e,t){if(typeof e=="object"){t=e.height;e=e.width}if(Ext.isDefined(e)&&Ext.isDefined(this.boxMinWidth)&&e<this.boxMinWidth){e=this.boxMinWidth}if(Ext.isDefined(t)&&Ext.isDefined(this.boxMinHeight)&&t<this.boxMinHeight){t=this.boxMinHeight}if(Ext.isDefined(e)&&Ext.isDefined(this.boxMaxWidth)&&e>this.boxMaxWidth){e=this.boxMaxWidth}if(Ext.isDefined(t)&&Ext.isDefined(this.boxMaxHeight)&&t>this.boxMaxHeight){t=this.boxMaxHeight}if(!this.boxReady){this.width=e;this.height=t;return this}if(this.cacheSizes!==false&&this.lastSize&&this.lastSize.width==e&&this.lastSize.height==t){return this}this.lastSize={width:e,height:t};var n=this.adjustSize(e,t),r=n.width,i=n.height,s;if(r!==undefined||i!==undefined){s=this.getResizeEl();if(!this.deferHeight&&r!==undefined&&i!==undefined){s.setSize(r,i)}else if(!this.deferHeight&&i!==undefined){s.setHeight(i)}else if(r!==undefined){s.setWidth(r)}this.onResize(r,i,e,t);this.fireEvent("resize",this,r,i,e,t)}return this},setWidth:function(e){return this.setSize(e)},setHeight:function(e){return this.setSize(undefined,e)},getSize:function(){return this.getResizeEl().getSize()},getWidth:function(){return this.getResizeEl().getWidth()},getHeight:function(){return this.getResizeEl().getHeight()},getOuterSize:function(){var e=this.getResizeEl();return{width:e.getWidth()+e.getMargins("lr"),height:e.getHeight()+e.getMargins("tb")}},getPosition:function(e){var t=this.getPositionEl();if(e===true){return[t.getLeft(true),t.getTop(true)]}return this.xy||t.getXY()},getBox:function(e){var t=this.getPosition(e);var n=this.getSize();n.x=t[0];n.y=t[1];return n},updateBox:function(e){this.setSize(e.width,e.height);this.setPagePosition(e.x,e.y);return this},getResizeEl:function(){return this.resizeEl||this.el},setAutoScroll:function(e){if(this.rendered){this.getContentTarget().setOverflow(e?"auto":"")}this.autoScroll=e;return this},setPosition:function(e,t){if(e&&typeof e[1]=="number"){t=e[1];e=e[0]}this.x=e;this.y=t;if(!this.boxReady){return this}var n=this.adjustPosition(e,t);var r=n.x,i=n.y;var s=this.getPositionEl();if(r!==undefined||i!==undefined){if(r!==undefined&&i!==undefined){s.setLeftTop(r,i)}else if(r!==undefined){s.setLeft(r)}else if(i!==undefined){s.setTop(i)}this.onPosition(r,i);this.fireEvent("move",this,r,i)}return this},setPagePosition:function(e,t){if(e&&typeof e[1]=="number"){t=e[1];e=e[0]}this.pageX=e;this.pageY=t;if(!this.boxReady){return}if(e===undefined||t===undefined){return}var n=this.getPositionEl().translatePoints(e,t);this.setPosition(n.left,n.top);return this},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this);if(this.resizeEl){this.resizeEl=Ext.get(this.resizeEl)}if(this.positionEl){this.positionEl=Ext.get(this.positionEl)}this.boxReady=true;Ext.isDefined(this.autoScroll)&&this.setAutoScroll(this.autoScroll);this.setSize(this.width,this.height);if(this.x||this.y){this.setPosition(this.x,this.y)}else if(this.pageX||this.pageY){this.setPagePosition(this.pageX,this.pageY)}},syncSize:function(){delete this.lastSize;this.setSize(this.autoWidth?undefined:this.getResizeEl().getWidth(),this.autoHeight?undefined:this.getResizeEl().getHeight());return this},onResize:function(e,t,n,r){},onPosition:function(e,t){},adjustSize:function(e,t){if(this.autoWidth){e="auto"}if(this.autoHeight){t="auto"}return{width:e,height:t}},adjustPosition:function(e,t){return{x:e,y:t}}});Ext.reg("box",Ext.BoxComponent);Ext.Spacer=Ext.extend(Ext.BoxComponent,{autoEl:"div"});Ext.reg("spacer",Ext.Spacer);Ext.SplitBar=function(e,t,n,r,i){this.el=Ext.get(e,true);this.el.unselectable();this.resizingEl=Ext.get(t,true);this.orientation=n||Ext.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2e3;this.animate=false;this.useShim=false;this.shim=null;if(!i){this.proxy=Ext.SplitBar.createProxy(this.orientation)}else{this.proxy=Ext.get(i).dom}this.dd=new Ext.dd.DDProxy(this.el.dom.id,"XSplitBars",{dragElId:this.proxy.id});this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this);this.dd.endDrag=this.onEndProxyDrag.createDelegate(this);this.dragSpecs={};this.adapter=new Ext.SplitBar.BasicLayoutAdapter;this.adapter.init(this);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.placement=r||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT);this.el.addClass("x-splitbar-h")}else{this.placement=r||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM);this.el.addClass("x-splitbar-v")}this.addEvents("resize","moved","beforeresize","beforeapply");Ext.SplitBar.superclass.constructor.call(this)};Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(e,t){this.fireEvent("beforeresize",this);this.overlay=Ext.DomHelper.append(document.body,{cls:"x-drag-overlay",html:"&#160;"},true);this.overlay.unselectable();this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();Ext.get(this.proxy).setDisplayed("block");var n=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();var r=n-this.activeMinSize;var i=Math.max(this.activeMaxSize-n,0);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.dd.resetConstraints();this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?r:i,this.placement==Ext.SplitBar.LEFT?i:r,this.tickSize);this.dd.setYConstraint(0,0)}else{this.dd.resetConstraints();this.dd.setXConstraint(0,0);this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?r:i,this.placement==Ext.SplitBar.TOP?i:r,this.tickSize)}this.dragSpecs.startSize=n;this.dragSpecs.startPoint=[e,t];Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,e,t)},onEndProxyDrag:function(e){Ext.get(this.proxy).setDisplayed(false);var t=Ext.lib.Event.getXY(e);if(this.overlay){Ext.destroy(this.overlay);delete this.overlay}var n;if(this.orientation==Ext.SplitBar.HORIZONTAL){n=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?t[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-t[0])}else{n=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?t[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-t[1])}n=Math.min(Math.max(n,this.activeMinSize),this.activeMaxSize);if(n!=this.dragSpecs.startSize){if(this.fireEvent("beforeapply",this,n)!==false){this.adapter.setElementSize(this,n);this.fireEvent("moved",this,n);this.fireEvent("resize",this,n)}}},getAdapter:function(){return this.adapter},setAdapter:function(e){this.adapter=e;this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(e){this.minSize=e},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(e){this.maxSize=e},setCurrentSize:function(e){var t=this.animate;this.animate=false;this.adapter.setElementSize(this,e);this.animate=t},destroy:function(e){Ext.destroy(this.shim,Ext.get(this.proxy));this.dd.unreg();if(e){this.el.remove()}this.purgeListeners()}});Ext.SplitBar.createProxy=function(e){var t=new Ext.Element(document.createElement("div"));document.body.appendChild(t.dom);t.unselectable();var n="x-splitbar-proxy";t.addClass(n+" "+(e==Ext.SplitBar.HORIZONTAL?n+"-h":n+"-v"));return t.dom};Ext.SplitBar.BasicLayoutAdapter=function(){};Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(e){},getElementSize:function(e){if(e.orientation==Ext.SplitBar.HORIZONTAL){return e.resizingEl.getWidth()}else{return e.resizingEl.getHeight()}},setElementSize:function(e,t,n){if(e.orientation==Ext.SplitBar.HORIZONTAL){if(!e.animate){e.resizingEl.setWidth(t);if(n){n(e,t)}}else{e.resizingEl.setWidth(t,true,.1,n,"easeOut")}}else{if(!e.animate){e.resizingEl.setHeight(t);if(n){n(e,t)}}else{e.resizingEl.setHeight(t,true,.1,n,"easeOut")}}}};Ext.SplitBar.AbsoluteLayoutAdapter=function(e){this.basic=new Ext.SplitBar.BasicLayoutAdapter;this.container=Ext.get(e)};Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(e){this.basic.init(e)},getElementSize:function(e){return this.basic.getElementSize(e)},setElementSize:function(e,t,n){this.basic.setElementSize(e,t,this.moveSplitter.createDelegate(this,[e]))},moveSplitter:function(e){var t=Ext.SplitBar;switch(e.placement){case t.LEFT:e.el.setX(e.resizingEl.getRight());break;case t.RIGHT:e.el.setStyle("right",this.container.getWidth()-e.resizingEl.getLeft()+"px");break;case t.TOP:e.el.setY(e.resizingEl.getBottom());break;case t.BOTTOM:e.el.setY(e.resizingEl.getTop()-e.el.getHeight());break}}};Ext.SplitBar.VERTICAL=1;Ext.SplitBar.HORIZONTAL=2;Ext.SplitBar.LEFT=1;Ext.SplitBar.RIGHT=2;Ext.SplitBar.TOP=3;Ext.SplitBar.BOTTOM=4;Ext.Container=Ext.extend(Ext.BoxComponent,{bufferResize:50,autoDestroy:true,forceLayout:false,defaultType:"panel",resizeEvent:"resize",bubbleEvents:["add","remove"],initComponent:function(){Ext.Container.superclass.initComponent.call(this);this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var e=this.items;if(e){delete this.items;this.add(e)}},initItems:function(){if(!this.items){this.items=new Ext.util.MixedCollection(false,this.getComponentId);this.getLayout()}},setLayout:function(e){if(this.layout&&this.layout!=e){this.layout.setContainer(null)}this.layout=e;this.initItems();e.setContainer(this)},afterRender:function(){Ext.Container.superclass.afterRender.call(this);if(!this.layout){this.layout="auto"}if(Ext.isObject(this.layout)&&!this.layout.layout){this.layoutConfig=this.layout;this.layout=this.layoutConfig.type}if(Ext.isString(this.layout)){this.layout=new(Ext.Container.LAYOUTS[this.layout.toLowerCase()])(this.layoutConfig)}this.setLayout(this.layout);if(this.activeItem!==undefined&&this.layout.setActiveItem){var e=this.activeItem;delete this.activeItem;this.layout.setActiveItem(e)}if(!this.ownerCt){this.doLayout(false,true)}if(this.monitorResize===true){Ext.EventManager.onWindowResize(this.doLayout,this,[false])}},getLayoutTarget:function(){return this.el},getComponentId:function(e){return e.getItemId()},add:function(e){this.initItems();var t=arguments.length>1;if(t||Ext.isArray(e)){var n=[];Ext.each(t?arguments:e,function(e){n.push(this.add(e))},this);return n}var r=this.lookupComponent(this.applyDefaults(e));var i=this.items.length;if(this.fireEvent("beforeadd",this,r,i)!==false&&this.onBeforeAdd(r)!==false){this.items.add(r);r.onAdded(this,i);this.onAdd(r);this.fireEvent("add",this,r,i)}return r},onAdd:function(e){},onAdded:function(e,t){this.ownerCt=e;this.initRef();this.cascade(function(e){e.initRef()});this.fireEvent("added",this,e,t)},insert:function(e,t){var n=arguments,r=n.length,i=[],s,o;this.initItems();if(r>2){for(s=r-1;s>=1;--s){i.push(this.insert(e,n[s]))}return i}o=this.lookupComponent(this.applyDefaults(t));e=Math.min(e,this.items.length);if(this.fireEvent("beforeadd",this,o,e)!==false&&this.onBeforeAdd(o)!==false){if(o.ownerCt==this){this.items.remove(o)}this.items.insert(e,o);o.onAdded(this,e);this.onAdd(o);this.fireEvent("add",this,o,e)}return o},applyDefaults:function(e){var t=this.defaults;if(t){if(Ext.isFunction(t)){t=t.call(this,e)}if(Ext.isString(e)){e=Ext.ComponentMgr.get(e);Ext.apply(e,t)}else if(!e.events){Ext.applyIf(e.isAction?e.initialConfig:e,t)}else{Ext.apply(e,t)}}return e},onBeforeAdd:function(e){if(e.ownerCt){e.ownerCt.remove(e,false)}if(this.hideBorders===true){e.border=e.border===true}},remove:function(e,t){this.initItems();var n=this.getComponent(e);if(n&&this.fireEvent("beforeremove",this,n)!==false){this.doRemove(n,t);this.fireEvent("remove",this,n)}return n},onRemove:function(e){},doRemove:function(e,t){var n=this.layout,r=n&&this.rendered;if(r){n.onRemove(e)}this.items.remove(e);e.onRemoved();this.onRemove(e);if(t===true||t!==false&&this.autoDestroy){e.destroy()}if(r){n.afterRemove(e)}},removeAll:function(e){this.initItems();var t,n=[],r=[];this.items.each(function(e){n.push(e)});for(var i=0,s=n.length;i<s;++i){t=n[i];this.remove(t,e);if(t.ownerCt!==this){r.push(t)}}return r},getComponent:function(e){if(Ext.isObject(e)){e=e.getItemId()}return this.items.get(e)},lookupComponent:function(e){if(Ext.isString(e)){return Ext.ComponentMgr.get(e)}else if(!e.events){return this.createComponent(e)}return e},createComponent:function(e,t){if(e.render){return e}var n=Ext.create(Ext.apply({ownerCt:this},e),t||this.defaultType);delete n.initialConfig.ownerCt;delete n.ownerCt;return n},canLayout:function(){var e=this.getVisibilityEl();return e&&e.dom&&!e.isStyle("display","none")},doLayout:function(e,t){var n=this.rendered,r=t||this.forceLayout;if(this.collapsed||!this.canLayout()){this.deferLayout=this.deferLayout||!e;if(!r){return}e=e&&!this.deferLayout}else{delete this.deferLayout}if(n&&this.layout){this.layout.layout()}if(e!==true&&this.items){var i=this.items.items;for(var s=0,o=i.length;s<o;s++){var u=i[s];if(u.doLayout){u.doLayout(false,r)}}}if(n){this.onLayout(e,r)}this.hasLayout=true;delete this.forceLayout},onLayout:Ext.emptyFn,shouldBufferLayout:function(){var e=this.hasLayout;if(this.ownerCt){return e?!this.hasLayoutPending():false}return e},hasLayoutPending:function(){var e=false;this.ownerCt.bubble(function(t){if(t.layoutPending){e=true;return false}});return e},onShow:function(){Ext.Container.superclass.onShow.call(this);if(Ext.isDefined(this.deferLayout)){delete this.deferLayout;this.doLayout(true)}},getLayout:function(){if(!this.layout){var e=new Ext.layout.AutoLayout(this.layoutConfig);this.setLayout(e)}return this.layout},beforeDestroy:function(){var e;if(this.items){while(e=this.items.first()){this.doRemove(e,true)}}if(this.monitorResize){Ext.EventManager.removeResizeListener(this.doLayout,this)}Ext.destroy(this.layout);Ext.Container.superclass.beforeDestroy.call(this)},cascade:function(e,t,n){if(e.apply(t||this,n||[this])!==false){if(this.items){var r=this.items.items;for(var i=0,s=r.length;i<s;i++){if(r[i].cascade){r[i].cascade(e,t,n)}else{e.apply(t||r[i],n||[r[i]])}}}}return this},findById:function(e){var t=null,n=this;this.cascade(function(r){if(n!=r&&r.id===e){t=r;return false}});return t},findByType:function(e,t){return this.findBy(function(n){return n.isXType(e,t)})},find:function(e,t){return this.findBy(function(n){return n[e]===t})},findBy:function(e,t){var n=[],r=this;this.cascade(function(i){if(r!=i&&e.call(t||i,i,r)===true){n.push(i)}});return n},get:function(e){return this.getComponent(e)}});Ext.Container.LAYOUTS={};Ext.reg("container",Ext.Container);Ext.layout.ContainerLayout=Ext.extend(Object,{monitorResize:false,activeItem:null,constructor:function(e){this.id=Ext.id(null,"ext-layout-");Ext.apply(this,e)},type:"container",IEMeasureHack:function(e,t){var n=e.dom.childNodes,r=n.length,i,s=[],o,u,a;for(u=0;u<r;u++){i=n[u];o=Ext.get(i);if(o){s[u]=o.getStyle("display");o.setStyle({display:"none"})}}a=e?e.getViewSize(t):{};for(u=0;u<r;u++){i=n[u];o=Ext.get(i);if(o){o.setStyle({display:s[u]})}}return a},getLayoutTargetSize:Ext.EmptyFn,layout:function(){var e=this.container,t=e.getLayoutTarget();if(!(this.hasLayout||Ext.isEmpty(this.targetCls))){t.addClass(this.targetCls)}this.onLayout(e,t);e.fireEvent("afterlayout",e,this)},onLayout:function(e,t){this.renderAll(e,t)},isValidParent:function(e,t){return t&&e.getPositionEl().dom.parentNode==(t.dom||t)},renderAll:function(e,t){var n=e.items.items,r,i,s=n.length;for(r=0;r<s;r++){i=n[r];if(i&&(!i.rendered||!this.isValidParent(i,t))){this.renderItem(i,r,t)}}},renderItem:function(e,t,n){if(e){if(!e.rendered){e.render(n,t);this.configureItem(e)}else if(!this.isValidParent(e,n)){if(Ext.isNumber(t)){t=n.dom.childNodes[t]}n.dom.insertBefore(e.getPositionEl().dom,t||null);e.container=n;this.configureItem(e)}}},getRenderedItems:function(e){var t=e.getLayoutTarget(),n=e.items.items,r=n.length,i,s,o=[];for(i=0;i<r;i++){if((s=n[i]).rendered&&this.isValidParent(s,t)&&s.shouldLayout!==false){o.push(s)}}return o},configureItem:function(e){if(this.extraCls){var t=e.getPositionEl?e.getPositionEl():e;t.addClass(this.extraCls)}if(e.doLayout&&this.forceLayout){e.doLayout()}if(this.renderHidden&&e!=this.activeItem){e.hide()}},onRemove:function(e){if(this.activeItem==e){delete this.activeItem}if(e.rendered&&this.extraCls){var t=e.getPositionEl?e.getPositionEl():e;t.removeClass(this.extraCls)}},afterRemove:function(e){if(e.removeRestore){e.removeMode="container";delete e.removeRestore}},onResize:function(){var e=this.container,t;if(e.collapsed){return}if(t=e.bufferResize&&e.shouldBufferLayout()){if(!this.resizeTask){this.resizeTask=new Ext.util.DelayedTask(this.runLayout,this);this.resizeBuffer=Ext.isNumber(t)?t:50}e.layoutPending=true;this.resizeTask.delay(this.resizeBuffer)}else{this.runLayout()}},runLayout:function(){var e=this.container;this.layout();e.onLayout();delete e.layoutPending},setContainer:function(e){if(this.monitorResize&&e!=this.container){var t=this.container;if(t){t.un(t.resizeEvent,this.onResize,this)}if(e){e.on(e.resizeEvent,this.onResize,this)}}this.container=e},parseMargins:function(e){if(Ext.isNumber(e)){e=e.toString()}var t=e.split(" "),n=t.length;if(n==1){t[1]=t[2]=t[3]=t[0]}else if(n==2){t[2]=t[0];t[3]=t[1]}else if(n==3){t[3]=t[1]}return{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0}},fieldTpl:function(){var e=new Ext.Template('<div class="x-form-item {itemCls}" tabIndex="-1">','<label for="{id}" style="{labelStyle}" class="x-form-item-label">{label}{labelSeparator}</label>','<div class="x-form-element" id="x-form-el-{id}" style="{elementStyle}">','</div><div class="{clearCls}"></div>',"</div>");e.disableFormats=true;return e.compile()}(),destroy:function(){if(this.resizeTask&&this.resizeTask.cancel){this.resizeTask.cancel()}if(this.container){this.container.un(this.container.resizeEvent,this.onResize,this)}if(!Ext.isEmpty(this.targetCls)){var e=this.container.getLayoutTarget();if(e){e.removeClass(this.targetCls)}}}});Ext.layout.AutoLayout=Ext.extend(Ext.layout.ContainerLayout,{type:"auto",monitorResize:true,onLayout:function(e,t){Ext.layout.AutoLayout.superclass.onLayout.call(this,e,t);var n=this.getRenderedItems(e),r=n.length,i,s;for(i=0;i<r;i++){s=n[i];if(s.doLayout){s.doLayout(true)}}}});Ext.Container.LAYOUTS["auto"]=Ext.layout.AutoLayout;Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:"fit",getLayoutTargetSize:function(){var e=this.container.getLayoutTarget();if(!e){return{}}return e.getStyleSize()},onLayout:function(e,t){Ext.layout.FitLayout.superclass.onLayout.call(this,e,t);if(!e.collapsed){this.setItemSize(this.activeItem||e.items.itemAt(0),this.getLayoutTargetSize())}},setItemSize:function(e,t){if(e&&t.height>0){e.setSize(t)}}});Ext.Container.LAYOUTS["fit"]=Ext.layout.FitLayout;Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:false,layoutOnCardChange:false,renderHidden:true,type:"card",setActiveItem:function(e){var t=this.activeItem,n=this.container;e=n.getComponent(e);if(e&&t!=e){if(t){t.hide();if(t.hidden!==true){return false}t.fireEvent("deactivate",t)}var r=e.doLayout&&(this.layoutOnCardChange||!e.rendered);this.activeItem=e;delete e.deferLayout;e.show();this.layout();if(r){e.doLayout()}e.fireEvent("activate",e)}},renderAll:function(e,t){if(this.deferredRender){this.renderItem(this.activeItem,undefined,t)}else{Ext.layout.CardLayout.superclass.renderAll.call(this,e,t)}}});Ext.Container.LAYOUTS["card"]=Ext.layout.CardLayout;Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,getLayoutTargetSize:function(){var e=this.container.getLayoutTarget(),t={};if(e){t=e.getViewSize();if(Ext.isIE9m&&Ext.isStrict&&t.width==0){t=e.getStyleSize()}t.width-=e.getPadding("lr");t.height-=e.getPadding("tb")}return t},onLayout:function(e,t){Ext.layout.AnchorLayout.superclass.onLayout.call(this,e,t);var n=this.getLayoutTargetSize(),r=n.width,i=n.height,s=t.getStyle("overflow"),o=this.getRenderedItems(e),u=o.length,a=[],f,l,c,h,p,d,v,m,g=0,y,b;if(r<20&&i<20){return}if(e.anchorSize){if(typeof e.anchorSize=="number"){l=e.anchorSize}else{l=e.anchorSize.width;c=e.anchorSize.height}}else{l=e.initialConfig.width;c=e.initialConfig.height}for(y=0;y<u;y++){h=o[y];b=h.getPositionEl();if(!h.anchor&&h.items&&!Ext.isNumber(h.width)&&!(Ext.isIE6&&Ext.isStrict)){h.anchor=this.defaultAnchor}if(h.anchor){p=h.anchorSpec;if(!p){m=h.anchor.split(" ");h.anchorSpec=p={right:this.parseAnchor(m[0],h.initialConfig.width,l),bottom:this.parseAnchor(m[1],h.initialConfig.height,c)}}d=p.right?this.adjustWidthAnchor(p.right(r)-b.getMargins("lr"),h):undefined;v=p.bottom?this.adjustHeightAnchor(p.bottom(i)-b.getMargins("tb"),h):undefined;if(d||v){a.push({component:h,width:d||undefined,height:v||undefined})}}}for(y=0,u=a.length;y<u;y++){f=a[y];f.component.setSize(f.width,f.height)}if(s&&s!="hidden"&&!this.adjustmentPass){var w=this.getLayoutTargetSize();if(w.width!=n.width||w.height!=n.height){this.adjustmentPass=true;this.onLayout(e,t)}}delete this.adjustmentPass},parseAnchor:function(e,t,n){if(e&&e!="none"){var r;if(this.parseAnchorRE.test(e)){var i=n-t;return function(e){if(e!==r){r=e;return e-i}}}else if(e.indexOf("%")!=-1){var s=parseFloat(e.replace("%",""))*.01;return function(e){if(e!==r){r=e;return Math.floor(e*s)}}}else{e=parseInt(e,10);if(!isNaN(e)){return function(t){if(t!==r){r=t;return t+e}}}}}return false},adjustWidthAnchor:function(e,t){return e},adjustHeightAnchor:function(e,t){return e}});Ext.Container.LAYOUTS["anchor"]=Ext.layout.AnchorLayout;Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:"column",extraCls:"x-column",scrollOffset:0,targetCls:"x-column-layout-ct",isValidParent:function(e,t){return this.innerCt&&e.getPositionEl().dom.parentNode==this.innerCt.dom},getLayoutTargetSize:function(){var e=this.container.getLayoutTarget(),t;if(e){t=e.getViewSize();if(Ext.isIE9m&&Ext.isStrict&&t.width==0){t=e.getStyleSize()}t.width-=e.getPadding("lr");t.height-=e.getPadding("tb")}return t},renderAll:function(e,t){if(!this.innerCt){this.innerCt=t.createChild({cls:"x-column-inner"});this.innerCt.createChild({cls:"x-clear"})}Ext.layout.ColumnLayout.superclass.renderAll.call(this,e,this.innerCt)},onLayout:function(e,t){var n=e.items.items,r=n.length,i,s,o,u=[];this.renderAll(e,t);var a=this.getLayoutTargetSize();if(Ext.isIE9m&&a.width<1&&a.height<1){return}var f=a.width-this.scrollOffset,l=a.height,c=f;this.innerCt.setWidth(f);for(s=0;s<r;s++){i=n[s];o=i.getPositionEl().getMargins("lr");u[s]=o;if(!i.columnWidth){c-=i.getWidth()+o}}c=c<0?0:c;for(s=0;s<r;s++){i=n[s];o=u[s];if(i.columnWidth){i.setSize(Math.floor(i.columnWidth*c)-o)}}if(Ext.isIE9m){if(s=t.getStyle("overflow")&&s!="hidden"&&!this.adjustmentPass){var h=this.getLayoutTargetSize();if(h.width!=a.width){this.adjustmentPass=true;this.onLayout(e,t)}}}delete this.adjustmentPass}});Ext.Container.LAYOUTS["column"]=Ext.layout.ColumnLayout;Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,rendered:false,type:"border",targetCls:"x-border-layout-ct",getLayoutTargetSize:function(){var e=this.container.getLayoutTarget();return e?e.getViewSize():{}},onLayout:function(e,t){var n,r,i,s,o=e.items.items,u=o.length;if(!this.rendered){n=[];for(r=0;r<u;r++){i=o[r];s=i.region;if(i.collapsed){n.push(i)}i.collapsed=false;if(!i.rendered){i.render(t,r);i.getPositionEl().addClass("x-border-panel")}this[s]=s!="center"&&i.split?new Ext.layout.BorderLayout.SplitRegion(this,i.initialConfig,s):new Ext.layout.BorderLayout.Region(this,i.initialConfig,s);this[s].render(t,i)}this.rendered=true}var a=this.getLayoutTargetSize();if(a.width<20||a.height<20){if(n){this.restoreCollapsed=n}return}else if(this.restoreCollapsed){n=this.restoreCollapsed;delete this.restoreCollapsed}var f=a.width,l=a.height,c=f,h=l,p=0,d=0,v=this.north,m=this.south,g=this.west,y=this.east,i=this.center,b,w,E,S;if(!i&&Ext.layout.BorderLayout.WARN!==false){throw"No center region defined in BorderLayout "+e.id}if(v&&v.isVisible()){b=v.getSize();w=v.getMargins();b.width=f-(w.left+w.right);b.x=w.left;b.y=w.top;p=b.height+b.y+w.bottom;h-=p;v.applyLayout(b)}if(m&&m.isVisible()){b=m.getSize();w=m.getMargins();b.width=f-(w.left+w.right);b.x=w.left;S=b.height+w.top+w.bottom;b.y=l-S+w.top;h-=S;m.applyLayout(b)}if(g&&g.isVisible()){b=g.getSize();w=g.getMargins();b.height=h-(w.top+w.bottom);b.x=w.left;b.y=p+w.top;E=b.width+w.left+w.right;d+=E;c-=E;g.applyLayout(b)}if(y&&y.isVisible()){b=y.getSize();w=y.getMargins();b.height=h-(w.top+w.bottom);E=b.width+w.left+w.right;b.x=f-E+w.left;b.y=p+w.top;c-=E;y.applyLayout(b)}if(i){w=i.getMargins();var x={x:d+w.left,y:p+w.top,width:c-(w.left+w.right),height:h-(w.top+w.bottom)};i.applyLayout(x)}if(n){for(r=0,u=n.length;r<u;r++){n[r].collapse(false)}}if(Ext.isIE9m&&Ext.isStrict){t.repaint()}if(r=t.getStyle("overflow")&&r!="hidden"&&!this.adjustmentPass){var T=this.getLayoutTargetSize();if(T.width!=a.width||T.height!=a.height){this.adjustmentPass=true;this.onLayout(e,t)}}delete this.adjustmentPass},destroy:function(){var e=["north","south","east","west"],t,n;for(t=0;t<e.length;t++){n=this[e[t]];if(n){if(n.destroy){n.destroy()}else if(n.split){n.split.destroy(true)}}}Ext.layout.BorderLayout.superclass.destroy.call(this)}});Ext.layout.BorderLayout.Region=function(e,t,n){Ext.apply(this,t);this.layout=e;this.position=n;this.state={};if(typeof this.margins=="string"){this.margins=this.layout.parseMargins(this.margins)}this.margins=Ext.applyIf(this.margins||{},this.defaultMargins);if(this.collapsible){if(typeof this.cmargins=="string"){this.cmargins=this.layout.parseMargins(this.cmargins)}if(this.collapseMode=="mini"&&!this.cmargins){this.cmargins={left:0,top:0,right:0,bottom:0}}else{this.cmargins=Ext.applyIf(this.cmargins||{},n=="north"||n=="south"?this.defaultNSCMargins:this.defaultEWCMargins)}}};Ext.layout.BorderLayout.Region.prototype={collapsible:false,split:false,floatable:true,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},floatingZIndex:100,isCollapsed:false,render:function(e,t){this.panel=t;t.el.enableDisplayMode();this.targetEl=e;this.el=t.el;var n=t.getState,r=this.position;t.getState=function(){return Ext.apply(n.call(t)||{},this.state)}.createDelegate(this);if(r!="center"){t.allowQueuedExpand=false;t.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this});if(this.collapsible||this.floatable){t.collapseEl="el";t.slideAnchor=this.getSlideAnchor()}if(t.tools&&t.tools.toggle){t.tools.toggle.addClass("x-tool-collapse-"+r);t.tools.toggle.addClassOnOver("x-tool-collapse-"+r+"-over")}}},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var e=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');e.disableFormats=true;e.compile();Ext.layout.BorderLayout.Region.prototype.toolTemplate=e}this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"});this.collapsedEl.enableDisplayMode("block");if(this.collapseMode=="mini"){this.collapsedEl.addClass("x-layout-cmini-"+this.position);this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"});this.miniCollapsedEl.addClassOnOver("x-layout-mini-over");this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:true})}else{if(this.collapsible!==false&&!this.hideCollapseTool){var t=this.expandToolEl=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},true);t.addClassOnOver("x-tool-expand-"+this.position+"-over");t.on("click",this.onExpandClick,this,{stopEvent:true})}if(this.floatable!==false||this.titleCollapse){this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this)}}}return this.collapsedEl},onExpandClick:function(e){if(this.isSlid){this.panel.expand(false)}else{this.panel.expand()}},onCollapseClick:function(e){this.panel.collapse()},beforeCollapse:function(e,t){this.lastAnim=t;if(this.splitEl){this.splitEl.hide()}this.getCollapsedEl().show();var n=this.panel.getEl();this.originalZIndex=n.getStyle("z-index");n.setStyle("z-index",100);this.isCollapsed=true;this.layout.layout()},onCollapse:function(e){this.panel.el.setStyle("z-index",1);if(this.lastAnim===false||this.panel.animCollapse===false){this.getCollapsedEl().dom.style.visibility="visible"}else{this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:.2})}this.state.collapsed=true;this.panel.saveState()},beforeExpand:function(e){if(this.isSlid){this.afterSlideIn()}var t=this.getCollapsedEl();this.el.show();if(this.position=="east"||this.position=="west"){this.panel.setSize(undefined,t.getHeight())}else{this.panel.setSize(t.getWidth(),undefined)}t.hide();t.dom.style.visibility="hidden";this.panel.el.setStyle("z-index",this.floatingZIndex)},onExpand:function(){this.isCollapsed=false;if(this.splitEl){this.splitEl.show()}this.layout.layout();this.panel.el.setStyle("z-index",this.originalZIndex);this.state.collapsed=false;this.panel.saveState()},collapseClick:function(e){if(this.isSlid){e.stopPropagation();this.slideIn()}else{e.stopPropagation();this.slideOut()}},onHide:function(){if(this.isCollapsed){this.getCollapsedEl().hide()}else if(this.splitEl){this.splitEl.hide()}},onShow:function(){if(this.isCollapsed){this.getCollapsedEl().show()}else if(this.splitEl){this.splitEl.show()}},isVisible:function(){return!this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(e){this.panel=e},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(e){var t=this.getCollapsedEl();t.setLeftTop(e.x,e.y);t.setSize(e.width,e.height)},applyLayout:function(e){if(this.isCollapsed){this.applyLayoutCollapsed(e)}else{this.panel.setPosition(e.x,e.y);this.panel.setSize(e.width,e.height)}},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){if(this.autoHide!==false){if(!this.autoHideHd){this.autoHideSlideTask=new Ext.util.DelayedTask(this.slideIn,this);this.autoHideHd={mouseout:function(e){if(!e.within(this.el,true)){this.autoHideSlideTask.delay(500)}},mouseover:function(e){this.autoHideSlideTask.cancel()},scope:this}}this.el.on(this.autoHideHd);this.collapsedEl.on(this.autoHideHd)}},clearAutoHide:function(){if(this.autoHide!==false){this.el.un("mouseout",this.autoHideHd.mouseout);this.el.un("mouseover",this.autoHideHd.mouseover);this.collapsedEl.un("mouseout",this.autoHideHd.mouseout);this.collapsedEl.un("mouseover",this.autoHideHd.mouseover)}},clearMonitor:function(){Ext.getDoc().un("click",this.slideInIf,this)},slideOut:function(){if(this.isSlid||this.el.hasActiveFx()){return}this.isSlid=true;var e=this.panel.tools,t,n;if(e&&e.toggle){e.toggle.hide()}this.el.show();n=this.panel.collapsed;this.panel.collapsed=false;if(this.position=="east"||this.position=="west"){t=this.panel.deferHeight;this.panel.deferHeight=false;this.panel.setSize(undefined,this.collapsedEl.getHeight());this.panel.deferHeight=t}else{this.panel.setSize(this.collapsedEl.getWidth(),undefined)}this.panel.collapsed=n;this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top];this.el.alignTo(this.collapsedEl,this.getCollapseAnchor());this.el.setStyle("z-index",this.floatingZIndex+2);this.panel.el.replaceClass("x-panel-collapsed","x-panel-floating");if(this.animFloat!==false){this.beforeSlide();this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide();this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)},scope:this,block:true})}else{this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)}},afterSlideIn:function(){this.clearAutoHide();this.isSlid=false;this.clearMonitor();this.el.setStyle("z-index","");this.panel.el.replaceClass("x-panel-floating","x-panel-collapsed");this.el.dom.style.left=this.restoreLT[0];this.el.dom.style.top=this.restoreLT[1];var e=this.panel.tools;if(e&&e.toggle){e.toggle.show()}},slideIn:function(e){if(!this.isSlid||this.el.hasActiveFx()){Ext.callback(e);return}this.isSlid=false;if(this.animFloat!==false){this.beforeSlide();this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide();this.afterSlide();this.afterSlideIn();Ext.callback(e)},scope:this,block:true})}else{this.el.hide();this.afterSlideIn()}},slideInIf:function(e){if(!e.within(this.el)){this.slideIn()}},anchors:{west:"left",east:"right",north:"top",south:"bottom"},sanchors:{west:"l",east:"r",north:"t",south:"b"},canchors:{west:"tl-tr",east:"tr-tl",north:"tl-bl",south:"bl-tl"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){var e=this.cmargins;switch(this.position){case"west":return[0,0];break;case"east":return[0,0];break;case"north":return[0,0];break;case"south":return[0,0];break}},getExpandAdj:function(){var e=this.collapsedEl,t=this.cmargins;switch(this.position){case"west":return[-(t.right+e.getWidth()+t.left),0];break;case"east":return[t.right+e.getWidth()+t.left,0];break;case"north":return[0,-(t.top+t.bottom+e.getHeight())];break;case"south":return[0,t.top+t.bottom+e.getHeight()];break}},destroy:function(){if(this.autoHideSlideTask&&this.autoHideSlideTask.cancel){this.autoHideSlideTask.cancel()}Ext.destroyMembers(this,"miniCollapsedEl","collapsedEl","expandToolEl")}};Ext.layout.BorderLayout.SplitRegion=function(e,t,n){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,e,t,n);this.applyLayout=this.applyFns[n]};Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:false,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(e){if(this.isCollapsed){return this.applyLayoutCollapsed(e)}var t=this.splitEl.dom,n=t.style;this.panel.setPosition(e.x,e.y);var r=t.offsetWidth;n.left=e.x+e.width-r+"px";n.top=e.y+"px";n.height=Math.max(0,e.height)+"px";this.panel.setSize(e.width-r,e.height)},east:function(e){if(this.isCollapsed){return this.applyLayoutCollapsed(e)}var t=this.splitEl.dom,n=t.style;var r=t.offsetWidth;this.panel.setPosition(e.x+r,e.y);n.left=e.x+"px";n.top=e.y+"px";n.height=Math.max(0,e.height)+"px";this.panel.setSize(e.width-r,e.height)},north:function(e){if(this.isCollapsed){return this.applyLayoutCollapsed(e)}var t=this.splitEl.dom,n=t.style;var r=t.offsetHeight;this.panel.setPosition(e.x,e.y);n.left=e.x+"px";n.top=e.y+e.height-r+"px";n.width=Math.max(0,e.width)+"px";this.panel.setSize(e.width,e.height-r)},south:function(e){if(this.isCollapsed){return this.applyLayoutCollapsed(e)}var t=this.splitEl.dom,n=t.style;var r=t.offsetHeight;this.panel.setPosition(e.x,e.y+r);n.left=e.x+"px";n.top=e.y+"px";n.width=Math.max(0,e.width)+"px";this.panel.setSize(e.width,e.height-r)}},render:function(e,t){Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,e,t);var n=this.position;this.splitEl=e.createChild({cls:"x-layout-split x-layout-split-"+n,html:"&#160;",id:this.panel.id+"-xsplit"});if(this.collapseMode=="mini"){this.miniSplitEl=this.splitEl.createChild({cls:"x-layout-mini x-layout-mini-"+n,html:"&#160;"});this.miniSplitEl.addClassOnOver("x-layout-mini-over");this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:true})}var r=this.splitSettings[n];this.split=new Ext.SplitBar(this.splitEl.dom,t.el,r.orientation);this.split.tickSize=this.tickSize;this.split.placement=r.placement;this.split.getMaximumSize=this[r.maxFn].createDelegate(this);this.split.minSize=this.minSize||this[r.minProp];this.split.on("beforeapply",this.onSplitMove,this);this.split.useShim=this.useShim===true;this.maxSize=this.maxSize||this[r.maxProp];if(t.hidden){this.splitEl.hide()}if(this.useSplitTips){this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip}if(this.collapsible){this.splitEl.on("dblclick",this.onCollapseClick,this)}},getSize:function(){if(this.isCollapsed){return this.collapsedEl.getSize()}var e=this.panel.getSize();if(this.position=="north"||this.position=="south"){e.height+=this.splitEl.dom.offsetHeight}else{e.width+=this.splitEl.dom.offsetWidth}return e},getHMaxSize:function(){var e=this.maxSize||1e4;var t=this.layout.center;return Math.min(e,this.el.getWidth()+t.el.getWidth()-t.getMinWidth())},getVMaxSize:function(){var e=this.maxSize||1e4;var t=this.layout.center;return Math.min(e,this.el.getHeight()+t.el.getHeight()-t.getMinHeight())},onSplitMove:function(e,t){var n=this.panel.getSize();this.lastSplitSize=t;if(this.position=="north"||this.position=="south"){this.panel.setSize(n.width,t);this.state.height=t}else{this.panel.setSize(t,n.height);this.state.width=t}this.layout.layout();this.panel.saveState();return false},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl);Ext.layout.BorderLayout.SplitRegion.superclass.destroy.call(this)}});Ext.Container.LAYOUTS["border"]=Ext.layout.BorderLayout;Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:":",trackLabels:true,type:"form",onRemove:function(e){Ext.layout.FormLayout.superclass.onRemove.call(this,e);if(this.trackLabels){e.un("show",this.onFieldShow,this);e.un("hide",this.onFieldHide,this)}var t=e.getPositionEl(),n=e.getItemCt&&e.getItemCt();if(e.rendered&&n){if(t&&t.dom){t.insertAfter(n)}Ext.destroy(n);Ext.destroyMembers(e,"label","itemCt");if(e.customItemCt){Ext.destroyMembers(e,"getItemCt","customItemCt")}}},setContainer:function(e){Ext.layout.FormLayout.superclass.setContainer.call(this,e);e.labelAlign=e.labelAlign||this.labelAlign;if(e.labelAlign){e.addClass("x-form-label-"+e.labelAlign)}if(e.hideLabels||this.hideLabels){Ext.apply(this,{labelStyle:"display:none",elementStyle:"padding-left:0;",labelAdjust:0})}else{this.labelSeparator=Ext.isDefined(e.labelSeparator)?e.labelSeparator:this.labelSeparator;e.labelWidth=e.labelWidth||this.labelWidth||100;if(Ext.isNumber(e.labelWidth)){var t=e.labelPad||this.labelPad;t=Ext.isNumber(t)?t:5;Ext.apply(this,{labelAdjust:e.labelWidth+t,labelStyle:"width:"+e.labelWidth+"px;",elementStyle:"padding-left:"+(e.labelWidth+t)+"px"})}if(e.labelAlign=="top"){Ext.apply(this,{labelStyle:"width:auto;",labelAdjust:0,elementStyle:"padding-left:0;"})}}},isHide:function(e){return e.hideLabel||this.container.hideLabels},onFieldShow:function(e){e.getItemCt().removeClass("x-hide-"+e.hideMode);if(e.isComposite){e.doLayout()}},onFieldHide:function(e){e.getItemCt().addClass("x-hide-"+e.hideMode)},getLabelStyle:function(e){var t="",n=[this.labelStyle,e];for(var r=0,i=n.length;r<i;++r){if(n[r]){t+=n[r];if(t.substr(-1,1)!=";"){t+=";"}}}return t},renderItem:function(e,t,n){if(e&&(e.isFormField||e.fieldLabel)&&e.inputType!="hidden"){var r=this.getTemplateArgs(e);if(Ext.isNumber(t)){t=n.dom.childNodes[t]||null}if(t){e.itemCt=this.fieldTpl.insertBefore(t,r,true)}else{e.itemCt=this.fieldTpl.append(n,r,true)}if(!e.getItemCt){Ext.apply(e,{getItemCt:function(){return e.itemCt},customItemCt:true})}e.label=e.getItemCt().child("label.x-form-item-label");if(!e.rendered){e.render("x-form-el-"+e.id)}else if(!this.isValidParent(e,n)){Ext.fly("x-form-el-"+e.id).appendChild(e.getPositionEl())}if(this.trackLabels){if(e.hidden){this.onFieldHide(e)}e.on({scope:this,show:this.onFieldShow,hide:this.onFieldHide})}this.configureItem(e)}else{Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)}},getTemplateArgs:function(e){var t=!e.fieldLabel||e.hideLabel,n=(e.itemCls||this.container.itemCls||"")+(e.hideLabel?" x-hide-label":"");if(Ext.isIE9&&Ext.isIEQuirks&&e instanceof Ext.form.TextField){n+=" x-input-wrapper"}return{id:e.id,label:e.fieldLabel,itemCls:n,clearCls:e.clearCls||"x-form-clear-left",labelStyle:this.getLabelStyle(e.labelStyle),elementStyle:this.elementStyle||"",labelSeparator:t?"":Ext.isDefined(e.labelSeparator)?e.labelSeparator:this.labelSeparator}},adjustWidthAnchor:function(e,t){if(t.label&&!this.isHide(t)&&this.container.labelAlign!="top"){var n=Ext.isIE6||Ext.isIEQuirks;return e-this.labelAdjust+(n?-3:0)}return e},adjustHeightAnchor:function(e,t){if(t.label&&!this.isHide(t)&&this.container.labelAlign=="top"){return e-t.label.getHeight()}return e},isValidParent:function(e,t){return t&&this.container.getEl().contains(e.getPositionEl())}});Ext.Container.LAYOUTS["form"]=Ext.layout.FormLayout;Ext.layout.AccordionLayout=Ext.extend(Ext.layout.FitLayout,{fill:true,autoWidth:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:false,animate:false,sequence:false,activeOnTop:false,type:"accordion",renderItem:function(e){if(this.animate===false){e.animCollapse=false}e.collapsible=true;if(this.autoWidth){e.autoWidth=true}if(this.titleCollapse){e.titleCollapse=true}if(this.hideCollapseTool){e.hideCollapseTool=true}if(this.collapseFirst!==undefined){e.collapseFirst=this.collapseFirst}if(!this.activeItem&&!e.collapsed){this.setActiveItem(e,true)}else if(this.activeItem&&this.activeItem!=e){e.collapsed=true}Ext.layout.AccordionLayout.superclass.renderItem.apply(this,arguments);e.header.addClass("x-accordion-hd");e.on("beforeexpand",this.beforeExpand,this)},onRemove:function(e){Ext.layout.AccordionLayout.superclass.onRemove.call(this,e);if(e.rendered){e.header.removeClass("x-accordion-hd")}e.un("beforeexpand",this.beforeExpand,this)},beforeExpand:function(e,t){var n=this.activeItem;if(n){if(this.sequence){delete this.activeItem;if(!n.collapsed){n.collapse({callback:function(){e.expand(t||true)},scope:this});return false}}else{n.collapse(this.animate)}}this.setActive(e);if(this.activeOnTop){e.el.dom.parentNode.insertBefore(e.el.dom,e.el.dom.parentNode.firstChild)}this.layout()},setItemSize:function(e,t){if(this.fill&&e){var n=0,r,i=this.getRenderedItems(this.container),s=i.length,o;for(r=0;r<s;r++){if((o=i[r])!=e&&!o.hidden){n+=o.header.getHeight()}}t.height-=n;e.setSize(t)}},setActiveItem:function(e){this.setActive(e,true)},setActive:function(e,t){var n=this.activeItem;e=this.container.getComponent(e);if(n!=e){if(e.rendered&&e.collapsed&&t){e.expand()}else{if(n){n.fireEvent("deactivate",n)}this.activeItem=e;e.fireEvent("activate",e)}}}});Ext.Container.LAYOUTS.accordion=Ext.layout.AccordionLayout;Ext.layout.Accordion=Ext.layout.AccordionLayout;Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:false,type:"table",targetCls:"x-table-layout-ct",tableAttrs:null,setContainer:function(e){Ext.layout.TableLayout.superclass.setContainer.call(this,e);this.currentRow=0;this.currentColumn=0;this.cells=[]},onLayout:function(e,t){var n=e.items.items,r=n.length,i,s;if(!this.table){t.addClass("x-table-layout-ct");this.table=t.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,true)}this.renderAll(e,t)},getRow:function(e){var t=this.table.tBodies[0].childNodes[e];if(!t){t=document.createElement("tr");this.table.tBodies[0].appendChild(t)}return t},getNextCell:function(e){var t=this.getNextNonSpan(this.currentColumn,this.currentRow);var n=this.currentColumn=t[0],r=this.currentRow=t[1];for(var i=r;i<r+(e.rowspan||1);i++){if(!this.cells[i]){this.cells[i]=[]}for(var s=n;s<n+(e.colspan||1);s++){this.cells[i][s]=true}}var o=document.createElement("td");if(e.cellId){o.id=e.cellId}var u="x-table-layout-cell";if(e.cellCls){u+=" "+e.cellCls}o.className=u;if(e.colspan){o.colSpan=e.colspan}if(e.rowspan){o.rowSpan=e.rowspan}this.getRow(r).appendChild(o);return o},getNextNonSpan:function(e,t){var n=this.columns;while(n&&e>=n||this.cells[t]&&this.cells[t][e]){if(n&&e>=n){t++;e=0}else{e++}}return[e,t]},renderItem:function(e,t,n){if(!this.table){this.table=n.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,true)}if(e&&!e.rendered){e.render(this.getNextCell(e));this.configureItem(e)}else if(e&&!this.isValidParent(e,n)){var r=this.getNextCell(e);r.insertBefore(e.getPositionEl().dom,null);e.container=Ext.get(r);this.configureItem(e)}},isValidParent:function(e,t){return e.getPositionEl().up("table",5).dom.parentNode===(t.dom||t)},destroy:function(){delete this.table;Ext.layout.TableLayout.superclass.destroy.call(this)}});Ext.Container.LAYOUTS["table"]=Ext.layout.TableLayout;Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:"x-abs-layout-item",type:"absolute",onLayout:function(e,t){t.position();this.paddingLeft=t.getPadding("l");this.paddingTop=t.getPadding("t");Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,e,t)},adjustWidthAnchor:function(e,t){return e?e-t.getPosition(true)[0]+this.paddingLeft:e},adjustHeightAnchor:function(e,t){return e?e-t.getPosition(true)[1]+this.paddingTop:e}});Ext.Container.LAYOUTS["absolute"]=Ext.layout.AbsoluteLayout;Ext.layout.BoxLayout=Ext.extend(Ext.layout.ContainerLayout,{defaultMargins:{left:0,top:0,right:0,bottom:0},padding:"0",pack:"start",monitorResize:true,type:"box",scrollOffset:0,extraCls:"x-box-item",targetCls:"x-box-layout-ct",innerCls:"x-box-inner",constructor:function(e){Ext.layout.BoxLayout.superclass.constructor.call(this,e);if(Ext.isString(this.defaultMargins)){this.defaultMargins=this.parseMargins(this.defaultMargins)}var t=this.overflowHandler;if(typeof t=="string"){t={type:t}}var n="none";if(t&&t.type!=undefined){n=t.type}var r=Ext.layout.boxOverflow[n];if(r[this.type]){r=r[this.type]}this.overflowHandler=new r(this,t)},onLayout:function(e,t){Ext.layout.BoxLayout.superclass.onLayout.call(this,e,t);var n=this.getLayoutTargetSize(),r=this.getVisibleItems(e),i=this.calculateChildBoxes(r,n),s=i.boxes,o=i.meta;if(n.width>0){var u=this.overflowHandler,a=o.tooNarrow?"handleOverflow":"clearOverflow";var f=u[a](i,n);if(f){if(f.targetSize){n=f.targetSize}if(f.recalculate){r=this.getVisibleItems(e);i=this.calculateChildBoxes(r,n);s=i.boxes}}}this.layoutTargetLastSize=n;this.childBoxCache=i;this.updateInnerCtSize(n,i);this.updateChildBoxes(s);this.handleTargetOverflow(n,e,t)},updateChildBoxes:function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],i=r.component;if(r.dirtySize){i.setSize(r.width,r.height)}if(isNaN(r.left)||isNaN(r.top)){continue}i.setPosition(r.left,r.top)}},updateInnerCtSize:function(e,t){var n=this.align,r=this.padding,i=e.width,s=e.height;if(this.type=="hbox"){var o=i,u=t.meta.maxHeight+r.top+r.bottom;if(n=="stretch"){u=s}else if(n=="middle"){u=Math.max(s,u)}}else{var u=s,o=t.meta.maxWidth+r.left+r.right;if(n=="stretch"){o=i}else if(n=="center"){o=Math.max(i,o)}}this.innerCt.setSize(o||undefined,u||undefined)},handleTargetOverflow:function(e,t,n){var r=n.getStyle("overflow");if(r&&r!="hidden"&&!this.adjustmentPass){var i=this.getLayoutTargetSize();if(i.width!=e.width||i.height!=e.height){this.adjustmentPass=true;this.onLayout(t,n)}}delete this.adjustmentPass},isValidParent:function(e,t){return this.innerCt&&e.getPositionEl().dom.parentNode==this.innerCt.dom},getVisibleItems:function(e){var e=e||this.container,t=e.getLayoutTarget(),n=e.items.items,r=n.length,i,s,o=[];for(i=0;i<r;i++){if((s=n[i]).rendered&&this.isValidParent(s,t)&&s.hidden!==true&&s.collapsed!==true&&s.shouldLayout!==false){o.push(s)}}return o},renderAll:function(e,t){if(!this.innerCt){this.innerCt=t.createChild({cls:this.innerCls});this.padding=this.parseMargins(this.padding)}Ext.layout.BoxLayout.superclass.renderAll.call(this,e,this.innerCt)},getLayoutTargetSize:function(){var e=this.container.getLayoutTarget(),t;if(e){t=e.getViewSize();if(Ext.isIE9m&&Ext.isStrict&&t.width==0){t=e.getStyleSize()}t.width-=e.getPadding("lr");t.height-=e.getPadding("tb")}return t},renderItem:function(e){if(Ext.isString(e.margins)){e.margins=this.parseMargins(e.margins)}else if(!e.margins){e.margins=this.defaultMargins}Ext.layout.BoxLayout.superclass.renderItem.apply(this,arguments)},destroy:function(){Ext.destroy(this.overflowHandler);Ext.layout.BoxLayout.superclass.destroy.apply(this,arguments)}});Ext.layout.boxOverflow.None=Ext.extend(Object,{constructor:function(e,t){this.layout=e;Ext.apply(this,t||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn});Ext.layout.boxOverflow.none=Ext.layout.boxOverflow.None;Ext.layout.boxOverflow.Menu=Ext.extend(Ext.layout.boxOverflow.None,{afterCls:"x-strip-right",noItemsMenuText:'<div class="x-toolbar-no-items">(None)</div>',constructor:function(e){Ext.layout.boxOverflow.Menu.superclass.constructor.apply(this,arguments);this.menuItems=[]},createInnerElements:function(){if(!this.afterCt){this.afterCt=this.layout.innerCt.insertSibling({cls:this.afterCls},"before")}},clearOverflow:function(e,t){var n=t.width+(this.afterCt?this.afterCt.getWidth():0),r=this.menuItems;this.hideTrigger();for(var i=0,s=r.length;i<s;i++){r.pop().component.show()}return{targetSize:{height:t.height,width:n}}},showTrigger:function(){this.createMenu();this.menuTrigger.show()},hideTrigger:function(){if(this.menuTrigger!=undefined){this.menuTrigger.hide()}},beforeMenuShow:function(e){var t=this.menuItems,n=t.length,r,i;var s=function(e,t){return e.isXType("buttongroup")&&!(t instanceof Ext.Toolbar.Separator)};this.clearMenu();e.removeAll();for(var o=0;o<n;o++){r=t[o].component;if(i&&(s(r,i)||s(i,r))){e.add("-")}this.addComponentToMenu(e,r);i=r}if(e.items.length<1){e.add(this.noItemsMenuText)}},createMenuConfig:function(e,t){var n=Ext.apply({},e.initialConfig),r=e.toggleGroup;Ext.copyTo(n,e,["iconCls","icon","itemId","disabled","handler","scope","menu"]);Ext.apply(n,{text:e.overflowText||e.text,hideOnClick:t});if(r||e.enableToggle){Ext.apply(n,{group:r,checked:e.pressed,listeners:{checkchange:function(t,n){e.toggle(n)}}})}delete n.ownerCt;delete n.xtype;delete n.id;return n},addComponentToMenu:function(e,t){if(t instanceof Ext.Toolbar.Separator){e.add("-")}else if(Ext.isFunction(t.isXType)){if(t.isXType("splitbutton")){e.add(this.createMenuConfig(t,true))}else if(t.isXType("button")){e.add(this.createMenuConfig(t,!t.menu))}else if(t.isXType("buttongroup")){t.items.each(function(t){this.addComponentToMenu(e,t)},this)}}},clearMenu:function(){var e=this.moreMenu;if(e&&e.items){e.items.each(function(e){delete e.menu})}},createMenu:function(){if(!this.menuTrigger){this.createInnerElements();this.menu=new Ext.menu.Menu({ownerCt:this.layout.container,listeners:{scope:this,beforeshow:this.beforeMenuShow}});this.menuTrigger=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.menu,renderTo:this.afterCt})}},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}});Ext.layout.boxOverflow.menu=Ext.layout.boxOverflow.Menu;Ext.layout.boxOverflow.HorizontalMenu=Ext.extend(Ext.layout.boxOverflow.Menu,{constructor:function(){Ext.layout.boxOverflow.HorizontalMenu.superclass.constructor.apply(this,arguments);var e=this,t=e.layout,n=t.calculateChildBoxes;t.calculateChildBoxes=function(r,i){var s=n.apply(t,arguments),o=s.meta,u=e.menuItems;var a=0;for(var f=0,l=u.length;f<l;f++){a+=u[f].width}o.minimumWidth+=a;o.tooNarrow=o.minimumWidth>i.width;return s}},handleOverflow:function(e,t){this.showTrigger();var n=t.width-this.afterCt.getWidth(),r=e.boxes,i=0,s=false;for(var o=0,u=r.length;o<u;o++){i+=r[o].width}var a=n-i,f=0;for(var o=0,u=this.menuItems.length;o<u;o++){var l=this.menuItems[o],c=l.component,h=l.width;if(h<a){c.show();a-=h;f++;s=true}else{break}}if(s){this.menuItems=this.menuItems.slice(f)}else{for(var p=r.length-1;p>=0;p--){var d=r[p].component,v=r[p].left+r[p].width;if(v>=n){this.menuItems.unshift({component:d,width:r[p].width});d.hide()}else{break}}}if(this.menuItems.length==0){this.hideTrigger()}return{targetSize:{height:t.height,width:n},recalculate:s}}});Ext.layout.boxOverflow.menu.hbox=Ext.layout.boxOverflow.HorizontalMenu;Ext.layout.boxOverflow.Scroller=Ext.extend(Ext.layout.boxOverflow.None,{animateScroll:true,scrollIncrement:100,wheelIncrement:3,scrollRepeatInterval:400,scrollDuration:.4,beforeCls:"x-strip-left",afterCls:"x-strip-right",scrollerCls:"x-strip-scroller",beforeScrollerCls:"x-strip-scroller-left",afterScrollerCls:"x-strip-scroller-right",createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(e){e.stopEvent();this.scrollBy(e.getWheelDelta()*this.wheelIncrement*-1,false)}})},handleOverflow:function(e,t){this.createInnerElements();this.showScrollers()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers();this.beforeScroller.show();this.afterScroller.show();this.updateScrollButtons()},hideScrollers:function(){if(this.beforeScroller!=undefined){this.beforeScroller.hide();this.afterScroller.hide()}},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var e=this.beforeCt.createChild({cls:String.format("{0} {1} ",this.scrollerCls,this.beforeScrollerCls)});var t=this.afterCt.createChild({cls:String.format("{0} {1}",this.scrollerCls,this.afterScrollerCls)});e.addClassOnOver(this.beforeScrollerCls+"-hover");t.addClassOnOver(this.afterScrollerCls+"-hover");e.setVisibilityMode(Ext.Element.DISPLAY);t.setVisibilityMode(Ext.Element.DISPLAY);this.beforeRepeater=new Ext.util.ClickRepeater(e,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this});this.afterRepeater=new Ext.util.ClickRepeater(t,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this});this.beforeScroller=e;this.afterScroller=t}},destroy:function(){Ext.destroy(this.beforeScroller,this.afterScroller,this.beforeRepeater,this.afterRepeater,this.beforeCt,this.afterCt)},scrollBy:function(e,t){this.scrollTo(this.getScrollPosition()+e,t)},getItem:function(e){if(Ext.isString(e)){e=Ext.getCmp(e)}else if(Ext.isNumber(e)){e=this.items[e]}return e},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(this.beforeScroller==undefined||this.afterScroller==undefined){return}var e=this.atExtremeBefore()?"addClass":"removeClass",t=this.atExtremeAfter()?"addClass":"removeClass",n=this.beforeScrollerCls+"-disabled",r=this.afterScrollerCls+"-disabled";this.beforeScroller[e](n);this.afterScroller[t](r);this.scrolling=false},atExtremeBefore:function(){return this.getScrollPosition()===0},scrollLeft:function(e){this.scrollBy(-this.scrollIncrement,e)},scrollRight:function(e){this.scrollBy(this.scrollIncrement,e)},scrollToItem:function(e,t){e=this.getItem(e);if(e!=undefined){var n=this.getItemVisibility(e);if(!n.fullyVisible){var r=e.getBox(true,true),i=r.x;if(n.hiddenRight){i-=this.layout.innerCt.getWidth()-r.width}this.scrollTo(i,t)}}},getItemVisibility:function(e){var t=this.getItem(e).getBox(true,true),n=t.x,r=t.x+t.width,i=this.getScrollPosition(),s=this.layout.innerCt.getWidth()+i;return{hiddenLeft:n<i,hiddenRight:r>s,fullyVisible:n>i&&r<s}}});Ext.layout.boxOverflow.scroller=Ext.layout.boxOverflow.Scroller;Ext.layout.boxOverflow.VerticalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{scrollIncrement:75,wheelIncrement:2,handleOverflow:function(e,t){Ext.layout.boxOverflow.VerticalScroller.superclass.handleOverflow.apply(this,arguments);return{targetSize:{height:t.height-(this.beforeCt.getHeight()+this.afterCt.getHeight()),width:t.width}}},createInnerElements:function(){var e=this.layout.innerCt;if(!this.beforeCt){this.beforeCt=e.insertSibling({cls:this.beforeCls},"before");this.afterCt=e.insertSibling({cls:this.afterCls},"after");this.createWheelListener()}},scrollTo:function(e,t){var n=this.getScrollPosition(),r=e.constrain(0,this.getMaxScrollBottom());if(r!=n&&!this.scrolling){if(t==undefined){t=this.animateScroll}this.layout.innerCt.scrollTo("top",r,t?this.getScrollAnim():false);if(t){this.scrolling=true}else{this.scrolling=false;this.updateScrollButtons()}}},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollTop,10)||0},getMaxScrollBottom:function(){return this.layout.innerCt.dom.scrollHeight-this.layout.innerCt.getHeight()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollBottom()}});Ext.layout.boxOverflow.scroller.vbox=Ext.layout.boxOverflow.VerticalScroller;Ext.layout.boxOverflow.HorizontalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{handleOverflow:function(e,t){Ext.layout.boxOverflow.HorizontalScroller.superclass.handleOverflow.apply(this,arguments);return{targetSize:{height:t.height,width:t.width-(this.beforeCt.getWidth()+this.afterCt.getWidth())}}},createInnerElements:function(){var e=this.layout.innerCt;if(!this.beforeCt){this.afterCt=e.insertSibling({cls:this.afterCls},"before");this.beforeCt=e.insertSibling({cls:this.beforeCls},"before");this.createWheelListener()}},scrollTo:function(e,t){var n=this.getScrollPosition(),r=e.constrain(0,this.getMaxScrollRight());if(r!=n&&!this.scrolling){if(t==undefined){t=this.animateScroll}this.layout.innerCt.scrollTo("left",r,t?this.getScrollAnim():false);if(t){this.scrolling=true}else{this.scrolling=false;this.updateScrollButtons()}}},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollLeft,10)||0},getMaxScrollRight:function(){return this.layout.innerCt.dom.scrollWidth-this.layout.innerCt.getWidth()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollRight()}});Ext.layout.boxOverflow.scroller.hbox=Ext.layout.boxOverflow.HorizontalScroller;Ext.layout.HBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"top",type:"hbox",calculateChildBoxes:function(e,t){var n=e.length,r=this.padding,i=r.top,s=r.left,o=i+r.bottom,u=s+r.right,a=t.width-this.scrollOffset,f=t.height,l=Math.max(0,f-o),c=this.pack=="start",h=this.pack=="center",p=this.pack=="end",d=0,v=0,m=0,g=0,y=0,b=[],w,E,S,x,T,N,C,k,L,A,O,M;for(C=0;C<n;C++){w=e[C];S=w.height;E=w.width;N=!w.hasLayout&&typeof w.doLayout=="function";if(typeof E!="number"){if(w.flex&&!E){m+=w.flex}else{if(!E&&N){w.doLayout()}x=w.getSize();E=x.width;S=x.height}}T=w.margins;A=T.left+T.right;d+=A+(E||0);g+=A+(w.flex?w.minWidth||0:E);y+=A+(w.minWidth||E||0);if(typeof S!="number"){if(N){w.doLayout()}S=w.getHeight()}v=Math.max(v,S+T.top+T.bottom);b.push({component:w,height:S||undefined,width:E||undefined})}var _=g-a,D=y>a;var P=Math.max(0,a-d-u);if(D){for(C=0;C<n;C++){b[C].width=e[C].minWidth||e[C].width||b[C].width}}else{if(_>0){var H=[];for(var B=0,j=n;B<j;B++){var F=e[B],I=F.minWidth||0;if(F.flex){b[B].width=I}else{H.push({minWidth:I,available:b[B].width-I,index:B})}}H.sort(function(e,t){return e.available>t.available?1:-1});for(var C=0,j=H.length;C<j;C++){var q=H[C].index;if(q==undefined){continue}var F=e[q],R=b[q],U=R.width,I=F.minWidth,z=Math.max(I,U-Math.ceil(_/(j-C))),W=U-z;b[q].width=z;_-=W}}else{var X=P,V=m;for(C=0;C<n;C++){w=e[C];k=b[C];T=w.margins;O=T.top+T.bottom;if(c&&w.flex&&!w.width){L=Math.ceil(w.flex/V*X);X-=L;V-=w.flex;k.width=L;k.dirtySize=true}}}}if(h){s+=P/2}else if(p){s+=P}for(C=0;C<n;C++){w=e[C];k=b[C];T=w.margins;s+=T.left;O=T.top+T.bottom;k.left=s;k.top=i+T.top;switch(this.align){case"stretch":M=l-O;k.height=M.constrain(w.minHeight||0,w.maxHeight||1e6);k.dirtySize=true;break;case"stretchmax":M=v-O;k.height=M.constrain(w.minHeight||0,w.maxHeight||1e6);k.dirtySize=true;break;case"middle":var $=l-k.height-O;if($>0){k.top=i+O+$/2}}s+=k.width+T.right}return{boxes:b,meta:{maxHeight:v,nonFlexWidth:d,desiredWidth:g,minimumWidth:y,shortfall:g-a,tooNarrow:D}}}});Ext.Container.LAYOUTS.hbox=Ext.layout.HBoxLayout;Ext.layout.VBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"left",type:"vbox",calculateChildBoxes:function(e,t){var n=e.length,r=this.padding,i=r.top,s=r.left,o=i+r.bottom,u=s+r.right,a=t.width-this.scrollOffset,f=t.height,l=Math.max(0,a-u),c=this.pack=="start",h=this.pack=="center",p=this.pack=="end",d=0,v=0,m=0,g=0,y=0,b=[],w,E,S,x,T,N,C,k,L,A,O,M,_;for(C=0;C<n;C++){w=e[C];S=w.height;E=w.width;N=!w.hasLayout&&typeof w.doLayout=="function";if(typeof S!="number"){if(w.flex&&!S){m+=w.flex}else{if(!S&&N){w.doLayout()}x=w.getSize();E=x.width;S=x.height}}T=w.margins;O=T.top+T.bottom;d+=O+(S||0);g+=O+(w.flex?w.minHeight||0:S);y+=O+(w.minHeight||S||0);if(typeof E!="number"){if(N){w.doLayout()}E=w.getWidth()}v=Math.max(v,E+T.left+T.right);b.push({component:w,height:S||undefined,width:E||undefined})}var D=g-f,P=y>f;var H=Math.max(0,f-d-o);if(P){for(C=0,_=n;C<_;C++){b[C].height=e[C].minHeight||e[C].height||b[C].height}}else{if(D>0){var B=[];for(var j=0,_=n;j<_;j++){var F=e[j],I=F.minHeight||0;if(F.flex){b[j].height=I}else{B.push({minHeight:I,available:b[j].height-I,index:j})}}B.sort(function(e,t){return e.available>t.available?1:-1});for(var C=0,_=B.length;C<_;C++){var q=B[C].index;if(q==undefined){continue}var F=e[q],R=b[q],U=R.height,I=F.minHeight,z=Math.max(I,U-Math.ceil(D/(_-C))),W=U-z;b[q].height=z;D-=W}}else{var X=H,V=m;for(C=0;C<n;C++){w=e[C];k=b[C];T=w.margins;A=T.left+T.right;if(c&&w.flex&&!w.height){L=Math.ceil(w.flex/V*X);X-=L;V-=w.flex;k.height=L;k.dirtySize=true}}}}if(h){i+=H/2}else if(p){i+=H}for(C=0;C<n;C++){w=e[C];k=b[C];T=w.margins;i+=T.top;A=T.left+T.right;k.left=s+T.left;k.top=i;switch(this.align){case"stretch":M=l-A;k.width=M.constrain(w.minWidth||0,w.maxWidth||1e6);k.dirtySize=true;break;case"stretchmax":M=v-A;k.width=M.constrain(w.minWidth||0,w.maxWidth||1e6);k.dirtySize=true;break;case"center":var $=l-k.width-A;if($>0){k.left=s+A+$/2}}i+=k.height+T.bottom}return{boxes:b,meta:{maxWidth:v,nonFlexHeight:d,desiredHeight:g,minimumHeight:y,shortfall:g-f,tooNarrow:P}}}});Ext.Container.LAYOUTS.vbox=Ext.layout.VBoxLayout;Ext.layout.ToolbarLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:"toolbar",triggerWidth:18,noItemsMenuText:'<div class="x-toolbar-no-items">(None)</div>',lastOverflow:false,tableHTML:['<table cellspacing="0" class="x-toolbar-ct">',"<tbody>","<tr>",'<td class="x-toolbar-left" align="{0}">','<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-left-row"></tr>',"</tbody>","</table>","</td>",'<td class="x-toolbar-right" align="right">','<table cellspacing="0" class="x-toolbar-right-ct">',"<tbody>","<tr>","<td>",'<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-right-row"></tr>',"</tbody>","</table>","</td>","<td>",'<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-extras-row"></tr>',"</tbody>","</table>","</td>","</tr>","</tbody>","</table>","</td>","</tr>","</tbody>","</table>"].join(""),onLayout:function(e,t){if(!this.leftTr){var n=e.buttonAlign=="center"?"center":"left";t.addClass("x-toolbar-layout-ct");t.insertHtml("beforeEnd",String.format(this.tableHTML,n));this.leftTr=t.child("tr.x-toolbar-left-row",true);this.rightTr=t.child("tr.x-toolbar-right-row",true);this.extrasTr=t.child("tr.x-toolbar-extras-row",true);if(this.hiddenItem==undefined){this.hiddenItems=[]}}var r=e.buttonAlign=="right"?this.rightTr:this.leftTr,i=e.items.items,s=0;for(var o=0,u=i.length,a;o<u;o++,s++){a=i[o];if(a.isFill){r=this.rightTr;s=-1}else if(!a.rendered){a.render(this.insertCell(a,r,s));this.configureItem(a)}else{if(!a.xtbHidden&&!this.isValidParent(a,r.childNodes[s])){var f=this.insertCell(a,r,s);f.appendChild(a.getPositionEl().dom);a.container=Ext.get(f)}}}this.cleanup(this.leftTr);this.cleanup(this.rightTr);this.cleanup(this.extrasTr);this.fitToSize(t)},cleanup:function(e){var t=e.childNodes,n,r;for(n=t.length-1;n>=0&&(r=t[n]);n--){if(!r.firstChild){e.removeChild(r)}}},insertCell:function(e,t,n){var r=document.createElement("td");r.className="x-toolbar-cell";t.insertBefore(r,t.childNodes[n]||null);return r},hideItem:function(e){this.hiddenItems.push(e);e.xtbHidden=true;e.xtbWidth=e.getPositionEl().dom.parentNode.offsetWidth;e.hide()},unhideItem:function(e){e.show();e.xtbHidden=false;this.hiddenItems.remove(e)},getItemWidth:function(e){return e.hidden?e.xtbWidth||0:e.getPositionEl().dom.parentNode.offsetWidth},fitToSize:function(e){if(this.container.enableOverflow===false){return}var t=e.dom.clientWidth,n=e.dom.firstChild.offsetWidth,r=t-this.triggerWidth,i=this.lastWidth||0,s=this.hiddenItems,o=s.length!=0,u=t>=i;this.lastWidth=t;if(n>t||o&&u){var a=this.container.items.items,f=a.length,l=0,c;for(var h=0;h<f;h++){c=a[h];if(!c.isFill){l+=this.getItemWidth(c);if(l>r){if(!(c.hidden||c.xtbHidden)){this.hideItem(c)}}else if(c.xtbHidden){this.unhideItem(c)}}}}o=s.length!=0;if(o){this.initMore();if(!this.lastOverflow){this.container.fireEvent("overflowchange",this.container,true);this.lastOverflow=true}}else if(this.more){this.clearMenu();this.more.destroy();delete this.more;if(this.lastOverflow){this.container.fireEvent("overflowchange",this.container,false);this.lastOverflow=false}}},createMenuConfig:function(e,t){var n=Ext.apply({},e.initialConfig),r=e.toggleGroup;Ext.copyTo(n,e,["iconCls","icon","itemId","disabled","handler","scope","menu"]);Ext.apply(n,{text:e.overflowText||e.text,hideOnClick:t});if(r||e.enableToggle){Ext.apply(n,{group:r,checked:e.pressed,listeners:{checkchange:function(t,n){e.toggle(n)}}})}delete n.ownerCt;delete n.xtype;delete n.id;return n},addComponentToMenu:function(e,t){if(t instanceof Ext.Toolbar.Separator){e.add("-")}else if(Ext.isFunction(t.isXType)){if(t.isXType("splitbutton")){e.add(this.createMenuConfig(t,true))}else if(t.isXType("button")){e.add(this.createMenuConfig(t,!t.menu))}else if(t.isXType("buttongroup")){t.items.each(function(t){this.addComponentToMenu(e,t)},this)}}},clearMenu:function(){var e=this.moreMenu;if(e&&e.items){e.items.each(function(e){delete e.menu})}},beforeMoreShow:function(e){var t=this.container.items.items,n=t.length,r,i;var s=function(e,t){return e.isXType("buttongroup")&&!(t instanceof Ext.Toolbar.Separator)};this.clearMenu();e.removeAll();for(var o=0;o<n;o++){r=t[o];if(r.xtbHidden){if(i&&(s(r,i)||s(i,r))){e.add("-")}this.addComponentToMenu(e,r);i=r}}if(e.items.length<1){e.add(this.noItemsMenuText)}},initMore:function(){if(!this.more){this.moreMenu=new Ext.menu.Menu({ownerCt:this.container,listeners:{beforeshow:this.beforeMoreShow,scope:this}});this.more=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.moreMenu,ownerCt:this.container});var e=this.insertCell(this.more,this.extrasTr,100);this.more.render(e)}},destroy:function(){Ext.destroy(this.more,this.moreMenu);delete this.leftTr;delete this.rightTr;delete this.extrasTr;Ext.layout.ToolbarLayout.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.toolbar=Ext.layout.ToolbarLayout;Ext.layout.MenuLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:"menu",setContainer:function(e){this.monitorResize=!e.floating;e.on("autosize",this.doAutoSize,this);Ext.layout.MenuLayout.superclass.setContainer.call(this,e)},renderItem:function(e,t,n){if(!this.itemTpl){this.itemTpl=Ext.layout.MenuLayout.prototype.itemTpl=new Ext.XTemplate('<li id="{itemId}" class="{itemCls}">','<tpl if="needsIcon">','<img alt="{altText}" src="{icon}" class="{iconCls}"/>',"</tpl>","</li>")}if(e&&!e.rendered){if(Ext.isNumber(t)){t=n.dom.childNodes[t]}var r=this.getItemArgs(e);e.render(e.positionEl=t?this.itemTpl.insertBefore(t,r,true):this.itemTpl.append(n,r,true));e.positionEl.menuItemId=e.getItemId();if(!r.isMenuItem&&r.needsIcon){e.positionEl.addClass("x-menu-list-item-indent")}this.configureItem(e)}else if(e&&!this.isValidParent(e,n)){if(Ext.isNumber(t)){t=n.dom.childNodes[t]}n.dom.insertBefore(e.getActionEl().dom,t||null)}},getItemArgs:function(e){var t=e instanceof Ext.menu.Item,n=!(t||e instanceof Ext.menu.Separator);return{isMenuItem:t,needsIcon:n&&(e.icon||e.iconCls),icon:e.icon||Ext.BLANK_IMAGE_URL,iconCls:"x-menu-item-icon "+(e.iconCls||""),itemId:"x-menu-el-"+e.id,itemCls:"x-menu-list-item ",altText:e.altText||""}},isValidParent:function(e,t){return e.el.up("li.x-menu-list-item",5).dom.parentNode===(t.dom||t)},onLayout:function(e,t){Ext.layout.MenuLayout.superclass.onLayout.call(this,e,t);this.doAutoSize()},doAutoSize:function(){var e=this.container,t=e.width;if(e.floating){if(t){e.setWidth(t)}else if(Ext.isIE9m){e.setWidth(Ext.isStrict&&(Ext.isIE7||Ext.isIE8||Ext.isIE9)?"auto":e.minWidth);var n=e.getEl(),r=n.dom.offsetWidth;e.setWidth(e.getLayoutTarget().getWidth()+n.getFrameWidth("lr"))}}}});Ext.Container.LAYOUTS["menu"]=Ext.layout.MenuLayout;Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this);document.getElementsByTagName("html")[0].className+=" x-viewport";this.el=Ext.getBody();this.el.setHeight=Ext.emptyFn;this.el.setWidth=Ext.emptyFn;this.el.setSize=Ext.emptyFn;this.el.dom.scroll="no";this.allowDomMove=false;this.autoWidth=true;this.autoHeight=true;Ext.EventManager.onWindowResize(this.fireResize,this);this.renderTo=this.el},fireResize:function(e,t){this.fireEvent("resize",this,e,t,e,t)}});Ext.reg("viewport",Ext.Viewport);Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:true,animCollapse:Ext.enableFx,headerAsText:true,buttonAlign:"right",collapsed:false,collapseFirst:true,minButtonWidth:75,elements:"body",preventBodyReset:false,padding:undefined,resizeEvent:"bodyresize",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",disabledClass:"",deferHeight:true,expandDefaults:{duration:.25},collapseDefaults:{duration:.25},initComponent:function(){Ext.Panel.superclass.initComponent.call(this);this.addEvents("bodyresize","titlechange","iconchange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate");if(this.unstyled){this.baseCls="x-plain"}this.toolbars=[];if(this.tbar){this.elements+=",tbar";this.topToolbar=this.createToolbar(this.tbar);this.tbar=null}if(this.bbar){this.elements+=",bbar";this.bottomToolbar=this.createToolbar(this.bbar);this.bbar=null}if(this.header===true){this.elements+=",header";this.header=null}else if(this.headerCfg||this.title&&this.header!==false){this.elements+=",header"}if(this.footerCfg||this.footer===true){this.elements+=",footer";this.footer=null}if(this.buttons){this.fbar=this.buttons;this.buttons=null}if(this.fbar){this.createFbar(this.fbar)}if(this.autoLoad){this.on("render",this.doAutoLoad,this,{delay:10})}},createFbar:function(e){var t=this.minButtonWidth;this.elements+=",footer";this.fbar=this.createToolbar(e,{buttonAlign:this.buttonAlign,toolbarCls:"x-panel-fbar",enableOverflow:false,defaults:function(e){return{minWidth:e.minWidth||t}}});this.fbar.items.each(function(e){e.minWidth=e.minWidth||this.minButtonWidth},this);this.buttons=this.fbar.items.items},createToolbar:function(e,t){var n;if(Ext.isArray(e)){e={items:e}}n=e.events?Ext.apply(e,t):this.createComponent(Ext.apply({},e,t),"toolbar");this.toolbars.push(n);return n},createElement:function(e,t){if(this[e]){t.appendChild(this[e].dom);return}if(e==="bwrap"||this.elements.indexOf(e)!=-1){if(this[e+"Cfg"]){this[e]=Ext.fly(t).createChild(this[e+"Cfg"])}else{var n=document.createElement("div");n.className=this[e+"Cls"];this[e]=Ext.get(t.appendChild(n))}if(this[e+"CssClass"]){this[e].addClass(this[e+"CssClass"])}if(this[e+"Style"]){this[e].applyStyles(this[e+"Style"])}}},onRender:function(e,t){Ext.Panel.superclass.onRender.call(this,e,t);this.createClasses();var n=this.el,r=n.dom,i,s;if(this.collapsible&&!this.hideCollapseTool){this.tools=this.tools?this.tools.slice(0):[];this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this})}if(this.tools){s=this.tools;this.elements+=this.header!==false?",header":""}this.tools={};n.addClass(this.baseCls);if(r.firstChild){this.header=n.down("."+this.headerCls);this.bwrap=n.down("."+this.bwrapCls);var o=this.bwrap?this.bwrap:n;this.tbar=o.down("."+this.tbarCls);this.body=o.down("."+this.bodyCls);this.bbar=o.down("."+this.bbarCls);this.footer=o.down("."+this.footerCls);this.fromMarkup=true}if(this.preventBodyReset===true){n.addClass("x-panel-reset")}if(this.cls){n.addClass(this.cls)}if(this.buttons){this.elements+=",footer"}if(this.frame){n.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls));this.createElement("header",r.firstChild.firstChild.firstChild);this.createElement("bwrap",r);i=this.bwrap.dom;var u=r.childNodes[1],a=r.childNodes[2];i.appendChild(u);i.appendChild(a);var f=i.firstChild.firstChild.firstChild;this.createElement("tbar",f);this.createElement("body",f);this.createElement("bbar",f);this.createElement("footer",i.lastChild.firstChild.firstChild);if(!this.footer){this.bwrap.dom.lastChild.className+=" x-panel-nofooter"}this.ft=Ext.get(this.bwrap.dom.lastChild);this.mc=Ext.get(f)}else{this.createElement("header",r);this.createElement("bwrap",r);i=this.bwrap.dom;this.createElement("tbar",i);this.createElement("body",i);this.createElement("bbar",i);this.createElement("footer",i);if(!this.header){this.body.addClass(this.bodyCls+"-noheader");if(this.tbar){this.tbar.addClass(this.tbarCls+"-noheader")}}}if(Ext.isDefined(this.padding)){this.body.setStyle("padding",this.body.addUnits(this.padding))}if(this.border===false){this.el.addClass(this.baseCls+"-noborder");this.body.addClass(this.bodyCls+"-noborder");if(this.header){this.header.addClass(this.headerCls+"-noborder")}if(this.footer){this.footer.addClass(this.footerCls+"-noborder")}if(this.tbar){this.tbar.addClass(this.tbarCls+"-noborder")}if(this.bbar){this.bbar.addClass(this.bbarCls+"-noborder")}}if(this.bodyBorder===false){this.body.addClass(this.bodyCls+"-noborder")}this.bwrap.enableDisplayMode("block");if(this.header){this.header.unselectable();if(this.headerAsText){this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"</span>";if(this.iconCls){this.setIconClass(this.iconCls)}}}if(this.floating){this.makeFloating(this.floating)}if(this.collapsible&&this.titleCollapse&&this.header){this.mon(this.header,"click",this.toggleCollapse,this);this.header.setStyle("cursor","pointer")}if(s){this.addTool.apply(this,s)}if(this.fbar){this.footer.addClass("x-panel-btns");this.fbar.ownerCt=this;this.fbar.render(this.footer);this.footer.createChild({cls:"x-clear"})}if(this.tbar&&this.topToolbar){this.topToolbar.ownerCt=this;this.topToolbar.render(this.tbar)}if(this.bbar&&this.bottomToolbar){this.bottomToolbar.ownerCt=this;this.bottomToolbar.render(this.bbar)}},setIconClass:function(e){var t=this.iconCls;this.iconCls=e;if(this.rendered&&this.header){if(this.frame){this.header.addClass("x-panel-icon");this.header.replaceClass(t,this.iconCls)}else{var n=this.header,r=n.child("img.x-panel-inline-icon");if(r){Ext.fly(r).replaceClass(t,this.iconCls)}else{var i=n.child("span."+this.headerTextCls);if(i){Ext.DomHelper.insertBefore(i.dom,{tag:"img",alt:"",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls})}}}}this.fireEvent("iconchange",this,e,t)},makeFloating:function(e){this.floating=true;this.el=new Ext.Layer(Ext.apply({},e,{shadow:Ext.isDefined(this.shadow)?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:false,shim:this.shim===false?false:undefined}),this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},getFooterToolbar:function(){return this.fbar},addButton:function(e,t,n){if(!this.fbar){this.createFbar([])}if(t){if(Ext.isString(e)){e={text:e}}e=Ext.apply({handler:t,scope:n},e)}return this.fbar.add(e)},addTool:function(){if(!this.rendered){if(!this.tools){this.tools=[]}Ext.each(arguments,function(e){this.tools.push(e)},this);return}if(!this[this.toolTarget]){return}if(!this.toolTemplate){var e=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');e.disableFormats=true;e.compile();Ext.Panel.prototype.toolTemplate=e}for(var t=0,n=arguments,r=n.length;t<r;t++){var i=n[t];if(!this.tools[i.id]){var s="x-tool-"+i.id+"-over";var o=this.toolTemplate.insertFirst(this[this.toolTarget],i,true);this.tools[i.id]=o;o.enableDisplayMode("block");this.mon(o,"click",this.createToolHandler(o,i,s,this));if(i.on){this.mon(o,i.on)}if(i.hidden){o.hide()}if(i.qtip){if(Ext.isObject(i.qtip)){Ext.QuickTips.register(Ext.apply({target:o.id},i.qtip))}else{o.dom.qtip=i.qtip}}o.addClassOnOver(s)}}},onLayout:function(e,t){Ext.Panel.superclass.onLayout.apply(this,arguments);if(this.hasLayout&&this.toolbars.length>0){Ext.each(this.toolbars,function(e){e.doLayout(undefined,t)});this.syncHeight()}},syncHeight:function(){var e=this.toolbarHeight,t=this.body,n=this.lastSize.height,r;if(this.autoHeight||!Ext.isDefined(n)||n=="auto"){return}if(e!=this.getToolbarHeight()){e=Math.max(0,n-this.getFrameHeight());t.setHeight(e);r=t.getSize();this.toolbarHeight=this.getToolbarHeight();this.onBodyResize(r.width,r.height)}},onShow:function(){if(this.floating){return this.el.show()}Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating){return this.el.hide()}Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(e,t,n,r){return function(i){e.removeClass(n);if(t.stopEvent!==false){i.stopEvent()}if(t.handler){t.handler.call(t.scope||e,i,e,r,t)}}},afterRender:function(){if(this.floating&&!this.hidden){this.el.show()}if(this.title){this.setTitle(this.title)}Ext.Panel.superclass.afterRender.call(this);if(this.collapsed){this.collapsed=false;this.collapse(false)}this.initEvents()},getKeyMap:function(){if(!this.keyMap){this.keyMap=new Ext.KeyMap(this.el,this.keys)}return this.keyMap},initEvents:function(){if(this.keys){this.getKeyMap()}if(this.draggable){this.initDraggable()}if(this.toolbars.length>0){Ext.each(this.toolbars,function(e){e.doLayout();e.on({scope:this,afterlayout:this.syncHeight,remove:this.syncHeight})},this);this.syncHeight()}},initDraggable:function(){this.dd=new Ext.Panel.DD(this,Ext.isBoolean(this.draggable)?null:this.draggable)},beforeEffect:function(e){if(this.floating){this.el.beforeAction()}if(e!==false){this.el.addClass("x-panel-animated")}},afterEffect:function(e){this.syncShadow();this.el.removeClass("x-panel-animated")},createEffect:function(e,t,n){var r={scope:n,block:true};if(e===true){r.callback=t;return r}else if(!e.callback){r.callback=t}else{r.callback=function(){t.call(n);Ext.callback(e.callback,e.scope)}}return Ext.applyIf(r,e)},collapse:function(e){if(this.collapsed||this.el.hasFxBlock()||this.fireEvent("beforecollapse",this,e)===false){return}var t=e===true||e!==false&&this.animCollapse;this.beforeEffect(t);this.onCollapse(t,e);return this},onCollapse:function(e,t){if(e){this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(t||true,this.afterCollapse,this),this.collapseDefaults))}else{this[this.collapseEl].hide(this.hideMode);this.afterCollapse(false)}},afterCollapse:function(e){this.collapsed=true;this.el.addClass(this.collapsedCls);if(e!==false){this[this.collapseEl].hide(this.hideMode)}this.afterEffect(e);this.cascade(function(e){if(e.lastSize){e.lastSize={width:undefined,height:undefined}}});this.fireEvent("collapse",this)},expand:function(e){if(!this.collapsed||this.el.hasFxBlock()||this.fireEvent("beforeexpand",this,e)===false){return}var t=e===true||e!==false&&this.animCollapse;this.el.removeClass(this.collapsedCls);this.beforeEffect(t);this.onExpand(t,e);return this},onExpand:function(e,t){if(e){this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(t||true,this.afterExpand,this),this.expandDefaults))}else{this[this.collapseEl].show(this.hideMode);this.afterExpand(false)}},afterExpand:function(e){this.collapsed=false;if(e!==false){this[this.collapseEl].show(this.hideMode)}this.afterEffect(e);if(this.deferLayout){delete this.deferLayout;this.doLayout(true)}this.fireEvent("expand",this)},toggleCollapse:function(e){this[this.collapsed?"expand":"collapse"](e);return this},onDisable:function(){if(this.rendered&&this.maskDisabled){this.el.mask()}Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){if(this.rendered&&this.maskDisabled){this.el.unmask()}Ext.Panel.superclass.onEnable.call(this)},onResize:function(e,t,n,r){var i=e,s=t;if(Ext.isDefined(i)||Ext.isDefined(s)){if(!this.collapsed){if(Ext.isNumber(i)){this.body.setWidth(i=this.adjustBodyWidth(i-this.getFrameWidth()))}else if(i=="auto"){i=this.body.setWidth("auto").dom.offsetWidth}else{i=this.body.dom.offsetWidth}if(this.tbar){this.tbar.setWidth(i);if(this.topToolbar){this.topToolbar.setSize(i)}}if(this.bbar){this.bbar.setWidth(i);if(this.bottomToolbar){this.bottomToolbar.setSize(i);if(Ext.isIE9m){this.bbar.setStyle("position","static");this.bbar.setStyle("position","")}}}if(this.footer){this.footer.setWidth(i);if(this.fbar){this.fbar.setSize(Ext.isIE9m?i-this.footer.getFrameWidth("lr"):"auto")}}if(Ext.isNumber(s)){s=Math.max(0,s-this.getFrameHeight());this.body.setHeight(s)}else if(s=="auto"){this.body.setHeight(s)}if(this.disabled&&this.el._mask){this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight())}}else{this.queuedBodySize={width:i,height:s};if(!this.queuedExpand&&this.allowQueuedExpand!==false){this.queuedExpand=true;this.on("expand",function(){delete this.queuedExpand;this.onResize(this.queuedBodySize.width,this.queuedBodySize.height)},this,{single:true})}}this.onBodyResize(i,s)}this.syncShadow();Ext.Panel.superclass.onResize.call(this,e,t,n,r)},onBodyResize:function(e,t){this.fireEvent("bodyresize",this,e,t)},getToolbarHeight:function(){var e=0;if(this.rendered){Ext.each(this.toolbars,function(t){e+=t.getHeight()},this)}return e},adjustBodyHeight:function(e){return e},adjustBodyWidth:function(e){return e},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var e=this.el.getFrameWidth("lr")+this.bwrap.getFrameWidth("lr");if(this.frame){var t=this.bwrap.dom.firstChild;e+=Ext.fly(t).getFrameWidth("l")+Ext.fly(t.firstChild).getFrameWidth("r");e+=this.mc.getFrameWidth("lr")}return e},getFrameHeight:function(){var e=this.el.getFrameWidth("tb")+this.bwrap.getFrameWidth("tb");e+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0);if(this.frame){e+=this.el.dom.firstChild.offsetHeight+this.ft.dom.offsetHeight+this.mc.getFrameWidth("tb")}else{e+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0)}return e},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.body.getHeight()},syncShadow:function(){if(this.floating){this.el.sync(true)}},getLayoutTarget:function(){return this.body},getContentTarget:function(){return this.body},setTitle:function(e,t){this.title=e;if(this.header&&this.headerAsText){this.header.child("span").update(e)}if(t){this.setIconClass(t)}this.fireEvent("titlechange",this,e);return this},getUpdater:function(){return this.body.getUpdater()},load:function(){var e=this.body.getUpdater();e.update.apply(e,arguments);return this},beforeDestroy:function(){Ext.Panel.superclass.beforeDestroy.call(this);if(this.header){this.header.removeAllListeners()}if(this.tools){for(var e in this.tools){Ext.destroy(this.tools[e])}}if(this.toolbars.length>0){Ext.each(this.toolbars,function(e){e.un("afterlayout",this.syncHeight,this);e.un("remove",this.syncHeight,this)},this)}if(Ext.isArray(this.buttons)){while(this.buttons.length){Ext.destroy(this.buttons[0])}}if(this.rendered){Ext.destroy(this.ft,this.header,this.footer,this.tbar,this.bbar,this.body,this.mc,this.bwrap,this.dd);if(this.fbar){Ext.destroy(this.fbar,this.fbar.el)}}Ext.destroy(this.toolbars)},createClasses:function(){this.headerCls=this.baseCls+"-header";this.headerTextCls=this.baseCls+"-header-text";this.bwrapCls=this.baseCls+"-bwrap";this.tbarCls=this.baseCls+"-tbar";this.bodyCls=this.baseCls+"-body";this.bbarCls=this.baseCls+"-bbar";this.footerCls=this.baseCls+"-footer"},createGhost:function(e,t,n){var r=document.createElement("div");r.className="x-panel-ghost "+(e?e:"");if(this.header){r.appendChild(this.el.dom.firstChild.cloneNode(true))}Ext.fly(r.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight());r.style.width=this.el.dom.offsetWidth+"px";if(!n){this.container.dom.appendChild(r)}else{Ext.getDom(n).appendChild(r)}if(t!==false&&this.el.useShim!==false){var i=new Ext.Layer({shadow:false,useDisplay:true,constrain:false},r);i.show();return i}else{return new Ext.Element(r)}},doAutoLoad:function(){var e=this.body.getUpdater();if(this.renderer){e.setRenderer(this.renderer)}e.update(Ext.isObject(this.autoLoad)?this.autoLoad:{url:this.autoLoad})},getTool:function(e){return this.tools[e]}});Ext.reg("panel",Ext.Panel);Ext.Editor=function(e,t){if(e.field){this.field=Ext.create(e.field,"textfield");t=Ext.apply({},e);delete t.field}else{this.field=e}Ext.Editor.superclass.constructor.call(this,t)};Ext.extend(Ext.Editor,Ext.Component,{allowBlur:true,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,initComponent:function(){Ext.Editor.superclass.initComponent.call(this);this.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onRender:function(e,t){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:e,shim:this.shim,shadowOffset:this.shadowOffset||4,id:this.id,constrain:this.constrain});if(this.zIndex){this.el.setZIndex(this.zIndex)}this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden");if(this.field.msgTarget!="title"){this.field.msgTarget="qtip"}this.field.inEditor=true;this.mon(this.field,{scope:this,blur:this.onBlur,specialkey:this.onSpecialKey});if(this.field.grow){this.mon(this.field,"autosize",this.el.sync,this.el,{delay:1})}this.field.render(this.el).show();this.field.getEl().dom.name="";if(this.swallowKeys){this.field.el.swallowEvent(["keypress","keydown"])}},onSpecialKey:function(e,t){var n=t.getKey(),r=this.completeOnEnter&&n==t.ENTER,i=this.cancelOnEsc&&n==t.ESC;if(r||i){t.stopEvent();if(r){this.completeEdit()}else{this.cancelEdit()}if(e.triggerBlur){e.triggerBlur()}}this.fireEvent("specialkey",e,t)},startEdit:function(e,t){if(this.editing){this.completeEdit()}this.boundEl=Ext.get(e);var n=t!==undefined?t:this.boundEl.dom.innerHTML;if(!this.rendered){this.render(this.parentEl||document.body)}if(this.fireEvent("beforestartedit",this,this.boundEl,n)!==false){this.startValue=n;this.field.reset();this.field.setValue(n);this.realign(true);this.editing=true;this.show()}},doAutoSize:function(){if(this.autoSize){var e=this.boundEl.getSize(),t=this.field.getSize();switch(this.autoSize){case"width":this.setSize(e.width,t.height);break;case"height":this.setSize(t.width,e.height);break;case"none":this.setSize(t.width,t.height);break;default:this.setSize(e.width,e.height)}}},setSize:function(e,t){delete this.field.lastSize;this.field.setSize(e,t);if(this.el){if(Ext.isGecko2||Ext.isOpera||Ext.isIE7&&Ext.isStrict){this.el.setSize(e,t)}this.el.sync()}},realign:function(e){if(e===true){this.doAutoSize()}this.el.alignTo(this.boundEl,this.alignment,this.offsets)},completeEdit:function(e){if(!this.editing){return}if(this.field.assertValue){this.field.assertValue()}var t=this.getValue();if(!this.field.isValid()){if(this.revertInvalid!==false){this.cancelEdit(e)}return}if(String(t)===String(this.startValue)&&this.ignoreNoChange){this.hideEdit(e);return}if(this.fireEvent("beforecomplete",this,t,this.startValue)!==false){t=this.getValue();if(this.updateEl&&this.boundEl){this.boundEl.update(t)}this.hideEdit(e);this.fireEvent("complete",this,t,this.startValue)}},onShow:function(){this.el.show();if(this.hideEl!==false){this.boundEl.hide()}this.field.show().focus(false,true);this.fireEvent("startedit",this.boundEl,this.startValue)},cancelEdit:function(e){if(this.editing){var t=this.getValue();this.setValue(this.startValue);this.hideEdit(e);this.fireEvent("canceledit",this,t,this.startValue)}},hideEdit:function(e){if(e!==true){this.editing=false;this.hide()}},onBlur:function(){if(this.allowBlur===true&&this.editing&&this.selectSameEditor!==true){this.completeEdit()}},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur();if(this.field.collapse){this.field.collapse()}this.el.hide();if(this.hideEl!==false){this.boundEl.show()}},setValue:function(e){this.field.setValue(e)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroyMembers(this,"field");delete this.parentEl;delete this.boundEl}});Ext.reg("editor",Ext.Editor);Ext.ColorPalette=Ext.extend(Ext.Component,{itemCls:"x-color-palette",value:null,clickEvent:"click",ctype:"Ext.ColorPalette",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],initComponent:function(){Ext.ColorPalette.superclass.initComponent.call(this);this.addEvents("select");if(this.handler){this.on("select",this.handler,this.scope,true)}},onRender:function(e,t){this.autoEl={tag:"div",cls:this.itemCls};Ext.ColorPalette.superclass.onRender.call(this,e,t);var n=this.tpl||new Ext.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" class="x-unselectable" unselectable="on">&#160;</span></em></a></tpl>');n.overwrite(this.el,this.colors);this.mon(this.el,this.clickEvent,this.handleClick,this,{delegate:"a"});if(this.clickEvent!="click"){this.mon(this.el,"click",Ext.emptyFn,this,{delegate:"a",preventDefault:true})}},afterRender:function(){Ext.ColorPalette.superclass.afterRender.call(this);if(this.value){var e=this.value;this.value=null;this.select(e,true)}},handleClick:function(e,t){e.preventDefault();if(!this.disabled){var n=t.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(n.toUpperCase())}},select:function(e,t){e=e.replace("#","");if(e!=this.value||this.allowReselect){var n=this.el;if(this.value){n.child("a.color-"+this.value).removeClass("x-color-palette-sel")}n.child("a.color-"+e).addClass("x-color-palette-sel");this.value=e;if(t!==true){this.fireEvent("select",this,e)}}}});Ext.reg("colorpalette",Ext.ColorPalette);Ext.DatePicker=Ext.extend(Ext.BoxComponent,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDaysText:"Disabled",disabledDatesText:"Disabled",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:true,focusOnSelect:true,initHour:12,initComponent:function(){Ext.DatePicker.superclass.initComponent.call(this);this.value=this.value?this.value.clearTime(true):(new Date).clearTime();this.addEvents("select");if(this.handler){this.on("select",this.handler,this.scope||this)}this.initDisabledDays()},initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){var e=this.disabledDates,t=e.length-1,n="(?:";Ext.each(e,function(r,i){n+=Ext.isDate(r)?"^"+Ext.escapeRe(r.dateFormat(this.format))+"$":e[i];if(i!=t){n+="|"}},this);this.disabledDatesRE=new RegExp(n+")")}},setDisabledDates:function(e){if(Ext.isArray(e)){this.disabledDates=e;this.disabledDatesRE=null}else{this.disabledDatesRE=e}this.initDisabledDays();this.update(this.value,true)},setDisabledDays:function(e){this.disabledDays=e;this.update(this.value,true)},setMinDate:function(e){this.minDate=e;this.update(this.value,true)},setMaxDate:function(e){this.maxDate=e;this.update(this.value,true)},setValue:function(e){this.value=e.clearTime(true);this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(e){Ext.DatePicker.superclass.onEnable.call(this);this.doDisabled(false);this.update(e?this.value:this.activeDate);if(Ext.isIE9m){this.el.repaint()}},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this);this.doDisabled(true);if(Ext.isIE9m&&!Ext.isIE8){Ext.each([].concat(this.textNodes,this.el.query("th span")),function(e){Ext.fly(e).repaint()})}},doDisabled:function(e){this.keyNav.setDisabled(e);this.prevRepeater.setDisabled(e);this.nextRepeater.setDisabled(e);if(this.showToday){this.todayKeyListener.setDisabled(e);this.todayBtn.setDisabled(e)}},onRender:function(e,t){var n=['<table cellspacing="0">','<tr><td class="x-date-left"><a href="#" title="',this.prevText,'">&#160;</a></td><td class="x-date-middle" align="center"></td><td class="x-date-right"><a href="#" title="',this.nextText,'">&#160;</a></td></tr>','<tr><td colspan="3"><table class="x-date-inner" cellspacing="0"><thead><tr>'],r=this.dayNames,i;for(i=0;i<7;i++){var s=this.startDay+i;if(s>6){s=s-7}n.push("<th><span>",r[s].substr(0,1),"</span></th>")}n[n.length]="</tr></thead><tbody><tr>";for(i=0;i<42;i++){if(i%7===0&&i!==0){n[n.length]="</tr><tr>"}n[n.length]='<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span></span></em></a></td>'}n.push("</tr></tbody></table></td></tr>",this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"></td></tr>':"",'</table><div class="x-date-mp"></div>');var o=document.createElement("div");o.className="x-date-picker";o.innerHTML=n.join("");e.dom.insertBefore(o,t);this.el=Ext.get(o);this.eventEl=Ext.get(o.firstChild);this.prevRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:true,stopDefault:true});this.nextRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextMonth,scope:this,preventDefault:true,stopDefault:true});this.monthPicker=this.el.down("div.x-date-mp");this.monthPicker.enableDisplayMode("block");this.keyNav=new Ext.KeyNav(this.eventEl,{left:function(e){if(e.ctrlKey){this.showPrevMonth()}else{this.update(this.activeDate.add("d",-1))}},right:function(e){if(e.ctrlKey){this.showNextMonth()}else{this.update(this.activeDate.add("d",1))}},up:function(e){if(e.ctrlKey){this.showNextYear()}else{this.update(this.activeDate.add("d",-7))}},down:function(e){if(e.ctrlKey){this.showPrevYear()}else{this.update(this.activeDate.add("d",7))}},pageUp:function(e){this.showNextMonth()},pageDown:function(e){this.showPrevMonth()},enter:function(e){e.stopPropagation();return true},scope:this});this.el.unselectable();this.cells=this.el.select("table.x-date-inner tbody td");this.textNodes=this.el.query("table.x-date-inner tbody span");this.mbtn=new Ext.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this.el.child("td.x-date-middle",true)});this.mbtn.el.child("em").addClass("x-btn-arrow");if(this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);var u=(new Date).dateFormat(this.format);this.todayBtn=new Ext.Button({renderTo:this.el.child("td.x-date-bottom",true),text:String.format(this.todayText,u),tooltip:String.format(this.todayTip,u),handler:this.selectToday,scope:this})}this.mon(this.eventEl,"mousewheel",this.handleMouseWheel,this);this.mon(this.eventEl,"click",this.handleDateClick,this,{delegate:"a.x-date-date"});this.mon(this.mbtn,"click",this.showMonthPicker,this);this.onEnable(true)},createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){var e=['<table border="0" cellspacing="0">'];for(var t=0;t<6;t++){e.push('<tr><td class="x-date-mp-month"><a href="#">',Date.getShortMonthName(t),"</a></td>",'<td class="x-date-mp-month x-date-mp-sep"><a href="#">',Date.getShortMonthName(t+6),"</a></td>",t===0?'<td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-prev"></a></td><td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-next"></a></td></tr>':'<td class="x-date-mp-year"><a href="#"></a></td><td class="x-date-mp-year"><a href="#"></a></td></tr>')}e.push('<tr class="x-date-mp-btns"><td colspan="4"><button type="button" class="x-date-mp-ok">',this.okText,'</button><button type="button" class="x-date-mp-cancel">',this.cancelText,"</button></td></tr>","</table>");this.monthPicker.update(e.join(""));this.mon(this.monthPicker,"click",this.onMonthClick,this);this.mon(this.monthPicker,"dblclick",this.onMonthDblClick,this);this.mpMonths=this.monthPicker.select("td.x-date-mp-month");this.mpYears=this.monthPicker.select("td.x-date-mp-year");this.mpMonths.each(function(e,t,n){n+=1;if(n%2===0){e.dom.xmonth=5+Math.round(n*.5)}else{e.dom.xmonth=Math.round((n-1)*.5)}})}},showMonthPicker:function(){if(!this.disabled){this.createMonthPicker();var e=this.el.getSize();this.monthPicker.setSize(e);this.monthPicker.child("table").setSize(e);this.mpSelMonth=(this.activeDate||this.value).getMonth();this.updateMPMonth(this.mpSelMonth);this.mpSelYear=(this.activeDate||this.value).getFullYear();this.updateMPYear(this.mpSelYear);this.monthPicker.slideIn("t",{duration:.2})}},updateMPYear:function(e){this.mpyear=e;var t=this.mpYears.elements;for(var n=1;n<=10;n++){var r=t[n-1],i;if(n%2===0){i=e+Math.round(n*.5);r.firstChild.innerHTML=i;r.xyear=i}else{i=e-(5-Math.round(n*.5));r.firstChild.innerHTML=i;r.xyear=i}this.mpYears.item(n-1)[i==this.mpSelYear?"addClass":"removeClass"]("x-date-mp-sel")}},updateMPMonth:function(e){this.mpMonths.each(function(t,n,r){t[t.dom.xmonth==e?"addClass":"removeClass"]("x-date-mp-sel")})},selectMPMonth:function(e){},onMonthClick:function(e,t){e.stopEvent();var n=new Ext.Element(t),r;if(n.is("button.x-date-mp-cancel")){this.hideMonthPicker()}else if(n.is("button.x-date-mp-ok")){var i=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate());if(i.getMonth()!=this.mpSelMonth){i=(new Date(this.mpSelYear,this.mpSelMonth,1)).getLastDateOfMonth()}this.update(i);this.hideMonthPicker()}else if(r=n.up("td.x-date-mp-month",2)){this.mpMonths.removeClass("x-date-mp-sel");r.addClass("x-date-mp-sel");this.mpSelMonth=r.dom.xmonth}else if(r=n.up("td.x-date-mp-year",2)){this.mpYears.removeClass("x-date-mp-sel");r.addClass("x-date-mp-sel");this.mpSelYear=r.dom.xyear}else if(n.is("a.x-date-mp-prev")){this.updateMPYear(this.mpyear-10)}else if(n.is("a.x-date-mp-next")){this.updateMPYear(this.mpyear+10)}},onMonthDblClick:function(e,t){e.stopEvent();var n=new Ext.Element(t),r;if(r=n.up("td.x-date-mp-month",2)){this.update(new Date(this.mpSelYear,r.dom.xmonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}else if(r=n.up("td.x-date-mp-year",2)){this.update(new Date(r.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}},hideMonthPicker:function(e){if(this.monthPicker){if(e===true){this.monthPicker.hide()}else{this.monthPicker.slideOut("t",{duration:.2})}}},showPrevMonth:function(e){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(e){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(e){e.stopEvent();if(!this.disabled){var t=e.getWheelDelta();if(t>0){this.showPrevMonth()}else if(t<0){this.showNextMonth()}}},handleDateClick:function(e,t){e.stopEvent();if(!this.disabled&&t.dateValue&&!Ext.fly(t.parentNode).hasClass("x-date-disabled")){this.cancelFocus=this.focusOnSelect===false;this.setValue(new Date(t.dateValue));delete this.cancelFocus;this.fireEvent("select",this,this.value)}},selectToday:function(){if(this.todayBtn&&!this.todayBtn.disabled){this.setValue((new Date).clearTime());this.fireEvent("select",this,this.value)}},update:function(e,t){if(this.rendered){var n=this.activeDate,r=this.isVisible();this.activeDate=e;if(!t&&n&&this.el){var i=e.getTime();if(n.getMonth()==e.getMonth()&&n.getFullYear()==e.getFullYear()){this.cells.removeClass("x-date-selected");this.cells.each(function(e){if(e.dom.firstChild.dateValue==i){e.addClass("x-date-selected");if(r&&!this.cancelFocus){Ext.fly(e.dom.firstChild).focus(50)}return false}},this);return}}var s=e.getDaysInMonth(),o=e.getFirstDateOfMonth(),u=o.getDay()-this.startDay;if(u<0){u+=7}s+=u;var a=e.add("mo",-1),f=a.getDaysInMonth()-u,l=this.cells.elements,c=this.textNodes,h=new Date(a.getFullYear(),a.getMonth(),f,this.initHour),p=(new Date).clearTime().getTime(),d=e.clearTime(true).getTime(),v=this.minDate?this.minDate.clearTime(true):Number.NEGATIVE_INFINITY,m=this.maxDate?this.maxDate.clearTime(true):Number.POSITIVE_INFINITY,g=this.disabledDatesRE,y=this.disabledDatesText,b=this.disabledDays?this.disabledDays.join(""):false,w=this.disabledDaysText,E=this.format;if(this.showToday){var S=(new Date).clearTime(),x=S<v||S>m||g&&E&&g.test(S.dateFormat(E))||b&&b.indexOf(S.getDay())!=-1;if(!this.disabled){this.todayBtn.setDisabled(x);this.todayKeyListener[x?"disable":"enable"]()}}var T=function(e,t){t.title="";var n=h.clearTime(true).getTime();t.firstChild.dateValue=n;if(n==p){t.className+=" x-date-today";t.title=e.todayText}if(n==d){t.className+=" x-date-selected";if(r){Ext.fly(t.firstChild).focus(50)}}if(n<v){t.className=" x-date-disabled";t.title=e.minText;return}if(n>m){t.className=" x-date-disabled";t.title=e.maxText;return}if(b){if(b.indexOf(h.getDay())!=-1){t.title=w;t.className=" x-date-disabled"}}if(g&&E){var i=h.dateFormat(E);if(g.test(i)){t.title=y.replace("%0",i);t.className=" x-date-disabled"}}};var N=0;for(;N<u;N++){c[N].innerHTML=++f;h.setDate(h.getDate()+1);l[N].className="x-date-prevday";T(this,l[N])}for(;N<s;N++){var C=N-u+1;c[N].innerHTML=C;h.setDate(h.getDate()+1);l[N].className="x-date-active";T(this,l[N])}var k=0;for(;N<42;N++){c[N].innerHTML=++k;h.setDate(h.getDate()+1);l[N].className="x-date-nextday";T(this,l[N])}this.mbtn.setText(this.monthNames[e.getMonth()]+" "+e.getFullYear());if(!this.internalRender){var L=this.el.dom.firstChild,A=L.offsetWidth;this.el.setWidth(A+this.el.getBorderWidth("lr"));Ext.fly(L).setWidth(A);this.internalRender=true;if(Ext.isOpera&&!this.secondPass){L.rows[0].cells[1].style.width=A-(L.rows[0].cells[0].offsetWidth+L.rows[0].cells[2].offsetWidth)+"px";this.secondPass=true;this.update.defer(10,this,[e])}}}},beforeDestroy:function(){if(this.rendered){Ext.destroy(this.keyNav,this.monthPicker,this.eventEl,this.mbtn,this.nextRepeater,this.prevRepeater,this.cells.el,this.todayBtn);delete this.textNodes;delete this.cells.elements}}});Ext.reg("datepicker",Ext.DatePicker);Ext.LoadMask=function(e,t){this.el=Ext.get(e);Ext.apply(this,t);if(this.store){this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad});this.removeMask=Ext.value(this.removeMask,false)}else{var n=this.el.getUpdater();n.showLoadIndicator=false;n.on({scope:this,beforeupdate:this.onBeforeLoad,update:this.onLoad,failure:this.onLoad});this.removeMask=Ext.value(this.removeMask,true)}};Ext.LoadMask.prototype={msg:"Loading...",msgCls:"x-mask-loading",disabled:false,disable:function(){this.disabled=true},enable:function(){this.disabled=false},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){if(!this.disabled){this.el.mask(this.msg,this.msgCls)}},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.onLoad,this)}else{var e=this.el.getUpdater();e.un("beforeupdate",this.onBeforeLoad,this);e.un("update",this.onLoad,this);e.un("failure",this.onLoad,this)}}};Ext.slider.Thumb=Ext.extend(Object,{dragging:false,constructor:function(e){Ext.apply(this,e||{},{cls:"x-slider-thumb",constrain:false});Ext.slider.Thumb.superclass.constructor.call(this,e);if(this.slider.vertical){Ext.apply(this,Ext.slider.Thumb.Vertical)}},render:function(){this.el=this.slider.innerEl.insertFirst({cls:this.cls});this.initEvents()},enable:function(){this.disabled=false;this.el.removeClass(this.slider.disabledClass)},disable:function(){this.disabled=true;this.el.addClass(this.slider.disabledClass)},initEvents:function(){var e=this.el;e.addClassOnOver("x-slider-thumb-over");this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(e)},onBeforeDragStart:function(e){if(this.disabled){return false}else{this.slider.promoteThumb(this);return true}},onDragStart:function(e){this.el.addClass("x-slider-thumb-drag");this.dragging=true;this.dragStartValue=this.value;this.slider.fireEvent("dragstart",this.slider,e,this)},onDrag:function(e){var t=this.slider,n=this.index,r=this.getNewValue();if(this.constrain){var i=t.thumbs[n+1],s=t.thumbs[n-1];if(s!=undefined&&r<=s.value)r=s.value;if(i!=undefined&&r>=i.value)r=i.value}t.setValue(n,r,false);t.fireEvent("drag",t,e,this)},getNewValue:function(){var e=this.slider,t=e.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(e.reverseValue(t.left),e.decimalPrecision)},onDragEnd:function(e){var t=this.slider,n=this.value;this.el.removeClass("x-slider-thumb-drag");this.dragging=false;t.fireEvent("dragend",t,e);if(this.dragStartValue!=n){t.fireEvent("changecomplete",t,n,this)}},destroy:function(){Ext.destroyMembers(this,"tracker","el")}});Ext.slider.MultiSlider=Ext.extend(Ext.BoxComponent,{vertical:false,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:true,constrainThumbs:true,topThumbZIndex:1e4,initComponent:function(){if(!Ext.isDefined(this.value)){this.value=this.minValue}this.thumbs=[];Ext.slider.MultiSlider.superclass.initComponent.call(this);this.keyIncrement=Math.max(this.increment,this.keyIncrement);this.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend");if(this.values==undefined||Ext.isEmpty(this.values))this.values=[0];var e=this.values;for(var t=0;t<e.length;t++){this.addThumb(e[t])}if(this.vertical){Ext.apply(this,Ext.slider.Vertical)}},addThumb:function(e){var t=new Ext.slider.Thumb({value:e,slider:this,index:this.thumbs.length,constrain:this.constrainThumbs});this.thumbs.push(t);if(this.rendered)t.render()},promoteThumb:function(e){var t=this.thumbs,n,r;for(var i=0,s=t.length;i<s;i++){r=t[i];if(r==e){n=this.topThumbZIndex}else{n=""}r.el.setStyle("zIndex",n)}},onRender:function(){this.autoEl={cls:"x-slider "+(this.vertical?"x-slider-vert":"x-slider-horz"),cn:{cls:"x-slider-end",cn:{cls:"x-slider-inner",cn:[{tag:"a",cls:"x-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"}]}}};Ext.slider.MultiSlider.superclass.onRender.apply(this,arguments);this.endEl=this.el.first();this.innerEl=this.endEl.first();this.focusEl=this.innerEl.child(".x-slider-focus");for(var e=0;e<this.thumbs.length;e++){this.thumbs[e].render()}var t=this.innerEl.child(".x-slider-thumb");this.halfThumb=(this.vertical?t.getHeight():t.getWidth())/2;this.initEvents()},initEvents:function(){this.mon(this.el,{scope:this,mousedown:this.onMouseDown,keydown:this.onKeyDown});this.focusEl.swallowEvent("click",true)},onMouseDown:function(e){if(this.disabled){return}var t=false;for(var n=0;n<this.thumbs.length;n++){t=t||e.target==this.thumbs[n].el.dom}if(this.clickToChange&&!t){var r=this.innerEl.translatePoints(e.getXY());this.onClickChange(r)}this.focus()},onClickChange:function(e){if(e.top>this.clickRange[0]&&e.top<this.clickRange[1]){var t=this.getNearest(e,"left"),n=t.index;this.setValue(n,Ext.util.Format.round(this.reverseValue(e.left),this.decimalPrecision),undefined,true)}},getNearest:function(e,t){var n=t=="top"?this.innerEl.getHeight()-e[t]:e[t],r=this.reverseValue(n),i=this.maxValue-this.minValue+5,s=0,o=null;for(var u=0;u<this.thumbs.length;u++){var a=this.thumbs[u],f=a.value,l=Math.abs(f-r);if(Math.abs(l<=i)){o=a;s=u;i=l}}return o},onKeyDown:function(e){if(this.disabled||this.thumbs.length!==1){e.preventDefault();return}var t=e.getKey(),n;switch(t){case e.UP:case e.RIGHT:e.stopEvent();n=e.ctrlKey?this.maxValue:this.getValue(0)+this.keyIncrement;this.setValue(0,n,undefined,true);break;case e.DOWN:case e.LEFT:e.stopEvent();n=e.ctrlKey?this.minValue:this.getValue(0)-this.keyIncrement;this.setValue(0,n,undefined,true);break;default:e.preventDefault()}},doSnap:function(e){if(!(this.increment&&e)){return e}var t=e,n=this.increment,r=e%n;if(r!=0){t-=r;if(r*2>=n){t+=n}else if(r*2<-n){t-=n}}return t.constrain(this.minValue,this.maxValue)},afterRender:function(){Ext.slider.MultiSlider.superclass.afterRender.apply(this,arguments);for(var e=0;e<this.thumbs.length;e++){var t=this.thumbs[e];if(t.value!==undefined){var n=this.normalizeValue(t.value);if(n!==t.value){this.setValue(e,n,false)}else{this.moveThumb(e,this.translateValue(n),false)}}}},getRatio:function(){var e=this.innerEl.getWidth(),t=this.maxValue-this.minValue;return t==0?e:e/t},normalizeValue:function(e){e=this.doSnap(e);e=Ext.util.Format.round(e,this.decimalPrecision);e=e.constrain(this.minValue,this.maxValue);return e},setMinValue:function(e){this.minValue=e;var t=0,n=this.thumbs,r=n.length,i;for(;t<r;++t){i=n[t];i.value=i.value<e?e:i.value}this.syncThumb()},setMaxValue:function(e){this.maxValue=e;var t=0,n=this.thumbs,r=n.length,i;for(;t<r;++t){i=n[t];i.value=i.value>e?e:i.value}this.syncThumb()},setValue:function(e,t,n,r){var i=this.thumbs[e],s=i.el;t=this.normalizeValue(t);if(t!==i.value&&this.fireEvent("beforechange",this,t,i.value,i)!==false){i.value=t;if(this.rendered){this.moveThumb(e,this.translateValue(t),n!==false);this.fireEvent("change",this,t,i);if(r){this.fireEvent("changecomplete",this,t,i)}}}},translateValue:function(e){var t=this.getRatio();return e*t-this.minValue*t-this.halfThumb},reverseValue:function(e){var t=this.getRatio();return(e+this.minValue*t)/t},moveThumb:function(e,t,n){var r=this.thumbs[e].el;if(!n||this.animate===false){r.setLeft(t)}else{r.shift({left:t,stopFx:true,duration:.35})}},focus:function(){this.focusEl.focus(10)},onResize:function(e,t){var n=this.thumbs,r=n.length,i=0;for(;i<r;++i){n[i].el.stopFx()}if(Ext.isNumber(e)){this.innerEl.setWidth(e-(this.el.getPadding("l")+this.endEl.getPadding("r")))}this.syncThumb();Ext.slider.MultiSlider.superclass.onResize.apply(this,arguments)},onDisable:function(){Ext.slider.MultiSlider.superclass.onDisable.call(this);for(var e=0;e<this.thumbs.length;e++){var t=this.thumbs[e],n=t.el;t.disable();if(Ext.isIE){var r=n.getXY();n.hide();this.innerEl.addClass(this.disabledClass).dom.disabled=true;if(!this.thumbHolder){this.thumbHolder=this.endEl.createChild({cls:"x-slider-thumb "+this.disabledClass})}this.thumbHolder.show().setXY(r)}}},onEnable:function(){Ext.slider.MultiSlider.superclass.onEnable.call(this);for(var e=0;e<this.thumbs.length;e++){var t=this.thumbs[e],n=t.el;t.enable();if(Ext.isIE){this.innerEl.removeClass(this.disabledClass).dom.disabled=false;if(this.thumbHolder)this.thumbHolder.hide();n.show();this.syncThumb()}}},syncThumb:function(){if(this.rendered){for(var e=0;e<this.thumbs.length;e++){this.moveThumb(e,this.translateValue(this.thumbs[e].value))}}},getValue:function(e){return this.thumbs[e].value},getValues:function(){var e=[];for(var t=0;t<this.thumbs.length;t++){e.push(this.thumbs[t].value)}return e},beforeDestroy:function(){var e=this.thumbs;for(var t=0,n=e.length;t<n;++t){e[t].destroy();e[t]=null}Ext.destroyMembers(this,"endEl","innerEl","focusEl","thumbHolder");Ext.slider.MultiSlider.superclass.beforeDestroy.call(this)}});Ext.reg("multislider",Ext.slider.MultiSlider);Ext.slider.SingleSlider=Ext.extend(Ext.slider.MultiSlider,{constructor:function(e){e=e||{};Ext.applyIf(e,{values:[e.value||0]});Ext.slider.SingleSlider.superclass.constructor.call(this,e)},getValue:function(){return Ext.slider.SingleSlider.superclass.getValue.call(this,0)},setValue:function(e,t){var n=Ext.toArray(arguments),r=n.length;if(r==1||r<=3&&typeof arguments[1]!="number"){n.unshift(0)}return Ext.slider.SingleSlider.superclass.setValue.apply(this,n)},syncThumb:function(){return Ext.slider.SingleSlider.superclass.syncThumb.apply(this,[0].concat(arguments))},getNearest:function(){return this.thumbs[0]}});Ext.Slider=Ext.slider.SingleSlider;Ext.reg("slider",Ext.slider.SingleSlider);Ext.slider.Vertical={onResize:function(e,t){this.innerEl.setHeight(t-(this.el.getPadding("t")+this.endEl.getPadding("b")));this.syncThumb()},getRatio:function(){var e=this.innerEl.getHeight(),t=this.maxValue-this.minValue;return e/t},moveThumb:function(e,t,n){var r=this.thumbs[e],i=r.el;if(!n||this.animate===false){i.setBottom(t)}else{i.shift({bottom:t,stopFx:true,duration:.35})}},onClickChange:function(e){if(e.left>this.clickRange[0]&&e.left<this.clickRange[1]){var t=this.getNearest(e,"top"),n=t.index,r=this.minValue+this.reverseValue(this.innerEl.getHeight()-e.top);this.setValue(n,Ext.util.Format.round(r,this.decimalPrecision),undefined,true)}}};Ext.slider.Thumb.Vertical={getNewValue:function(){var e=this.slider,t=e.innerEl,n=t.translatePoints(this.tracker.getXY()),r=t.getHeight()-n.top;return e.minValue+Ext.util.Format.round(r/e.getRatio(),e.decimalPrecision)}};Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:"x-progress",animate:false,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this);this.addEvents("update")},onRender:function(e,t){var n=new Ext.Template('<div class="{cls}-wrap">','<div class="{cls}-inner">','<div class="{cls}-bar">','<div class="{cls}-text">',"<div>&#160;</div>","</div>","</div>",'<div class="{cls}-text {cls}-text-back">',"<div>&#160;</div>","</div>","</div>","</div>");this.el=t?n.insertBefore(t,{cls:this.baseCls},true):n.append(e,{cls:this.baseCls},true);if(this.id){this.el.dom.id=this.id}var r=this.el.dom.firstChild;this.progressBar=Ext.get(r.firstChild);if(this.textEl){this.textEl=Ext.get(this.textEl);delete this.textTopEl}else{this.textTopEl=Ext.get(this.progressBar.dom.firstChild);var i=Ext.get(r.childNodes[1]);this.textTopEl.setStyle("z-index",99).addClass("x-hidden");this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,i.dom.firstChild]);this.textEl.setWidth(r.offsetWidth)}this.progressBar.setHeight(r.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this);if(this.value){this.updateProgress(this.value,this.text)}else{this.updateText(this.text)}},updateProgress:function(e,t,n){this.value=e||0;if(t){this.updateText(t)}if(this.rendered&&!this.isDestroyed){var r=Math.floor(e*this.el.dom.firstChild.offsetWidth);this.progressBar.setWidth(r,n===true||n!==false&&this.animate);if(this.textTopEl){this.textTopEl.removeClass("x-hidden").setWidth(r)}}this.fireEvent("update",this,e,t);return this},wait:function(e){if(!this.waitTimer){var t=this;e=e||{};this.updateText(e.text);this.waitTimer=Ext.TaskMgr.start({run:function(t){var n=e.increment||10;t-=1;this.updateProgress(((t+n)%n+1)*(100/n)*.01,null,e.animate)},interval:e.interval||1e3,duration:e.duration,onStop:function(){if(e.fn){e.fn.apply(e.scope||this)}this.reset()},scope:t})}return this},isWaiting:function(){return this.waitTimer!==null},updateText:function(e){this.text=e||"&#160;";if(this.rendered){this.textEl.update(this.text)}return this},syncProgressBar:function(){if(this.value){this.updateProgress(this.value,this.text)}return this},setSize:function(e,t){Ext.ProgressBar.superclass.setSize.call(this,e,t);if(this.textTopEl){var n=this.el.dom.firstChild;this.textEl.setSize(n.offsetWidth,n.offsetHeight)}this.syncProgressBar();return this},reset:function(e){this.updateProgress(0);if(this.textTopEl){this.textTopEl.addClass("x-hidden")}this.clearTimer();if(e===true){this.hide()}return this},clearTimer:function(){if(this.waitTimer){this.waitTimer.onStop=null;Ext.TaskMgr.stop(this.waitTimer);this.waitTimer=null}},onDestroy:function(){this.clearTimer();if(this.rendered){if(this.textEl.isComposite){this.textEl.clear()}Ext.destroyMembers(this,"textEl","progressBar","textTopEl")}Ext.ProgressBar.superclass.onDestroy.call(this)}});Ext.reg("progress",Ext.ProgressBar);(function(){var e=Ext.EventManager;var t=Ext.lib.Dom;Ext.dd.DragDrop=function(e,t,n){if(e){this.init(e,t,n)}};Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(e,t){},startDrag:function(e,t){},b4Drag:function(e){},onDrag:function(e){},onDragEnter:function(e,t){},b4DragOver:function(e){},onDragOver:function(e,t){},b4DragOut:function(e){},onDragOut:function(e,t){},b4DragDrop:function(e){},onDragDrop:function(e,t){},onInvalidDrop:function(e){},b4EndDrag:function(e){},endDrag:function(e){},b4MouseDown:function(e){},onMouseDown:function(e){},onMouseUp:function(e){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(e,t,n){if(Ext.isNumber(t)){t={left:t,right:t,top:t,bottom:t}}t=t||this.defaultPadding;var r=Ext.get(this.getEl()).getBox(),i=Ext.get(e),s=i.getScroll(),o,u=i.dom;if(u==document.body){o={x:s.left,y:s.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()}}else{var a=i.getXY();o={x:a[0],y:a[1],width:u.clientWidth,height:u.clientHeight}}var f=r.y-o.y,l=r.x-o.x;this.resetConstraints();this.setXConstraint(l-(t.left||0),o.width-l-r.width-(t.right||0),this.xTickSize);this.setYConstraint(f-(t.top||0),o.height-f-r.height-(t.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(t,n,r){this.initTarget(t,n,r);e.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(e,t,n){this.config=n||{};this.DDM=Ext.dd.DDM;this.groups={};if(typeof e!=="string"){e=Ext.id(e)}this.id=e;this.addToGroup(t?t:"default");this.handleElId=e;this.setDragElId(e);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=this.config.isTarget!==false;this.maintainOffset=this.config.maintainOffset;this.primaryButtonOnly=this.config.primaryButtonOnly!==false},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(e,t,n,r){if(!t&&0!==t){this.padding=[e,e,e,e]}else if(!n&&0!==n){this.padding=[e,t,e,t]}else{this.padding=[e,t,n,r]}},setInitPosition:function(e,n){var r=this.getEl();if(!this.DDM.verifyEl(r)){return}var i=e||0;var s=n||0;var o=t.getXY(r);this.initPageX=o[0]-i;this.initPageY=o[1]-s;this.lastPageX=o[0];this.lastPageY=o[1];this.setStartPosition(o)},setStartPosition:function(e){var n=e||t.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=n[0];this.startPageY=n[1]},addToGroup:function(e){this.groups[e]=true;this.DDM.regDragDrop(this,e)},removeFromGroup:function(e){if(this.groups[e]){delete this.groups[e]}this.DDM.removeDDFromGroup(this,e)},setDragElId:function(e){this.dragElId=e},setHandleElId:function(e){if(typeof e!=="string"){e=Ext.id(e)}this.handleElId=e;this.DDM.regHandle(this.id,e)},setOuterHandleElId:function(t){if(typeof t!=="string"){t=Ext.id(t)}e.on(t,"mousedown",this.handleMouseDown,this);this.setHandleElId(t);this.hasOuterHandles=true},unreg:function(){e.un(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return this.DDM.isLocked()||this.locked},handleMouseDown:function(e,t){if(this.primaryButtonOnly&&e.button!=0){return}if(this.isLocked()){return}this.DDM.refreshCache(this.groups);var n=new Ext.lib.Point(Ext.lib.Event.getPageX(e),Ext.lib.Event.getPageY(e));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(n,this)){}else{if(this.clickValidator(e)){this.setStartPosition();this.b4MouseDown(e);this.onMouseDown(e);this.DDM.handleMouseDown(e,this);if(this.preventDefault||this.stopPropagation){if(this.preventDefault){e.preventDefault()}if(this.stopPropagation){e.stopPropagation()}}else{this.DDM.stopEvent(e)}}else{}}},clickValidator:function(e){var t=e.getTarget();return this.isValidHandleChild(t)&&(this.id==this.handleElId||this.DDM.handleWasClicked(t,this.id))},addInvalidHandleType:function(e){var t=e.toUpperCase();this.invalidHandleTypes[t]=t},addInvalidHandleId:function(e){if(typeof e!=="string"){e=Ext.id(e)}this.invalidHandleIds[e]=e},addInvalidHandleClass:function(e){this.invalidHandleClasses.push(e)},removeInvalidHandleType:function(e){var t=e.toUpperCase();delete this.invalidHandleTypes[t]},removeInvalidHandleId:function(e){if(typeof e!=="string"){e=Ext.id(e)}delete this.invalidHandleIds[e]},removeInvalidHandleClass:function(e){for(var t=0,n=this.invalidHandleClasses.length;t<n;++t){if(this.invalidHandleClasses[t]==e){delete this.invalidHandleClasses[t]}}},isValidHandleChild:function(e){var t=true;var n;try{n=e.nodeName.toUpperCase()}catch(r){n=e.nodeName}t=t&&!this.invalidHandleTypes[n];t=t&&!this.invalidHandleIds[e.id];for(var i=0,s=this.invalidHandleClasses.length;t&&i<s;++i){t=!Ext.fly(e).hasClass(this.invalidHandleClasses[i])}return t},setXTicks:function(e,t){this.xTicks=[];this.xTickSize=t;var n={};for(var r=this.initPageX;r>=this.minX;r=r-t){if(!n[r]){this.xTicks[this.xTicks.length]=r;n[r]=true}}for(r=this.initPageX;r<=this.maxX;r=r+t){if(!n[r]){this.xTicks[this.xTicks.length]=r;n[r]=true}}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(e,t){this.yTicks=[];this.yTickSize=t;var n={};for(var r=this.initPageY;r>=this.minY;r=r-t){if(!n[r]){this.yTicks[this.yTicks.length]=r;n[r]=true}}for(r=this.initPageY;r<=this.maxY;r=r+t){if(!n[r]){this.yTicks[this.yTicks.length]=r;n[r]=true}}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(e,t,n){this.leftConstraint=e;this.rightConstraint=t;this.minX=this.initPageX-e;this.maxX=this.initPageX+t;if(n){this.setXTicks(this.initPageX,n)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(e,t,n){this.topConstraint=e;this.bottomConstraint=t;this.minY=this.initPageY-e;this.maxY=this.initPageY+t;if(n){this.setYTicks(this.initPageY,n)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var e=this.maintainOffset?this.lastPageX-this.initPageX:0;var t=this.maintainOffset?this.lastPageY-this.initPageY:0;this.setInitPosition(e,t)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(e,t){if(!t){return e}else if(t[0]>=e){return t[0]}else{for(var n=0,r=t.length;n<r;++n){var i=n+1;if(t[i]&&t[i]>=e){var s=e-t[n];var o=t[i]-e;return o>s?t[n]:t[i]}}return t[t.length-1]}},toString:function(){return"DragDrop "+this.id}}})();if(!Ext.dd.DragDropMgr){Ext.dd.DragDropMgr=function(){var e=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,notifyOccluded:false,_execOnAll:function(e,t){for(var n in this.ids){for(var r in this.ids[n]){var i=this.ids[n][r];if(!this.isTypeOfDD(i)){continue}i[e].apply(i,t)}}},_onLoad:function(){this.init();e.on(document,"mouseup",this.handleMouseUp,this,true);e.on(document,"mousemove",this.handleMouseMove,this,true);e.on(window,"unload",this._onUnload,this,true);e.on(window,"resize",this._onResize,this,true)},_onResize:function(e){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(e,t){if(!this.initialized){this.init()}if(!this.ids[t]){this.ids[t]={}}this.ids[t][e.id]=e},removeDDFromGroup:function(e,t){if(!this.ids[t]){this.ids[t]={}}var n=this.ids[t];if(n&&n[e.id]){delete n[e.id]}},_remove:function(e){for(var t in e.groups){if(t&&this.ids[t]&&this.ids[t][e.id]){delete this.ids[t][e.id]}}delete this.handleIds[e.id]},regHandle:function(e,t){if(!this.handleIds[e]){this.handleIds[e]={}}this.handleIds[e][t]=t},isDragDrop:function(e){return this.getDDById(e)?true:false},getRelated:function(e,t){var n=[];for(var r in e.groups){for(var i in this.ids[r]){var s=this.ids[r][i];if(!this.isTypeOfDD(s)){continue}if(!t||s.isTarget){n[n.length]=s}}}return n},isLegalTarget:function(e,t){var n=this.getRelated(e,true);for(var r=0,i=n.length;r<i;++r){if(n[r].id==t.id){return true}}return false},isTypeOfDD:function(e){return e&&e.__ygDragDrop},isHandle:function(e,t){return this.handleIds[e]&&this.handleIds[e][t]},getDDById:function(e){for(var t in this.ids){if(this.ids[t][e]){return this.ids[t][e]}}return null},handleMouseDown:function(e,t){if(Ext.QuickTips){Ext.QuickTips.ddDisable()}if(this.dragCurrent){this.handleMouseUp(e)}this.currentTarget=e.getTarget();this.dragCurrent=t;var n=t.getEl();this.startX=e.getPageX();this.startY=e.getPageY();this.deltaX=this.startX-n.offsetLeft;this.deltaY=this.startY-n.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var e=Ext.dd.DDM;e.startDrag(e.startX,e.startY)},this.clickTimeThresh)},startDrag:function(e,t){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(e,t);this.dragCurrent.startDrag(e,t)}this.dragThreshMet=true},handleMouseUp:function(e){if(Ext.QuickTips){Ext.QuickTips.ddEnable()}if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(e,true)}else{}this.stopDrag(e);this.stopEvent(e)},stopEvent:function(e){if(this.stopPropagation){e.stopPropagation()}if(this.preventDefault){e.preventDefault()}},stopDrag:function(e){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(e);this.dragCurrent.endDrag(e)}this.dragCurrent.onMouseUp(e)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(e){if(!this.dragCurrent){return true}if(Ext.isIE&&e.button!==0&&e.button!==1&&e.button!==2){this.stopEvent(e);return this.handleMouseUp(e)}if(!this.dragThreshMet){var t=Math.abs(this.startX-e.getPageX());var n=Math.abs(this.startY-e.getPageY());if(t>this.clickPixelThresh||n>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){this.dragCurrent.b4Drag(e);this.dragCurrent.onDrag(e);if(!this.dragCurrent.moveOnly){this.fireEvents(e,false)}}this.stopEvent(e);return true},fireEvents:function(e,t){var n=this,r=n.dragCurrent,i=e.getPoint(),s,o,u=[],a=[],f=[],l=[],c=[],h=[],p,d,v,m;if(!r||r.isLocked()){return}for(d in n.dragOvers){s=n.dragOvers[d];if(!n.isTypeOfDD(s)){continue}if(!this.isOverTarget(i,s,n.mode)){f.push(s)}a[d]=true;delete n.dragOvers[d]}for(m in r.groups){if("string"!=typeof m){continue}for(d in n.ids[m]){s=n.ids[m][d];if(n.isTypeOfDD(s)&&(o=s.getEl())&&s.isTarget&&!s.isLocked()&&(s!=r||r.ignoreSelf===false)){if((s.zIndex=n.getZIndex(o))!==-1){p=true}u.push(s)}}}if(p){u.sort(n.byZIndex)}for(d=0,v=u.length;d<v;d++){s=u[d];if(n.isOverTarget(i,s,n.mode)){if(t){c.push(s)}else{if(!a[s.id]){h.push(s)}else{l.push(s)}n.dragOvers[s.id]=s}if(!n.notifyOccluded){break}}}if(n.mode){if(f.length){r.b4DragOut(e,f);r.onDragOut(e,f)}if(h.length){r.onDragEnter(e,h)}if(l.length){r.b4DragOver(e,l);r.onDragOver(e,l)}if(c.length){r.b4DragDrop(e,c);r.onDragDrop(e,c)}}else{for(d=0,v=f.length;d<v;++d){r.b4DragOut(e,f[d].id);r.onDragOut(e,f[d].id)}for(d=0,v=h.length;d<v;++d){r.onDragEnter(e,h[d].id)}for(d=0,v=l.length;d<v;++d){r.b4DragOver(e,l[d].id);r.onDragOver(e,l[d].id)}for(d=0,v=c.length;d<v;++d){r.b4DragDrop(e,c[d].id);r.onDragDrop(e,c[d].id)}}if(t&&!c.length){r.onInvalidDrop(e)}},getZIndex:function(e){var t=document.body,n,r=-1;e=Ext.getDom(e);while(e!==t){if(!isNaN(n=Number(Ext.fly(e).getStyle("zIndex")))){r=n}e=e.parentNode}return r},byZIndex:function(e,t){return e.zIndex<t.zIndex},getBestMatch:function(e){var t=null;var n=e.length;if(n==1){t=e[0]}else{for(var r=0;r<n;++r){var i=e[r];if(i.cursorIsOver){t=i;break}else{if(!t||t.overlap.getArea()<i.overlap.getArea()){t=i}}}}return t},refreshCache:function(e){for(var t in e){if("string"!=typeof t){continue}for(var n in this.ids[t]){var r=this.ids[t][n];if(this.isTypeOfDD(r)){var i=this.getLocation(r);if(i){this.locationCache[r.id]=i}else{delete this.locationCache[r.id]}}}}},verifyEl:function(e){if(e){var t;if(Ext.isIE){try{t=e.offsetParent}catch(n){}}else{t=e.offsetParent}if(t){return true}}return false},getLocation:function(e){if(!this.isTypeOfDD(e)){return null}var t=e.getEl(),n,r,i,s,o,u,a,f,l,c;try{n=Ext.lib.Dom.getXY(t)}catch(h){}if(!n){return null}r=n[0];i=r+t.offsetWidth;s=n[1];o=s+t.offsetHeight;u=s-e.padding[0];a=i+e.padding[1];f=o+e.padding[2];l=r-e.padding[3];return new Ext.lib.Region(u,a,f,l)},isOverTarget:function(e,t,n){var r=this.locationCache[t.id];if(!r||!this.useCache){r=this.getLocation(t);this.locationCache[t.id]=r}if(!r){return false}t.cursorIsOver=r.contains(e);var i=this.dragCurrent;if(!i||!i.getTargetCoord||!n&&!i.constrainX&&!i.constrainY){return t.cursorIsOver}t.overlap=null;var s=i.getTargetCoord(e.x,e.y);var o=i.getDragEl();var u=new Ext.lib.Region(s.y,s.x+o.offsetWidth,s.y+o.offsetHeight,s.x);var a=u.intersect(r);if(a){t.overlap=a;return n?true:t.cursorIsOver}else{return false}},_onUnload:function(t,n){e.removeListener(document,"mouseup",this.handleMouseUp,this);e.removeListener(document,"mousemove",this.handleMouseMove,this);e.removeListener(window,"resize",this._onResize,this);Ext.dd.DragDropMgr.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);for(var e in this.elementCache){delete this.elementCache[e]}this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(e){var t=this.elementCache[e];if(!t||!t.el){t=this.elementCache[e]=new this.ElementWrapper(Ext.getDom(e))}return t},getElement:function(e){return Ext.getDom(e)},getCss:function(e){var t=Ext.getDom(e);return t?t.style:null},ElementWrapper:function(e){this.el=e||null;this.id=this.el&&e.id;this.css=this.el&&e.style},getPosX:function(e){return Ext.lib.Dom.getX(e)},getPosY:function(e){return Ext.lib.Dom.getY(e)},swapNode:function(e,t){if(e.swapNode){e.swapNode(t)}else{var n=t.parentNode;var r=t.nextSibling;if(r==e){n.insertBefore(e,t)}else if(t==e.nextSibling){n.insertBefore(t,e)}else{e.parentNode.replaceChild(t,e);n.insertBefore(e,r)}}},getScroll:function(){var e,t,n=document.documentElement,r=document.body;if(n&&(n.scrollTop||n.scrollLeft)){e=n.scrollTop;t=n.scrollLeft}else if(r){e=r.scrollTop;t=r.scrollLeft}else{}return{top:e,left:t}},getStyle:function(e,t){return Ext.fly(e).getStyle(t)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(e,t){var n=Ext.lib.Dom.getXY(t);Ext.lib.Dom.setXY(e,n)},numericSort:function(e,t){return e-t},_timeoutCount:0,_addListeners:function(){var e=Ext.dd.DDM;if(Ext.lib.Event&&document){e._onLoad()}else{if(e._timeoutCount>2e3){}else{setTimeout(e._addListeners,10);if(document&&document.body){e._timeoutCount+=1}}}},handleWasClicked:function(e,t){if(this.isHandle(t,e.id)){return true}else{var n=e.parentNode;while(n){if(this.isHandle(t,n.id)){return true}else{n=n.parentNode}}}return false}}}();Ext.dd.DDM=Ext.dd.DragDropMgr;Ext.dd.DDM._addListeners()}Ext.dd.DD=function(e,t,n){if(e){this.init(e,t,n)}};Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:true,autoOffset:function(e,t){var n=e-this.startPageX;var r=t-this.startPageY;this.setDelta(n,r)},setDelta:function(e,t){this.deltaX=e;this.deltaY=t},setDragElPos:function(e,t){var n=this.getDragEl();this.alignElWithMouse(n,e,t)},alignElWithMouse:function(e,t,n){var r=this.getTargetCoord(t,n);var i=e.dom?e:Ext.fly(e,"_dd");if(!this.deltaSetXY){var s=[r.x,r.y];i.setXY(s);var o=i.getLeft(true);var u=i.getTop(true);this.deltaSetXY=[o-r.x,u-r.y]}else{i.setLeftTop(r.x+this.deltaSetXY[0],r.y+this.deltaSetXY[1])}this.cachePosition(r.x,r.y);this.autoScroll(r.x,r.y,e.offsetHeight,e.offsetWidth);return r},cachePosition:function(e,t){if(e){this.lastPageX=e;this.lastPageY=t}else{var n=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=n[0];this.lastPageY=n[1]}},autoScroll:function(e,t,n,r){if(this.scroll){var i=Ext.lib.Dom.getViewHeight();var s=Ext.lib.Dom.getViewWidth();var o=this.DDM.getScrollTop();var u=this.DDM.getScrollLeft();var a=n+t;var f=r+e;var l=i+o-t-this.deltaY;var c=s+u-e-this.deltaX;var h=40;var p=document.all?80:30;if(a>i&&l<h){window.scrollTo(u,o+p)}if(t<o&&o>0&&t-o<h){window.scrollTo(u,o-p)}if(f>s&&c<h){window.scrollTo(u+p,o)}if(e<u&&u>0&&e-u<h){window.scrollTo(u-p,o)}}},getTargetCoord:function(e,t){var n=e-this.deltaX;var r=t-this.deltaY;if(this.constrainX){if(n<this.minX){n=this.minX}if(n>this.maxX){n=this.maxX}}if(this.constrainY){if(r<this.minY){r=this.minY}if(r>this.maxY){r=this.maxY}}n=this.getTick(n,this.xTicks);r=this.getTick(r,this.yTicks);return{x:n,y:r}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this);this.scroll=this.config.scroll!==false},b4MouseDown:function(e){this.autoOffset(e.getPageX(),e.getPageY())},b4Drag:function(e){this.setDragElPos(e.getPageX(),e.getPageY())},toString:function(){return"DD "+this.id}});Ext.dd.DDProxy=function(e,t,n){if(e){this.init(e,t,n);this.initFrame()}};Ext.dd.DDProxy.dragElId="ygddfdiv";Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var e=this;var t=document.body;if(!t||!t.firstChild){setTimeout(function(){e.createFrame()},50);return}var n=this.getDragEl();if(!n){n=document.createElement("div");n.id=this.dragElId;var r=n.style;r.position="absolute";r.visibility="hidden";r.cursor="move";r.border="2px solid #aaa";r.zIndex=999;t.insertBefore(n,t.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=this.config.resizeFrame!==false;this.centerFrame=this.config.centerFrame;this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(e,t){var n=this.getEl();var r=this.getDragEl();var i=r.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(i.width,10)/2),Math.round(parseInt(i.height,10)/2))}this.setDragElPos(e,t);Ext.fly(r).show()},_resizeProxy:function(){if(this.resizeFrame){var e=this.getEl();Ext.fly(this.getDragEl()).setSize(e.offsetWidth,e.offsetHeight)}},b4MouseDown:function(e){var t=e.getPageX();var n=e.getPageY();this.autoOffset(t,n);this.setDragElPos(t,n)},b4StartDrag:function(e,t){this.showFrame(e,t)},b4EndDrag:function(e){Ext.fly(this.getDragEl()).hide()},endDrag:function(e){var t=this.getEl();var n=this.getDragEl();n.style.visibility="";this.beforeMove();t.style.visibility="hidden";Ext.dd.DDM.moveToEl(t,n);n.style.visibility="hidden";t.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return"DDProxy "+this.id}});Ext.dd.DDTarget=function(e,t,n){if(e){this.initTarget(e,t,n)}};Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return"DDTarget "+this.id}});Ext.dd.DragTracker=Ext.extend(Ext.util.Observable,{active:false,tolerance:5,autoStart:false,constructor:function(e){Ext.apply(this,e);this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag");this.dragRegion=new Ext.lib.Region(0,0,0,0);if(this.el){this.initEl(this.el)}Ext.dd.DragTracker.superclass.constructor.call(this,e)},initEl:function(e){this.el=Ext.get(e);e.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this);delete this.el},onMouseDown:function(e,t){if(this.fireEvent("mousedown",this,e)!==false&&this.onBeforeStart(e)!==false){this.startXY=this.lastXY=e.getXY();this.dragTarget=this.delegate?t:this.el.dom;if(this.preventDefault!==false){e.preventDefault()}Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect});if(this.autoStart){this.timer=this.triggerStart.defer(this.autoStart===true?1e3:this.autoStart,this,[e])}}},onMouseMove:function(e,t){var n=Ext.isIE6||Ext.isIE7||Ext.isIE8;if(this.active&&n&&!e.browserEvent.button){e.preventDefault();this.onMouseUp(e);return}e.preventDefault();var r=e.getXY(),i=this.startXY;this.lastXY=r;if(!this.active){if(Math.abs(i[0]-r[0])>this.tolerance||Math.abs(i[1]-r[1])>this.tolerance){this.triggerStart(e)}else{return}}this.fireEvent("mousemove",this,e);this.onDrag(e);this.fireEvent("drag",this,e)},onMouseUp:function(e){var t=Ext.getDoc(),n=this.active;t.un("mousemove",this.onMouseMove,this);t.un("mouseup",this.onMouseUp,this);t.un("selectstart",this.stopSelect,this);e.preventDefault();this.clearStart();this.active=false;delete this.elRegion;this.fireEvent("mouseup",this,e);if(n){this.onEnd(e);this.fireEvent("dragend",this,e)}},triggerStart:function(e){this.clearStart();this.active=true;this.onStart(e);this.fireEvent("dragstart",this,e)},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer}},stopSelect:function(e){e.stopEvent();return false},onBeforeStart:function(e){},onStart:function(e){},onDrag:function(e){},onEnd:function(e){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(e){return e?this.constrainModes[e].call(this,this.lastXY):this.lastXY},getOffset:function(e){var t=this.getXY(e),n=this.startXY;return[n[0]-t[0],n[1]-t[1]]},constrainModes:{point:function(e){if(!this.elRegion){this.elRegion=this.getDragCt().getRegion()}var t=this.dragRegion;t.left=e[0];t.top=e[1];t.right=e[0];t.bottom=e[1];t.constrainTo(this.elRegion);return[t.left,t.top]}}});Ext.dd.ScrollManager=function(){var e=Ext.dd.DragDropMgr;var t={};var n=null;var r={};var i=function(e){n=null;u()};var s=function(){if(e.dragCurrent){e.refreshCache(e.dragCurrent.groups)}};var o=function(){if(e.dragCurrent){var t=Ext.dd.ScrollManager;var n=r.el.ddScrollConfig?r.el.ddScrollConfig.increment:t.increment;if(!t.animate){if(r.el.scroll(r.dir,n)){s()}}else{r.el.scroll(r.dir,n,true,t.animDuration,s)}}};var u=function(){if(r.id){clearInterval(r.id)}r.id=0;r.el=null;r.dir=""};var a=function(t,n){u();r.el=t;r.dir=n;var i=t.ddScrollConfig?t.ddScrollConfig.ddGroup:undefined,s=t.ddScrollConfig&&t.ddScrollConfig.frequency?t.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;if(i===undefined||e.dragCurrent.ddGroup==i){r.id=setInterval(o,s)}};var f=function(i,s){if(s||!e.dragCurrent){return}var o=Ext.dd.ScrollManager;if(!n||n!=e.dragCurrent){n=e.dragCurrent;o.refreshCache()}var f=Ext.lib.Event.getXY(i);var l=new Ext.lib.Point(f[0],f[1]);for(var c in t){var h=t[c],p=h._region;var d=h.ddScrollConfig?h.ddScrollConfig:o;if(p&&p.contains(l)&&h.isScrollable()){if(p.bottom-l.y<=d.vthresh){if(r.el!=h){a(h,"down")}return}else if(p.right-l.x<=d.hthresh){if(r.el!=h){a(h,"left")}return}else if(l.y-p.top<=d.vthresh){if(r.el!=h){a(h,"up")}return}else if(l.x-p.left<=d.hthresh){if(r.el!=h){a(h,"right")}return}}}u()};e.fireEvents=e.fireEvents.createSequence(f,e);e.stopDrag=e.stopDrag.createSequence(i,e);return{register:function(e){if(Ext.isArray(e)){for(var n=0,r=e.length;n<r;n++){this.register(e[n])}}else{e=Ext.get(e);t[e.id]=e}},unregister:function(e){if(Ext.isArray(e)){for(var n=0,r=e.length;n<r;n++){this.unregister(e[n])}}else{e=Ext.get(e);delete t[e.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:.4,ddGroup:undefined,refreshCache:function(){for(var e in t){if(typeof t[e]=="object"){t[e]._region=t[e].getRegion()}}}}}();Ext.dd.Registry=function(){var e={};var t={};var n=0;var r=function(e,t){if(typeof e=="string"){return e}var r=e.id;if(!r&&t!==false){r="extdd-"+ ++n;e.id=r}return r};return{register:function(n,i){i=i||{};if(typeof n=="string"){n=document.getElementById(n)}i.ddel=n;e[r(n)]=i;if(i.isHandle!==false){t[i.ddel.id]=i}if(i.handles){var s=i.handles;for(var o=0,u=s.length;o<u;o++){t[r(s[o])]=i}}},unregister:function(n){var i=r(n,false);var s=e[i];if(s){delete e[i];if(s.handles){var o=s.handles;for(var u=0,a=o.length;u<a;u++){delete t[r(o[u],false)]}}}},getHandle:function(e){if(typeof e!="string"){e=e.id}return t[e]},getHandleFromEvent:function(e){var n=Ext.lib.Event.getTarget(e);return n?t[n.id]:null},getTarget:function(t){if(typeof t!="string"){t=t.id}return e[t]},getTargetFromEvent:function(n){var r=Ext.lib.Event.getTarget(n);return r?e[r.id]||t[r.id]:null}}}();Ext.dd.StatusProxy=function(e){Ext.apply(this,e);this.id=this.id||Ext.id();this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!e||e.shadow!==false});this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed};Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(e){e=e||this.dropNotAllowed;if(this.dropStatus!=e){this.el.replaceClass(this.dropStatus,e);this.dropStatus=e}},reset:function(e){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(e){this.ghost.update("")}},update:function(e){if(typeof e=="string"){this.ghost.update(e)}else{this.ghost.update("");e.style.margin="0";this.ghost.dom.appendChild(e)}var t=this.ghost.dom.firstChild;if(t){Ext.fly(t).setStyle("float","none")}},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(e){this.el.hide();if(e){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(e,t,n){this.callback=t;this.scope=n;if(e&&this.animRepair!==false){this.el.addClass("x-dd-drag-repair");this.el.hideUnders(true);this.anim=this.el.shift({duration:this.repairDuration||.5,easing:"easeOut",xy:e,stopFx:true,callback:this.afterRepair,scope:this})}else{this.afterRepair()}},afterRepair:function(){this.hide(true);if(typeof this.callback=="function"){this.callback.call(this.scope||this)}this.callback=null;this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.el)}};Ext.dd.DragSource=function(e,t){this.el=Ext.get(e);if(!this.dragData){this.dragData={}}Ext.apply(this,t);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy}Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false};Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(e){return this.dragData},onDragEnter:function(e,t){var n=Ext.dd.DragDropMgr.getDDById(t);this.cachedTarget=n;if(this.beforeDragEnter(n,e,t)!==false){if(n.isNotifyTarget){var r=n.notifyEnter(this,e,this.dragData);this.proxy.setStatus(r)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(n,e,t)}}},beforeDragEnter:function(e,t,n){return true},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync()},onDragOver:function(e,t){var n=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(t);if(this.beforeDragOver(n,e,t)!==false){if(n.isNotifyTarget){var r=n.notifyOver(this,e,this.dragData);this.proxy.setStatus(r)}if(this.afterDragOver){this.afterDragOver(n,e,t)}}},beforeDragOver:function(e,t,n){return true},onDragOut:function(e,t){var n=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(t);if(this.beforeDragOut(n,e,t)!==false){if(n.isNotifyTarget){n.notifyOut(this,e,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(n,e,t)}}this.cachedTarget=null},beforeDragOut:function(e,t,n){return true},onDragDrop:function(e,t){var n=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(t);if(this.beforeDragDrop(n,e,t)!==false){if(n.isNotifyTarget){if(n.notifyDrop(this,e,this.dragData)){this.onValidDrop(n,e,t)}else{this.onInvalidDrop(n,e,t)}}else{this.onValidDrop(n,e,t)}if(this.afterDragDrop){this.afterDragDrop(n,e,t)}}delete this.cachedTarget},beforeDragDrop:function(e,t,n){return true},onValidDrop:function(e,t,n){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(e,t,n)}},getRepairXY:function(e,t){return this.el.getXY()},onInvalidDrop:function(e,t,n){this.beforeInvalidDrop(e,t,n);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,t,this.dragData)}this.cacheTarget=null}this.proxy.repair(this.getRepairXY(t,this.dragData),this.afterRepair,this);if(this.afterInvalidDrop){this.afterInvalidDrop(t,n)}},afterRepair:function(){if(Ext.enableFx){this.el.highlight(this.hlColor||"c3daf9")}this.dragging=false},beforeInvalidDrop:function(e,t,n){return true},handleMouseDown:function(e){if(this.dragging){return}var t=this.getDragData(e);if(t&&this.onBeforeDrag(t,e)!==false){this.dragData=t;this.proxy.stop();Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(e,t){return true},onStartDrag:Ext.emptyFn,startDrag:function(e,t){this.proxy.reset();this.dragging=true;this.proxy.update("");this.onInitDrag(e,t);this.proxy.show()},onInitDrag:function(e,t){var n=this.el.dom.cloneNode(true);n.id=Ext.id();this.proxy.update(n);this.onStartDrag(e,t);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(e){},endDrag:function(e){this.onEndDrag(this.dragData,e)},onEndDrag:function(e,t){},autoOffset:function(e,t){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DragSource.superclass.destroy.call(this);Ext.destroy(this.proxy)}});Ext.dd.DropTarget=Ext.extend(Ext.dd.DDTarget,{constructor:function(e,t){this.el=Ext.get(e);Ext.apply(this,t);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(e,t,n){if(this.overClass){this.el.addClass(this.overClass)}return this.dropAllowed},notifyOver:function(e,t,n){return this.dropAllowed},notifyOut:function(e,t,n){if(this.overClass){this.el.removeClass(this.overClass)}},notifyDrop:function(e,t,n){return false},destroy:function(){Ext.dd.DropTarget.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.dd.DragZone=Ext.extend(Ext.dd.DragSource,{constructor:function(e,t){Ext.dd.DragZone.superclass.constructor.call(this,e,t);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}},getDragData:function(e){return Ext.dd.Registry.getHandleFromEvent(e)},onInitDrag:function(e,t){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(e,t);return true},afterRepair:function(){if(Ext.enableFx){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false},getRepairXY:function(e){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragZone.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.dd.DropZone=function(e,t){Ext.dd.DropZone.superclass.constructor.call(this,e,t)};Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(e){return Ext.dd.Registry.getTargetFromEvent(e)},onNodeEnter:function(e,t,n,r){},onNodeOver:function(e,t,n,r){return this.dropAllowed},onNodeOut:function(e,t,n,r){},onNodeDrop:function(e,t,n,r){return false},onContainerOver:function(e,t,n){return this.dropNotAllowed},onContainerDrop:function(e,t,n){return false},notifyEnter:function(e,t,n){return this.dropNotAllowed},notifyOver:function(e,t,n){var r=this.getTargetFromEvent(t);if(!r){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,e,t,n);this.lastOverNode=null}return this.onContainerOver(e,t,n)}if(this.lastOverNode!=r){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,e,t,n)}this.onNodeEnter(r,e,t,n);this.lastOverNode=r}return this.onNodeOver(r,e,t,n)},notifyOut:function(e,t,n){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,e,t,n);this.lastOverNode=null}},notifyDrop:function(e,t,n){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,e,t,n);this.lastOverNode=null}var r=this.getTargetFromEvent(t);return r?this.onNodeDrop(r,e,t,n):this.onContainerDrop(e,t,n)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.Element.addMethods({initDD:function(e,t,n){var r=new Ext.dd.DD(Ext.id(this.dom),e,t);return Ext.apply(r,n)},initDDProxy:function(e,t,n){var r=new Ext.dd.DDProxy(Ext.id(this.dom),e,t);return Ext.apply(r,n)},initDDTarget:function(e,t,n){var r=new Ext.dd.DDTarget(Ext.id(this.dom),e,t);return Ext.apply(r,n)}});Ext.data.Api=function(){var e={};return{actions:{create:"create",read:"read",update:"update",destroy:"destroy"},restActions:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},isAction:function(e){return Ext.data.Api.actions[e]?true:false},getVerb:function(t){if(e[t]){return e[t]}for(var n in this.actions){if(this.actions[n]===t){e[t]=n;break}}return e[t]!==undefined?e[t]:null},isValid:function(e){var t=[];var n=this.actions;for(var r in e){if(!(r in n)){t.push(r)}}return!t.length?true:t},hasUniqueUrl:function(e,t){var n=e.api[t]?e.api[t].url:null;var r=true;for(var i in e.api){if((r=i===t?true:e.api[i].url!=n?true:false)===false){break}}return r},prepare:function(e){if(!e.api){e.api={}}for(var t in this.actions){var n=this.actions[t];e.api[n]=e.api[n]||e.url||e.directFn;if(typeof e.api[n]=="string"){e.api[n]={url:e.api[n],method:e.restful===true?Ext.data.Api.restActions[n]:undefined}}}},restify:function(e){e.restful=true;for(var t in this.restActions){e.api[this.actions[t]].method||(e.api[this.actions[t]].method=this.restActions[t])}e.onWrite=e.onWrite.createInterceptor(function(e,t,n,r){var i=t.reader;var s=new Ext.data.Response({action:e,raw:n});switch(n.status){case 200:return true;break;case 201:if(Ext.isEmpty(s.raw.responseText)){s.success=true}else{return true}break;case 204:s.success=true;s.data=null;break;default:return true;break}if(s.success===true){this.fireEvent("write",this,e,s.data,s,r,t.request.arg)}else{this.fireEvent("exception",this,"remote",e,t,s,r)}t.request.callback.call(t.request.scope,s.data,s,s.success);return false},e)}}}();Ext.data.Response=function(e,t){Ext.apply(this,e,{raw:t})};Ext.data.Response.prototype={message:null,success:false,status:null,root:null,raw:null,getMessage:function(){return this.message},getSuccess:function(){return this.success},getStatus:function(){return this.status},getRoot:function(){return this.root},getRawResponse:function(){return this.raw}};Ext.data.Api.Error=Ext.extend(Ext.Error,{constructor:function(e,t){this.arg=t;Ext.Error.call(this,e)},name:"Ext.data.Api"});Ext.apply(Ext.data.Api.Error.prototype,{lang:{"action-url-undefined":"No fallback url defined for this action.  When defining a DataProxy api, please be sure to define an url for each CRUD action in Ext.data.Api.actions or define a default url in addition to your api-configuration.",invalid:"received an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions defined in Ext.data.Api.actions","invalid-url":"Invalid url.  Please review your proxy configuration.",execute:'Attempted to execute an unknown action.  Valid API actions are defined in Ext.data.Api.actions"'}});Ext.data.SortTypes={none:function(e){return e},stripTagsRE:/<\/?[^>]+>/gi,asText:function(e){return String(e).replace(this.stripTagsRE,"")},asUCText:function(e){return String(e).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(e){return String(e).toUpperCase()},asDate:function(e){if(!e){return 0}if(Ext.isDate(e)){return e.getTime()}return Date.parse(String(e))},asFloat:function(e){var t=parseFloat(String(e).replace(/,/g,""));return isNaN(t)?0:t},asInt:function(e){var t=parseInt(String(e).replace(/,/g,""),10);return isNaN(t)?0:t}};Ext.data.Record=function(e,t){this.id=t||t===0?t:Ext.data.Record.id(this);this.data=e||{}};Ext.data.Record.create=function(e){var t=Ext.extend(Ext.data.Record,{});var n=t.prototype;n.fields=new Ext.util.MixedCollection(false,function(e){return e.name});for(var r=0,i=e.length;r<i;r++){n.fields.add(new Ext.data.Field(e[r]))}t.getField=function(e){return n.fields.get(e)};return t};Ext.data.Record.PREFIX="ext-record";Ext.data.Record.AUTO_ID=1;Ext.data.Record.EDIT="edit";Ext.data.Record.REJECT="reject";Ext.data.Record.COMMIT="commit";Ext.data.Record.id=function(e){e.phantom=true;return[Ext.data.Record.PREFIX,"-",Ext.data.Record.AUTO_ID++].join("")};Ext.data.Record.prototype={dirty:false,editing:false,error:null,modified:null,phantom:false,join:function(e){this.store=e},set:function(e,t){var n=Ext.isPrimitive(t)?String:Ext.encode;if(n(this.data[e])==n(t)){return}this.dirty=true;if(!this.modified){this.modified={}}if(this.modified[e]===undefined){this.modified[e]=this.data[e]}this.data[e]=t;if(!this.editing){this.afterEdit()}},afterEdit:function(){if(this.store!=undefined&&typeof this.store.afterEdit=="function"){this.store.afterEdit(this)}},afterReject:function(){if(this.store){this.store.afterReject(this)}},afterCommit:function(){if(this.store){this.store.afterCommit(this)}},get:function(e){return this.data[e]},beginEdit:function(){this.editing=true;this.modified=this.modified||{}},cancelEdit:function(){this.editing=false;delete this.modified},endEdit:function(){this.editing=false;if(this.dirty){this.afterEdit()}},reject:function(e){var t=this.modified;for(var n in t){if(typeof t[n]!="function"){this.data[n]=t[n]}}this.dirty=false;delete this.modified;this.editing=false;if(e!==true){this.afterReject()}},commit:function(e){this.dirty=false;delete this.modified;this.editing=false;if(e!==true){this.afterCommit()}},getChanges:function(){var e=this.modified,t={};for(var n in e){if(e.hasOwnProperty(n)){t[n]=this.data[n]}}return t},hasError:function(){return this.error!==null},clearError:function(){this.error=null},copy:function(e){return new this.constructor(Ext.apply({},this.data),e||this.id)},isModified:function(e){return!!(this.modified&&this.modified.hasOwnProperty(e))},isValid:function(){return this.fields.find(function(e){return e.allowBlank===false&&Ext.isEmpty(this.data[e.name])?true:false},this)?false:true},markDirty:function(){this.dirty=true;if(!this.modified){this.modified={}}this.fields.each(function(e){this.modified[e.name]=this.data[e.name]},this)}};Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection,{register:function(){for(var e=0,t;t=arguments[e];e++){this.add(t)}},unregister:function(){for(var e=0,t;t=arguments[e];e++){this.remove(this.lookup(t))}},lookup:function(e){if(Ext.isArray(e)){var t=["field1"],n=!Ext.isArray(e[0]);if(!n){for(var r=2,i=e[0].length;r<=i;++r){t.push("field"+r)}}return new Ext.data.ArrayStore({fields:t,data:e,expandData:n,autoDestroy:true,autoCreated:true})}return Ext.isObject(e)?e.events?e:Ext.create(e,"store"):this.get(e)},getKey:function(e){return e.storeId}});Ext.data.Store=Ext.extend(Ext.util.Observable,{writer:undefined,remoteSort:false,autoDestroy:false,pruneModifiedRecords:false,lastOptions:null,autoSave:true,batch:true,restful:false,paramNames:undefined,defaultParamNames:{start:"start",limit:"limit",sort:"sort",dir:"dir"},isDestroyed:false,hasMultiSort:false,batchKey:"_ext_batch_",constructor:function(e){this.data=new Ext.util.MixedCollection(false);this.data.getKey=function(e){return e.id};this.removed=[];if(e&&e.data){this.inlineData=e.data;delete e.data}Ext.apply(this,e);this.baseParams=Ext.isObject(this.baseParams)?this.baseParams:{};this.paramNames=Ext.applyIf(this.paramNames||{},this.defaultParamNames);if((this.url||this.api)&&!this.proxy){this.proxy=new Ext.data.HttpProxy({url:this.url,api:this.api})}if(this.restful===true&&this.proxy){this.batch=false;Ext.data.Api.restify(this.proxy)}if(this.reader){if(!this.recordType){this.recordType=this.reader.recordType}if(this.reader.onMetaChange){this.reader.onMetaChange=this.reader.onMetaChange.createSequence(this.onMetaChange,this)}if(this.writer){if(this.writer instanceof Ext.data.DataWriter===false){this.writer=this.buildWriter(this.writer)}this.writer.meta=this.reader.meta;this.pruneModifiedRecords=true}}if(this.recordType){this.fields=this.recordType.prototype.fields}this.modified=[];this.addEvents("datachanged","metachange","add","remove","update","clear","exception","beforeload","load","loadexception","beforewrite","write","beforesave","save");if(this.proxy){this.relayEvents(this.proxy,["loadexception","exception"])}if(this.writer){this.on({scope:this,add:this.createRecords,remove:this.destroyRecord,update:this.updateRecord,clear:this.onClear})}this.sortToggle={};if(this.sortField){this.setDefaultSort(this.sortField,this.sortDir)}else if(this.sortInfo){this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction)}Ext.data.Store.superclass.constructor.call(this);if(this.id){this.storeId=this.id;delete this.id}if(this.storeId){Ext.StoreMgr.register(this)}if(this.inlineData){this.loadData(this.inlineData);delete this.inlineData}else if(this.autoLoad){this.load.defer(10,this,[typeof this.autoLoad=="object"?this.autoLoad:undefined])}this.batchCounter=0;this.batches={}},buildWriter:function(e){var t=undefined,n=(e.format||"json").toLowerCase();switch(n){case"json":t=Ext.data.JsonWriter;break;case"xml":t=Ext.data.XmlWriter;break;default:t=Ext.data.JsonWriter}return new t(e)},destroy:function(){if(!this.isDestroyed){if(this.storeId){Ext.StoreMgr.unregister(this)}this.clearData();this.data=null;Ext.destroy(this.proxy);this.reader=this.writer=null;this.purgeListeners();this.isDestroyed=true}},add:function(e){var t,n,r,i;e=[].concat(e);if(e.length<1){return}for(t=0,n=e.length;t<n;t++){r=e[t];r.join(this);if(r.dirty||r.phantom){this.modified.push(r)}}i=this.data.length;this.data.addAll(e);if(this.snapshot){this.snapshot.addAll(e)}this.fireEvent("add",this,e,i)},addSorted:function(e){var t=this.findInsertIndex(e);this.insert(t,e)},doUpdate:function(e){var t=e.id;this.getById(t).join(null);this.data.replace(t,e);if(this.snapshot){this.snapshot.replace(t,e)}e.join(this);this.fireEvent("update",this,e,Ext.data.Record.COMMIT)},remove:function(e){if(Ext.isArray(e)){Ext.each(e,function(e){this.remove(e)},this);return}var t=this.data.indexOf(e);if(t>-1){e.join(null);this.data.removeAt(t)}if(this.pruneModifiedRecords){this.modified.remove(e)}if(this.snapshot){this.snapshot.remove(e)}if(t>-1){this.fireEvent("remove",this,e,t)}},removeAt:function(e){this.remove(this.getAt(e))},removeAll:function(e){var t=[];this.each(function(e){t.push(e)});this.clearData();if(this.snapshot){this.snapshot.clear()}if(this.pruneModifiedRecords){this.modified=[]}if(e!==true){this.fireEvent("clear",this,t)}},onClear:function(e,t){Ext.each(t,function(e,t){this.destroyRecord(this,e,t)},this)},insert:function(e,t){var n,r,i;t=[].concat(t);for(n=0,r=t.length;n<r;n++){i=t[n];this.data.insert(e+n,i);i.join(this);if(i.dirty||i.phantom){this.modified.push(i)}}if(this.snapshot){this.snapshot.addAll(t)}this.fireEvent("add",this,t,e)},indexOf:function(e){return this.data.indexOf(e)},indexOfId:function(e){return this.data.indexOfKey(e)},getById:function(e){return(this.snapshot||this.data).key(e)},getAt:function(e){return this.data.itemAt(e)},getRange:function(e,t){return this.data.getRange(e,t)},storeOptions:function(e){e=Ext.apply({},e);delete e.callback;delete e.scope;this.lastOptions=e},clearData:function(){this.data.each(function(e){e.join(null)});this.data.clear()},load:function(e){e=Ext.apply({},e);this.storeOptions(e);if(this.sortInfo&&this.remoteSort){var t=this.paramNames;e.params=Ext.apply({},e.params);e.params[t.sort]=this.sortInfo.field;e.params[t.dir]=this.sortInfo.direction}try{return this.execute("read",null,e)}catch(n){this.handleException(n);return false}},updateRecord:function(e,t,n){if(n==Ext.data.Record.EDIT&&this.autoSave===true&&(!t.phantom||t.phantom&&t.isValid())){this.save()}},createRecords:function(e,t,n){var r=this.modified,i=t.length,s,o;for(o=0;o<i;o++){s=t[o];if(s.phantom&&s.isValid()){s.markDirty();if(r.indexOf(s)==-1){r.push(s)}}}if(this.autoSave===true){this.save()}},destroyRecord:function(e,t,n){if(this.modified.indexOf(t)!=-1){this.modified.remove(t)}if(!t.phantom){this.removed.push(t);t.lastIndex=n;if(this.autoSave===true){this.save()}}},execute:function(e,t,n,r){if(!Ext.data.Api.isAction(e)){throw new Ext.data.Api.Error("execute",e)}n=Ext.applyIf(n||{},{params:{}});if(r!==undefined){this.addToBatch(r)}var i=true;if(e==="read"){i=this.fireEvent("beforeload",this,n);Ext.applyIf(n.params,this.baseParams)}else{if(this.writer.listful===true&&this.restful!==true){t=Ext.isArray(t)?t:[t]}else if(Ext.isArray(t)&&t.length==1){t=t.shift()}if((i=this.fireEvent("beforewrite",this,e,t,n))!==false){this.writer.apply(n.params,this.baseParams,e,t)}}if(i!==false){if(this.writer&&this.proxy.url&&!this.proxy.restful&&!Ext.data.Api.hasUniqueUrl(this.proxy,e)){n.params.xaction=e}this.proxy.request(Ext.data.Api.actions[e],t,n.params,this.reader,this.createCallback(e,t,r),this,n)}return i},save:function(){if(!this.writer){throw new Ext.data.Store.Error("writer-undefined")}var e=[],t,n,r,i={},s;if(this.removed.length){e.push(["destroy",this.removed])}var o=[].concat(this.getModifiedRecords());if(o.length){var u=[];for(s=o.length-1;s>=0;s--){if(o[s].phantom===true){var a=o.splice(s,1).shift();if(a.isValid()){u.push(a)}}else if(!o[s].isValid()){o.splice(s,1)}}if(u.length){e.push(["create",u])}if(o.length){e.push(["update",o])}}t=e.length;if(t){r=++this.batchCounter;for(s=0;s<t;++s){n=e[s];i[n[0]]=n[1]}if(this.fireEvent("beforesave",this,i)!==false){for(s=0;s<t;++s){n=e[s];this.doTransaction(n[0],n[1],r)}return r}}return-1},doTransaction:function(e,t,n){function r(t){try{this.execute(e,t,undefined,n)}catch(r){this.handleException(r)}}if(this.batch===false){for(var i=0,s=t.length;i<s;i++){r.call(this,t[i])}}else{r.call(this,t)}},addToBatch:function(e){var t=this.batches,n=this.batchKey+e,r=t[n];if(!r){t[n]=r={id:e,count:0,data:{}}}++r.count},removeFromBatch:function(e,t,n){var r=this.batches,i=this.batchKey+e,s=r[i],o;if(s){o=s.data[t]||[];s.data[t]=o.concat(n);if(s.count===1){n=s.data;delete r[i];this.fireEvent("save",this,e,n)}else{--s.count}}},createCallback:function(e,t,n){var r=Ext.data.Api.actions;return e=="read"?this.loadRecords:function(r,i,s){this["on"+Ext.util.Format.capitalize(e)+"Records"](s,t,[].concat(r));if(s===true){this.fireEvent("write",this,e,r,i,t)}this.removeFromBatch(n,e,r)}},clearModified:function(e){if(Ext.isArray(e)){for(var t=e.length-1;t>=0;t--){this.modified.splice(this.modified.indexOf(e[t]),1)}}else{this.modified.splice(this.modified.indexOf(e),1)}},reMap:function(e){if(Ext.isArray(e)){for(var t=0,n=e.length;t<n;t++){this.reMap(e[t])}}else{delete this.data.map[e._phid];this.data.map[e.id]=e;var r=this.data.keys.indexOf(e._phid);this.data.keys.splice(r,1,e.id);delete e._phid}},onCreateRecords:function(e,t,n){if(e===true){try{this.reader.realize(t,n)}catch(r){this.handleException(r);if(Ext.isArray(t)){this.onCreateRecords(e,t,n)}}}},onUpdateRecords:function(e,t,n){if(e===true){try{this.reader.update(t,n)}catch(r){this.handleException(r);if(Ext.isArray(t)){this.onUpdateRecords(e,t,n)}}}},onDestroyRecords:function(e,t,n){t=t instanceof Ext.data.Record?[t]:[].concat(t);for(var r=0,i=t.length;r<i;r++){this.removed.splice(this.removed.indexOf(t[r]),1)}if(e===false){for(r=t.length-1;r>=0;r--){this.insert(t[r].lastIndex,t[r])}}},handleException:function(e){Ext.handleError(e)},reload:function(e){this.load(Ext.applyIf(e||{},this.lastOptions))},loadRecords:function(e,t,n){var r,i;if(this.isDestroyed===true){return}if(!e||n===false){if(n!==false){this.fireEvent("load",this,[],t)}if(t.callback){t.callback.call(t.scope||this,[],t,false,e)}return}var s=e.records,o=e.totalRecords||s.length;if(!t||t.add!==true){if(this.pruneModifiedRecords){this.modified=[]}for(r=0,i=s.length;r<i;r++){s[r].join(this)}if(this.snapshot){this.data=this.snapshot;delete this.snapshot}this.clearData();this.data.addAll(s);this.totalLength=o;this.applySort();this.fireEvent("datachanged",this)}else{var u=[],a,f=0;for(r=0,i=s.length;r<i;++r){a=s[r];if(this.indexOfId(a.id)>-1){this.doUpdate(a)}else{u.push(a);++f}}this.totalLength=Math.max(o,this.data.length+f);this.add(u)}this.fireEvent("load",this,s,t);if(t.callback){t.callback.call(t.scope||this,s,t,true)}},loadData:function(e,t){var n=this.reader.readRecords(e);this.loadRecords(n,{add:t},true)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){if((this.sortInfo||this.multiSortInfo)&&!this.remoteSort){this.sortData()}},sortData:function(){var e=this.hasMultiSort?this.multiSortInfo:this.sortInfo,t=e.direction||"ASC",n=e.sorters,r=[];if(!this.hasMultiSort){n=[{direction:t,field:e.field}]}for(var i=0,s=n.length;i<s;i++){r.push(this.createSortFunction(n[i].field,n[i].direction))}if(r.length==0){return}var o=t.toUpperCase()=="DESC"?-1:1;var u=function(e,t){var n=r[0].call(this,e,t);if(r.length>1){for(var i=1,s=r.length;i<s;i++){n=n||r[i].call(this,e,t)}}return o*n};this.data.sort(t,u);if(this.snapshot&&this.snapshot!=this.data){this.snapshot.sort(t,u)}},createSortFunction:function(e,t){t=t||"ASC";var n=t.toUpperCase()=="DESC"?-1:1;var r=this.fields.get(e).sortType;return function(t,i){var s=r(t.data[e]),o=r(i.data[e]);return n*(s>o?1:s<o?-1:0)}},setDefaultSort:function(e,t){t=t?t.toUpperCase():"ASC";this.sortInfo={field:e,direction:t};this.sortToggle[e]=t},sort:function(e,t){if(Ext.isArray(arguments[0])){return this.multiSort.call(this,e,t)}else{return this.singleSort(e,t)}},singleSort:function(e,t){var n=this.fields.get(e);if(!n){return false}var r=n.name,i=this.sortInfo||null,s=this.sortToggle?this.sortToggle[r]:null;if(!t){if(i&&i.field==r){t=(this.sortToggle[r]||"ASC").toggle("ASC","DESC")}else{t=n.sortDir}}this.sortToggle[r]=t;this.sortInfo={field:r,direction:t};this.hasMultiSort=false;if(this.remoteSort){if(!this.load(this.lastOptions)){if(s){this.sortToggle[r]=s}if(i){this.sortInfo=i}}}else{this.applySort();this.fireEvent("datachanged",this)}return true},multiSort:function(e,t){this.hasMultiSort=true;t=t||"ASC";if(this.multiSortInfo&&t==this.multiSortInfo.direction){t=t.toggle("ASC","DESC")}this.multiSortInfo={sorters:e,direction:t};if(this.remoteSort){this.singleSort(e[0].field,e[0].direction)}else{this.applySort();this.fireEvent("datachanged",this)}},each:function(e,t){this.data.each(e,t)},getModifiedRecords:function(){return this.modified},sum:function(e,t,n){var r=this.data.items,i=0;t=t||0;n=n||n===0?n:r.length-1;for(var s=t;s<=n;s++){i+=r[s].data[e]||0}return i},createFilterFn:function(e,t,n,r,i){if(Ext.isEmpty(t,false)){return false}t=this.data.createValueMatcher(t,n,r,i);return function(n){return t.test(n.data[e])}},createMultipleFilterFn:function(e){return function(t){var n=true;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=s.fn,u=s.scope;n=n&&o.call(u,t)}return n}},filter:function(e,t,n,r,i){var s;if(Ext.isObject(e)){e=[e]}if(Ext.isArray(e)){var o=[];for(var u=0,a=e.length;u<a;u++){var f=e[u],l=f.fn,c=f.scope||this;if(!Ext.isFunction(l)){l=this.createFilterFn(f.property,f.value,f.anyMatch,f.caseSensitive,f.exactMatch)}o.push({fn:l,scope:c})}s=this.createMultipleFilterFn(o)}else{s=this.createFilterFn(e,t,n,r,i)}return s?this.filterBy(s):this.clearFilter()},filterBy:function(e,t){this.snapshot=this.snapshot||this.data;this.data=this.queryBy(e,t||this);this.fireEvent("datachanged",this)},clearFilter:function(e){if(this.isFiltered()){this.data=this.snapshot;delete this.snapshot;if(e!==true){this.fireEvent("datachanged",this)}}},isFiltered:function(){return!!this.snapshot&&this.snapshot!=this.data},query:function(e,t,n,r){var i=this.createFilterFn(e,t,n,r);return i?this.queryBy(i):this.data.clone()},queryBy:function(e,t){var n=this.snapshot||this.data;return n.filterBy(e,t||this)},find:function(e,t,n,r,i){var s=this.createFilterFn(e,t,r,i);return s?this.data.findIndexBy(s,null,n):-1},findExact:function(e,t,n){return this.data.findIndexBy(function(n){return n.get(e)===t},this,n)},findBy:function(e,t,n){return this.data.findIndexBy(e,t,n)},collect:function(e,t,n){var r=n===true&&this.snapshot?this.snapshot.items:this.data.items;var i,s,o=[],u={};for(var a=0,f=r.length;a<f;a++){i=r[a].data[e];s=String(i);if((t||!Ext.isEmpty(i))&&!u[s]){u[s]=true;o[o.length]=i}}return o},afterEdit:function(e){if(this.modified.indexOf(e)==-1){this.modified.push(e)}this.fireEvent("update",this,e,Ext.data.Record.EDIT)},afterReject:function(e){this.modified.remove(e);this.fireEvent("update",this,e,Ext.data.Record.REJECT)},afterCommit:function(e){this.modified.remove(e);this.fireEvent("update",this,e,Ext.data.Record.COMMIT)},commitChanges:function(){var e=this.modified.slice(0),t=e.length,n;for(n=0;n<t;n++){e[n].commit()}this.modified=[];this.removed=[]},rejectChanges:function(){var e=this.modified.slice(0),t=this.removed.slice(0).reverse(),n=e.length,r=t.length,i;for(i=0;i<n;i++){e[i].reject()}for(i=0;i<r;i++){this.insert(t[i].lastIndex||0,t[i]);t[i].reject()}this.modified=[];this.removed=[]},onMetaChange:function(e){this.recordType=this.reader.recordType;this.fields=this.recordType.prototype.fields;delete this.snapshot;if(this.reader.meta.sortInfo){this.sortInfo=this.reader.meta.sortInfo}else if(this.sortInfo&&!this.fields.get(this.sortInfo.field)){delete this.sortInfo}if(this.writer){this.writer.meta=this.reader.meta}this.modified=[];this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(e){this.suspendEvents();var t=this.data.clone();this.data.add(e);this.applySort();var n=this.data.indexOf(e);this.data=t;this.resumeEvents();return n},setBaseParam:function(e,t){this.baseParams=this.baseParams||{};this.baseParams[e]=t}});Ext.reg("store",Ext.data.Store);Ext.data.Store.Error=Ext.extend(Ext.Error,{name:"Ext.data.Store"});Ext.apply(Ext.data.Store.Error.prototype,{lang:{"writer-undefined":"Attempted to execute a write-action without a DataWriter installed."}});Ext.data.Field=Ext.extend(Object,{constructor:function(e){if(Ext.isString(e)){e={name:e}}Ext.apply(this,e);var t=Ext.data.Types,n=this.sortType,r;if(this.type){if(Ext.isString(this.type)){this.type=Ext.data.Types[this.type.toUpperCase()]||t.AUTO}}else{this.type=t.AUTO}if(Ext.isString(n)){this.sortType=Ext.data.SortTypes[n]}else if(Ext.isEmpty(n)){this.sortType=this.type.sortType}if(!this.convert){this.convert=this.type.convert}},dateFormat:null,useNull:false,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:true});Ext.data.DataReader=function(e,t){this.meta=e;this.recordType=Ext.isArray(t)?Ext.data.Record.create(t):t;if(this.recordType){this.buildExtractors()}};Ext.data.DataReader.prototype={getTotal:Ext.emptyFn,getRoot:Ext.emptyFn,getMessage:Ext.emptyFn,getSuccess:Ext.emptyFn,getId:Ext.emptyFn,buildExtractors:Ext.emptyFn,extractValues:Ext.emptyFn,realize:function(e,t){if(Ext.isArray(e)){for(var n=e.length-1;n>=0;n--){if(Ext.isArray(t)){this.realize(e.splice(n,1).shift(),t.splice(n,1).shift())}else{this.realize(e.splice(n,1).shift(),t)}}}else{if(Ext.isArray(t)&&t.length==1){t=t.shift()}if(!this.isData(t)){throw new Ext.data.DataReader.Error("realize",e)}e.phantom=false;e._phid=e.id;e.id=this.getId(t);e.data=t;e.commit();e.store.reMap(e)}},update:function(e,t){if(Ext.isArray(e)){for(var n=e.length-1;n>=0;n--){if(Ext.isArray(t)){this.update(e.splice(n,1).shift(),t.splice(n,1).shift())}else{this.update(e.splice(n,1).shift(),t)}}}else{if(Ext.isArray(t)&&t.length==1){t=t.shift()}if(this.isData(t)){e.data=Ext.apply(e.data,t)}e.commit()}},extractData:function(e,t){var n=this instanceof Ext.data.JsonReader?"json":"node";var r=[];if(this.isData(e)&&!(this instanceof Ext.data.XmlReader)){e=[e]}var i=this.recordType.prototype.fields,s=i.items,o=i.length,r=[];if(t===true){var u=this.recordType;for(var a=0;a<e.length;a++){var f=e[a];var l=new u(this.extractValues(f,s,o),this.getId(f));l[n]=f;r.push(l)}}else{for(var a=0;a<e.length;a++){var c=this.extractValues(e[a],s,o);c[this.meta.idProperty]=this.getId(e[a]);r.push(c)}}return r},isData:function(e){return e&&Ext.isObject(e)&&!Ext.isEmpty(this.getId(e))?true:false},onMetaChange:function(e){delete this.ef;this.meta=e;this.recordType=Ext.data.Record.create(e.fields);this.buildExtractors()}};Ext.data.DataReader.Error=Ext.extend(Ext.Error,{constructor:function(e,t){this.arg=t;Ext.Error.call(this,e)},name:"Ext.data.DataReader"});Ext.apply(Ext.data.DataReader.Error.prototype,{lang:{update:"#update received invalid data from server.  Please see docs for DataReader#update and review your DataReader configuration.",realize:"#realize was called with invalid remote-data.  Please see the docs for DataReader#realize and review your DataReader configuration.","invalid-response":"#readResponse received an invalid response from the server."}});Ext.data.DataWriter=function(e){Ext.apply(this,e)};Ext.data.DataWriter.prototype={writeAllFields:false,listful:false,apply:function(e,t,n,r){var i=[],s=n+"Record";if(Ext.isArray(r)){Ext.each(r,function(e){i.push(this[s](e))},this)}else if(r instanceof Ext.data.Record){i=this[s](r)}this.render(e,t,i)},render:Ext.emptyFn,updateRecord:Ext.emptyFn,createRecord:Ext.emptyFn,destroyRecord:Ext.emptyFn,toHash:function(e,t){var n=e.fields.map,r={},i=this.writeAllFields===false&&e.phantom===false?e.getChanges():e.data,s;Ext.iterate(i,function(e,t){if(s=n[e]){r[s.mapping?s.mapping:s.name]=t}});if(e.phantom){if(e.fields.containsKey(this.meta.idProperty)&&Ext.isEmpty(e.data[this.meta.idProperty])){delete r[this.meta.idProperty]}}else{r[this.meta.idProperty]=e.id}return r},toArray:function(e){var t=[];Ext.iterate(e,function(e,n){t.push({name:e,value:n})},this);return t}};Ext.data.DataProxy=function(e){e=e||{};this.api=e.api;this.url=e.url;this.restful=e.restful;this.listeners=e.listeners;this.prettyUrls=e.prettyUrls;this.addEvents("exception","beforeload","load","loadexception","beforewrite","write");Ext.data.DataProxy.superclass.constructor.call(this);try{Ext.data.Api.prepare(this)}catch(t){if(t instanceof Ext.data.Api.Error){t.toConsole()}}Ext.data.DataProxy.relayEvents(this,["beforewrite","write","exception"])};Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{restful:false,setApi:function(){if(arguments.length==1){var e=Ext.data.Api.isValid(arguments[0]);if(e===true){this.api=arguments[0]}else{throw new Ext.data.Api.Error("invalid",e)}}else if(arguments.length==2){if(!Ext.data.Api.isAction(arguments[0])){throw new Ext.data.Api.Error("invalid",arguments[0])}this.api[arguments[0]]=arguments[1]}Ext.data.Api.prepare(this)},isApiAction:function(e){return this.api[e]?true:false},request:function(e,t,n,r,i,s,o){if(!this.api[e]&&!this.load){throw new Ext.data.DataProxy.Error("action-undefined",e)}n=n||{};if(e===Ext.data.Api.actions.read?this.fireEvent("beforeload",this,n):this.fireEvent("beforewrite",this,e,t,n)!==false){this.doRequest.apply(this,arguments)}else{i.call(s||this,null,o,false)}},load:null,doRequest:function(e,t,n,r,i,s,o){this.load(n,r,i,s,o)},onRead:Ext.emptyFn,onWrite:Ext.emptyFn,buildUrl:function(e,t){t=t||null;var n=this.conn&&this.conn.url?this.conn.url:this.api[e]?this.api[e].url:this.url;if(!n){throw new Ext.data.Api.Error("invalid-url",e)}var r=null;var i=n.match(/(.*)(\.json|\.xml|\.html)$/);if(i){r=i[2];n=i[1]}if((this.restful===true||this.prettyUrls===true)&&t instanceof Ext.data.Record&&!t.phantom){n+="/"+t.id}return r===null?n:n+r},destroy:function(){this.purgeListeners()}});Ext.apply(Ext.data.DataProxy,Ext.util.Observable.prototype);Ext.util.Observable.call(Ext.data.DataProxy);Ext.data.DataProxy.Error=Ext.extend(Ext.Error,{constructor:function(e,t){this.arg=t;Ext.Error.call(this,e)},name:"Ext.data.DataProxy"});Ext.apply(Ext.data.DataProxy.Error.prototype,{lang:{"action-undefined":"DataProxy attempted to execute an API-action but found an undefined url / function.  Please review your Proxy url/api-configuration.","api-invalid":"Recieved an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions from Ext.data.Api.actions."}});Ext.data.Request=function(e){Ext.apply(this,e)};Ext.data.Request.prototype={action:undefined,rs:undefined,params:undefined,callback:Ext.emptyFn,scope:undefined,reader:undefined};Ext.data.Response=function(e){Ext.apply(this,e)};Ext.data.Response.prototype={action:undefined,success:undefined,message:undefined,data:undefined,raw:undefined,records:undefined};Ext.data.ScriptTagProxy=function(e){Ext.apply(this,e);Ext.data.ScriptTagProxy.superclass.constructor.call(this,e);this.head=document.getElementsByTagName("head")[0]};Ext.data.ScriptTagProxy.TRANS_ID=1e3;Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:3e4,callbackParam:"callback",nocache:true,doRequest:function(e,t,n,r,i,s,o){var u=Ext.urlEncode(Ext.apply(n,this.extraParams));var a=this.buildUrl(e,t);if(!a){throw new Ext.data.Api.Error("invalid-url",a)}a=Ext.urlAppend(a,u);if(this.nocache){a=Ext.urlAppend(a,"_dc="+(new Date).getTime())}var f=++Ext.data.ScriptTagProxy.TRANS_ID;var l={id:f,action:e,cb:"stcCallback"+f,scriptId:"stcScript"+f,params:n,arg:o,url:a,callback:i,scope:s,reader:r};window[l.cb]=this.createCallback(e,t,l);a+=String.format("&{0}={1}",this.callbackParam,l.cb);if(this.autoAbort!==false){this.abort()}l.timeoutId=this.handleFailure.defer(this.timeout,this,[l]);var c=document.createElement("script");c.setAttribute("src",a);c.setAttribute("type","text/javascript");c.setAttribute("id",l.scriptId);this.head.appendChild(c);this.trans=l},createCallback:function(e,t,n){var r=this;return function(i){r.trans=false;r.destroyTrans(n,true);if(e===Ext.data.Api.actions.read){r.onRead.call(r,e,n,i)}else{r.onWrite.call(r,e,n,i,t)}}},onRead:function(e,t,n){var r;try{r=t.reader.readRecords(n)}catch(i){this.fireEvent("loadexception",this,t,n,i);this.fireEvent("exception",this,"response",e,t,n,i);t.callback.call(t.scope||window,null,t.arg,false);return}if(r.success===false){this.fireEvent("loadexception",this,t,n);this.fireEvent("exception",this,"remote",e,t,n,null)}else{this.fireEvent("load",this,n,t.arg)}t.callback.call(t.scope||window,r,t.arg,r.success)},onWrite:function(e,t,n,r){var i=t.reader;try{var s=i.readResponse(e,n)}catch(o){this.fireEvent("exception",this,"response",e,t,s,o);t.callback.call(t.scope||window,null,s,false);return}if(!s.success===true){this.fireEvent("exception",this,"remote",e,t,s,r);t.callback.call(t.scope||window,null,s,false);return}this.fireEvent("write",this,e,s.data,s,r,t.arg);t.callback.call(t.scope||window,s.data,s,true)},isLoading:function(){return this.trans?true:false},abort:function(){if(this.isLoading()){this.destroyTrans(this.trans)}},destroyTrans:function(e,t){this.head.removeChild(document.getElementById(e.scriptId));clearTimeout(e.timeoutId);if(t){window[e.cb]=undefined;try{delete window[e.cb]}catch(n){}}else{window[e.cb]=function(){window[e.cb]=undefined;try{delete window[e.cb]}catch(t){}}}},handleFailure:function(e){this.trans=false;this.destroyTrans(e,false);if(e.action===Ext.data.Api.actions.read){this.fireEvent("loadexception",this,null,e.arg)}this.fireEvent("exception",this,"response",e.action,{response:null,options:e.arg});e.callback.call(e.scope||window,null,e.arg,false)},destroy:function(){this.abort();Ext.data.ScriptTagProxy.superclass.destroy.call(this)}});Ext.data.HttpProxy=function(e){Ext.data.HttpProxy.superclass.constructor.call(this,e);this.conn=e;this.conn.url=null;this.useAjax=!e||!e.events;var t=Ext.data.Api.actions;this.activeRequest={};for(var n in t){this.activeRequest[t[n]]=undefined}};Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},setUrl:function(e,t){this.conn.url=e;if(t===true){this.url=e;this.api=null;Ext.data.Api.prepare(this)}},doRequest:function(e,t,n,r,i,s,o){var u={method:this.api[e]?this.api[e]["method"]:undefined,request:{callback:i,scope:s,arg:o},reader:r,callback:this.createCallback(e,t),scope:this};if(n.jsonData){u.jsonData=n.jsonData}else if(n.xmlData){u.xmlData=n.xmlData}else{u.params=n||{}}this.conn.url=this.buildUrl(e,t);if(this.useAjax){Ext.applyIf(u,this.conn);if(e==Ext.data.Api.actions.read&&this.activeRequest[e]){Ext.Ajax.abort(this.activeRequest[e])}this.activeRequest[e]=Ext.Ajax.request(u)}else{this.conn.request(u)}this.conn.url=null},createCallback:function(e,t){return function(n,r,i){this.activeRequest[e]=undefined;if(!r){if(e===Ext.data.Api.actions.read){this.fireEvent("loadexception",this,n,i)}this.fireEvent("exception",this,"response",e,n,i);n.request.callback.call(n.request.scope,null,n.request.arg,false);return}if(e===Ext.data.Api.actions.read){this.onRead(e,n,i)}else{this.onWrite(e,n,i,t)}}},onRead:function(e,t,n){var r;try{r=t.reader.read(n)}catch(i){this.fireEvent("loadexception",this,t,n,i);this.fireEvent("exception",this,"response",e,t,n,i);t.request.callback.call(t.request.scope,null,t.request.arg,false);return}if(r.success===false){this.fireEvent("loadexception",this,t,n);var s=t.reader.readResponse(e,n);this.fireEvent("exception",this,"remote",e,t,s,null)}else{this.fireEvent("load",this,t,t.request.arg)}t.request.callback.call(t.request.scope,r,t.request.arg,r.success)},onWrite:function(e,t,n,r){var i=t.reader;var s;try{s=i.readResponse(e,n)}catch(o){this.fireEvent("exception",this,"response",e,t,n,o);t.request.callback.call(t.request.scope,null,t.request.arg,false);return}if(s.success===true){this.fireEvent("write",this,e,s.data,s,r,t.request.arg)}else{this.fireEvent("exception",this,"remote",e,t,s,r)}t.request.callback.call(t.request.scope,s.data,s,s.success)},destroy:function(){if(!this.useAjax){this.conn.abort()}else if(this.activeRequest){var e=Ext.data.Api.actions;for(var t in e){if(this.activeRequest[e[t]]){Ext.Ajax.abort(this.activeRequest[e[t]])}}}Ext.data.HttpProxy.superclass.destroy.call(this)}});Ext.data.MemoryProxy=function(e){var t={};t[Ext.data.Api.actions.read]=true;Ext.data.MemoryProxy.superclass.constructor.call(this,{api:t});this.data=e};Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{doRequest:function(e,t,n,r,i,s,o){n=n||{};var u;try{u=r.readRecords(this.data)}catch(a){this.fireEvent("loadexception",this,null,o,a);this.fireEvent("exception",this,"response",e,o,null,a);i.call(s,null,o,false);return}i.call(s,u,o,true)}});Ext.data.Types=new function(){var e=Ext.data.SortTypes;Ext.apply(this,{stripRe:/[\$,%]/g,AUTO:{convert:function(e){return e},sortType:e.none,type:"auto"},STRING:{convert:function(e){return e===undefined||e===null?"":String(e)},sortType:e.asUCString,type:"string"},INT:{convert:function(e){return e!==undefined&&e!==null&&e!==""?parseInt(String(e).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:e.none,type:"int"},FLOAT:{convert:function(e){return e!==undefined&&e!==null&&e!==""?parseFloat(String(e).replace(Ext.data.Types.stripRe,""),10):this.useNull?null:0},sortType:e.none,type:"float"},BOOL:{convert:function(e){return e===true||e==="true"||e==1},sortType:e.none,type:"bool"},DATE:{convert:function(e){var t=this.dateFormat;if(!e){return null}if(Ext.isDate(e)){return e}if(t){if(t=="timestamp"){return new Date(e*1e3)}if(t=="time"){return new Date(parseInt(e,10))}return Date.parseDate(e,t)}var n=Date.parse(e);return n?new Date(n):null},sortType:e.asDate,type:"date"}});Ext.apply(this,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})};Ext.data.JsonWriter=Ext.extend(Ext.data.DataWriter,{encode:true,encodeDelete:false,constructor:function(e){Ext.data.JsonWriter.superclass.constructor.call(this,e)},render:function(e,t,n){if(this.encode===true){Ext.apply(e,t);e[this.meta.root]=Ext.encode(n)}else{var r=Ext.apply({},t);r[this.meta.root]=n;e.jsonData=r}},createRecord:function(e){return this.toHash(e)},updateRecord:function(e){return this.toHash(e)},destroyRecord:function(e){if(this.encodeDelete){var t={};t[this.meta.idProperty]=e.id;return t}else{return e.id}}});Ext.data.JsonReader=function(e,t){e=e||{};Ext.applyIf(e,{idProperty:"id",successProperty:"success",totalProperty:"total"});Ext.data.JsonReader.superclass.constructor.call(this,e,t||e.fields)};Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(e){var t=e.responseText;var n=Ext.decode(t);if(!n){throw{message:"JsonReader.read: Json object not found"}}return this.readRecords(n)},readResponse:function(e,t){var n=t.responseText!==undefined?Ext.decode(t.responseText):t;if(!n){throw new Ext.data.JsonReader.Error("response")}var r=this.getRoot(n),i=this.getSuccess(n);if(i&&e===Ext.data.Api.actions.create){var s=Ext.isDefined(r);if(s&&Ext.isEmpty(r)){throw new Ext.data.JsonReader.Error("root-empty",this.meta.root)}else if(!s){throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}}var o=new Ext.data.Response({action:e,success:i,data:r?this.extractData(r,false):[],message:this.getMessage(n),raw:n});if(Ext.isEmpty(o.success)){throw new Ext.data.JsonReader.Error("successProperty-response",this.meta.successProperty)}return o},readRecords:function(e){this.jsonData=e;if(e.metaData){this.onMetaChange(e.metaData)}var t=this.meta,n=this.recordType,r=n.prototype.fields,i=r.items,s=r.length,o;var u=this.getRoot(e),a=u.length,f=a,l=true;if(t.totalProperty){o=parseInt(this.getTotal(e),10);if(!isNaN(o)){f=o}}if(t.successProperty){o=this.getSuccess(e);if(o===false||o==="false"){l=false}}return{success:l,records:this.extractData(u,true),totalRecords:f}},buildExtractors:function(){if(this.ef){return}var e=this.meta,t=this.recordType,n=t.prototype.fields,r=n.items,i=n.length;if(e.totalProperty){this.getTotal=this.createAccessor(e.totalProperty)}if(e.successProperty){this.getSuccess=this.createAccessor(e.successProperty)}if(e.messageProperty){this.getMessage=this.createAccessor(e.messageProperty)}this.getRoot=e.root?this.createAccessor(e.root):function(e){return e};if(e.id||e.idProperty){var s=this.createAccessor(e.id||e.idProperty);this.getId=function(e){var t=s(e);return t===undefined||t===""?null:t}}else{this.getId=function(){return null}}var o=[];for(var u=0;u<i;u++){n=r[u];var a=n.mapping!==undefined&&n.mapping!==null?n.mapping:n.name;o.push(this.createAccessor(a))}this.ef=o},simpleAccess:function(e,t){return e[t]},createAccessor:function(){var e=/[\[\.]/;return function(t){if(Ext.isEmpty(t)){return Ext.emptyFn}if(Ext.isFunction(t)){return t}var n=String(t).search(e);if(n>=0){return new Function("obj","return obj"+(n>0?".":"")+t)}return function(e){return e[t]}}}(),extractValues:function(e,t,n){var r,i={};for(var s=0;s<n;s++){r=t[s];var o=this.ef[s](e);i[r.name]=r.convert(o!==undefined?o:r.defaultValue,e)}return i}});Ext.data.JsonReader.Error=Ext.extend(Ext.Error,{constructor:function(e,t){this.arg=t;Ext.Error.call(this,e)},name:"Ext.data.JsonReader"});Ext.apply(Ext.data.JsonReader.Error.prototype,{lang:{response:"An error occurred while json-decoding your server response","successProperty-response":'Could not locate your "successProperty" in your server response.  Please review your JsonReader config to ensure the config-property "successProperty" matches the property in your server-response.  See the JsonReader docs.',"root-undefined-config":'Your JsonReader was configured without a "root" property.  Please review your JsonReader config and make sure to define the root property.  See the JsonReader docs.',"idProperty-undefined":'Your JsonReader was configured without an "idProperty"  Please review your JsonReader configuration and ensure the "idProperty" is set (e.g.: "id").  See the JsonReader docs.',"root-empty":'Data was expected to be returned by the server in the "root" property of the response.  Please review your JsonReader configuration to ensure the "root" property matches that returned in the server-response.  See JsonReader docs.'}});Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(e){this.arrayData=e;var t=this.meta,n=t?Ext.num(t.idIndex,t.id):null,r=this.recordType,i=r.prototype.fields,s=[],o=true,u;var a=this.getRoot(e);for(var f=0,l=a.length;f<l;f++){var c=a[f],h={},p=(n||n===0)&&c[n]!==undefined&&c[n]!==""?c[n]:null;for(var d=0,v=i.length;d<v;d++){var m=i.items[d],g=m.mapping!==undefined&&m.mapping!==null?m.mapping:d;u=c[g]!==undefined?c[g]:m.defaultValue;u=m.convert(u,c);h[m.name]=u}var y=new r(h,p);y.json=c;s[s.length]=y}var b=s.length;if(t.totalProperty){u=parseInt(this.getTotal(e),10);if(!isNaN(u)){b=u}}if(t.successProperty){u=this.getSuccess(e);if(u===false||u==="false"){o=false}}return{success:o,records:s,totalRecords:b}}});Ext.data.ArrayStore=Ext.extend(Ext.data.Store,{constructor:function(e){Ext.data.ArrayStore.superclass.constructor.call(this,Ext.apply(e,{reader:new Ext.data.ArrayReader(e)}))},loadData:function(e,t){if(this.expandData===true){var n=[];for(var r=0,i=e.length;r<i;r++){n[n.length]=[e[r]]}e=n}Ext.data.ArrayStore.superclass.loadData.call(this,e,t)}});Ext.reg("arraystore",Ext.data.ArrayStore);Ext.data.SimpleStore=Ext.data.ArrayStore;Ext.reg("simplestore",Ext.data.SimpleStore);Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(e){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(e,{reader:new Ext.data.JsonReader(e)}))}});Ext.reg("jsonstore",Ext.data.JsonStore);Ext.data.XmlWriter=function(e){Ext.data.XmlWriter.superclass.constructor.apply(this,arguments);this.tpl=typeof this.tpl==="string"?(new Ext.XTemplate(this.tpl)).compile():this.tpl.compile()};Ext.extend(Ext.data.XmlWriter,Ext.data.DataWriter,{documentRoot:"xrequest",forceDocumentRoot:false,root:"records",xmlVersion:"1.0",xmlEncoding:"ISO-8859-15",tpl:'<tpl for="."><?xml version="{version}" encoding="{encoding}"?><tpl if="documentRoot"><{documentRoot}><tpl for="baseParams"><tpl for="."><{name}>{value}</{name}></tpl></tpl></tpl><tpl if="records.length&gt;1"><{root}></tpl><tpl for="records"><{parent.record}><tpl for="."><{name}>{value}</{name}></tpl></{parent.record}></tpl><tpl if="records.length&gt;1"></{root}></tpl><tpl if="documentRoot"></{documentRoot}></tpl></tpl>',render:function(e,t,n){t=this.toArray(t);e.xmlData=this.tpl.applyTemplate({version:this.xmlVersion,encoding:this.xmlEncoding,documentRoot:t.length>0||this.forceDocumentRoot===true?this.documentRoot:false,record:this.meta.record,root:this.root,baseParams:t,records:Ext.isArray(n[0])?n:[n]})},createRecord:function(e){return this.toArray(this.toHash(e))},updateRecord:function(e){return this.toArray(this.toHash(e))},destroyRecord:function(e){var t={};t[this.meta.idProperty]=e.id;return this.toArray(t)}});Ext.data.XmlReader=function(e,t){e=e||{};Ext.applyIf(e,{idProperty:e.idProperty||e.idPath||e.id,successProperty:e.successProperty||e.success});Ext.data.XmlReader.superclass.constructor.call(this,e,t||e.fields)};Ext.extend(Ext.data.XmlReader,Ext.data.DataReader,{read:function(e){var t=e.responseXML;if(!t){throw{message:"XmlReader.read: XML Document not available"}}return this.readRecords(t)},readRecords:function(e){this.xmlData=e;var t=e.documentElement||e,n=Ext.DomQuery,r=0,i=true;if(this.meta.totalProperty){r=this.getTotal(t,0)}if(this.meta.successProperty){i=this.getSuccess(t)}var s=this.extractData(n.select(this.meta.record,t),true);return{success:i,records:s,totalRecords:r||s.length}},readResponse:function(e,t){var n=Ext.DomQuery,r=t.responseXML,i=r.documentElement||r;var s=new Ext.data.Response({action:e,success:this.getSuccess(i),message:this.getMessage(i),data:this.extractData(n.select(this.meta.record,i)||n.select(this.meta.root,i),false),raw:r});if(Ext.isEmpty(s.success)){throw new Ext.data.DataReader.Error("successProperty-response",this.meta.successProperty)}if(e===Ext.data.Api.actions.create){var o=Ext.isDefined(s.data);if(o&&Ext.isEmpty(s.data)){throw new Ext.data.JsonReader.Error("root-empty",this.meta.root)}else if(!o){throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}}return s},getSuccess:function(){return true},buildExtractors:function(){if(this.ef){return}var e=this.meta,t=this.recordType,n=t.prototype.fields,r=n.items,i=n.length;if(e.totalProperty){this.getTotal=this.createAccessor(e.totalProperty)}if(e.successProperty){this.getSuccess=this.createAccessor(e.successProperty)}if(e.messageProperty){this.getMessage=this.createAccessor(e.messageProperty)}this.getRoot=function(e){return!Ext.isEmpty(e[this.meta.record])?e[this.meta.record]:e[this.meta.root]};if(e.idPath||e.idProperty){var s=this.createAccessor(e.idPath||e.idProperty);this.getId=function(e){var t=s(e)||e.id;return t===undefined||t===""?null:t}}else{this.getId=function(){return null}}var o=[];for(var u=0;u<i;u++){n=r[u];var a=n.mapping!==undefined&&n.mapping!==null?n.mapping:n.name;o.push(this.createAccessor(a))}this.ef=o},createAccessor:function(){var e=Ext.DomQuery;return function(t){if(Ext.isFunction(t)){return t}switch(t){case this.meta.totalProperty:return function(n,r){return e.selectNumber(t,n,r)};break;case this.meta.successProperty:return function(n,r){var i=e.selectValue(t,n,true);var s=i!==false&&i!=="false";return s};break;default:return function(n,r){return e.selectValue(t,n,r)};break}}}(),extractValues:function(e,t,n){var r,i={};for(var s=0;s<n;s++){r=t[s];var o=this.ef[s](e);i[r.name]=r.convert(o!==undefined?o:r.defaultValue,e)}return i}});Ext.data.XmlStore=Ext.extend(Ext.data.Store,{constructor:function(e){Ext.data.XmlStore.superclass.constructor.call(this,Ext.apply(e,{reader:new Ext.data.XmlReader(e)}))}});Ext.reg("xmlstore",Ext.data.XmlStore);Ext.data.GroupingStore=Ext.extend(Ext.data.Store,{constructor:function(e){e=e||{};this.hasMultiSort=true;this.multiSortInfo=this.multiSortInfo||{sorters:[]};var t=this.multiSortInfo.sorters,n=e.groupField||this.groupField,r=e.sortInfo||this.sortInfo,i=e.groupDir||this.groupDir;if(n){t.push({field:n,direction:i})}if(r){t.push(r)}Ext.data.GroupingStore.superclass.constructor.call(this,e);this.addEvents("groupchange");this.applyGroupField()},remoteGroup:false,groupOnSort:false,groupDir:"ASC",clearGrouping:function(){this.groupField=false;if(this.remoteGroup){if(this.baseParams){delete this.baseParams.groupBy;delete this.baseParams.groupDir}var e=this.lastOptions;if(e&&e.params){delete e.params.groupBy;delete e.params.groupDir}this.reload()}else{this.sort();this.fireEvent("datachanged",this)}},groupBy:function(e,t,n){n=n?String(n).toUpperCase()=="DESC"?"DESC":"ASC":this.groupDir;if(this.groupField==e&&this.groupDir==n&&!t){return}var r=this.multiSortInfo.sorters;if(r.length>0&&r[0].field==this.groupField){r.shift()}this.groupField=e;this.groupDir=n;this.applyGroupField();var i=function(){this.fireEvent("groupchange",this,this.getGroupState())};if(this.groupOnSort){this.sort(e,n);i.call(this);return}if(this.remoteGroup){this.on("load",i,this,{single:true});this.reload()}else{this.sort(r);i.call(this)}},sort:function(e,t){if(this.remoteSort){return Ext.data.GroupingStore.superclass.sort.call(this,e,t)}var n=[];if(Ext.isArray(arguments[0])){n=arguments[0]}else if(e==undefined){n=this.sortInfo?[this.sortInfo]:[]}else{var r=this.fields.get(e);if(!r)return false;var i=r.name,s=this.sortInfo||null,o=this.sortToggle?this.sortToggle[i]:null;if(!t){if(s&&s.field==i){t=(this.sortToggle[i]||"ASC").toggle("ASC","DESC")}else{t=r.sortDir}}this.sortToggle[i]=t;this.sortInfo={field:i,direction:t};n=[this.sortInfo]}if(this.groupField){n.unshift({direction:this.groupDir,field:this.groupField})}return this.multiSort.call(this,n,t)},applyGroupField:function(){if(this.remoteGroup){if(!this.baseParams){this.baseParams={}}Ext.apply(this.baseParams,{groupBy:this.groupField,groupDir:this.groupDir});var e=this.lastOptions;if(e&&e.params){e.params.groupDir=this.groupDir;delete e.params.groupBy}}},applyGrouping:function(e){if(this.groupField!==false){this.groupBy(this.groupField,true,this.groupDir);return true}else{if(e===true){this.fireEvent("datachanged",this)}return false}},getGroupState:function(){return this.groupOnSort&&this.groupField!==false?this.sortInfo?this.sortInfo.field:undefined:this.groupField}});Ext.reg("groupingstore",Ext.data.GroupingStore);Ext.data.DirectProxy=function(e){Ext.apply(this,e);if(typeof this.paramOrder=="string"){this.paramOrder=this.paramOrder.split(/[\s,|]/)}Ext.data.DirectProxy.superclass.constructor.call(this,e)};Ext.extend(Ext.data.DirectProxy,Ext.data.DataProxy,{paramOrder:undefined,paramsAsHash:true,directFn:undefined,doRequest:function(e,t,n,r,i,s,o){var u=[],a=this.api[e]||this.directFn;switch(e){case Ext.data.Api.actions.create:u.push(n.jsonData);break;case Ext.data.Api.actions.read:if(a.directCfg.method.len>0){if(this.paramOrder){for(var f=0,l=this.paramOrder.length;f<l;f++){u.push(n[this.paramOrder[f]])}}else if(this.paramsAsHash){u.push(n)}}break;case Ext.data.Api.actions.update:u.push(n.jsonData);break;case Ext.data.Api.actions.destroy:u.push(n.jsonData);break}var c={params:n||{},request:{callback:i,scope:s,arg:o},reader:r};u.push(this.createCallback(e,t,c),this);a.apply(window,u)},createCallback:function(e,t,n){var r=this;return function(i,s){if(!s.status){if(e===Ext.data.Api.actions.read){r.fireEvent("loadexception",r,n,s,null)}r.fireEvent("exception",r,"remote",e,n,s,null);n.request.callback.call(n.request.scope,null,n.request.arg,false);return}if(e===Ext.data.Api.actions.read){r.onRead(e,n,i,s)}else{r.onWrite(e,n,i,s,t)}}},onRead:function(e,t,n,r){var i;try{i=t.reader.readRecords(n)}catch(s){this.fireEvent("loadexception",this,t,r,s);this.fireEvent("exception",this,"response",e,t,r,s);t.request.callback.call(t.request.scope,null,t.request.arg,false);return}this.fireEvent("load",this,r,t.request.arg);t.request.callback.call(t.request.scope,i,t.request.arg,true)},onWrite:function(e,t,n,r,i){var s=t.reader.extractData(t.reader.getRoot(n),false);var o=t.reader.getSuccess(n);o=o!==false;if(o){this.fireEvent("write",this,e,s,r,i,t.request.arg)}else{this.fireEvent("exception",this,"remote",e,t,n,i)}t.request.callback.call(t.request.scope,s,r,o)}});Ext.data.DirectStore=Ext.extend(Ext.data.Store,{constructor:function(e){var t=Ext.apply({},{batchTransactions:false},e);Ext.data.DirectStore.superclass.constructor.call(this,Ext.apply(t,{proxy:Ext.isDefined(t.proxy)?t.proxy:new Ext.data.DirectProxy(Ext.copyTo({},t,"paramOrder,paramsAsHash,directFn,api")),reader:!Ext.isDefined(t.reader)&&t.fields?new Ext.data.JsonReader(Ext.copyTo({},t,"totalProperty,root,idProperty"),t.fields):t.reader}))}});Ext.reg("directstore",Ext.data.DirectStore);Ext.Direct=Ext.extend(Ext.util.Observable,{exceptions:{TRANSPORT:"xhr",PARSE:"parse",LOGIN:"login",SERVER:"exception"},constructor:function(){this.addEvents("event","exception");this.transactions={};this.providers={}},addProvider:function(e){var t=arguments;if(t.length>1){for(var n=0,r=t.length;n<r;n++){this.addProvider(t[n])}return}if(!e.events){e=new Ext.Direct.PROVIDERS[e.type](e)}e.id=e.id||Ext.id();this.providers[e.id]=e;e.on("data",this.onProviderData,this);e.on("exception",this.onProviderException,this);if(!e.isConnected()){e.connect()}return e},getProvider:function(e){return this.providers[e]},removeProvider:function(e){var t=e.id?e:this.providers[e];t.un("data",this.onProviderData,this);t.un("exception",this.onProviderException,this);delete this.providers[t.id];return t},addTransaction:function(e){this.transactions[e.tid]=e;return e},removeTransaction:function(e){delete this.transactions[e.tid||e];return e},getTransaction:function(e){return this.transactions[e.tid||e]},onProviderData:function(e,t){if(Ext.isArray(t)){for(var n=0,r=t.length;n<r;n++){this.onProviderData(e,t[n])}return}if(t.name&&t.name!="event"&&t.name!="exception"){this.fireEvent(t.name,t)}else if(t.type=="exception"){this.fireEvent("exception",t)}this.fireEvent("event",t,e)},createEvent:function(e,t){return new Ext.Direct.eventTypes[e.type](Ext.apply(e,t))}});Ext.Direct=new Ext.Direct;Ext.Direct.TID=1;Ext.Direct.PROVIDERS={};Ext.Direct.Transaction=function(e){Ext.apply(this,e);this.tid=++Ext.Direct.TID;this.retryCount=0};Ext.Direct.Transaction.prototype={send:function(){this.provider.queueTransaction(this)},retry:function(){this.retryCount++;this.send()},getProvider:function(){return this.provider}};Ext.Direct.Event=function(e){Ext.apply(this,e)};Ext.Direct.Event.prototype={status:true,getData:function(){return this.data}};Ext.Direct.RemotingEvent=Ext.extend(Ext.Direct.Event,{type:"rpc",getTransaction:function(){return this.transaction||Ext.Direct.getTransaction(this.tid)}});Ext.Direct.ExceptionEvent=Ext.extend(Ext.Direct.RemotingEvent,{status:false,type:"exception"});Ext.Direct.eventTypes={rpc:Ext.Direct.RemotingEvent,event:Ext.Direct.Event,exception:Ext.Direct.ExceptionEvent};Ext.direct.Provider=Ext.extend(Ext.util.Observable,{priority:1,constructor:function(e){Ext.apply(this,e);this.addEvents("connect","disconnect","data","exception");Ext.direct.Provider.superclass.constructor.call(this,e)},isConnected:function(){return false},connect:Ext.emptyFn,disconnect:Ext.emptyFn});Ext.direct.JsonProvider=Ext.extend(Ext.direct.Provider,{parseResponse:function(e){if(!Ext.isEmpty(e.responseText)){if(typeof e.responseText=="object"){return e.responseText}return Ext.decode(e.responseText)}return null},getEvents:function(e){var t=null;try{t=this.parseResponse(e)}catch(n){var r=new Ext.Direct.ExceptionEvent({data:n,xhr:e,code:Ext.Direct.exceptions.PARSE,message:"Error parsing json response: \n\n "+t});return[r]}var i=[];if(Ext.isArray(t)){for(var s=0,o=t.length;s<o;s++){i.push(Ext.Direct.createEvent(t[s]))}}else{i.push(Ext.Direct.createEvent(t))}return i}});Ext.direct.PollingProvider=Ext.extend(Ext.direct.JsonProvider,{priority:3,interval:3e3,constructor:function(e){Ext.direct.PollingProvider.superclass.constructor.call(this,e);this.addEvents("beforepoll","poll")},isConnected:function(){return!!this.pollTask},connect:function(){if(this.url&&!this.pollTask){this.pollTask=Ext.TaskMgr.start({run:function(){if(this.fireEvent("beforepoll",this)!==false){if(typeof this.url=="function"){this.url(this.baseParams)}else{Ext.Ajax.request({url:this.url,callback:this.onData,scope:this,params:this.baseParams})}}},interval:this.interval,scope:this});this.fireEvent("connect",this)}else if(!this.url){throw"Error initializing PollingProvider, no url configured."}},disconnect:function(){if(this.pollTask){Ext.TaskMgr.stop(this.pollTask);delete this.pollTask;this.fireEvent("disconnect",this)}},onData:function(e,t,n){if(t){var r=this.getEvents(n);for(var i=0,s=r.length;i<s;i++){var o=r[i];this.fireEvent("data",this,o)}}else{var o=new Ext.Direct.ExceptionEvent({data:o,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:n});this.fireEvent("data",this,o)}}});Ext.Direct.PROVIDERS["polling"]=Ext.direct.PollingProvider;Ext.direct.RemotingProvider=Ext.extend(Ext.direct.JsonProvider,{enableBuffer:10,maxRetries:1,timeout:undefined,constructor:function(e){Ext.direct.RemotingProvider.superclass.constructor.call(this,e);this.addEvents("beforecall","call");this.namespace=Ext.isString(this.namespace)?Ext.ns(this.namespace):this.namespace||window;this.transactions={};this.callBuffer=[]},initAPI:function(){var e=this.actions;for(var t in e){var n=this.namespace[t]||(this.namespace[t]={}),r=e[t];for(var i=0,s=r.length;i<s;i++){var o=r[i];n[o.name]=this.createMethod(t,o)}}},isConnected:function(){return!!this.connected},connect:function(){if(this.url){this.initAPI();this.connected=true;this.fireEvent("connect",this)}else if(!this.url){throw"Error initializing RemotingProvider, no url configured."}},disconnect:function(){if(this.connected){this.connected=false;this.fireEvent("disconnect",this)}},onData:function(e,t,n){if(t){var r=this.getEvents(n);for(var i=0,s=r.length;i<s;i++){var o=r[i],u=this.getTransaction(o);this.fireEvent("data",this,o);if(u){this.doCallback(u,o,true);Ext.Direct.removeTransaction(u)}}}else{var a=[].concat(e.ts);for(var i=0,s=a.length;i<s;i++){var u=this.getTransaction(a[i]);if(u&&u.retryCount<this.maxRetries){u.retry()}else{var o=new Ext.Direct.ExceptionEvent({data:o,transaction:u,code:Ext.Direct.exceptions.TRANSPORT,message:"Unable to connect to the server.",xhr:n});this.fireEvent("data",this,o);if(u){this.doCallback(u,o,false);Ext.Direct.removeTransaction(u)}}}}},getCallData:function(e){return{action:e.action,method:e.method,data:e.data,type:"rpc",tid:e.tid}},doSend:function(e){var t={url:this.url,callback:this.onData,scope:this,ts:e,timeout:this.timeout},n;if(Ext.isArray(e)){n=[];for(var r=0,i=e.length;r<i;r++){n.push(this.getCallData(e[r]))}}else{n=this.getCallData(e)}if(this.enableUrlEncode){var s={};s[Ext.isString(this.enableUrlEncode)?this.enableUrlEncode:"data"]=Ext.encode(n);t.params=s}else{t.jsonData=n}Ext.Ajax.request(t)},combineAndSend:function(){var e=this.callBuffer.length;if(e>0){this.doSend(e==1?this.callBuffer[0]:this.callBuffer);this.callBuffer=[]}},queueTransaction:function(e){if(e.form){this.processForm(e);return}this.callBuffer.push(e);if(this.enableBuffer){if(!this.callTask){this.callTask=new Ext.util.DelayedTask(this.combineAndSend,this)}this.callTask.delay(Ext.isNumber(this.enableBuffer)?this.enableBuffer:10)}else{this.combineAndSend()}},doCall:function(e,t,n){var r=null,i=n[t.len],s=n[t.len+1];if(t.len!==0){r=n.slice(0,t.len)}var o=new Ext.Direct.Transaction({provider:this,args:n,action:e,method:t.name,data:r,cb:s&&Ext.isFunction(i)?i.createDelegate(s):i});if(this.fireEvent("beforecall",this,o,t)!==false){Ext.Direct.addTransaction(o);this.queueTransaction(o);this.fireEvent("call",this,o,t)}},doForm:function(e,t,n,r,i){var s=new Ext.Direct.Transaction({provider:this,action:e,method:t.name,args:[n,r,i],cb:i&&Ext.isFunction(r)?r.createDelegate(i):r,isForm:true});if(this.fireEvent("beforecall",this,s,t)!==false){Ext.Direct.addTransaction(s);var o=String(n.getAttribute("enctype")).toLowerCase()=="multipart/form-data",u={extTID:s.tid,extAction:e,extMethod:t.name,extType:"rpc",extUpload:String(o)};Ext.apply(s,{form:Ext.getDom(n),isUpload:o,params:r&&Ext.isObject(r.params)?Ext.apply(u,r.params):u});this.fireEvent("call",this,s,t);this.processForm(s)}},processForm:function(e){Ext.Ajax.request({url:this.url,params:e.params,callback:this.onData,scope:this,form:e.form,isUpload:e.isUpload,ts:e})},createMethod:function(e,t){var n;if(!t.formHandler){n=function(){this.doCall(e,t,Array.prototype.slice.call(arguments,0))}.createDelegate(this)}else{n=function(n,r,i){this.doForm(e,t,n,r,i)}.createDelegate(this)}n.directCfg={action:e,method:t};return n},getTransaction:function(e){return e&&e.tid?Ext.Direct.getTransaction(e.tid):null},doCallback:function(e,t){var n=t.status?"success":"failure";if(e&&e.cb){var r=e.cb,i=Ext.isDefined(t.result)?t.result:t.data;if(Ext.isFunction(r)){r(i,t)}else{Ext.callback(r[n],r.scope,[i,t]);Ext.callback(r.callback,r.scope,[i,t])}}}});Ext.Direct.PROVIDERS["remoting"]=Ext.direct.RemotingProvider;Ext.Resizable=Ext.extend(Ext.util.Observable,{constructor:function(e,t){this.el=Ext.get(e);if(t&&t.wrap){t.resizeChild=this.el;this.el=this.el.wrap(typeof t.wrap=="object"?t.wrap:{cls:"xresizable-wrap"});this.el.id=this.el.dom.id=t.resizeChild.id+"-rzwrap";this.el.setStyle("overflow","hidden");this.el.setPositioning(t.resizeChild.getPositioning());t.resizeChild.clearPositioning();if(!t.width||!t.height){var n=t.resizeChild.getSize();this.el.setSize(n.width,n.height)}if(t.pinned&&!t.adjustments){t.adjustments="auto"}}this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"},Ext.getBody());this.proxy.unselectable();this.proxy.enableDisplayMode("block");Ext.apply(this,t);if(this.pinned){this.disableTrackOver=true;this.el.addClass("x-resizable-pinned")}var r=this.el.getStyle("position");if(r!="absolute"&&r!="fixed"){this.el.setStyle("position","relative")}if(!this.handles){this.handles="s,e,se";if(this.multiDirectional){this.handles+=",n,w"}}if(this.handles=="all"){this.handles="n s e w ne nw se sw"}var i=this.handles.split(/\s*?[,;]\s*?| /);var s=Ext.Resizable.positions;for(var o=0,u=i.length;o<u;o++){if(i[o]&&s[i[o]]){var a=s[i[o]];this[a]=new Ext.Resizable.Handle(this,a,this.disableTrackOver,this.transparent,this.handleCls)}}this.corner=this.southeast;if(this.handles.indexOf("n")!=-1||this.handles.indexOf("w")!=-1){this.updateBox=true}this.activeHandle=null;if(this.resizeChild){if(typeof this.resizeChild=="boolean"){this.resizeChild=Ext.get(this.el.dom.firstChild,true)}else{this.resizeChild=Ext.get(this.resizeChild,true)}}if(this.adjustments=="auto"){var f=this.resizeChild;var l=this.west,c=this.east,h=this.north,i=this.south;if(f&&(l||h)){f.position("relative");f.setLeft(l?l.el.getWidth():0);f.setTop(h?h.el.getHeight():0)}this.adjustments=[(c?-c.el.getWidth():0)+(l?-l.el.getWidth():0),(h?-h.el.getHeight():0)+(i?-i.el.getHeight():0)-1]}if(this.draggable){this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id});this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id);if(this.constrainTo){this.dd.constrainTo(this.constrainTo)}}this.addEvents("beforeresize","resize");if(this.width!==null&&this.height!==null){this.resizeTo(this.width,this.height)}else{this.updateChildSize()}if(Ext.isIE){this.el.dom.style.zoom=1}Ext.Resizable.superclass.constructor.call(this)},adjustments:[0,0],animate:false,disableTrackOver:false,draggable:false,duration:.35,dynamic:false,easing:"easeOutStrong",enabled:true,handles:false,multiDirectional:false,height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:5,minWidth:5,maxHeight:1e4,maxWidth:1e4,minX:0,minY:0,pinned:false,preserveRatio:false,resizeChild:false,transparent:false,resizeTo:function(e,t){this.el.setSize(e,t);this.updateChildSize();this.fireEvent("resize",this,e,t,null)},startSizing:function(e,t){this.fireEvent("beforeresize",this,e);if(this.enabled){if(!this.overlay){this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode("block");this.overlay.on({scope:this,mousemove:this.onMouseMove,mouseup:this.onMouseUp})}this.overlay.setStyle("cursor",t.el.getStyle("cursor"));this.resizing=true;this.startBox=this.el.getBox();this.startPoint=e.getXY();this.offsets=[this.startBox.x+this.startBox.width-this.startPoint[0],this.startBox.y+this.startBox.height-this.startPoint[1]];this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();if(this.constrainTo){var n=Ext.get(this.constrainTo);this.resizeRegion=n.getRegion().adjust(n.getFrameWidth("t"),n.getFrameWidth("l"),-n.getFrameWidth("b"),-n.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden");this.proxy.show();this.proxy.setBox(this.startBox);if(!this.dynamic){this.proxy.setStyle("visibility","visible")}}},onMouseDown:function(e,t){if(this.enabled){t.stopEvent();this.activeHandle=e;this.startSizing(t,e)}},onMouseUp:function(e){this.activeHandle=null;var t=this.resizeElement();this.resizing=false;this.handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent("resize",this,t.width,t.height,e)},updateChildSize:function(){if(this.resizeChild){var e=this.el;var t=this.resizeChild;var n=this.adjustments;if(e.dom.offsetWidth){var r=e.getSize(true);t.setSize(r.width+n[0],r.height+n[1])}if(Ext.isIE9m){setTimeout(function(){if(e.dom.offsetWidth){var r=e.getSize(true);t.setSize(r.width+n[0],r.height+n[1])}},10)}}},snap:function(e,t,n){if(!t||!e){return e}var r=e;var i=e%t;if(i>0){if(i>t/2){r=e+(t-i)}else{r=e-i}}return Math.max(n,r)},resizeElement:function(){var e=this.proxy.getBox();if(this.updateBox){this.el.setBox(e,false,this.animate,this.duration,null,this.easing)}else{this.el.setSize(e.width,e.height,this.animate,this.duration,null,this.easing)}this.updateChildSize();if(!this.dynamic){this.proxy.hide()}if(this.draggable&&this.constrainTo){this.dd.resetConstraints();this.dd.constrainTo(this.constrainTo)}return e},constrain:function(e,t,n,r){if(e-t<n){t=e-n}else if(e-t>r){t=e-r}return t},onMouseMove:function(e){if(this.enabled&&this.activeHandle){try{if(this.resizeRegion&&!this.resizeRegion.contains(e.getPoint())){return}var t=this.curSize||this.startBox,n=this.startBox.x,r=this.startBox.y,i=n,s=r,o=t.width,u=t.height,a=o,f=u,l=this.minWidth,c=this.minHeight,h=this.maxWidth,p=this.maxHeight,d=this.widthIncrement,v=this.heightIncrement,m=e.getXY(),g=-(this.startPoint[0]-Math.max(this.minX,m[0])),y=-(this.startPoint[1]-Math.max(this.minY,m[1])),b=this.activeHandle.position,w,E;switch(b){case"east":o+=g;o=Math.min(Math.max(l,o),h);break;case"south":u+=y;u=Math.min(Math.max(c,u),p);break;case"southeast":o+=g;u+=y;o=Math.min(Math.max(l,o),h);u=Math.min(Math.max(c,u),p);break;case"north":y=this.constrain(u,y,c,p);r+=y;u-=y;break;case"west":g=this.constrain(o,g,l,h);n+=g;o-=g;break;case"northeast":o+=g;o=Math.min(Math.max(l,o),h);y=this.constrain(u,y,c,p);r+=y;u-=y;break;case"northwest":g=this.constrain(o,g,l,h);y=this.constrain(u,y,c,p);r+=y;u-=y;n+=g;o-=g;break;case"southwest":g=this.constrain(o,g,l,h);u+=y;u=Math.min(Math.max(c,u),p);n+=g;o-=g;break}var S=this.snap(o,d,l);var x=this.snap(u,v,c);if(S!=o||x!=u){switch(b){case"northeast":r-=x-u;break;case"north":r-=x-u;break;case"southwest":n-=S-o;break;case"west":n-=S-o;break;case"northwest":n-=S-o;r-=x-u;break}o=S;u=x}if(this.preserveRatio){switch(b){case"southeast":case"east":u=f*(o/a);u=Math.min(Math.max(c,u),p);o=a*(u/f);break;case"south":o=a*(u/f);o=Math.min(Math.max(l,o),h);u=f*(o/a);break;case"northeast":o=a*(u/f);o=Math.min(Math.max(l,o),h);u=f*(o/a);break;case"north":w=o;o=a*(u/f);o=Math.min(Math.max(l,o),h);u=f*(o/a);n+=(w-o)/2;break;case"southwest":u=f*(o/a);u=Math.min(Math.max(c,u),p);w=o;o=a*(u/f);n+=w-o;break;case"west":E=u;u=f*(o/a);u=Math.min(Math.max(c,u),p);r+=(E-u)/2;w=o;o=a*(u/f);n+=w-o;break;case"northwest":w=o;E=u;u=f*(o/a);u=Math.min(Math.max(c,u),p);o=a*(u/f);r+=E-u;n+=w-o;break}}this.proxy.setBounds(n,r,o,u);if(this.dynamic){this.resizeElement()}}catch(T){}}},handleOver:function(){if(this.enabled){this.el.addClass("x-resizable-over")}},handleOut:function(){if(!this.resizing){this.el.removeClass("x-resizable-over")}},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(e){Ext.destroy(this.dd,this.overlay,this.proxy);this.overlay=null;this.proxy=null;var t=Ext.Resizable.positions;for(var n in t){if(typeof t[n]!="function"&&this[t[n]]){this[t[n]].destroy()}}if(e){this.el.update("");Ext.destroy(this.el);this.el=null}this.purgeListeners()},syncHandleHeight:function(){var e=this.el.getHeight(true);if(this.west){this.west.el.setHeight(e)}if(this.east){this.east.el.setHeight(e)}}});Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"};Ext.Resizable.Handle=Ext.extend(Object,{constructor:function(e,t,n,r,i){if(!this.tpl){var s=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});s.compile();Ext.Resizable.Handle.prototype.tpl=s}this.position=t;this.rz=e;this.el=this.tpl.append(e.el.dom,[this.position],true);this.el.unselectable();if(r){this.el.setOpacity(0)}if(!Ext.isEmpty(i)){this.el.addClass(i)}this.el.on("mousedown",this.onMouseDown,this);if(!n){this.el.on({scope:this,mouseover:this.onMouseOver,mouseout:this.onMouseOut})}},afterResize:function(e){},onMouseDown:function(e){this.rz.onMouseDown(this,e)},onMouseOver:function(e){this.rz.handleOver(this,e)},onMouseOut:function(e){this.rz.handleOut(this,e)},destroy:function(){Ext.destroy(this.el);this.el=null}});Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:true,draggable:true,closable:true,closeAction:"close",constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,showAnimDuration:.25,hideAnimDuration:.25,collapsible:false,initHidden:undefined,hidden:true,elements:"header,body",frame:true,floating:true,initComponent:function(){this.initTools();Ext.Window.superclass.initComponent.call(this);this.addEvents("resize","maximize","minimize","restore");if(Ext.isDefined(this.initHidden)){this.hidden=this.initHidden}if(this.hidden===false){this.hidden=true;this.show()}},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(true))},onRender:function(e,t){Ext.Window.superclass.onRender.call(this,e,t);if(this.plain){this.el.addClass("x-window-plain")}this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"});this.focusEl.swallowEvent("click",true);this.proxy=this.el.createProxy("x-window-proxy");this.proxy.enableDisplayMode("block");if(this.modal){this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom);this.mask.enableDisplayMode("block");this.mask.hide();this.mon(this.mask,"click",this.focus,this)}if(this.maximizable){this.mon(this.header,"dblclick",this.toggleMaximize,this)}},initEvents:function(){Ext.Window.superclass.initEvents.call(this);if(this.animateTarget){this.setAnimateTarget(this.animateTarget)}if(this.resizable){this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:true,resizeElement:this.resizerAction,handleCls:"x-window-handle"});this.resizer.window=this;this.mon(this.resizer,"beforeresize",this.beforeResize,this)}if(this.draggable){this.header.addClass("x-window-draggable")}this.mon(this.el,"mousedown",this.toFront,this);this.manager=this.manager||Ext.WindowMgr;this.manager.register(this);if(this.maximized){this.maximized=false;this.maximize()}if(this.closable){var e=this.getKeyMap();e.on(27,this.onEsc,this);e.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(e,t){if(this.activeGhost){this.unghost()}t.stopEvent();this[this.closeAction]()},beforeDestroy:function(){if(this.rendered){this.hide();this.clearAnchor();Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)}Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){if(this.manager){this.manager.unregister(this)}Ext.Window.superclass.onDestroy.call(this)},initTools:function(){if(this.minimizable){this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])})}if(this.maximizable){this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])});this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:true})}if(this.closable){this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})}},resizerAction:function(){var e=this.proxy.getBox();this.proxy.hide();this.window.handleResize(e);return e},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40);this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40);this.resizeBox=this.el.getBox()},updateHandles:function(){if(Ext.isIE9m&&this.resizer){this.resizer.syncHandleHeight();this.el.repaint()}},handleResize:function(e){var t=this.resizeBox;if(t.x!=e.x||t.y!=e.y){this.updateBox(e)}else{this.setSize(e);if(Ext.isIE6&&Ext.isStrict){this.doLayout()}}this.focus();this.updateHandles();this.saveState()},focus:function(){var e=this.focusEl,t=this.defaultButton,n=typeof t,r,i;if(Ext.isDefined(t)){if(Ext.isNumber(t)&&this.fbar){e=this.fbar.items.get(t)}else if(Ext.isString(t)){e=Ext.getCmp(t)}else{e=t}r=e.getEl();i=Ext.getDom(this.container);if(r&&i){if(i!=document.body&&!Ext.lib.Region.getRegion(i).contains(Ext.lib.Region.getRegion(r.dom))){return}}}e=e||this.focusEl;e.focus.defer(10,e)},setAnimateTarget:function(e){e=Ext.get(e);this.animateTarget=e},beforeShow:function(){delete this.el.lastXY;delete this.el.lastLT;if(this.x===undefined||this.y===undefined){var e=this.el.getAlignToXY(this.container,"c-c");var t=this.el.translatePoints(e[0],e[1]);this.x=this.x===undefined?t.left:this.x;this.y=this.y===undefined?t.top:this.y}this.el.setLeftTop(this.x,this.y);if(this.expandOnShow){this.expand(false)}if(this.modal){Ext.getBody().addClass("x-body-masked");this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.mask.show()}},show:function(e,t,n){if(!this.rendered){this.render(Ext.getBody())}if(this.hidden===false){this.toFront();return this}if(this.fireEvent("beforeshow",this)===false){return this}if(t){this.on("show",t,n,{single:true})}this.hidden=false;if(Ext.isDefined(e)){this.setAnimateTarget(e)}this.beforeShow();if(this.animateTarget){this.animShow()}else{this.afterShow()}return this},afterShow:function(e){if(this.isDestroyed){return false}this.proxy.hide();this.el.setStyle("display","block");this.el.show();if(this.maximized){this.fitContainer()}if(Ext.isMac&&Ext.isGecko2){this.cascade(this.setAutoScroll)}if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.onWindowResize(this.onWindowResize,this)}this.doConstrain();this.doLayout();if(this.keyMap){this.keyMap.enable()}this.toFront();this.updateHandles();if(e&&(Ext.isIE||Ext.isWebKit)){var t=this.getSize();this.onResize(t.width,t.height)}this.onShow();this.fireEvent("show",this)},animShow:function(){this.proxy.show();this.proxy.setBox(this.animateTarget.getBox());this.proxy.setOpacity(0);var e=this.getBox();this.el.setStyle("display","none");this.proxy.shift(Ext.apply(e,{callback:this.afterShow.createDelegate(this,[true],false),scope:this,easing:"easeNone",duration:this.showAnimDuration,opacity:.5}))},hide:function(e,t,n){if(this.hidden||this.fireEvent("beforehide",this)===false){return this}if(t){this.on("hide",t,n,{single:true})}this.hidden=true;if(e!==undefined){this.setAnimateTarget(e)}if(this.modal){this.mask.hide();Ext.getBody().removeClass("x-body-masked")}if(this.animateTarget){this.animHide()}else{this.el.hide();this.afterHide()}return this},afterHide:function(){this.proxy.hide();if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.removeResizeListener(this.onWindowResize,this)}if(this.keyMap){this.keyMap.disable()}this.onHide();this.fireEvent("hide",this)},animHide:function(){this.proxy.setOpacity(.5);this.proxy.show();var e=this.getBox(false);this.proxy.setBox(e);this.el.hide();this.proxy.shift(Ext.apply(this.animateTarget.getBox(),{callback:this.afterHide,scope:this,duration:this.hideAnimDuration,easing:"easeNone",opacity:0}))},onShow:Ext.emptyFn,onHide:Ext.emptyFn,onWindowResize:function(){if(this.maximized){this.fitContainer()}if(this.modal){this.mask.setSize("100%","100%");var e=this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true))}this.doConstrain()},doConstrain:function(){if(this.constrain||this.constrainHeader){var e;if(this.constrain){e={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset}}else{var t=this.getSize();e={right:-(t.width-100),bottom:-(t.height-25+this.el.getConstrainOffset())}}var n=this.el.getConstrainToXY(this.container,true,e);if(n){this.setPosition(n[0],n[1])}}},ghost:function(e){var t=this.createGhost(e);var n=this.getBox(true);t.setLeftTop(n.x,n.y);t.setWidth(n.width);this.el.hide();this.activeGhost=t;return t},unghost:function(e,t){if(!this.activeGhost){return}if(e!==false){this.el.show();this.focus.defer(10,this);if(Ext.isMac&&Ext.isGecko2){this.cascade(this.setAutoScroll)}}if(t!==false){this.setPosition(this.activeGhost.getLeft(true),this.activeGhost.getTop(true))}this.activeGhost.hide();this.activeGhost.remove();delete this.activeGhost},minimize:function(){this.fireEvent("minimize",this);return this},close:function(){if(this.fireEvent("beforeclose",this)!==false){if(this.hidden){this.doClose()}else{this.hide(null,this.doClose,this)}}},doClose:function(){this.fireEvent("close",this);this.destroy()},maximize:function(){if(!this.maximized){this.expand(false);this.restoreSize=this.getSize();this.restorePos=this.getPosition(true);if(this.maximizable){this.tools.maximize.hide();this.tools.restore.show()}this.maximized=true;this.el.disableShadow();if(this.dd){this.dd.lock()}if(this.collapsible){this.tools.toggle.hide()}this.el.addClass("x-window-maximized");this.container.addClass("x-window-maximized-ct");this.setPosition(0,0);this.fitContainer();this.fireEvent("maximize",this)}return this},restore:function(){if(this.maximized){var e=this.tools;this.el.removeClass("x-window-maximized");if(e.restore){e.restore.hide()}if(e.maximize){e.maximize.show()}this.setPosition(this.restorePos[0],this.restorePos[1]);this.setSize(this.restoreSize.width,this.restoreSize.height);delete this.restorePos;delete this.restoreSize;this.maximized=false;this.el.enableShadow(true);if(this.dd){this.dd.unlock()}if(this.collapsible&&e.toggle){e.toggle.show()}this.container.removeClass("x-window-maximized-ct");this.doConstrain();this.fireEvent("restore",this)}return this},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var e=this.container.getViewSize(false);this.setSize(e.width,e.height)},setZIndex:function(e){if(this.modal){this.mask.setStyle("z-index",e)}this.el.setZIndex(++e);e+=5;if(this.resizer){this.resizer.proxy.setStyle("z-index",++e)}this.lastZIndex=e},alignTo:function(e,t,n){var r=this.el.getAlignToXY(e,t,n);this.setPagePosition(r[0],r[1]);return this},anchorTo:function(e,t,n,r){this.clearAnchor();this.anchorTarget={el:e,alignment:t,offsets:n};Ext.EventManager.onWindowResize(this.doAnchor,this);var i=typeof r;if(i!="undefined"){Ext.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:i=="number"?r:50})}return this.doAnchor()},doAnchor:function(){var e=this.anchorTarget;this.alignTo(e.el,e.alignment,e.offsets);return this},clearAnchor:function(){if(this.anchorTarget){Ext.EventManager.removeResizeListener(this.doAnchor,this);Ext.EventManager.un(window,"scroll",this.doAnchor,this);delete this.anchorTarget}return this},toFront:function(e){if(this.manager.bringToFront(this)){if(!e||!e.getTarget().focus){this.focus()}}return this},setActive:function(e){if(e){if(!this.maximized){this.el.enableShadow(true)}this.fireEvent("activate",this)}else{this.el.disableShadow();this.fireEvent("deactivate",this)}},toBack:function(){this.manager.sendToBack(this);return this},center:function(){var e=this.el.getAlignToXY(this.container,"c-c");this.setPagePosition(e[0],e[1]);return this}});Ext.reg("window",Ext.Window);Ext.Window.DD=Ext.extend(Ext.dd.DD,{constructor:function(e){this.win=e;Ext.Window.DD.superclass.constructor.call(this,e.el.id,"WindowDD-"+e.id);this.setHandleElId(e.header.id);this.scroll=false},moveOnly:true,headerOffsets:[100,25],startDrag:function(){var e=this.win;this.proxy=e.ghost(e.initialConfig.cls);if(e.constrain!==false){var t=e.el.shadowOffset;this.constrainTo(e.container,{right:t,left:t,bottom:t})}else if(e.constrainHeader!==false){var n=this.proxy.getSize();this.constrainTo(e.container,{right:-(n.width-this.headerOffsets[0]),bottom:-(n.height-this.headerOffsets[1])})}},b4Drag:Ext.emptyFn,onDrag:function(e){this.alignElWithMouse(this.proxy,e.getPageX(),e.getPageY())},endDrag:function(e){this.win.unghost();this.win.saveState()}});Ext.WindowGroup=function(){var e={};var t=[];var n=null;var r=function(e,t){return!e._lastAccess||e._lastAccess<t._lastAccess?-1:1};var i=function(){var e=t,n=e.length;if(n>0){e.sort(r);var i=e[0].manager.zseed;for(var s=0;s<n;s++){var u=e[s];if(u&&!u.hidden){u.setZIndex(i+s*10)}}}o()};var s=function(e){if(e!=n){if(n){n.setActive(false)}n=e;if(e){e.setActive(true)}}};var o=function(){for(var e=t.length-1;e>=0;--e){if(!t[e].hidden){s(t[e]);return}}s(null)};return{zseed:9e3,register:function(n){if(n.manager){n.manager.unregister(n)}n.manager=this;e[n.id]=n;t.push(n);n.on("hide",o)},unregister:function(n){delete n.manager;delete e[n.id];n.un("hide",o);t.remove(n)},get:function(t){return typeof t=="object"?t:e[t]},bringToFront:function(e){e=this.get(e);if(e!=n){e._lastAccess=(new Date).getTime();i();return true}return false},sendToBack:function(e){e=this.get(e);e._lastAccess=-(new Date).getTime();i();return e},hideAll:function(){for(var t in e){if(e[t]&&typeof e[t]!="function"&&e[t].isVisible()){e[t].hide()}}},getActive:function(){return n},getBy:function(e,n){var r=[];for(var i=t.length-1;i>=0;--i){var s=t[i];if(e.call(n||s,s)!==false){r.push(s)}}return r},each:function(t,n){for(var r in e){if(e[r]&&typeof e[r]!="function"){if(t.call(n||e[r],e[r])===false){return}}}}}};Ext.WindowMgr=new Ext.WindowGroup;Ext.MessageBox=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v="",m="",g=["ok","yes","no","cancel"];var y=function(n){h[n].blur();if(e.isVisible()){e.hide();b();Ext.callback(t.fn,t.scope||window,[n,p.dom.value,t],1)}};var b=function(){if(t&&t.cls){e.el.removeClass(t.cls)}a.reset()};var w=function(n,r,i){if(t&&t.closable!==false){e.hide();b()}if(i){i.stopEvent()}};var E=function(t){var n=0,r;if(!t){Ext.each(g,function(e){h[e].hide()});return n}e.footer.dom.style.display="";Ext.iterate(h,function(e,i){r=t[e];if(r){i.show();i.setText(Ext.isString(r)?r:Ext.MessageBox.buttonText[e]);n+=i.getEl().getWidth()+15}else{i.hide()}});return n};return{getDialog:function(r){if(!e){var f=[];h={};Ext.each(g,function(e){f.push(h[e]=new Ext.Button({text:this.buttonText[e],handler:y.createCallback(e),hideMode:"offsets"}))},this);e=new Ext.Window({autoCreate:true,title:r,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,buttonAlign:"center",width:400,height:100,minHeight:80,plain:true,footer:true,closable:true,close:function(){if(t&&t.buttons&&t.buttons.no&&!t.buttons.cancel){y("no")}else{y("cancel")}},fbar:new Ext.Toolbar({items:f,enableOverflow:false})});e.render(document.body);e.getEl().addClass("x-window-dlg");n=e.mask;i=e.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'});l=Ext.get(i.dom.firstChild);var c=i.dom.childNodes[1];s=Ext.get(c.firstChild);o=Ext.get(c.childNodes[2].firstChild);o.enableDisplayMode();o.addKeyListener([10,13],function(){if(e.isVisible()&&t&&t.buttons){if(t.buttons.ok){y("ok")}else if(t.buttons.yes){y("yes")}}});u=Ext.get(c.childNodes[2].childNodes[1]);u.enableDisplayMode();a=new Ext.ProgressBar({renderTo:i});i.createChild({cls:"x-clear"})}return e},updateText:function(n){if(!e.isVisible()&&!t.width){e.setSize(this.maxWidth,100)}s.update(n?n+" ":"&#160;");var r=m!=""?l.getWidth()+l.getMargins("lr"):0,i=s.getWidth()+s.getMargins("lr"),o=e.getFrameWidth("lr"),u=e.body.getFrameWidth("lr"),f;f=Math.max(Math.min(t.width||r+i+o+u,t.maxWidth||this.maxWidth),Math.max(t.minWidth||this.minWidth,d||0));if(t.prompt===true){p.setWidth(f-r-o-u)}if(t.progress===true||t.wait===true){a.setSize(f-r-o-u)}if(Ext.isIE9m&&f==d){f+=4}s.update(n||"&#160;");e.setSize(f,"auto").center();return this},updateProgress:function(e,t,n){a.updateProgress(e,t);if(n){this.updateText(n)}return this},isVisible:function(){return e&&e.isVisible()},hide:function(){var t=e?e.activeGhost:null;if(this.isVisible()||t){e.hide();b();if(t){e.unghost(false,false)}}return this},show:function(r){if(this.isVisible()){this.hide()}t=r;var i=this.getDialog(t.title||"&#160;");i.setTitle(t.title||"&#160;");var s=t.closable!==false&&t.progress!==true&&t.wait!==true;i.tools.close.setDisplayed(s);p=o;t.prompt=t.prompt||(t.multiline?true:false);if(t.prompt){if(t.multiline){o.hide();u.show();u.setHeight(Ext.isNumber(t.multiline)?t.multiline:this.defaultTextHeight);p=u}else{o.show();u.hide()}}else{o.hide();u.hide()}p.dom.value=t.value||"";if(t.prompt){i.focusEl=p}else{var f=t.buttons;var l=null;if(f&&f.ok){l=h["ok"]}else if(f&&f.yes){l=h["yes"]}if(l){i.focusEl=l}}if(Ext.isDefined(t.iconCls)){i.setIconClass(t.iconCls)}this.setIcon(Ext.isDefined(t.icon)?t.icon:v);d=E(t.buttons);a.setVisible(t.progress===true||t.wait===true);this.updateProgress(0,t.progressText);this.updateText(t.msg);if(t.cls){i.el.addClass(t.cls)}i.proxyDrag=t.proxyDrag===true;i.modal=t.modal!==false;i.mask=t.modal!==false?n:false;if(!i.isVisible()){document.body.appendChild(e.el.dom);i.setAnimateTarget(t.animEl);i.on("show",function(){if(s===true){i.keyMap.enable()}else{i.keyMap.disable()}},this,{single:true});i.show(t.animEl)}if(t.wait===true){a.wait(t.waitConfig)}return this},setIcon:function(t){if(!e){v=t;return}v=undefined;if(t&&t!=""){l.removeClass("x-hidden");l.replaceClass(m,t);i.addClass("x-dlg-icon");m=t}else{l.replaceClass(m,"x-hidden");i.removeClass("x-dlg-icon");m=""}return this},progress:function(e,t,n){this.show({title:e,msg:t,buttons:false,progress:true,closable:false,minWidth:this.minProgressWidth,progressText:n});return this},wait:function(e,t,n){this.show({title:t,msg:e,buttons:false,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:n});return this},alert:function(e,t,n,r){this.show({title:e,msg:t,buttons:this.OK,fn:n,scope:r,minWidth:this.minWidth});return this},confirm:function(e,t,n,r){this.show({title:e,msg:t,buttons:this.YESNO,fn:n,scope:r,icon:this.QUESTION,minWidth:this.minWidth});return this},prompt:function(e,t,n,r,i,s){this.show({title:e,msg:t,buttons:this.OKCANCEL,fn:n,minWidth:this.minPromptWidth,scope:r,prompt:true,multiline:i,value:s});return this},OK:{ok:true},CANCEL:{cancel:true},OKCANCEL:{ok:true,cancel:true},YESNO:{yes:true,no:true},YESNOCANCEL:{yes:true,no:true,cancel:true},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}();Ext.Msg=Ext.MessageBox;Ext.dd.PanelProxy=Ext.extend(Object,{constructor:function(e,t){this.panel=e;this.id=this.panel.id+"-ddproxy";Ext.apply(this,t)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy}this.panel.el.dom.style.display="";this.ghost.remove();delete this.ghost}},show:function(){if(!this.ghost){this.ghost=this.panel.createGhost(this.panel.initialConfig.cls,undefined,Ext.getBody());this.ghost.setXY(this.panel.el.getXY());if(this.insertProxy){this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"});this.proxy.setSize(this.panel.getSize())}this.panel.el.dom.style.display="none"}},repair:function(e,t,n){this.hide();if(typeof t=="function"){t.call(n||this)}},moveProxy:function(e,t){if(this.proxy){e.insertBefore(this.proxy.dom,t)}}});Ext.Panel.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(e,t){this.panel=e;this.dragData={panel:e};this.proxy=new Ext.dd.PanelProxy(e,t);Ext.Panel.DD.superclass.constructor.call(this,e.el,t);var n=e.header,r=e.body;if(n){this.setHandleElId(n.id);r=e.header}r.setStyle("cursor","move");this.scroll=false},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(e,t){this.proxy.show()},b4MouseDown:function(e){var t=e.getPageX(),n=e.getPageY();this.autoOffset(t,n)},onInitDrag:function(e,t){this.onStartDrag(e,t);return true},createFrame:Ext.emptyFn,getDragEl:function(e){return this.proxy.ghost.dom},endDrag:function(e){this.proxy.hide();this.panel.saveState()},autoOffset:function(e,t){e-=this.startPageX;t-=this.startPageY;this.setDelta(e,t)}});Ext.state.Provider=Ext.extend(Ext.util.Observable,{constructor:function(){this.addEvents("statechange");this.state={};Ext.state.Provider.superclass.constructor.call(this)},get:function(e,t){return typeof this.state[e]=="undefined"?t:this.state[e]},clear:function(e){delete this.state[e];this.fireEvent("statechange",this,e,null)},set:function(e,t){this.state[e]=t;this.fireEvent("statechange",this,e,t)},decodeValue:function(e){var t=/^(a|n|d|b|s|o|e)\:(.*)$/,n=t.exec(unescape(e)),r,i,s,o;if(!n||!n[1]){return}i=n[1];s=n[2];switch(i){case"e":return null;case"n":return parseFloat(s);case"d":return new Date(Date.parse(s));case"b":return s=="1";case"a":r=[];if(s!=""){Ext.each(s.split("^"),function(e){r.push(this.decodeValue(e))},this)}return r;case"o":r={};if(s!=""){Ext.each(s.split("^"),function(e){o=e.split("=");r[o[0]]=this.decodeValue(o[1])},this)}return r;default:return s}},encodeValue:function(e){var t,n="",r=0,i,s;if(e==null){return"e:1"}else if(typeof e=="number"){t="n:"+e}else if(typeof e=="boolean"){t="b:"+(e?"1":"0")}else if(Ext.isDate(e)){t="d:"+e.toGMTString()}else if(Ext.isArray(e)){for(i=e.length;r<i;r++){n+=this.encodeValue(e[r]);if(r!=i-1){n+="^"}}t="a:"+n}else if(typeof e=="object"){for(s in e){if(typeof e[s]!="function"&&e[s]!==undefined){n+=s+"="+this.encodeValue(e[s])+"^"}}t="o:"+n.substring(0,n.length-1)}else{t="s:"+e}return escape(t)}});Ext.state.Manager=function(){var e=new Ext.state.Provider;return{setProvider:function(t){e=t},get:function(t,n){return e.get(t,n)},set:function(t,n){e.set(t,n)},clear:function(t){e.clear(t)},getProvider:function(){return e}}}();Ext.state.CookieProvider=Ext.extend(Ext.state.Provider,{constructor:function(e){Ext.state.CookieProvider.superclass.constructor.call(this);this.path="/";this.expires=new Date((new Date).getTime()+1e3*60*60*24*7);this.domain=null;this.secure=false;Ext.apply(this,e);this.state=this.readCookies()},set:function(e,t){if(typeof t=="undefined"||t===null){this.clear(e);return}this.setCookie(e,t);Ext.state.CookieProvider.superclass.set.call(this,e,t)},clear:function(e){this.clearCookie(e);Ext.state.CookieProvider.superclass.clear.call(this,e)},readCookies:function(){var e={},t=document.cookie+";",n=/\s?(.*?)=(.*?);/g,r,i,s;while((r=n.exec(t))!=null){i=r[1];s=r[2];if(i&&i.substring(0,3)=="ys-"){e[i.substr(3)]=this.decodeValue(s)}}return e},setCookie:function(e,t){document.cookie="ys-"+e+"="+this.encodeValue(t)+(this.expires==null?"":"; expires="+this.expires.toGMTString())+(this.path==null?"":"; path="+this.path)+(this.domain==null?"":"; domain="+this.domain)+(this.secure==true?"; secure":"")},clearCookie:function(e){document.cookie="ys-"+e+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+(this.path==null?"":"; path="+this.path)+(this.domain==null?"":"; domain="+this.domain)+(this.secure==true?"; secure":"")}});Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,last:false,initComponent:function(){Ext.DataView.superclass.initComponent.call(this);if(Ext.isString(this.tpl)||Ext.isArray(this.tpl)){this.tpl=new Ext.XTemplate(this.tpl)}this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","containercontextmenu","selectionchange","beforeselect");this.store=Ext.StoreMgr.lookup(this.store);this.all=new Ext.CompositeElementLite;this.selected=new Ext.CompositeElementLite},afterRender:function(){Ext.DataView.superclass.afterRender.call(this);this.mon(this.getTemplateTarget(),{click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu,scope:this});if(this.overClass||this.trackOver){this.mon(this.getTemplateTarget(),{mouseover:this.onMouseOver,mouseout:this.onMouseOut,scope:this})}if(this.store){this.bindStore(this.store,true)}},refresh:function(){this.clearSelections(false,true);var e=this.getTemplateTarget(),t=this.store.getRange();e.update("");if(t.length<1){if(!this.deferEmptyText||this.hasSkippedEmptyText){e.update(this.emptyText)}this.all.clear()}else{this.tpl.overwrite(e,this.collectData(t,0));this.all.fill(Ext.query(this.itemSelector,e.dom));this.updateIndexes(0)}this.hasSkippedEmptyText=true},getTemplateTarget:function(){return this.el},prepareData:function(e){return e},collectData:function(e,t){var n=[],r=0,i=e.length;for(;r<i;r++){n[n.length]=this.prepareData(e[r].data,t+r,e[r])}return n},bufferRender:function(e,t){var n=document.createElement("div");this.tpl.overwrite(n,this.collectData(e,t));return Ext.query(this.itemSelector,n)},onUpdate:function(e,t){var n=this.store.indexOf(t);if(n>-1){var r=this.isSelected(n),i=this.all.elements[n],s=this.bufferRender([t],n)[0];this.all.replaceElement(n,s,true);if(r){this.selected.replaceElement(i,s);this.all.item(n).addClass(this.selectedClass)}this.updateIndexes(n,n)}},onAdd:function(e,t,n){if(this.all.getCount()===0){this.refresh();return}var r=this.bufferRender(t,n),i,s=this.all.elements;if(n<this.all.getCount()){i=this.all.item(n).insertSibling(r,"before",true);s.splice.apply(s,[n,0].concat(r))}else{i=this.all.last().insertSibling(r,"after",true);s.push.apply(s,r)}this.updateIndexes(n)},onRemove:function(e,t,n){this.deselect(n);this.all.removeElement(n,true);this.updateIndexes(n);if(this.store.getCount()===0){this.refresh()}},refreshNode:function(e){this.onUpdate(this.store,this.store.getAt(e))},updateIndexes:function(e,t){var n=this.all.elements;e=e||0;t=t||(t===0?0:n.length-1);for(var r=e;r<=t;r++){n[r].viewIndex=r}},getStore:function(){return this.store},bindStore:function(e,t){if(!t&&this.store){if(e!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("datachanged",this.onDataChanged,this);this.store.un("add",this.onAdd,this);this.store.un("remove",this.onRemove,this);this.store.un("update",this.onUpdate,this);this.store.un("clear",this.refresh,this)}if(!e){this.store=null}}if(e){e=Ext.StoreMgr.lookup(e);e.on({scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh})}this.store=e;if(e){this.refresh()}},onDataChanged:function(){if(this.blockRefresh!==true){this.refresh.apply(this,arguments)}},findItemFromChild:function(e){return Ext.fly(e).findParent(this.itemSelector,this.getTemplateTarget())},onClick:function(e){var t=e.getTarget(this.itemSelector,this.getTemplateTarget()),n;if(t){n=this.indexOf(t);if(this.onItemClick(t,n,e)!==false){this.fireEvent("click",this,n,t,e)}}else{if(this.fireEvent("containerclick",this,e)!==false){this.onContainerClick(e)}}},onContainerClick:function(e){this.clearSelections()},onContextMenu:function(e){var t=e.getTarget(this.itemSelector,this.getTemplateTarget());if(t){this.fireEvent("contextmenu",this,this.indexOf(t),t,e)}else{this.fireEvent("containercontextmenu",this,e)}},onDblClick:function(e){var t=e.getTarget(this.itemSelector,this.getTemplateTarget());if(t){this.fireEvent("dblclick",this,this.indexOf(t),t,e)}},onMouseOver:function(e){var t=e.getTarget(this.itemSelector,this.getTemplateTarget());if(t&&t!==this.lastItem){this.lastItem=t;Ext.fly(t).addClass(this.overClass);this.fireEvent("mouseenter",this,this.indexOf(t),t,e)}},onMouseOut:function(e){if(this.lastItem){if(!e.within(this.lastItem,true,true)){Ext.fly(this.lastItem).removeClass(this.overClass);this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,e);delete this.lastItem}}},onItemClick:function(e,t,n){if(this.fireEvent("beforeclick",this,t,e,n)===false){return false}if(this.multiSelect){this.doMultiSelection(e,t,n);n.preventDefault()}else if(this.singleSelect){this.doSingleSelection(e,t,n);n.preventDefault()}return true},doSingleSelection:function(e,t,n){if(n.ctrlKey&&this.isSelected(t)){this.deselect(t)}else{this.select(t,false)}},doMultiSelection:function(e,t,n){if(n.shiftKey&&this.last!==false){var r=this.last;this.selectRange(r,t,n.ctrlKey);this.last=r}else{if((n.ctrlKey||this.simpleSelect)&&this.isSelected(t)){this.deselect(t)}else{this.select(t,n.ctrlKey||n.shiftKey||this.simpleSelect)}}},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){var e=[],t=this.selected.elements,n=0,r=t.length;for(;n<r;n++){e.push(t[n].viewIndex)}return e},getSelectedRecords:function(){return this.getRecords(this.selected.elements)},getRecords:function(e){var t=[],n=0,r=e.length;for(;n<r;n++){t[t.length]=this.store.getAt(e[n].viewIndex)}return t},getRecord:function(e){return this.store.getAt(e.viewIndex)},clearSelections:function(e,t){if((this.multiSelect||this.singleSelect)&&this.selected.getCount()>0){if(!t){this.selected.removeClass(this.selectedClass)}this.selected.clear();this.last=false;if(!e){this.fireEvent("selectionchange",this,this.selected.elements)}}},isSelected:function(e){return this.selected.contains(this.getNode(e))},deselect:function(e){if(this.isSelected(e)){e=this.getNode(e);this.selected.removeElement(e);if(this.last==e.viewIndex){this.last=false}Ext.fly(e).removeClass(this.selectedClass);this.fireEvent("selectionchange",this,this.selected.elements)}},select:function(e,t,n){if(Ext.isArray(e)){if(!t){this.clearSelections(true)}for(var r=0,i=e.length;r<i;r++){this.select(e[r],true,true)}if(!n){this.fireEvent("selectionchange",this,this.selected.elements)}}else{var s=this.getNode(e);if(!t){this.clearSelections(true)}if(s&&!this.isSelected(s)){if(this.fireEvent("beforeselect",this,s,this.selected.elements)!==false){Ext.fly(s).addClass(this.selectedClass);this.selected.add(s);this.last=s.viewIndex;if(!n){this.fireEvent("selectionchange",this,this.selected.elements)}}}}},selectRange:function(e,t,n){if(!n){this.clearSelections(true)}this.select(this.getNodes(e,t),true)},getNode:function(e){if(Ext.isString(e)){return document.getElementById(e)}else if(Ext.isNumber(e)){return this.all.elements[e]}else if(e instanceof Ext.data.Record){var t=this.store.indexOf(e);return this.all.elements[t]}return e},getNodes:function(e,t){var n=this.all.elements,r=[],i;e=e||0;t=!Ext.isDefined(t)?Math.max(n.length-1,0):t;if(e<=t){for(i=e;i<=t&&n[i];i++){r.push(n[i])}}else{for(i=e;i>=t&&n[i];i--){r.push(n[i])}}return r},indexOf:function(e){e=this.getNode(e);if(Ext.isNumber(e.viewIndex)){return e.viewIndex}return this.all.indexOf(e)},onBeforeLoad:function(){if(this.loadingText){this.clearSelections(false,true);this.getTemplateTarget().update('<div class="loading-indicator">'+this.loadingText+"</div>");this.all.clear()}},onDestroy:function(){this.all.clear();this.selected.clear();Ext.DataView.superclass.onDestroy.call(this);this.bindStore(null)}});Ext.DataView.prototype.setStore=Ext.DataView.prototype.bindStore;Ext.reg("dataview",Ext.DataView);Ext.list.ListView=Ext.extend(Ext.DataView,{itemSelector:"dl",selectedClass:"x-list-selected",overClass:"x-list-over",scrollOffset:undefined,columnResize:true,columnSort:true,maxColumnWidth:Ext.isIE9m?99:100,initComponent:function(){if(this.columnResize){this.colResizer=new Ext.list.ColumnResizer(this.colResizer);this.colResizer.init(this)}if(this.columnSort){this.colSorter=new Ext.list.Sorter(this.columnSort);this.colSorter.init(this)}if(!this.internalTpl){this.internalTpl=new Ext.XTemplate('<div class="x-list-header"><div class="x-list-header-inner">','<tpl for="columns">','<div style="width:{[values.width*100]}%;text-align:{align};"><em class="x-unselectable" unselectable="on" id="',this.id,'-xlhd-{#}">',"{header}","</em></div>","</tpl>",'<div class="x-clear"></div>',"</div></div>",'<div class="x-list-body"><div class="x-list-body-inner">',"</div></div>")}if(!this.tpl){this.tpl=new Ext.XTemplate('<tpl for="rows">',"<dl>",'<tpl for="parent.columns">','<dt style="width:{[values.width*100]}%;text-align:{align};">','<em unselectable="on"<tpl if="cls"> class="{cls}</tpl>">',"{[values.tpl.apply(parent)]}","</em></dt>","</tpl>",'<div class="x-clear"></div>',"</dl>","</tpl>")}var e=this.columns,t=0,n=0,r=e.length,i=[];for(var s=0;s<r;s++){var o=e[s];if(!o.isColumn){o.xtype=o.xtype?/^lv/.test(o.xtype)?o.xtype:"lv"+o.xtype:"lvcolumn";o=Ext.create(o)}if(o.width){t+=o.width*100;if(t>this.maxColumnWidth){o.width-=(t-this.maxColumnWidth)/100}n++}i.push(o)}e=this.columns=i;if(n<r){var u=r-n;if(t<this.maxColumnWidth){var a=(this.maxColumnWidth-t)/u/100;for(var f=0;f<r;f++){var o=e[f];if(!o.width){o.width=a}}}}Ext.list.ListView.superclass.initComponent.call(this)},onRender:function(){this.autoEl={cls:"x-list-wrap"};Ext.list.ListView.superclass.onRender.apply(this,arguments);this.internalTpl.overwrite(this.el,{columns:this.columns});this.innerBody=Ext.get(this.el.dom.childNodes[1].firstChild);this.innerHd=Ext.get(this.el.dom.firstChild.firstChild);if(this.hideHeaders){this.el.dom.firstChild.style.display="none"}},getTemplateTarget:function(){return this.innerBody},collectData:function(){var e=Ext.list.ListView.superclass.collectData.apply(this,arguments);return{columns:this.columns,rows:e}},verifyInternalSize:function(){if(this.lastSize){this.onResize(this.lastSize.width,this.lastSize.height)}},onResize:function(e,t){var n=this.innerBody.dom,r=this.innerHd.dom,i=e-Ext.num(this.scrollOffset,Ext.getScrollBarWidth())+"px",s;if(!n){return}s=n.parentNode;if(Ext.isNumber(e)){if(this.reserveScrollOffset||s.offsetWidth-s.clientWidth>10){n.style.width=i;r.style.width=i}else{n.style.width=e+"px";r.style.width=e+"px";setTimeout(function(){if(s.offsetWidth-s.clientWidth>10){n.style.width=i;r.style.width=i}},10)}}if(Ext.isNumber(t)){s.style.height=Math.max(0,t-r.parentNode.offsetHeight)+"px"}},updateIndexes:function(){Ext.list.ListView.superclass.updateIndexes.apply(this,arguments);this.verifyInternalSize()},findHeaderIndex:function(e){e=e.dom||e;var t=e.parentNode,n=t.parentNode.childNodes,r=0,i;for(;i=n[r];r++){if(i==t){return r}}return-1},setHdWidths:function(){var e=this.innerHd.dom.getElementsByTagName("div"),t=0,n=this.columns,r=n.length;for(;t<r;t++){e[t].style.width=n[t].width*100+"%"}}});Ext.reg("listview",Ext.list.ListView);Ext.ListView=Ext.list.ListView;Ext.list.Column=Ext.extend(Object,{isColumn:true,align:"left",header:"",width:null,cls:"",constructor:function(e){if(!e.tpl){e.tpl=new Ext.XTemplate("{"+e.dataIndex+"}")}else if(Ext.isString(e.tpl)){e.tpl=new Ext.XTemplate(e.tpl)}Ext.apply(this,e)}});Ext.reg("lvcolumn",Ext.list.Column);Ext.list.NumberColumn=Ext.extend(Ext.list.Column,{format:"0,000.00",constructor:function(e){e.tpl=e.tpl||new Ext.XTemplate("{"+e.dataIndex+':number("'+(e.format||this.format)+'")}');Ext.list.NumberColumn.superclass.constructor.call(this,e)}});Ext.reg("lvnumbercolumn",Ext.list.NumberColumn);Ext.list.DateColumn=Ext.extend(Ext.list.Column,{format:"m/d/Y",constructor:function(e){e.tpl=e.tpl||new Ext.XTemplate("{"+e.dataIndex+':date("'+(e.format||this.format)+'")}');Ext.list.DateColumn.superclass.constructor.call(this,e)}});Ext.reg("lvdatecolumn",Ext.list.DateColumn);Ext.list.BooleanColumn=Ext.extend(Ext.list.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(e){e.tpl=e.tpl||new Ext.XTemplate("{"+e.dataIndex+":this.format}");var t=this.trueText,n=this.falseText,r=this.undefinedText;e.tpl.format=function(e){if(e===undefined){return r}if(!e||e==="false"){return n}return t};Ext.list.DateColumn.superclass.constructor.call(this,e)}});Ext.reg("lvbooleancolumn",Ext.list.BooleanColumn);Ext.list.ColumnResizer=Ext.extend(Ext.util.Observable,{minPct:.05,constructor:function(e){Ext.apply(this,e);Ext.list.ColumnResizer.superclass.constructor.call(this)},init:function(e){this.view=e;e.on("render",this.initEvents,this)},initEvents:function(e){e.mon(e.innerHd,"mousemove",this.handleHdMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(e.innerHd);e.on("beforedestroy",this.tracker.destroy,this.tracker)},handleHdMove:function(e,t){var n=5,r=e.getPageX(),i=e.getTarget("em",3,true);if(i){var s=i.getRegion(),o=i.dom.style,u=i.dom.parentNode;if(r-s.left<=n&&u!=u.parentNode.firstChild){this.activeHd=Ext.get(u.previousSibling.firstChild);o.cursor=Ext.isWebKit?"e-resize":"col-resize"}else if(s.right-r<=n&&u!=u.parentNode.lastChild.previousSibling){this.activeHd=i;o.cursor=Ext.isWebKit?"w-resize":"col-resize"}else{delete this.activeHd;o.cursor=""}}},onBeforeStart:function(e){this.dragHd=this.activeHd;return!!this.dragHd},onStart:function(e){var t=this,n=t.view,r=t.dragHd,i=t.tracker.getXY()[0];t.proxy=n.el.createChild({cls:"x-list-resizer"});t.dragX=r.getX();t.headerIndex=n.findHeaderIndex(r);t.headersDisabled=n.disableHeaders;n.disableHeaders=true;t.proxy.setHeight(n.el.getHeight());t.proxy.setX(t.dragX);t.proxy.setWidth(i-t.dragX);this.setBoundaries()},setBoundaries:function(e){var t=this.view,n=this.headerIndex,r=t.innerHd.getWidth(),e=t.innerHd.getX(),i=Math.ceil(r*this.minPct),s=r-i,o=t.columns.length,u=t.innerHd.select("em",true),a=i+e,f=s+e,l;if(o==2){this.minX=a;this.maxX=f}else{l=u.item(n+2);this.minX=u.item(n).getX()+i;this.maxX=l?l.getX()-i:f;if(n==0){this.minX=a}else if(n==o-2){this.maxX=f}}},onDrag:function(e){var t=this,n=t.tracker.getXY()[0].constrain(t.minX,t.maxX);t.proxy.setWidth(n-this.dragX)},onEnd:function(e){var t=this.proxy.getWidth(),n=this.headerIndex,r=this.view,i=r.columns,s=r.innerHd.getWidth(),o=Math.ceil(t*r.maxColumnWidth/s)/100,u=this.headersDisabled,a=i[n],f=i[n+1],l=a.width+f.width;this.proxy.remove();a.width=o;f.width=l-o;delete this.dragHd;r.setHdWidths();r.refresh();setTimeout(function(){r.disableHeaders=u},100)}});Ext.ListView.ColumnResizer=Ext.list.ColumnResizer;Ext.list.Sorter=Ext.extend(Ext.util.Observable,{sortClasses:["sort-asc","sort-desc"],constructor:function(e){Ext.apply(this,e);Ext.list.Sorter.superclass.constructor.call(this)},init:function(e){this.view=e;e.on("render",this.initEvents,this)},initEvents:function(e){e.mon(e.innerHd,"click",this.onHdClick,this);e.innerHd.setStyle("cursor","pointer");e.mon(e.store,"datachanged",this.updateSortState,this);this.updateSortState.defer(10,this,[e.store])},updateSortState:function(e){var t=e.getSortState();if(!t){return}this.sortState=t;var n=this.view.columns,r=-1;for(var i=0,s=n.length;i<s;i++){if(n[i].dataIndex==t.field){r=i;break}}if(r!=-1){var o=t.direction;this.updateSortIcon(r,o)}},updateSortIcon:function(e,t){var n=this.sortClasses;var r=this.view.innerHd.select("em").removeClass(n);r.item(e).addClass(n[t=="DESC"?1:0])},onHdClick:function(e){var t=e.getTarget("em",3);if(t&&!this.view.disableHeaders){var n=this.view.findHeaderIndex(t);this.view.store.sort(this.view.columns[n].dataIndex)}}});Ext.ListView.Sorter=Ext.list.Sorter;Ext.TabPanel=Ext.extend(Ext.Panel,{deferredRender:true,tabWidth:120,minTabWidth:30,resizeTabs:false,enableTabScroll:false,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:.35,animScroll:true,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:false,autoTabSelector:"div.x-tab",activeTab:undefined,tabMargin:2,plain:false,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:false,frame:false,hideBorders:true,initComponent:function(){this.frame=false;Ext.TabPanel.superclass.initComponent.call(this);this.addEvents("beforetabchange","tabchange","contextmenu");this.setLayout(new Ext.layout.CardLayout(Ext.apply({layoutOnCardChange:this.layoutOnTabChange,deferredRender:this.deferredRender},this.layoutConfig)));if(this.tabPosition=="top"){this.elements+=",header";this.stripTarget="header"}else{this.elements+=",footer";this.stripTarget="footer"}if(!this.stack){this.stack=Ext.TabPanel.AccessStack()}this.initItems()},onRender:function(e,t){Ext.TabPanel.superclass.onRender.call(this,e,t);if(this.plain){var n=this.tabPosition=="top"?"header":"footer";this[n].addClass("x-tab-panel-"+n+"-plain")}var r=this[this.stripTarget];this.stripWrap=r.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});var i=this.tabPosition=="bottom"?this.stripWrap:null;r.createChild({cls:"x-tab-strip-spacer"},i);this.strip=new Ext.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge",cn:[{tag:"span",cls:"x-tab-strip-text",cn:"&#160;"}]});this.strip.createChild({cls:"x-clear"});this.body.addClass("x-tab-panel-body-"+this.tabPosition);if(!this.itemTpl){var s=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close"></a>','<a class="x-tab-right" href="#"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>");s.disableFormats=true;s.compile();Ext.TabPanel.prototype.itemTpl=s}this.items.each(this.initTab,this)},afterRender:function(){Ext.TabPanel.superclass.afterRender.call(this);if(this.autoTabs){this.readTabs(false)}if(this.activeTab!==undefined){var e=Ext.isObject(this.activeTab)?this.activeTab:this.items.get(this.activeTab);delete this.activeTab;this.setActiveTab(e)}},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this);this.mon(this.strip,{scope:this,mousedown:this.onStripMouseDown,contextmenu:this.onStripContextMenu});if(this.enableTabScroll){this.mon(this.strip,"mousewheel",this.onWheel,this)}},findTargets:function(e){var t=null,n=e.getTarget("li:not(.x-tab-edge)",this.strip);if(n){t=this.getComponent(n.id.split(this.idDelimiter)[1]);if(t.disabled){return{close:null,item:null,el:null}}}return{close:e.getTarget(".x-tab-strip-close",this.strip),item:t,el:n}},onStripMouseDown:function(e){if(e.button!==0){return}e.preventDefault();var t=this.findTargets(e);if(t.close){if(t.item.fireEvent("beforeclose",t.item)!==false){t.item.fireEvent("close",t.item);this.remove(t.item)}return}if(t.item&&t.item!=this.activeTab){this.setActiveTab(t.item)}},onStripContextMenu:function(e){e.preventDefault();var t=this.findTargets(e);if(t.item){this.fireEvent("contextmenu",this,t.item,e)}},readTabs:function(e){if(e===true){this.items.each(function(e){this.remove(e)},this)}var t=this.el.query(this.autoTabSelector);for(var n=0,r=t.length;n<r;n++){var i=t[n],s=i.getAttribute("title");i.removeAttribute("title");this.add({title:s,contentEl:i})}},initTab:function(e,t){var n=this.strip.dom.childNodes[t],r=this.getTemplateArgs(e),i=n?this.itemTpl.insertBefore(n,r):this.itemTpl.append(this.strip,r),s="x-tab-strip-over",o=Ext.get(i);o.hover(function(){if(!e.disabled){o.addClass(s)}},function(){o.removeClass(s)});if(e.tabTip){o.child("span.x-tab-strip-text",true).qtip=e.tabTip}e.tabEl=i;o.select("a").on("click",function(e){if(!e.getPageX()){this.onStripMouseDown(e)}},this,{preventDefault:true});e.on({scope:this,disable:this.onItemDisabled,enable:this.onItemEnabled,titlechange:this.onItemTitleChanged,iconchange:this.onItemIconChanged,beforeshow:this.onBeforeShowItem})},getTemplateArgs:function(e){var t=e.closable?"x-tab-strip-closable":"";if(e.disabled){t+=" x-item-disabled"}if(e.iconCls){t+=" x-tab-with-icon"}if(e.tabCls){t+=" "+e.tabCls}return{id:this.id+this.idDelimiter+e.getItemId(),text:e.title,cls:t,iconCls:e.iconCls||""}},onAdd:function(e){Ext.TabPanel.superclass.onAdd.call(this,e);if(this.rendered){var t=this.items;this.initTab(e,t.indexOf(e));this.delegateUpdates()}},onBeforeAdd:function(e){var t=e.events?this.items.containsKey(e.getItemId())?e:null:this.items.get(e);if(t){this.setActiveTab(e);return false}Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var n=e.elements;e.elements=n?n.replace(",header",""):n;e.border=e.border===true},onRemove:function(e){var t=Ext.get(e.tabEl);if(t){t.select("a").removeAllListeners();Ext.destroy(t)}Ext.TabPanel.superclass.onRemove.call(this,e);this.stack.remove(e);delete e.tabEl;e.un("disable",this.onItemDisabled,this);e.un("enable",this.onItemEnabled,this);e.un("titlechange",this.onItemTitleChanged,this);e.un("iconchange",this.onItemIconChanged,this);e.un("beforeshow",this.onBeforeShowItem,this);if(e==this.activeTab){var n=this.stack.next();if(n){this.setActiveTab(n)}else if(this.items.getCount()>0){this.setActiveTab(0)}else{this.setActiveTab(null)}}if(!this.destroying){this.delegateUpdates()}},onBeforeShowItem:function(e){if(e!=this.activeTab){this.setActiveTab(e);return false}},onItemDisabled:function(e){var t=this.getTabEl(e);if(t){Ext.fly(t).addClass("x-item-disabled")}this.stack.remove(e)},onItemEnabled:function(e){var t=this.getTabEl(e);if(t){Ext.fly(t).removeClass("x-item-disabled")}},onItemTitleChanged:function(e){var t=this.getTabEl(e);if(t){Ext.fly(t).child("span.x-tab-strip-text",true).innerHTML=e.title;this.delegateUpdates()}},onItemIconChanged:function(e,t,n){var r=this.getTabEl(e);if(r){r=Ext.get(r);r.child("span.x-tab-strip-text").replaceClass(n,t);r[Ext.isEmpty(t)?"removeClass":"addClass"]("x-tab-with-icon");this.delegateUpdates()}},getTabEl:function(e){var t=this.getComponent(e);return t?t.tabEl:null},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments);this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=true},endUpdate:function(){this.suspendUpdates=false;this.delegateUpdates()},hideTabStripItem:function(e){e=this.getComponent(e);var t=this.getTabEl(e);if(t){t.style.display="none";this.delegateUpdates()}this.stack.remove(e)},unhideTabStripItem:function(e){e=this.getComponent(e);var t=this.getTabEl(e);if(t){t.style.display="";this.delegateUpdates()}},delegateUpdates:function(){var e=this.rendered;if(this.suspendUpdates){return}if(this.resizeTabs&&e){this.autoSizeTabs()}if(this.enableTabScroll&&e){this.autoScrollTabs()}},autoSizeTabs:function(){var e=this.items.length,t=this.tabPosition!="bottom"?"header":"footer",n=this[t].dom.offsetWidth,r=this[t].dom.clientWidth;if(!this.resizeTabs||e<1||!r){return}var i=Math.max(Math.min(Math.floor((r-4)/e)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=i;var s=this.strip.query("li:not(.x-tab-edge)");for(var o=0,u=s.length;o<u;o++){var a=s[o],f=Ext.fly(a).child(".x-tab-strip-inner",true),l=a.offsetWidth,c=f.offsetWidth;f.style.width=i-(l-c)+"px"}},adjustBodyWidth:function(e){if(this.header){this.header.setWidth(e)}if(this.footer){this.footer.setWidth(e)}return e},setActiveTab:function(e){e=this.getComponent(e);if(this.fireEvent("beforetabchange",this,e,this.activeTab)===false){return}if(!this.rendered){this.activeTab=e;return}if(this.activeTab!=e){if(this.activeTab){var t=this.getTabEl(this.activeTab);if(t){Ext.fly(t).removeClass("x-tab-strip-active")}}this.activeTab=e;if(e){var n=this.getTabEl(e);Ext.fly(n).addClass("x-tab-strip-active");this.stack.add(e);this.layout.setActiveItem(e);this.delegateUpdates();if(this.scrolling){this.scrollToTab(e,this.animScroll)}}this.fireEvent("tabchange",this,e)}},getActiveTab:function(){return this.activeTab||null},getItem:function(e){return this.getComponent(e)},autoScrollTabs:function(){this.pos=this.tabPosition=="bottom"?this.footer:this.header;var e=this.items.length,t=this.pos.dom.offsetWidth,n=this.pos.dom.clientWidth,r=this.stripWrap,i=r.dom,s=i.offsetWidth,o=this.getScrollPos(),u=this.edge.getOffsetsTo(this.stripWrap)[0]+o;if(!this.enableTabScroll||s<20){return}if(e==0||u<=n){i.scrollLeft=0;r.setWidth(n);if(this.scrolling){this.scrolling=false;this.pos.removeClass("x-tab-scrolling");this.scrollLeft.hide();this.scrollRight.hide();if(Ext.isAir||Ext.isWebKit){i.style.marginLeft="";i.style.marginRight=""}}}else{if(!this.scrolling){this.pos.addClass("x-tab-scrolling");if(Ext.isAir||Ext.isWebKit){i.style.marginLeft="18px";i.style.marginRight="18px"}}n-=r.getMargins("lr");r.setWidth(n>20?n:20);if(!this.scrolling){if(!this.scrollLeft){this.createScrollers()}else{this.scrollLeft.show();this.scrollRight.show()}}this.scrolling=true;if(o>u-n){i.scrollLeft=u-n}else{this.scrollToTab(this.activeTab,false)}this.updateScrollButtons()}},createScrollers:function(){this.pos.addClass("x-tab-scrolling-"+this.tabPosition);var e=this.stripWrap.dom.offsetHeight;var t=this.pos.insertFirst({cls:"x-tab-scroller-left"});t.setHeight(e);t.addClassOnOver("x-tab-scroller-left-over");this.leftRepeater=new Ext.util.ClickRepeater(t,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this});this.scrollLeft=t;var n=this.pos.insertFirst({cls:"x-tab-scroller-right"});n.setHeight(e);n.addClassOnOver("x-tab-scroller-right-over");this.rightRepeater=new Ext.util.ClickRepeater(n,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this});this.scrollRight=n},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(e,t){if(!e){return}var n=this.getTabEl(e),r=this.getScrollPos(),i=this.getScrollArea(),s=Ext.fly(n).getOffsetsTo(this.stripWrap)[0]+r,o=s+n.offsetWidth;if(s<r){this.scrollTo(s,t)}else if(o>r+i){this.scrollTo(o-i,t)}},scrollTo:function(e,t){this.stripWrap.scrollTo("left",e,t?this.getScrollAnim():false);if(!t){this.updateScrollButtons()}},onWheel:function(e){var t=e.getWheelDelta()*this.wheelIncrement*-1;e.stopEvent();var n=this.getScrollPos(),r=n+t,i=this.getScrollWidth()-this.getScrollArea();var s=Math.max(0,Math.min(i,r));if(s!=n){this.scrollTo(s,false)}},onScrollRight:function(){var e=this.getScrollWidth()-this.getScrollArea(),t=this.getScrollPos(),n=Math.min(e,t+this.getScrollIncrement());if(n!=t){this.scrollTo(n,this.animScroll)}},onScrollLeft:function(){var e=this.getScrollPos(),t=Math.max(0,e-this.getScrollIncrement());if(t!=e){this.scrollTo(t,this.animScroll)}},updateScrollButtons:function(){var e=this.getScrollPos();this.scrollLeft[e===0?"addClass":"removeClass"]("x-tab-scroller-left-disabled");this.scrollRight[e>=this.getScrollWidth()-this.getScrollArea()?"addClass":"removeClass"]("x-tab-scroller-right-disabled")},beforeDestroy:function(){Ext.destroy(this.leftRepeater,this.rightRepeater);this.deleteMembers("strip","edge","scrollLeft","scrollRight","stripWrap");this.activeTab=null;Ext.TabPanel.superclass.beforeDestroy.apply(this)}});Ext.reg("tabpanel",Ext.TabPanel);Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab;Ext.TabPanel.AccessStack=function(){var e=[];return{add:function(t){e.push(t);if(e.length>10){e.shift()}},remove:function(t){var n=[];for(var r=0,i=e.length;r<i;r++){if(e[r]!=t){n.push(e[r])}}e=n},next:function(){return e.pop()}}};Ext.Button=Ext.extend(Ext.BoxComponent,{hidden:false,disabled:false,pressed:false,enableToggle:false,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr:nth(2)",clickEvent:"click",handleMouseEvents:true,tooltipType:"qtip",buttonSelector:"button:first-child",scale:"small",iconAlign:"left",arrowAlign:"right",initComponent:function(){if(this.menu){if(Ext.isArray(this.menu)){this.menu={items:this.menu}}if(Ext.isObject(this.menu)){this.menu.ownerCt=this}this.menu=Ext.menu.MenuMgr.get(this.menu);this.menu.ownerCt=undefined}Ext.Button.superclass.initComponent.call(this);this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");if(Ext.isString(this.toggleGroup)){this.enableToggle=true}},getTemplateArgs:function(){return[this.type,"x-btn-"+this.scale+" x-btn-icon-"+this.scale+"-"+this.iconAlign,this.getMenuClass(),this.cls,this.id]},setButtonClass:function(){if(this.useSetClass){if(!Ext.isEmpty(this.oldCls)){this.el.removeClass([this.oldCls,"x-btn-pressed"])}this.oldCls=this.iconCls||this.icon?this.text?"x-btn-text-icon":"x-btn-icon":"x-btn-noicon";this.el.addClass([this.oldCls,this.pressed?"x-btn-pressed":null])}},getMenuClass:function(){return this.menu?this.arrowAlign!="bottom"?"x-btn-arrow":"x-btn-arrow-bottom":""},onRender:function(e,t){if(!this.template){if(!Ext.Button.buttonTemplate){Ext.Button.buttonTemplate=new Ext.Template('<table id="{4}" cellspacing="0" class="x-btn {3}"><tbody class="{1}">','<tr><td class="x-btn-tl"><i>&#160;</i></td><td class="x-btn-tc"></td><td class="x-btn-tr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-ml"><i>&#160;</i></td><td class="x-btn-mc"><em class="{2} x-unselectable" unselectable="on"><button type="{0}"></button></em></td><td class="x-btn-mr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-bl"><i>&#160;</i></td><td class="x-btn-bc"></td><td class="x-btn-br"><i>&#160;</i></td></tr>',"</tbody></table>");Ext.Button.buttonTemplate.compile()}this.template=Ext.Button.buttonTemplate}var n,r=this.getTemplateArgs();if(t){n=this.template.insertBefore(t,r,true)}else{n=this.template.append(e,r,true)}this.btnEl=n.child(this.buttonSelector);this.mon(this.btnEl,{scope:this,focus:this.onFocus,blur:this.onBlur});this.initButtonEl(n,this.btnEl);Ext.ButtonToggleMgr.register(this)},initButtonEl:function(e,t){this.el=e;this.setIcon(this.icon);this.setText(this.text);this.setIconClass(this.iconCls);if(Ext.isDefined(this.tabIndex)){t.dom.tabIndex=this.tabIndex}if(this.tooltip){this.setTooltip(this.tooltip,true)}if(this.handleMouseEvents){this.mon(e,{scope:this,mouseover:this.onMouseOver,mousedown:this.onMouseDown})}if(this.menu){this.mon(this.menu,{scope:this,show:this.onMenuShow,hide:this.onMenuHide})}if(this.repeat){var n=new Ext.util.ClickRepeater(e,Ext.isObject(this.repeat)?this.repeat:{});this.mon(n,"click",this.onRepeatClick,this)}else{this.mon(e,this.clickEvent,this.onClick,this)}},afterRender:function(){Ext.Button.superclass.afterRender.call(this);this.useSetClass=true;this.setButtonClass();this.doc=Ext.getDoc();this.doAutoWidth()},setIconClass:function(e){this.iconCls=e;if(this.el){this.btnEl.dom.className="";this.btnEl.addClass(["x-btn-text",e||""]);this.setButtonClass()}return this},setTooltip:function(e,t){if(this.rendered){if(!t){this.clearTip()}if(Ext.isObject(e)){Ext.QuickTips.register(Ext.apply({target:this.btnEl.id},e));this.tooltip=e}else{this.btnEl.dom[this.tooltipType]=e}}else{this.tooltip=e}return this},clearTip:function(){if(Ext.isObject(this.tooltip)){Ext.QuickTips.unregister(this.btnEl)}},beforeDestroy:function(){if(this.rendered){this.clearTip()}if(this.menu&&this.destroyMenu!==false){Ext.destroy(this.btnEl,this.menu)}Ext.destroy(this.repeater)},onDestroy:function(){if(this.rendered){this.doc.un("mouseover",this.monitorMouseOver,this);this.doc.un("mouseup",this.onMouseUp,this);delete this.doc;delete this.btnEl;Ext.ButtonToggleMgr.unregister(this)}Ext.Button.superclass.onDestroy.call(this)},doAutoWidth:function(){if(this.autoWidth!==false&&this.el&&this.text&&this.width===undefined){this.el.setWidth("auto");if(Ext.isIE7&&Ext.isStrict){var e=this.btnEl;if(e&&e.getWidth()>20){e.clip();e.setWidth(Ext.util.TextMetrics.measure(e,this.text).width+e.getFrameWidth("lr"))}}if(this.minWidth){if(this.el.getWidth()<this.minWidth){this.el.setWidth(this.minWidth)}}}},setHandler:function(e,t){this.handler=e;this.scope=t;return this},setText:function(e){this.text=e;if(this.el){this.btnEl.update(e||"&#160;");this.setButtonClass()}this.doAutoWidth();return this},setIcon:function(e){this.icon=e;if(this.el){this.btnEl.setStyle("background-image",e?"url("+e+")":"");this.setButtonClass()}return this},getText:function(){return this.text},toggle:function(e,t){e=e===undefined?!this.pressed:!!e;if(e!=this.pressed){if(this.rendered){this.el[e?"addClass":"removeClass"]("x-btn-pressed")}this.pressed=e;if(!t){this.fireEvent("toggle",this,e);if(this.toggleHandler){this.toggleHandler.call(this.scope||this,this,e)}}}return this},onDisable:function(){this.onDisableChange(true)},onEnable:function(){this.onDisableChange(false)},onDisableChange:function(e){if(this.el){if(!Ext.isIE6||!this.text){this.el[e?"addClass":"removeClass"](this.disabledClass)}this.el.dom.disabled=e}this.disabled=e},showMenu:function(){if(this.rendered&&this.menu){if(this.tooltip){Ext.QuickTips.getQuickTip().cancelShow(this.btnEl)}if(this.menu.isVisible()){this.menu.hide()}this.menu.ownerCt=this;this.menu.show(this.el,this.menuAlign)}return this},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){return this.menu&&this.menu.ownerCt==this&&this.menu.isVisible()},onRepeatClick:function(e,t){this.onClick(t)},onClick:function(e){if(e){e.preventDefault()}if(e.button!==0){return}if(!this.disabled){this.doToggle();if(this.menu&&!this.hasVisibleMenu()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent("click",this,e);if(this.handler){this.handler.call(this.scope||this,this,e)}}},doToggle:function(){if(this.enableToggle&&(this.allowDepress!==false||!this.pressed)){this.toggle()}},isMenuTriggerOver:function(e,t){return this.menu&&!t},isMenuTriggerOut:function(e,t){return this.menu&&!t},onMouseOver:function(e){if(!this.disabled){var t=e.within(this.el,true);if(!t){this.el.addClass("x-btn-over");if(!this.monitoringMouseOver){this.doc.on("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=true}this.fireEvent("mouseover",this,e)}if(this.isMenuTriggerOver(e,t)){this.fireEvent("menutriggerover",this,this.menu,e)}}},monitorMouseOver:function(e){if(e.target!=this.el.dom&&!e.within(this.el)){if(this.monitoringMouseOver){this.doc.un("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=false}this.onMouseOut(e)}},onMouseOut:function(e){var t=e.within(this.el)&&e.target!=this.el.dom;this.el.removeClass("x-btn-over");this.fireEvent("mouseout",this,e);if(this.isMenuTriggerOut(e,t)){this.fireEvent("menutriggerout",this,this.menu,e)}},focus:function(){this.btnEl.focus()},blur:function(){this.btnEl.blur()},onFocus:function(e){if(!this.disabled){this.el.addClass("x-btn-focus")}},onBlur:function(e){this.el.removeClass("x-btn-focus")},getClickEl:function(e,t){return this.el},onMouseDown:function(e){if(!this.disabled&&e.button===0){this.getClickEl(e).addClass("x-btn-click");this.doc.on("mouseup",this.onMouseUp,this)}},onMouseUp:function(e){if(e.button===0){this.getClickEl(e,true).removeClass("x-btn-click");this.doc.un("mouseup",this.onMouseUp,this)}},onMenuShow:function(e){if(this.menu.ownerCt==this){this.menu.ownerCt=this;this.ignoreNextClick=0;this.el.addClass("x-btn-menu-active");this.fireEvent("menushow",this,this.menu)}},onMenuHide:function(e){if(this.menu.ownerCt==this){this.el.removeClass("x-btn-menu-active");this.ignoreNextClick=this.restoreClick.defer(250,this);this.fireEvent("menuhide",this,this.menu);delete this.menu.ownerCt}},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg("button",Ext.Button);Ext.ButtonToggleMgr=function(){function t(t,n){if(n){var r=e[t.toggleGroup];for(var i=0,s=r.length;i<s;i++){if(r[i]!=t){r[i].toggle(false)}}}}var e={};return{register:function(n){if(!n.toggleGroup){return}var r=e[n.toggleGroup];if(!r){r=e[n.toggleGroup]=[]}r.push(n);n.on("toggle",t)},unregister:function(n){if(!n.toggleGroup){return}var r=e[n.toggleGroup];if(r){r.remove(n);n.un("toggle",t)}},getPressed:function(t){var n=e[t];if(n){for(var r=0,i=n.length;r<i;r++){if(n[r].pressed===true){return n[r]}}}return null}}}();Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"em",split:true,initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this);this.addEvents("arrowclick")},onRender:function(){Ext.SplitButton.superclass.onRender.apply(this,arguments);if(this.arrowTooltip){this.el.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip}},setArrowHandler:function(e,t){this.arrowHandler=e;this.scope=t},getMenuClass:function(){return"x-btn-split"+(this.arrowAlign=="bottom"?"-bottom":"")},isClickOnArrow:function(e){if(this.arrowAlign!="bottom"){var t=this.el.child("em.x-btn-split");var n=t.getRegion().right-t.getPadding("r");return e.getPageX()>n}else{return e.getPageY()>this.btnEl.getRegion().bottom}},onClick:function(e,t){e.preventDefault();if(!this.disabled){if(this.isClickOnArrow(e)){if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent("arrowclick",this,e);if(this.arrowHandler){this.arrowHandler.call(this.scope||this,this,e)}}else{this.doToggle();this.fireEvent("click",this,e);if(this.handler){this.handler.call(this.scope||this,this,e)}}}},isMenuTriggerOver:function(e){return this.menu&&e.target.tagName==this.arrowSelector},isMenuTriggerOut:function(e,t){return this.menu&&e.target.tagName!=this.arrowSelector}});Ext.reg("splitbutton",Ext.SplitButton);Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(e){if(e&&this.showText===true){var t="";if(this.prependText){t+=this.prependText}t+=e.text;return t}return undefined},setActiveItem:function(e,t){if(!Ext.isObject(e)){e=this.menu.getComponent(e)}if(e){if(!this.rendered){this.text=this.getItemText(e);this.iconCls=e.iconCls}else{var n=this.getItemText(e);if(n){this.setText(n)}this.setIconClass(e.iconCls)}this.activeItem=e;if(!e.checked){e.setChecked(true,t)}if(this.forceIcon){this.setIconClass(this.forceIcon)}if(!t){this.fireEvent("change",this,e)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents("change");if(this.changeHandler){this.on("change",this.changeHandler,this.scope||this);delete this.changeHandler}this.itemCount=this.items.length;this.menu={cls:"x-cycle-menu",items:[]};var e=0;Ext.each(this.items,function(t,n){Ext.apply(t,{group:t.group||this.id,itemIndex:n,checkHandler:this.checkHandler,scope:this,checked:t.checked||false});this.menu.items.push(t);if(t.checked){e=n}},this);Ext.CycleButton.superclass.initComponent.call(this);this.on("click",this.toggleSelected,this);this.setActiveItem(e,true)},checkHandler:function(e,t){if(t){this.setActiveItem(e)}},toggleSelected:function(){var e=this.menu;e.render();if(!e.hasLayout){e.doLayout()}var t,n;for(var r=1;r<this.itemCount;r++){t=(this.activeItem.itemIndex+r)%this.itemCount;n=e.items.itemAt(t);if(!n.disabled){n.setChecked(true);break}}}});Ext.reg("cycle",Ext.CycleButton);Ext.Toolbar=function(e){if(Ext.isArray(e)){e={items:e,layout:"toolbar"}}else{e=Ext.apply({layout:"toolbar"},e);if(e.buttons){e.items=e.buttons}}Ext.Toolbar.superclass.constructor.call(this,e)};(function(){var e=Ext.Toolbar;Ext.extend(e,Ext.Container,{defaultType:"button",enableOverflow:false,trackMenus:true,internalDefaults:{removeMode:"container",hideParent:true},toolbarCls:"x-toolbar",initComponent:function(){e.superclass.initComponent.call(this);this.addEvents("overflowchange")},onRender:function(e,t){if(!this.el){if(!this.autoCreate){this.autoCreate={cls:this.toolbarCls+" x-small-editor"}}this.el=e.createChild(Ext.apply({id:this.id},this.autoCreate),t);Ext.Toolbar.superclass.onRender.apply(this,arguments)}},lookupComponent:function(t){if(Ext.isString(t)){if(t=="-"){t=new e.Separator}else if(t==" "){t=new e.Spacer}else if(t=="->"){t=new e.Fill}else{t=new e.TextItem(t)}this.applyDefaults(t)}else{if(t.isFormField||t.render){t=this.createComponent(t)}else if(t.tag){t=new e.Item({autoEl:t})}else if(t.tagName){t=new e.Item({el:t})}else if(Ext.isObject(t)){t=t.xtype?this.createComponent(t):this.constructButton(t)}}return t},applyDefaults:function(e){if(!Ext.isString(e)){e=Ext.Toolbar.superclass.applyDefaults.call(this,e);var t=this.internalDefaults;if(e.events){Ext.applyIf(e.initialConfig,t);Ext.apply(e,t)}else{Ext.applyIf(e,t)}}return e},addSeparator:function(){return this.add(new e.Separator)},addSpacer:function(){return this.add(new e.Spacer)},addFill:function(){this.add(new e.Fill)},addElement:function(t){return this.addItem(new e.Item({el:t}))},addItem:function(e){return this.add.apply(this,arguments)},addButton:function(e){if(Ext.isArray(e)){var t=[];for(var n=0,r=e.length;n<r;n++){t.push(this.addButton(e[n]))}return t}return this.add(this.constructButton(e))},addText:function(t){return this.addItem(new e.TextItem(t))},addDom:function(t){return this.add(new e.Item({autoEl:t}))},addField:function(e){return this.add(e)},insertButton:function(e,t){if(Ext.isArray(t)){var n=[];for(var r=0,i=t.length;r<i;r++){n.push(this.insertButton(e+r,t[r]))}return n}return Ext.Toolbar.superclass.insert.call(this,e,t)},trackMenu:function(e,t){if(this.trackMenus&&e.menu){var n=t?"mun":"mon";this[n](e,"menutriggerover",this.onButtonTriggerOver,this);this[n](e,"menushow",this.onButtonMenuShow,this);this[n](e,"menuhide",this.onButtonMenuHide,this)}},constructButton:function(e){var t=e.events?e:this.createComponent(e,e.split?"splitbutton":this.defaultType);return t},onAdd:function(e){Ext.Toolbar.superclass.onAdd.call(this);this.trackMenu(e);if(this.disabled){e.disable()}},onRemove:function(e){Ext.Toolbar.superclass.onRemove.call(this);if(e==this.activeMenuBtn){delete this.activeMenuBtn}this.trackMenu(e,true)},onDisable:function(){this.items.each(function(e){if(e.disable){e.disable()}})},onEnable:function(){this.items.each(function(e){if(e.enable){e.enable()}})},onButtonTriggerOver:function(e){if(this.activeMenuBtn&&this.activeMenuBtn!=e){this.activeMenuBtn.hideMenu();e.showMenu();this.activeMenuBtn=e}},onButtonMenuShow:function(e){this.activeMenuBtn=e},onButtonMenuHide:function(e){delete this.activeMenuBtn}});Ext.reg("toolbar",Ext.Toolbar);e.Item=Ext.extend(Ext.BoxComponent,{hideParent:true,enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbitem",e.Item);e.Separator=Ext.extend(e.Item,{onRender:function(e,t){this.el=e.createChild({tag:"span",cls:"xtb-sep"},t)}});Ext.reg("tbseparator",e.Separator);e.Spacer=Ext.extend(e.Item,{onRender:function(e,t){this.el=e.createChild({tag:"div",cls:"xtb-spacer",style:this.width?"width:"+this.width+"px":""},t)}});Ext.reg("tbspacer",e.Spacer);e.Fill=Ext.extend(e.Item,{render:Ext.emptyFn,isFill:true});Ext.reg("tbfill",e.Fill);e.TextItem=Ext.extend(e.Item,{constructor:function(t){e.TextItem.superclass.constructor.call(this,Ext.isString(t)?{text:t}:t)},onRender:function(t,n){this.autoEl={cls:"xtb-text",html:this.text||""};e.TextItem.superclass.onRender.call(this,t,n)},setText:function(e){if(this.rendered){this.el.update(e)}else{this.text=e}}});Ext.reg("tbtext",e.TextItem);e.Button=Ext.extend(Ext.Button,{});e.SplitButton=Ext.extend(Ext.SplitButton,{});Ext.reg("tbbutton",e.Button);Ext.reg("tbsplit",e.SplitButton)})();Ext.ButtonGroup=Ext.extend(Ext.Panel,{baseCls:"x-btn-group",layout:"table",defaultType:"button",frame:true,internalDefaults:{removeMode:"container",hideParent:true},initComponent:function(){this.layoutConfig=this.layoutConfig||{};Ext.applyIf(this.layoutConfig,{columns:this.columns});if(!this.title){this.addClass("x-btn-group-notitle")}this.on("afterlayout",this.onAfterLayout,this);Ext.ButtonGroup.superclass.initComponent.call(this)},applyDefaults:function(e){e=Ext.ButtonGroup.superclass.applyDefaults.call(this,e);var t=this.internalDefaults;if(e.events){Ext.applyIf(e.initialConfig,t);Ext.apply(e,t)}else{Ext.applyIf(e,t)}return e},onAfterLayout:function(){var e=this.body.getFrameWidth("lr")+this.body.dom.firstChild.offsetWidth;this.body.setWidth(e);this.el.setWidth(e+this.getFrameWidth())}});Ext.reg("buttongroup",Ext.ButtonGroup);(function(){var e=Ext.Toolbar;Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",initComponent:function(){var t=[this.first=new e.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:this.moveFirst,scope:this}),this.prev=new e.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:this.movePrevious,scope:this}),"-",this.beforePageText,this.inputItem=new Ext.form.NumberField({cls:"x-tbar-page-number",allowDecimals:false,allowNegative:false,enableKeyEvents:true,selectOnFocus:true,submitValue:false,listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}}),this.afterTextItem=new e.TextItem({text:String.format(this.afterPageText,1)}),"-",this.next=new e.Button({tooltip:this.nextText,overflowText:this.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:this.moveNext,scope:this}),this.last=new e.Button({tooltip:this.lastText,overflowText:this.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:this.moveLast,scope:this}),"-",this.refresh=new e.Button({tooltip:this.refreshText,overflowText:this.refreshText,iconCls:"x-tbar-loading",handler:this.doRefresh,scope:this})];var n=this.items||this.buttons||[];if(this.prependButtons){this.items=n.concat(t)}else{this.items=t.concat(n)}delete this.buttons;if(this.displayInfo){this.items.push("->");this.items.push(this.displayItem=new e.TextItem({}))}Ext.PagingToolbar.superclass.initComponent.call(this);this.addEvents("change","beforechange");this.on("afterlayout",this.onFirstLayout,this,{single:true});this.cursor=0;this.bindStore(this.store,true)},onFirstLayout:function(){if(this.dsLoaded){this.onLoad.apply(this,this.dsLoaded)}},updateInfo:function(){if(this.displayItem){var e=this.store.getCount();var t=e==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+e,this.store.getTotalCount());this.displayItem.setText(t)}},onLoad:function(e,t,n){if(!this.rendered){this.dsLoaded=[e,t,n];return}var r=this.getParams();this.cursor=n.params&&n.params[r.start]?n.params[r.start]:0;var i=this.getPageData(),s=i.activePage,o=i.pages;this.afterTextItem.setText(String.format(this.afterPageText,i.pages));this.inputItem.setValue(s);this.first.setDisabled(s==1);this.prev.setDisabled(s==1);this.next.setDisabled(s==o);this.last.setDisabled(s==o);this.refresh.enable();this.updateInfo();this.fireEvent("change",this,i)},getPageData:function(){var e=this.store.getTotalCount();return{total:e,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:e<this.pageSize?1:Math.ceil(e/this.pageSize)}},changePage:function(e){this.doLoad(((e-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onLoadError:function(){if(!this.rendered){return}this.refresh.enable()},readPage:function(e){var t=this.inputItem.getValue(),n;if(!t||isNaN(n=parseInt(t,10))){this.inputItem.setValue(e.activePage);return false}return n},onPagingFocus:function(){this.inputItem.select()},onPagingBlur:function(e){this.inputItem.setValue(this.getPageData().activePage)},onPagingKeyDown:function(e,t){var n=t.getKey(),r=this.getPageData(),i;if(n==t.RETURN){t.stopEvent();i=this.readPage(r);if(i!==false){i=Math.min(Math.max(1,i),r.pages)-1;this.doLoad(i*this.pageSize)}}else if(n==t.HOME||n==t.END){t.stopEvent();i=n==t.HOME?1:r.pages;e.setValue(i)}else if(n==t.UP||n==t.PAGEUP||n==t.DOWN||n==t.PAGEDOWN){t.stopEvent();if(i=this.readPage(r)){var s=t.shiftKey?10:1;if(n==t.DOWN||n==t.PAGEDOWN){s*=-1}i+=s;if(i>=1&i<=r.pages){e.setValue(i)}}}},getParams:function(){return this.paramNames||this.store.paramNames},beforeLoad:function(){if(this.rendered&&this.refresh){this.refresh.disable()}},doLoad:function(e){var t={},n=this.getParams();t[n.start]=e;t[n.limit]=this.pageSize;if(this.fireEvent("beforechange",this,t)!==false){this.store.load({params:t})}},moveFirst:function(){this.doLoad(0)},movePrevious:function(){this.doLoad(Math.max(0,this.cursor-this.pageSize))},moveNext:function(){this.doLoad(this.cursor+this.pageSize)},moveLast:function(){var e=this.store.getTotalCount(),t=e%this.pageSize;this.doLoad(t?e-t:e-this.pageSize)},doRefresh:function(){this.doLoad(this.cursor)},bindStore:function(e,t){var n;if(!t&&this.store){if(e!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.beforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.onLoadError,this)}if(!e){this.store=null}}if(e){e=Ext.StoreMgr.lookup(e);e.on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError});n=true}this.store=e;if(n){this.onLoad(e,null,{})}},unbind:function(e){this.bindStore(null)},bind:function(e){this.bindStore(e)},onDestroy:function(){this.bindStore(null);Ext.PagingToolbar.superclass.onDestroy.call(this)}})})();Ext.reg("paging",Ext.PagingToolbar);Ext.History=function(){function i(){var e=location.href,t=e.indexOf("#"),n=t>=0?e.substr(t+1):null;if(Ext.isGecko){n=decodeURIComponent(n)}return n}function s(){t.value=r}function o(e){r=e;Ext.History.fireEvent("change",e)}function u(t){var n=['<html><body><div id="state">',Ext.util.Format.htmlEncode(t),"</div></body></html>"].join("");try{var r=e.contentWindow.document;r.open();r.write(n);r.close();return true}catch(i){return false}}function a(){if(!e.contentWindow||!e.contentWindow.document){setTimeout(a,10);return}var t=e.contentWindow.document;var r=t.getElementById("state");var f=r?r.innerText:null;var l=i();setInterval(function(){t=e.contentWindow.document;r=t.getElementById("state");var n=r?r.innerText:null;var a=i();if(n!==f){f=n;o(f);location.hash=f;l=f;s()}else if(a!==l){l=a;u(a)}},50);n=true;Ext.History.fireEvent("ready",Ext.History)}function f(){r=t.value?t.value:i();if(Ext.isIE){a()}else{var e=i();setInterval(function(){var t=i();if(t!==e){e=t;o(e);s()}},50);n=true;Ext.History.fireEvent("ready",Ext.History)}}var e,t;var n=false;var r;return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(r,i){if(n){Ext.callback(r,i,[this]);return}if(!Ext.isReady){Ext.onReady(function(){Ext.History.init(r,i)});return}t=Ext.getDom(Ext.History.fieldId);if(Ext.isIE){e=Ext.getDom(Ext.History.iframeId)}this.addEvents("ready","change");if(r){this.on("ready",r,i,{single:true})}f()},add:function(e,t){if(t!==false){if(this.getToken()==e){return true}}if(Ext.isIE){return u(e)}else{location.hash=e;return true}},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return n?r:i()}}}();Ext.apply(Ext.History,new Ext.util.Observable);Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:true,quickShowInterval:250,frame:true,hidden:true,baseCls:"x-tip",floating:{shadow:true,shim:true,useDisplay:true,constrain:false},autoHeight:true,closeAction:"hide",initComponent:function(){Ext.Tip.superclass.initComponent.call(this);if(this.closable&&!this.title){this.elements+=",header"}},afterRender:function(){Ext.Tip.superclass.afterRender.call(this);if(this.closable){this.addTool({id:"close",handler:this[this.closeAction],scope:this})}},showAt:function(e){Ext.Tip.superclass.show.call(this);if(this.measureWidth!==false&&(!this.initialConfig||typeof this.initialConfig.width!="number")){this.doAutoWidth()}if(this.constrainPosition){e=this.el.adjustForConstraints(e)}this.setPagePosition(e[0],e[1])},doAutoWidth:function(e){e=e||0;var t=this.body.getTextWidth();if(this.title){t=Math.max(t,this.header.child("span").getTextWidth(this.title))}t+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr")+e;this.setWidth(t.constrain(this.minWidth,this.maxWidth));if(Ext.isIE7&&!this.repainted){this.el.repaint();this.repainted=true}},showBy:function(e,t){if(!this.rendered){this.render(Ext.getBody())}this.showAt(this.el.getAlignToXY(e,t||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,typeof this.draggable=="boolean"?null:this.draggable);this.header.addClass("x-tip-draggable")}});Ext.reg("tip",Ext.Tip);Ext.Tip.DD=function(e,t){Ext.apply(this,t);this.tip=e;Ext.Tip.DD.superclass.constructor.call(this,e.el.id,"WindowDD-"+e.id);this.setHandleElId(e.header.id);this.scroll=false};Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:true,scroll:false,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(e){this.tip.el.enableShadow(true)}});Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5e3,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,constrainPosition:false,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this);this.lastActive=new Date;this.initTarget(this.target);this.origAnchor=this.anchor},onRender:function(e,t){Ext.ToolTip.superclass.onRender.call(this,e,t);this.anchorCls="x-tip-anchor-"+this.getAnchorPosition();this.anchorEl=this.el.createChild({cls:"x-tip-anchor "+this.anchorCls})},afterRender:function(){Ext.ToolTip.superclass.afterRender.call(this);this.anchorEl.setStyle("z-index",this.el.getZIndex()+1).setVisibilityMode(Ext.Element.DISPLAY)},initTarget:function(e){var t;if(t=Ext.get(e)){if(this.target){var n=Ext.get(this.target);this.mun(n,"mouseover",this.onTargetOver,this);this.mun(n,"mouseout",this.onTargetOut,this);this.mun(n,"mousemove",this.onMouseMove,this)}this.mon(t,{mouseover:this.onTargetOver,mouseout:this.onTargetOut,mousemove:this.onMouseMove,scope:this});this.target=t}if(this.anchor){this.anchorTarget=this.target}},onMouseMove:function(e){var t=this.delegate?e.getTarget(this.delegate):this.triggerElement=true;if(t){this.targetXY=e.getXY();if(t===this.triggerElement){if(!this.hidden&&this.trackMouse){this.setPagePosition(this.getTargetXY())}}else{this.hide();this.lastActive=new Date(0);this.onTargetOver(e)}}else if(!this.closable&&this.isVisible()){this.hide()}},getTargetXY:function(){if(this.delegate){this.anchorTarget=this.triggerElement}if(this.anchor){this.targetCounter++;var e=this.getOffsets(),t=this.anchorToTarget&&!this.trackMouse?this.el.getAlignToXY(this.anchorTarget,this.getAnchorAlign()):this.targetXY,n=Ext.lib.Dom.getViewWidth()-5,r=Ext.lib.Dom.getViewHeight()-5,i=document.documentElement,s=document.body,o=(i.scrollLeft||s.scrollLeft||0)+5,u=(i.scrollTop||s.scrollTop||0)+5,a=[t[0]+e[0],t[1]+e[1]],f=this.getSize();this.anchorEl.removeClass(this.anchorCls);if(this.targetCounter<2){if(a[0]<o){if(this.anchorToTarget){this.defaultAlign="l-r";if(this.mouseOffset){this.mouseOffset[0]*=-1}}this.anchor="left";return this.getTargetXY()}if(a[0]+f.width>n){if(this.anchorToTarget){this.defaultAlign="r-l";if(this.mouseOffset){this.mouseOffset[0]*=-1}}this.anchor="right";return this.getTargetXY()}if(a[1]<u){if(this.anchorToTarget){this.defaultAlign="t-b";if(this.mouseOffset){this.mouseOffset[1]*=-1}}this.anchor="top";return this.getTargetXY()}if(a[1]+f.height>r){if(this.anchorToTarget){this.defaultAlign="b-t";if(this.mouseOffset){this.mouseOffset[1]*=-1}}this.anchor="bottom";return this.getTargetXY()}}this.anchorCls="x-tip-anchor-"+this.getAnchorPosition();this.anchorEl.addClass(this.anchorCls);this.targetCounter=0;return a}else{var l=this.getMouseOffset();return[this.targetXY[0]+l[0],this.targetXY[1]+l[1]]}},getMouseOffset:function(){var e=this.anchor?[0,0]:[15,18];if(this.mouseOffset){e[0]+=this.mouseOffset[0];e[1]+=this.mouseOffset[1]}return e},getAnchorPosition:function(){if(this.anchor){this.tipAnchor=this.anchor.charAt(0)}else{var e=this.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!e){throw"AnchorTip.defaultAlign is invalid"}this.tipAnchor=e[1].charAt(0)}switch(this.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var e,t=this.getAnchorPosition().charAt(0);if(this.anchorToTarget&&!this.trackMouse){switch(t){case"t":e=[0,9];break;case"b":e=[0,-13];break;case"r":e=[-13,0];break;default:e=[9,0];break}}else{switch(t){case"t":e=[-15-this.anchorOffset,30];break;case"b":e=[-19-this.anchorOffset,-13-this.el.dom.offsetHeight];break;case"r":e=[-15-this.el.dom.offsetWidth,-13-this.anchorOffset];break;default:e=[25,-13-this.anchorOffset];break}}var n=this.getMouseOffset();e[0]+=n[0];e[1]+=n[1];return e},onTargetOver:function(e){if(this.disabled||e.within(this.target.dom,true)){return}var t=e.getTarget(this.delegate);if(t){this.triggerElement=t;this.clearTimer("hide");this.targetXY=e.getXY();this.delayShow()}},delayShow:function(){if(this.hidden&&!this.showTimer){if(this.lastActive.getElapsed()<this.quickShowInterval){this.show()}else{this.showTimer=this.show.defer(this.showDelay,this)}}else if(!this.hidden&&this.autoHide!==false){this.show()}},onTargetOut:function(e){if(this.disabled||e.within(this.target.dom,true)){return}this.clearTimer("show");if(this.autoHide!==false){this.delayHide()}},delayHide:function(){if(!this.hidden&&!this.hideTimer){this.hideTimer=this.hide.defer(this.hideDelay,this)}},hide:function(){this.clearTimer("dismiss");this.lastActive=new Date;if(this.anchorEl){this.anchorEl.hide()}Ext.ToolTip.superclass.hide.call(this);delete this.triggerElement},show:function(){if(this.anchor){this.showAt([-1e3,-1e3]);this.origConstrainPosition=this.constrainPosition;this.constrainPosition=false;this.anchor=this.origAnchor}this.showAt(this.getTargetXY());if(this.anchor){this.anchorEl.show();this.syncAnchor();this.constrainPosition=this.origConstrainPosition}else{this.anchorEl.hide()}},showAt:function(e){this.lastActive=new Date;this.clearTimers();Ext.ToolTip.superclass.showAt.call(this,e);if(this.dismissDelay&&this.autoHide!==false){this.dismissTimer=this.hide.defer(this.dismissDelay,this)}if(this.anchor&&!this.anchorEl.isVisible()){this.syncAnchor();this.anchorEl.show()}else{this.anchorEl.hide()}},syncAnchor:function(){var e,t,n;switch(this.tipAnchor.charAt(0)){case"t":e="b";t="tl";n=[20+this.anchorOffset,2];break;case"r":e="l";t="tr";n=[-2,11+this.anchorOffset];break;case"b":e="t";t="bl";n=[20+this.anchorOffset,-2];break;default:e="r";t="tl";n=[2,11+this.anchorOffset];break}this.anchorEl.alignTo(this.el,e+"-"+t,n)},setPagePosition:function(e,t){Ext.ToolTip.superclass.setPagePosition.call(this,e,t);if(this.anchor){this.syncAnchor()}},clearTimer:function(e){e=e+"Timer";clearTimeout(this[e]);delete this[e]},clearTimers:function(){this.clearTimer("show");this.clearTimer("dismiss");this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this);Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this);Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(e){if(this.autoHide!==true&&!this.closable&&!e.within(this.el.dom)){this.disable();this.doEnable.defer(100,this)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){this.clearTimers();this.hide()},adjustPosition:function(e,t){if(this.constrainPosition){var n=this.targetXY[1],r=this.getSize().height;if(t<=n&&t+r>=n){t=n-r-5}}return{x:e,y:t}},beforeDestroy:function(){this.clearTimers();Ext.destroy(this.anchorEl);delete this.anchorEl;delete this.target;delete this.anchorTarget;delete this.triggerElement;Ext.ToolTip.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);Ext.ToolTip.superclass.onDestroy.call(this)}});Ext.reg("tooltip",Ext.ToolTip);Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:false,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){this.target=this.target||Ext.getDoc();this.targets=this.targets||{};Ext.QuickTip.superclass.initComponent.call(this)},register:function(e){var t=Ext.isArray(e)?e:arguments;for(var n=0,r=t.length;n<r;n++){var i=t[n];var s=i.target;if(s){if(Ext.isArray(s)){for(var o=0,u=s.length;o<u;o++){this.targets[Ext.id(s[o])]=i}}else{this.targets[Ext.id(s)]=i}}}},unregister:function(e){delete this.targets[Ext.id(e)]},cancelShow:function(e){var t=this.activeTarget;e=Ext.get(e).dom;if(this.isVisible()){if(t&&t.el==e){this.hide()}}else if(t&&t.el==e){this.clearTimer("show")}},getTipCfg:function(e){var t=e.getTarget(),n,r;if(this.interceptTitles&&t.title&&Ext.isString(t.title)){n=t.title;t.qtip=n;t.removeAttribute("title");e.preventDefault()}else{r=this.tagConfig;n=t.qtip||Ext.fly(t).getAttribute(r.attribute,r.namespace)}return n},onTargetOver:function(e){if(this.disabled){return}this.targetXY=e.getXY();var t=e.getTarget();if(!t||t.nodeType!==1||t==document||t==document.body){return}if(this.activeTarget&&(t==this.activeTarget.el||Ext.fly(this.activeTarget.el).contains(t))){this.clearTimer("hide");this.show();return}if(t&&this.targets[t.id]){this.activeTarget=this.targets[t.id];this.activeTarget.el=t;this.anchor=this.activeTarget.anchor;if(this.anchor){this.anchorTarget=t}this.delayShow();return}var n,r=Ext.fly(t),i=this.tagConfig,s=i.namespace;if(n=this.getTipCfg(e)){var o=r.getAttribute(i.hide,s);this.activeTarget={el:t,text:n,width:r.getAttribute(i.width,s),autoHide:o!="user"&&o!=="false",title:r.getAttribute(i.title,s),cls:r.getAttribute(i.cls,s),align:r.getAttribute(i.align,s)};this.anchor=r.getAttribute(i.anchor,s);if(this.anchor){this.anchorTarget=t}this.delayShow()}},onTargetOut:function(e){if(this.activeTarget&&e.within(this.activeTarget.el)&&!this.getTipCfg(e)){return}this.clearTimer("show");if(this.autoHide!==false){this.delayHide()}},showAt:function(e){var t=this.activeTarget;if(t){if(!this.rendered){this.render(Ext.getBody());this.activeTarget=t}if(t.width){this.setWidth(t.width);this.body.setWidth(this.adjustBodyWidth(t.width-this.getFrameWidth()));this.measureWidth=false}else{this.measureWidth=true}this.setTitle(t.title||"");this.body.update(t.text);this.autoHide=t.autoHide;this.dismissDelay=t.dismissDelay||this.dismissDelay;if(this.lastCls){this.el.removeClass(this.lastCls);delete this.lastCls}if(t.cls){this.el.addClass(t.cls);this.lastCls=t.cls}if(this.anchor){this.constrainPosition=false}else if(t.align){e=this.el.getAlignToXY(t.el,t.align);this.constrainPosition=false}else{this.constrainPosition=true}}Ext.QuickTip.superclass.showAt.call(this,e)},hide:function(){delete this.activeTarget;Ext.QuickTip.superclass.hide.call(this)}});Ext.reg("quicktip",Ext.QuickTip);Ext.QuickTips=function(){var e,t=false;return{init:function(n){if(!e){if(!Ext.isReady){Ext.onReady(function(){Ext.QuickTips.init(n)});return}e=new Ext.QuickTip({elements:"header,body",disabled:t});if(n!==false){e.render(Ext.getBody())}}},ddDisable:function(){if(e&&!t){e.disable()}},ddEnable:function(){if(e&&!t){e.enable()}},enable:function(){if(e){e.enable()}t=false},disable:function(){if(e){e.disable()}t=true},isEnabled:function(){return e!==undefined&&!e.disabled},getQuickTip:function(){return e},register:function(){e.register.apply(e,arguments)},unregister:function(){e.unregister.apply(e,arguments)},tips:function(){e.register.apply(e,arguments)}}}();Ext.slider.Tip=Ext.extend(Ext.Tip,{minWidth:10,offsets:[0,-10],init:function(e){e.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(e,t,n){this.show();this.body.update(this.getText(n));this.doAutoWidth();this.el.alignTo(n.el,"b-t?",this.offsets)},getText:function(e){return String(e.value)}});Ext.ux.SliderTip=Ext.slider.Tip;Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:true,animate:Ext.enableFx,lines:true,enableDD:false,hlDrop:Ext.enableFx,pathSeparator:"/",bubbleEvents:[],initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this);if(!this.eventModel){this.eventModel=new Ext.tree.TreeEventModel(this)}var e=this.loader;if(!e){e=new Ext.tree.TreeLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod})}else if(Ext.isObject(e)&&!e.load){e=new Ext.tree.TreeLoader(e)}this.loader=e;this.nodeHash={};if(this.root){var t=this.root;delete this.root;this.setRootNode(t)}this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","containerclick","checkchange","beforedblclick","dblclick","containerdblclick","contextmenu","containercontextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover");if(this.singleExpand){this.on("beforeexpandnode",this.restrictExpand,this)}},proxyNodeEvent:function(e,t,n,r,i,s,o){if(e=="collapse"||e=="expand"||e=="beforecollapse"||e=="beforeexpand"||e=="move"||e=="beforemove"){e=e+"node"}return this.fireEvent(e,t,n,r,i,s,o)},getRootNode:function(){return this.root},setRootNode:function(e){this.destroyRoot();if(!e.render){e=this.loader.createNode(e)}this.root=e;e.ownerTree=this;e.isRoot=true;this.registerNode(e);if(!this.rootVisible){var t=e.attributes.uiProvider;e.ui=t?new t(e):new Ext.tree.RootTreeNodeUI(e)}if(this.innerCt){this.clearInnerCt();this.renderRoot()}return e},clearInnerCt:function(){this.innerCt.update("")},renderRoot:function(){this.root.render();if(!this.rootVisible){this.root.renderChildren()}},getNodeById:function(e){return this.nodeHash[e]},registerNode:function(e){this.nodeHash[e.id]=e},unregisterNode:function(e){delete this.nodeHash[e.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(e){var t=e.parentNode;if(t){if(t.expandedChild&&t.expandedChild.parentNode==t){t.expandedChild.collapse()}t.expandedChild=e}},getChecked:function(e,t){t=t||this.root;var n=[];var r=function(){if(this.attributes.checked){n.push(!e?this:e=="id"?this.id:this.attributes[e])}};t.cascade(r);return n},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(true)},collapseAll:function(){this.root.collapse(true)},getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.tree.DefaultSelectionModel}return this.selModel},expandPath:function(e,t,n){if(Ext.isEmpty(e)){if(n){n(false,undefined)}return}t=t||"id";var r=e.split(this.pathSeparator);var i=this.root;if(i.attributes[t]!=r[1]){if(n){n(false,null)}return}var s=1;var o=function(){if(++s==r.length){if(n){n(true,i)}return}var e=i.findChild(t,r[s]);if(!e){if(n){n(false,i)}return}i=e;e.expand(false,false,o)};i.expand(false,false,o)},selectPath:function(e,t,n){if(Ext.isEmpty(e)){if(n){n(false,undefined)}return}t=t||"id";var r=e.split(this.pathSeparator),i=r.pop();if(r.length>1){var s=function(e,r){if(e&&r){var s=r.findChild(t,i);if(s){s.select();if(n){n(true,s)}}else if(n){n(false,s)}}else{if(n){n(false,s)}}};this.expandPath(r.join(this.pathSeparator),t,s)}else{this.root.select();if(n){n(true,this.root)}}},getTreeEl:function(){return this.body},onRender:function(e,t){Ext.tree.TreePanel.superclass.onRender.call(this,e,t);this.el.addClass("x-tree");this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this);if(this.containerScroll){Ext.dd.ScrollManager.register(this.body)}if((this.enableDD||this.enableDrop)&&!this.dropZone){this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===true})}if((this.enableDD||this.enableDrag)&&!this.dragZone){this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll})}this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this);this.renderRoot()},beforeDestroy:function(){if(this.rendered){Ext.dd.ScrollManager.unregister(this.body);Ext.destroy(this.dropZone,this.dragZone)}this.destroyRoot();Ext.destroy(this.loader);this.nodeHash=this.root=this.loader=null;Ext.tree.TreePanel.superclass.beforeDestroy.call(this)},destroyRoot:function(){if(this.root&&this.root.destroy){this.root.destroy(true)}}});Ext.tree.TreePanel.nodeTypes={};Ext.reg("treepanel",Ext.tree.TreePanel);Ext.tree.TreeEventModel=function(e){this.tree=e;this.tree.on("render",this.initEvents,this)};Ext.tree.TreeEventModel.prototype={initEvents:function(){var e=this.tree;if(e.trackMouseOver!==false){e.mon(e.innerCt,{scope:this,mouseover:this.delegateOver,mouseout:this.delegateOut})}e.mon(e.getTreeEl(),{scope:this,click:this.delegateClick,dblclick:this.delegateDblClick,contextmenu:this.delegateContextMenu})},getNode:function(e){var t;if(t=e.getTarget(".x-tree-node-el",10)){var n=Ext.fly(t,"_treeEvents").getAttribute("tree-node-id","ext");if(n){return this.tree.getNodeById(n)}}return null},getNodeTarget:function(e){var t=e.getTarget(".x-tree-node-icon",1);if(!t){t=e.getTarget(".x-tree-node-el",6)}return t},delegateOut:function(e,t){if(!this.beforeEvent(e)){return}if(e.getTarget(".x-tree-ec-icon",1)){var n=this.getNode(e);this.onIconOut(e,n);if(n==this.lastEcOver){delete this.lastEcOver}}if((t=this.getNodeTarget(e))&&!e.within(t,true)){this.onNodeOut(e,this.getNode(e))}},delegateOver:function(e,t){if(!this.beforeEvent(e)){return}if(Ext.isGecko&&!this.trackingDoc){Ext.getBody().on("mouseover",this.trackExit,this);this.trackingDoc=true}if(this.lastEcOver){this.onIconOut(e,this.lastEcOver);delete this.lastEcOver}if(e.getTarget(".x-tree-ec-icon",1)){this.lastEcOver=this.getNode(e);this.onIconOver(e,this.lastEcOver)}if(t=this.getNodeTarget(e)){this.onNodeOver(e,this.getNode(e))}},trackExit:function(e){if(this.lastOverNode){if(this.lastOverNode.ui&&!e.within(this.lastOverNode.ui.getEl())){this.onNodeOut(e,this.lastOverNode)}delete this.lastOverNode;Ext.getBody().un("mouseover",this.trackExit,this);this.trackingDoc=false}},delegateClick:function(e,t){if(this.beforeEvent(e)){if(e.getTarget("input[type=checkbox]",1)){this.onCheckboxClick(e,this.getNode(e))}else if(e.getTarget(".x-tree-ec-icon",1)){this.onIconClick(e,this.getNode(e))}else if(this.getNodeTarget(e)){this.onNodeClick(e,this.getNode(e))}}else{this.checkContainerEvent(e,"click")}},delegateDblClick:function(e,t){if(this.beforeEvent(e)){if(this.getNodeTarget(e)){this.onNodeDblClick(e,this.getNode(e))}}else{this.checkContainerEvent(e,"dblclick")}},delegateContextMenu:function(e,t){if(this.beforeEvent(e)){if(this.getNodeTarget(e)){this.onNodeContextMenu(e,this.getNode(e))}}else{this.checkContainerEvent(e,"contextmenu")}},checkContainerEvent:function(e,t){if(this.disabled){e.stopEvent();return false}this.onContainerEvent(e,t)},onContainerEvent:function(e,t){this.tree.fireEvent("container"+t,this.tree,e)},onNodeClick:function(e,t){t.ui.onClick(e)},onNodeOver:function(e,t){this.lastOverNode=t;t.ui.onOver(e)},onNodeOut:function(e,t){t.ui.onOut(e)},onIconOver:function(e,t){t.ui.addClass("x-tree-ec-over")},onIconOut:function(e,t){t.ui.removeClass("x-tree-ec-over")},onIconClick:function(e,t){t.ui.ecClick(e)},onCheckboxClick:function(e,t){t.ui.onCheckChange(e)},onNodeDblClick:function(e,t){t.ui.onDblClick(e)},onNodeContextMenu:function(e,t){t.ui.onContextMenu(e)},beforeEvent:function(e){var t=this.getNode(e);if(this.disabled||!t||!t.ui){e.stopEvent();return false}return true},disable:function(){this.disabled=true},enable:function(){this.disabled=false}};Ext.tree.DefaultSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(e){this.selNode=null;this.addEvents("selectionchange","beforeselect");Ext.apply(this,e);Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)},init:function(e){this.tree=e;e.mon(e.getTreeEl(),"keydown",this.onKeyDown,this);e.on("click",this.onNodeClick,this)},onNodeClick:function(e,t){this.select(e)},select:function(e,t){if(!Ext.fly(e.ui.wrap).isVisible()&&t){return t.call(this,e)}var n=this.selNode;if(e==n){e.ui.onSelectedChange(true)}else if(this.fireEvent("beforeselect",this,e,n)!==false){if(n&&n.ui){n.ui.onSelectedChange(false)}this.selNode=e;e.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,e,n)}return e},unselect:function(e,t){if(this.selNode==e){this.clearSelections(t)}},clearSelections:function(e){var t=this.selNode;if(t){t.ui.onSelectedChange(false);this.selNode=null;if(e!==true){this.fireEvent("selectionchange",this,null)}}return t},getSelectedNode:function(){return this.selNode},isSelected:function(e){return this.selNode==e},selectPrevious:function(e){if(!(e=e||this.selNode||this.lastSelNode)){return null}var t=e.previousSibling;if(t){if(!t.isExpanded()||t.childNodes.length<1){return this.select(t,this.selectPrevious)}else{var n=t.lastChild;while(n&&n.isExpanded()&&Ext.fly(n.ui.wrap).isVisible()&&n.childNodes.length>0){n=n.lastChild}return this.select(n,this.selectPrevious)}}else if(e.parentNode&&(this.tree.rootVisible||!e.parentNode.isRoot)){return this.select(e.parentNode,this.selectPrevious)}return null},selectNext:function(e){if(!(e=e||this.selNode||this.lastSelNode)){return null}if(e.firstChild&&e.isExpanded()&&Ext.fly(e.ui.wrap).isVisible()){return this.select(e.firstChild,this.selectNext)}else if(e.nextSibling){return this.select(e.nextSibling,this.selectNext)}else if(e.parentNode){var t=null;e.parentNode.bubble(function(){if(this.nextSibling){t=this.getOwnerTree().selModel.select(this.nextSibling,this.selectNext);return false}});return t}return null},onKeyDown:function(e){var t=this.selNode||this.lastSelNode;var n=this;if(!t){return}var r=e.getKey();switch(r){case e.DOWN:e.stopEvent();this.selectNext();break;case e.UP:e.stopEvent();this.selectPrevious();break;case e.RIGHT:e.preventDefault();if(t.hasChildNodes()){if(!t.isExpanded()){t.expand()}else if(t.firstChild){this.select(t.firstChild,e)}}break;case e.LEFT:e.preventDefault();if(t.hasChildNodes()&&t.isExpanded()){t.collapse()}else if(t.parentNode&&(this.tree.rootVisible||t.parentNode!=this.tree.getRootNode())){this.select(t.parentNode,e)}break}}});Ext.tree.MultiSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(e){this.selNodes=[];this.selMap={};this.addEvents("selectionchange");Ext.apply(this,e);Ext.tree.MultiSelectionModel.superclass.constructor.call(this)},init:function(e){this.tree=e;e.mon(e.getTreeEl(),"keydown",this.onKeyDown,this);e.on("click",this.onNodeClick,this)},onNodeClick:function(e,t){if(t.ctrlKey&&this.isSelected(e)){this.unselect(e)}else{this.select(e,t,t.ctrlKey)}},select:function(e,t,n){if(n!==true){this.clearSelections(true)}if(this.isSelected(e)){this.lastSelNode=e;return e}this.selNodes.push(e);this.selMap[e.id]=e;this.lastSelNode=e;e.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,this.selNodes);return e},unselect:function(e){if(this.selMap[e.id]){e.ui.onSelectedChange(false);var t=this.selNodes;var n=t.indexOf(e);if(n!=-1){this.selNodes.splice(n,1)}delete this.selMap[e.id];this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(e){var t=this.selNodes;if(t.length>0){for(var n=0,r=t.length;n<r;n++){t[n].ui.onSelectedChange(false)}this.selNodes=[];this.selMap={};if(e!==true){this.fireEvent("selectionchange",this,this.selNodes)}}},isSelected:function(e){return this.selMap[e.id]?true:false},getSelectedNodes:function(){return this.selNodes.concat([])},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious});Ext.data.Tree=Ext.extend(Ext.util.Observable,{constructor:function(e){this.nodeHash={};this.root=null;if(e){this.setRootNode(e)}this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert");Ext.data.Tree.superclass.constructor.call(this)},pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(e){this.root=e;e.ownerTree=this;e.isRoot=true;this.registerNode(e);return e},getNodeById:function(e){return this.nodeHash[e]},registerNode:function(e){this.nodeHash[e.id]=e},unregisterNode:function(e){delete this.nodeHash[e.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}});Ext.data.Node=Ext.extend(Ext.util.Observable,{constructor:function(e){this.attributes=e||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;if(!this.id){this.id=Ext.id(null,"xnode-");this.attributes.id=this.id}this.childNodes=[];this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({append:true,remove:true,move:true,insert:true,beforeappend:true,beforeremove:true,beforemove:true,beforeinsert:true});this.listeners=this.attributes.listeners;Ext.data.Node.superclass.constructor.call(this)},fireEvent:function(e){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===false){return false}var t=this.getOwnerTree();if(t){if(t.proxyNodeEvent.apply(t,arguments)===false){return false}}return true},isLeaf:function(){return this.leaf===true},setFirstChild:function(e){this.firstChild=e},setLastChild:function(e){this.lastChild=e},isLast:function(){return!this.parentNode?true:this.parentNode.lastChild==this},isFirst:function(){return!this.parentNode?true:this.parentNode.firstChild==this},hasChildNodes:function(){return!this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(e){var t=false;if(Ext.isArray(e)){t=e}else if(arguments.length>1){t=arguments}if(t){for(var n=0,r=t.length;n<r;n++){this.appendChild(t[n])}}else{if(this.fireEvent("beforeappend",this.ownerTree,this,e)===false){return false}var i=this.childNodes.length;var s=e.parentNode;if(s){if(e.fireEvent("beforemove",e.getOwnerTree(),e,s,this,i)===false){return false}s.removeChild(e)}i=this.childNodes.length;if(i===0){this.setFirstChild(e)}this.childNodes.push(e);e.parentNode=this;var o=this.childNodes[i-1];if(o){e.previousSibling=o;o.nextSibling=e}else{e.previousSibling=null}e.nextSibling=null;this.setLastChild(e);e.setOwnerTree(this.getOwnerTree());this.fireEvent("append",this.ownerTree,this,e,i);if(s){e.fireEvent("move",this.ownerTree,e,s,this,i)}return e}},removeChild:function(e,t){var n=this.childNodes.indexOf(e);if(n==-1){return false}if(this.fireEvent("beforeremove",this.ownerTree,this,e)===false){return false}this.childNodes.splice(n,1);if(e.previousSibling){e.previousSibling.nextSibling=e.nextSibling}if(e.nextSibling){e.nextSibling.previousSibling=e.previousSibling}if(this.firstChild==e){this.setFirstChild(e.nextSibling)}if(this.lastChild==e){this.setLastChild(e.previousSibling)}this.fireEvent("remove",this.ownerTree,this,e);if(t){e.destroy(true)}else{e.clear()}return e},clear:function(e){this.setOwnerTree(null,e);this.parentNode=this.previousSibling=this.nextSibling=null;if(e){this.firstChild=this.lastChild=null}},destroy:function(e){if(e===true){this.purgeListeners();this.clear(true);Ext.each(this.childNodes,function(e){e.destroy(true)});this.childNodes=null}else{this.remove(true)}},insertBefore:function(e,t){if(!t){return this.appendChild(e)}if(e==t){return false}if(this.fireEvent("beforeinsert",this.ownerTree,this,e,t)===false){return false}var n=this.childNodes.indexOf(t);var r=e.parentNode;var i=n;if(r==this&&this.childNodes.indexOf(e)<n){i--}if(r){if(e.fireEvent("beforemove",e.getOwnerTree(),e,r,this,n,t)===false){return false}r.removeChild(e)}if(i===0){this.setFirstChild(e)}this.childNodes.splice(i,0,e);e.parentNode=this;var s=this.childNodes[i-1];if(s){e.previousSibling=s;s.nextSibling=e}else{e.previousSibling=null}e.nextSibling=t;t.previousSibling=e;e.setOwnerTree(this.getOwnerTree());this.fireEvent("insert",this.ownerTree,this,e,t);if(r){e.fireEvent("move",this.ownerTree,e,r,this,i,t)}return e},remove:function(e){if(this.parentNode){this.parentNode.removeChild(this,e)}return this},removeAll:function(e){var t=this.childNodes,n;while(n=t[0]){this.removeChild(n,e)}return this},item:function(e){return this.childNodes[e]},replaceChild:function(e,t){var n=t?t.nextSibling:null;this.removeChild(t);this.insertBefore(e,n);return t},indexOf:function(e){return this.childNodes.indexOf(e)},getOwnerTree:function(){if(!this.ownerTree){var e=this;while(e){if(e.ownerTree){this.ownerTree=e.ownerTree;break}e=e.parentNode}}return this.ownerTree},getDepth:function(){var e=0;var t=this;while(t.parentNode){++e;t=t.parentNode}return e},setOwnerTree:function(e,t){if(e!=this.ownerTree){if(this.ownerTree){this.ownerTree.unregisterNode(this)}this.ownerTree=e;if(t!==true){Ext.each(this.childNodes,function(t){t.setOwnerTree(e)})}if(e){e.registerNode(this)}}},setId:function(e){if(e!==this.id){var t=this.ownerTree;if(t){t.unregisterNode(this)}this.id=this.attributes.id=e;if(t){t.registerNode(this)}this.onIdChange(e)}},onIdChange:Ext.emptyFn,getPath:function(e){e=e||"id";var t=this.parentNode;var n=[this.attributes[e]];while(t){n.unshift(t.attributes[e]);t=t.parentNode}var r=this.getOwnerTree().pathSeparator;return r+n.join(r)},bubble:function(e,t,n){var r=this;while(r){if(e.apply(t||r,n||[r])===false){break}r=r.parentNode}},cascade:function(e,t,n){if(e.apply(t||this,n||[this])!==false){var r=this.childNodes;for(var i=0,s=r.length;i<s;i++){r[i].cascade(e,t,n)}}},eachChild:function(e,t,n){var r=this.childNodes;for(var i=0,s=r.length;i<s;i++){if(e.apply(t||r[i],n||[r[i]])===false){break}}},findChild:function(e,t,n){return this.findChildBy(function(){return this.attributes[e]==t},null,n)},findChildBy:function(e,t,n){var r=this.childNodes,i=r.length,s=0,o,u;for(;s<i;s++){o=r[s];if(e.call(t||o,o)===true){return o}else if(n){u=o.findChildBy(e,t,n);if(u!=null){return u}}}return null},sort:function(e,t){var n=this.childNodes;var r=n.length;if(r>0){var i=t?function(){e.apply(t,arguments)}:e;n.sort(i);for(var s=0;s<r;s++){var o=n[s];o.previousSibling=n[s-1];o.nextSibling=n[s+1];if(s===0){this.setFirstChild(o)}if(s==r-1){this.setLastChild(o)}}}},contains:function(e){return e.isAncestor(this)},isAncestor:function(e){var t=this.parentNode;while(t){if(t==e){return true}t=t.parentNode}return false},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}});Ext.tree.TreeNode=Ext.extend(Ext.data.Node,{constructor:function(e){e=e||{};if(Ext.isString(e)){e={text:e}}this.childrenRendered=false;this.rendered=false;Ext.tree.TreeNode.superclass.constructor.call(this,e);this.expanded=e.expanded===true;this.isTarget=e.isTarget!==false;this.draggable=e.draggable!==false&&e.allowDrag!==false;this.allowChildren=e.allowChildren!==false&&e.allowDrop!==false;this.text=e.text;this.disabled=e.disabled===true;this.hidden=e.hidden===true;this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","beforedblclick","dblclick","contextmenu","beforechildrenrendered");var t=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new t(this)},preventHScroll:true,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var e;return this.loader||((e=this.getOwnerTree())&&e.loader?e.loader:this.loader=new Ext.tree.TreeLoader)},setFirstChild:function(e){var t=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,e);if(this.childrenRendered&&t&&e!=t){t.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},setLastChild:function(e){var t=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,e);if(this.childrenRendered&&t&&e!=t){t.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},appendChild:function(e){if(!e.render&&!Ext.isArray(e)){e=this.getLoader().createNode(e)}var t=Ext.tree.TreeNode.superclass.appendChild.call(this,e);if(t&&this.childrenRendered){t.render()}this.ui.updateExpandIcon();return t},removeChild:function(e,t){this.ownerTree.getSelectionModel().unselect(e);Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments);if(!t){var n=e.ui.rendered;if(n){e.ui.remove()}if(n&&this.childNodes.length<1){this.collapse(false,false)}else{this.ui.updateExpandIcon()}if(!this.firstChild&&!this.isHiddenRoot()){this.childrenRendered=false}}return e},insertBefore:function(e,t){if(!e.render){e=this.getLoader().createNode(e)}var n=Ext.tree.TreeNode.superclass.insertBefore.call(this,e,t);if(n&&t&&this.childrenRendered){e.render()}this.ui.updateExpandIcon();return n},setText:function(e){var t=this.text;this.text=this.attributes.text=e;if(this.rendered){this.ui.onTextChange(this,e,t)}this.fireEvent("textchange",this,e,t)},setIconCls:function(e){var t=this.attributes.iconCls;this.attributes.iconCls=e;if(this.rendered){this.ui.onIconClsChange(this,e,t)}},setTooltip:function(e,t){this.attributes.qtip=e;this.attributes.qtipTitle=t;if(this.rendered){this.ui.onTipChange(this,e,t)}},setIcon:function(e){this.attributes.icon=e;if(this.rendered){this.ui.onIconChange(this,e)}},setHref:function(e,t){this.attributes.href=e;this.attributes.hrefTarget=t;if(this.rendered){this.ui.onHrefChange(this,e,t)}},setCls:function(e){var t=this.attributes.cls;this.attributes.cls=e;if(this.rendered){this.ui.onClsChange(this,e,t)}},select:function(){var e=this.getOwnerTree();if(e){e.getSelectionModel().select(this)}},unselect:function(e){var t=this.getOwnerTree();if(t){t.getSelectionModel().unselect(this,e)}},isSelected:function(){var e=this.getOwnerTree();return e?e.getSelectionModel().isSelected(this):false},expand:function(e,t,n,r){if(!this.expanded){if(this.fireEvent("beforeexpand",this,e,t)===false){return}if(!this.childrenRendered){this.renderChildren()}this.expanded=true;if(!this.isHiddenRoot()&&this.getOwnerTree().animate&&t!==false||t){this.ui.animExpand(function(){this.fireEvent("expand",this);this.runCallback(n,r||this,[this]);if(e===true){this.expandChildNodes(true,true)}}.createDelegate(this));return}else{this.ui.expand();this.fireEvent("expand",this);this.runCallback(n,r||this,[this])}}else{this.runCallback(n,r||this,[this])}if(e===true){this.expandChildNodes(true)}},runCallback:function(e,t,n){if(Ext.isFunction(e)){e.apply(t,n)}},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(e,t,n,r){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,e,t)===false){return}this.expanded=false;if(this.getOwnerTree().animate&&t!==false||t){this.ui.animCollapse(function(){this.fireEvent("collapse",this);this.runCallback(n,r||this,[this]);if(e===true){this.collapseChildNodes(true)}}.createDelegate(this));return}else{this.ui.collapse();this.fireEvent("collapse",this);this.runCallback(n,r||this,[this])}}else if(!this.expanded){this.runCallback(n,r||this,[this])}if(e===true){var i=this.childNodes;for(var s=0,o=i.length;s<o;s++){i[s].collapse(true,false)}}},delayedExpand:function(e){if(!this.expandProcId){this.expandProcId=this.expand.defer(e,this)}},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId)}this.expandProcId=false},toggle:function(){if(this.expanded){this.collapse()}else{this.expand()}},ensureVisible:function(e,t){var n=this.getOwnerTree();n.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),false,function(){var r=n.getNodeById(this.id);n.getTreeEl().scrollChildIntoView(r.ui.anchor);this.runCallback(e,t||this,[this])}.createDelegate(this))},expandChildNodes:function(e,t){var n=this.childNodes,r,i=n.length;for(r=0;r<i;r++){n[r].expand(e,t)}},collapseChildNodes:function(e){var t=this.childNodes;for(var n=0,r=t.length;n<r;n++){t[n].collapse(e)}},disable:function(){this.disabled=true;this.unselect();if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,true)}this.fireEvent("disabledchange",this,true)},enable:function(){this.disabled=false;if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,false)}this.fireEvent("disabledchange",this,false)},renderChildren:function(e){if(e!==false){this.fireEvent("beforechildrenrendered",this)}var t=this.childNodes;for(var n=0,r=t.length;n<r;n++){t[n].render(true)}this.childrenRendered=true},sort:function(e,t){Ext.tree.TreeNode.superclass.sort.apply(this,arguments);if(this.childrenRendered){var n=this.childNodes;for(var r=0,i=n.length;r<i;r++){n[r].render(true)}}},render:function(e){this.ui.render(e);if(!this.rendered){this.getOwnerTree().registerNode(this);this.rendered=true;if(this.expanded){this.expanded=false;this.expand(false,false)}}},renderIndent:function(e,t){if(t){this.ui.childIndent=null}this.ui.renderIndent();if(e===true&&this.childrenRendered){var n=this.childNodes;for(var r=0,i=n.length;r<i;r++){n[r].renderIndent(true,t)}}},beginUpdate:function(){this.childrenRendered=false},endUpdate:function(){if(this.expanded&&this.rendered){this.renderChildren()}},destroy:function(e){if(e===true){this.unselect(true)}Ext.tree.TreeNode.superclass.destroy.call(this,e);Ext.destroy(this.ui,this.loader);this.ui=this.loader=null},onIdChange:function(e){this.ui.onIdChange(e)}});Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode;Ext.tree.AsyncTreeNode=function(e){this.loaded=e&&e.loaded===true;this.loading=false;Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments);this.addEvents("beforeload","load")};Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(e,t,n,r){if(this.loading){var i;var s=function(){if(!this.loading){clearInterval(i);this.expand(e,t,n,r)}}.createDelegate(this);i=setInterval(s,200);return}if(!this.loaded){if(this.fireEvent("beforeload",this)===false){return}this.loading=true;this.ui.beforeLoad(this);var o=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(o){o.load(this,this.loadComplete.createDelegate(this,[e,t,n,r]),this);return}}Ext.tree.AsyncTreeNode.superclass.expand.call(this,e,t,n,r)},isLoading:function(){return this.loading},loadComplete:function(e,t,n,r){this.loading=false;this.loaded=true;this.ui.afterLoad(this);this.fireEvent("load",this);this.expand(e,t,n,r)},isLoaded:function(){return this.loaded},hasChildNodes:function(){if(!this.isLeaf()&&!this.loaded){return true}else{return Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this)}},reload:function(e,t){this.collapse(false,false);while(this.firstChild){this.removeChild(this.firstChild).destroy()}this.childrenRendered=false;this.loaded=false;if(this.isHiddenRoot()){this.expanded=false}this.expand(false,false,e,t)}});Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode;Ext.tree.TreeNodeUI=Ext.extend(Object,{constructor:function(e){Ext.apply(this,{node:e,rendered:false,animating:false,wasLeaf:true,ecc:"x-tree-ec-icon x-tree-elbow",emptyIcon:Ext.BLANK_IMAGE_URL})},removeChild:function(e){if(this.rendered){this.ctNode.removeChild(e.ui.getEl())}},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(e,t,n){if(this.rendered){this.textNode.innerHTML=t}},onIconClsChange:function(e,t,n){if(this.rendered){Ext.fly(this.iconNode).replaceClass(n,t)}},onIconChange:function(e,t){if(this.rendered){var n=Ext.isEmpty(t);this.iconNode.src=n?this.emptyIcon:t;Ext.fly(this.iconNode)[n?"removeClass":"addClass"]("x-tree-node-inline-icon")}},onTipChange:function(e,t,n){if(this.rendered){var r=Ext.isDefined(n);if(this.textNode.setAttributeNS){this.textNode.setAttributeNS("ext","qtip",t);if(r){this.textNode.setAttributeNS("ext","qtitle",n)}}else{this.textNode.setAttribute("ext:qtip",t);if(r){this.textNode.setAttribute("ext:qtitle",n)}}}},onHrefChange:function(e,t,n){if(this.rendered){this.anchor.href=this.getHref(t);if(Ext.isDefined(n)){this.anchor.target=n}}},onClsChange:function(e,t,n){if(this.rendered){Ext.fly(this.elNode).replaceClass(n,t)}},onDisableChange:function(e,t){this.disabled=t;if(this.checkbox){this.checkbox.disabled=t}this[t?"addClass":"removeClass"]("x-tree-node-disabled")},onSelectedChange:function(e){if(e){this.focus();this.addClass("x-tree-selected")}else{this.removeClass("x-tree-selected")}},onMove:function(e,t,n,r,i,s){this.childIndent=null;if(this.rendered){var o=r.ui.getContainer();if(!o){this.holder=document.createElement("div");this.holder.appendChild(this.wrap);return}var u=s?s.ui.getEl():null;if(u){o.insertBefore(this.wrap,u)}else{o.appendChild(this.wrap)}this.node.renderIndent(true,n!=r)}},addClass:function(e){if(this.elNode){Ext.fly(this.elNode).addClass(e)}},removeClass:function(e){if(this.elNode){Ext.fly(this.elNode).removeClass(e)}},remove:function(){if(this.rendered){this.holder=document.createElement("div");this.holder.appendChild(this.wrap)}},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this);if(this.node.disabled){this.onDisableChange(this.node,true)}if(this.node.hidden){this.hide()}var e=this.node.getOwnerTree();var t=e.enableDD||e.enableDrag||e.enableDrop;if(t&&(!this.node.isRoot||e.rootVisible)){Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:false})}},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=true;if(this.wrap){this.wrap.style.display="none"}},show:function(){this.node.hidden=false;if(this.wrap){this.wrap.style.display=""}},onContextMenu:function(e){if(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu")){e.preventDefault();this.focus();this.fireEvent("contextmenu",this.node,e)}},onClick:function(e){if(this.dropping){e.stopEvent();return}if(this.fireEvent("beforeclick",this.node,e)!==false){var t=e.getTarget("a");if(!this.disabled&&this.node.attributes.href&&t){this.fireEvent("click",this.node,e);return}else if(t&&e.ctrlKey){e.stopEvent()}e.preventDefault();if(this.disabled){return}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("click",this.node,e)}else{e.stopEvent()}},onDblClick:function(e){e.preventDefault();if(this.disabled){return}if(this.fireEvent("beforedblclick",this.node,e)!==false){if(this.checkbox){this.toggleCheck()}if(!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("dblclick",this.node,e)}},onOver:function(e){this.addClass("x-tree-node-over")},onOut:function(e){this.removeClass("x-tree-node-over")},onCheckChange:function(){var e=this.checkbox.checked;this.checkbox.defaultChecked=e;this.node.attributes.checked=e;this.fireEvent("checkchange",this.node,e)},ecClick:function(e){if(!this.animating&&this.node.isExpandable()){this.node.toggle()}},startDrop:function(){this.dropping=true},endDrop:function(){setTimeout(function(){this.dropping=false}.createDelegate(this),50)},expand:function(){this.updateExpandIcon();this.ctNode.style.display=""},focus:function(){if(!this.node.preventHScroll){try{this.anchor.focus()}catch(e){}}else{try{var t=this.node.getOwnerTree().getTreeEl().dom;var n=t.scrollLeft;this.anchor.focus();t.scrollLeft=n}catch(e){}}},toggleCheck:function(e){var t=this.checkbox;if(t){t.checked=e===undefined?!t.checked:e;this.onCheckChange()}},blur:function(){try{this.anchor.blur()}catch(e){}},animExpand:function(e){var t=Ext.get(this.ctNode);t.stopFx();if(!this.node.isExpandable()){this.updateExpandIcon();this.ctNode.style.display="";Ext.callback(e);return}this.animating=true;this.updateExpandIcon();t.slideIn("t",{callback:function(){this.animating=false;Ext.callback(e)},scope:this,duration:this.node.ownerTree.duration||.25})},highlight:function(){var e=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(e.hlColor||"C3DAF9",{endColor:e.hlBaseColor})},collapse:function(){this.updateExpandIcon();this.ctNode.style.display="none"},animCollapse:function(e){var t=Ext.get(this.ctNode);t.enableDisplayMode("block");t.stopFx();this.animating=true;this.updateExpandIcon();t.slideOut("t",{callback:function(){this.animating=false;Ext.callback(e)},scope:this,duration:this.node.ownerTree.duration||.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(e){e.appendChild(this.elNode.cloneNode(true))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(e){var t=this.node,n=t.attributes;var r=t.parentNode?t.parentNode.ui.getContainer():t.ownerTree.innerCt.dom;if(!this.rendered){this.rendered=true;this.renderElements(t,n,r,e);if(n.qtip){this.onTipChange(t,n.qtip,n.qtipTitle)}else if(n.qtipCfg){n.qtipCfg.target=Ext.id(this.textNode);Ext.QuickTips.register(n.qtipCfg)}this.initEvents();if(!this.node.expanded){this.updateExpandIcon(true)}}else{if(e===true){r.appendChild(this.wrap)}}},renderElements:function(e,t,n,r){this.indentMarkup=e.parentNode?e.parentNode.ui.getChildIndent():"";var i=Ext.isBoolean(t.checked),s,o=this.getHref(t.href),u=['<li class="x-tree-node"><div ext:tree-node-id="',e.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',t.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img alt="" src="',t.icon||this.emptyIcon,'" class="x-tree-node-icon',t.icon?" x-tree-node-inline-icon":"",t.iconCls?" "+t.iconCls:"",'" unselectable="on" />',i?'<input class="x-tree-node-cb" type="checkbox" '+(t.checked?'checked="checked" />':"/>"):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',o,'" tabIndex="1" ',t.hrefTarget?' target="'+t.hrefTarget+'"':"",'><span unselectable="on">',e.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");if(r!==true&&e.nextSibling&&(s=e.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",s,u)}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",n,u)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var a=this.elNode.childNodes;this.indentNode=a[0];this.ecNode=a[1];this.iconNode=a[2];var f=3;if(i){this.checkbox=a[3];this.checkbox.defaultChecked=this.checkbox.checked;f++}this.anchor=a[f];this.textNode=a[f].firstChild},getHref:function(e){return Ext.isEmpty(e)?Ext.isGecko?"":"#":e},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:false},updateExpandIcon:function(){if(this.rendered){var e=this.node,t,n,r=e.isLast()?"x-tree-elbow-end":"x-tree-elbow",i=e.hasChildNodes();if(i||e.attributes.expandable){if(e.expanded){r+="-minus";t="x-tree-node-collapsed";n="x-tree-node-expanded"}else{r+="-plus";t="x-tree-node-expanded";n="x-tree-node-collapsed"}if(this.wasLeaf){this.removeClass("x-tree-node-leaf");this.wasLeaf=false}if(this.c1!=t||this.c2!=n){Ext.fly(this.elNode).replaceClass(t,n);this.c1=t;this.c2=n}}else{if(!this.wasLeaf){Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-collapsed");delete this.c1;delete this.c2;this.wasLeaf=true}}var s="x-tree-ec-icon "+r;if(this.ecc!=s){this.ecNode.className=s;this.ecc=s}}},onIdChange:function(e){if(this.rendered){this.elNode.setAttribute("ext:tree-node-id",e)}},getChildIndent:function(){if(!this.childIndent){var e=[],t=this.node;while(t){if(!t.isRoot||t.isRoot&&t.ownerTree.rootVisible){if(!t.isLast()){e.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')}else{e.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-icon" />')}}t=t.parentNode}this.childIndent=e.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var e="",t=this.node.parentNode;if(t){e=t.ui.getChildIndent()}if(this.indentMarkup!=e){this.indentNode.innerHTML=e;this.indentMarkup=e}this.updateExpandIcon()}},destroy:function(){if(this.elNode){Ext.dd.Registry.unregister(this.elNode.id)}Ext.each(["textnode","anchor","checkbox","indentNode","ecNode","iconNode","elNode","ctNode","wrap","holder"],function(e){if(this[e]){Ext.fly(this[e]).remove();delete this[e]}},this);delete this.node}});Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var e=this.node.ownerTree.innerCt.dom;this.node.expanded=true;e.innerHTML='<div class="x-tree-root-node"></div>';this.wrap=this.ctNode=e.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn});Ext.tree.TreeLoader=function(e){this.baseParams={};Ext.apply(this,e);this.addEvents("beforeload","load","loadexception");Ext.tree.TreeLoader.superclass.constructor.call(this);if(Ext.isString(this.paramOrder)){this.paramOrder=this.paramOrder.split(/[\s,|]/)}};Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:true,paramOrder:undefined,paramsAsHash:false,nodeParameter:"node",directFn:undefined,load:function(e,t,n){if(this.clearOnLoad){while(e.firstChild){e.removeChild(e.firstChild)}}if(this.doPreload(e)){this.runCallback(t,n||e,[e])}else if(this.directFn||this.dataUrl||this.url){this.requestData(e,t,n||e)}},doPreload:function(e){if(e.attributes.children){if(e.childNodes.length<1){var t=e.attributes.children;e.beginUpdate();for(var n=0,r=t.length;n<r;n++){var i=e.appendChild(this.createNode(t[n]));if(this.preloadChildren){this.doPreload(i)}}e.endUpdate()}return true}return false},getParams:function(e){var t=Ext.apply({},this.baseParams),n=this.nodeParameter,r=this.paramOrder;n&&(t[n]=e.id);if(this.directFn){var i=[e.id];if(r){if(n&&r.indexOf(n)>-1){i=[]}for(var s=0,o=r.length;s<o;s++){i.push(t[r[s]])}}else if(this.paramsAsHash){i=[t]}return i}else{return t}},requestData:function(e,t,n){if(this.fireEvent("beforeload",this,e,t)!==false){if(this.directFn){var r=this.getParams(e);r.push(this.processDirectResponse.createDelegate(this,[{callback:t,node:e,scope:n}],true));this.directFn.apply(window,r)}else{this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:t,node:e,scope:n},params:this.getParams(e)})}}else{this.runCallback(t,n||e,[])}},processDirectResponse:function(e,t,n){if(t.status){this.handleResponse({responseData:Ext.isArray(e)?e:null,responseText:e,argument:n})}else{this.handleFailure({argument:n})}},runCallback:function(e,t,n){if(Ext.isFunction(e)){e.apply(t,n)}},isLoading:function(){return!!this.transId},abort:function(){if(this.isLoading()){Ext.Ajax.abort(this.transId)}},createNode:function(attr){if(this.baseAttrs){Ext.applyIf(attr,this.baseAttrs)}if(this.applyLoader!==false&&!attr.loader){attr.loader=this}if(Ext.isString(attr.uiProvider)){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}if(attr.nodeType){return new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr)}else{return attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)}},processResponse:function(e,t,n,r){var i=e.responseText;try{var s=e.responseData||Ext.decode(i);t.beginUpdate();for(var o=0,u=s.length;o<u;o++){var a=this.createNode(s[o]);if(a){t.appendChild(a)}}t.endUpdate();this.runCallback(n,r||t,[t])}catch(f){this.handleFailure(e)}},handleResponse:function(e){this.transId=false;var t=e.argument;this.processResponse(e,t.node,t.callback,t.scope);this.fireEvent("load",this,t.node,e)},handleFailure:function(e){this.transId=false;var t=e.argument;this.fireEvent("loadexception",this,t.node,e);this.runCallback(t.callback,t.scope||t.node,[t.node])},destroy:function(){this.abort();this.purgeListeners()}});Ext.tree.TreeFilter=function(e,t){this.tree=e;this.filtered={};Ext.apply(this,t)};Ext.tree.TreeFilter.prototype={clearBlank:false,reverse:false,autoClear:false,remove:false,filter:function(e,t,n){t=t||"text";var r;if(typeof e=="string"){var i=e.length;if(i==0&&this.clearBlank){this.clear();return}e=e.toLowerCase();r=function(n){return n.attributes[t].substr(0,i).toLowerCase()==e}}else if(e.exec){r=function(n){return e.test(n.attributes[t])}}else{throw"Illegal filter type, must be string or regex"}this.filterBy(r,null,n)},filterBy:function(e,t,n){n=n||this.tree.root;if(this.autoClear){this.clear()}var r=this.filtered,i=this.reverse;var s=function(s){if(s==n){return true}if(r[s.id]){return false}var o=e.call(t||s,s);if(!o||i){r[s.id]=s;s.ui.hide();return false}return true};n.cascade(s);if(this.remove){for(var o in r){if(typeof o!="function"){var u=r[o];if(u&&u.parentNode){u.parentNode.removeChild(u)}}}}},clear:function(){var e=this.tree;var t=this.filtered;for(var n in t){if(typeof n!="function"){var r=t[n];if(r){r.ui.show()}}}this.filtered={}}};Ext.tree.TreeSorter=Ext.extend(Object,{constructor:function(e,t){Ext.apply(this,t);e.on({scope:this,beforechildrenrendered:this.doSort,append:this.updateSort,insert:this.updateSort,textchange:this.updateSortParent});var n=this.dir&&this.dir.toLowerCase()=="desc",r=this.property||"text",i=this.sortType,s=this.folderSort,o=this.caseSensitive===true,u=this.leafAttr||"leaf";if(Ext.isString(i)){i=Ext.data.SortTypes[i]}this.sortFn=function(e,t){var a=e.attributes,f=t.attributes;if(s){if(a[u]&&!f[u]){return 1}if(!a[u]&&f[u]){return-1}}var l=a[r],c=f[r],h=i?i(l,e):o?l:l.toUpperCase(),p=i?i(c,t):o?c:c.toUpperCase();if(h<p){return n?1:-1}else if(h>p){return n?-1:1}return 0}},doSort:function(e){e.sort(this.sortFn)},updateSort:function(e,t){if(t.childrenRendered){this.doSort.defer(1,this,[t])}},updateSortParent:function(e){var t=e.parentNode;if(t&&t.childrenRendered){this.doSort.defer(1,this,[t])}}});if(Ext.dd.DropZone){Ext.tree.TreeDropZone=function(e,t){this.allowParentInsert=t.allowParentInsert||false;this.allowContainerDrop=t.allowContainerDrop||false;this.appendOnly=t.appendOnly||false;Ext.tree.TreeDropZone.superclass.constructor.call(this,e.getTreeEl(),t);this.tree=e;this.dragOverData={};this.lastInsertClass="x-tree-no-status"};Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1e3,expandNode:function(e){if(e.hasChildNodes()&&!e.isExpanded()){e.expand(false,null,this.triggerCacheRefresh.createDelegate(this))}},queueExpand:function(e){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[e])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},isValidDropPoint:function(e,t,n,r,i){if(!e||!i){return false}var s=e.node;var o=i.node;if(!(s&&s.isTarget&&t)){return false}if(t=="append"&&s.allowChildren===false){return false}if((t=="above"||t=="below")&&s.parentNode&&s.parentNode.allowChildren===false){return false}if(o&&(s==o||o.contains(s))){return false}var u=this.dragOverData;u.tree=this.tree;u.target=s;u.data=i;u.point=t;u.source=n;u.rawEvent=r;u.dropNode=o;u.cancel=false;var a=this.tree.fireEvent("nodedragover",u);return u.cancel===false&&a!==false},getDropPoint:function(e,t,n){var r=t.node;if(r.isRoot){return r.allowChildren!==false?"append":false}var i=t.ddel;var s=Ext.lib.Dom.getY(i),o=s+i.offsetHeight;var u=Ext.lib.Event.getPageY(e);var a=r.allowChildren===false||r.isLeaf();if(this.appendOnly||r.parentNode.allowChildren===false){return a?false:"append"}var f=false;if(!this.allowParentInsert){f=r.hasChildNodes()&&r.isExpanded()}var l=(o-s)/(a?2:3);if(u>=s&&u<s+l){return"above"}else if(!f&&(a||u>=o-l&&u<=o)){return"below"}else{return"append"}},onNodeEnter:function(e,t,n,r){this.cancelExpand()},onContainerOver:function(e,t,n){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",e,t,n)){return this.dropAllowed}return this.dropNotAllowed},onNodeOver:function(e,t,n,r){var i=this.getDropPoint(n,e,t);var s=e.node;if(!this.expandProcId&&i=="append"&&s.hasChildNodes()&&!e.node.isExpanded()){this.queueExpand(s)}else if(i!="append"){this.cancelExpand()}var o=this.dropNotAllowed;if(this.isValidDropPoint(e,i,t,n,r)){if(i){var u=e.ddel;var a;if(i=="above"){o=e.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between";a="x-tree-drag-insert-above"}else if(i=="below"){o=e.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between";a="x-tree-drag-insert-below"}else{o="x-tree-drop-ok-append";a="x-tree-drag-append"}if(this.lastInsertClass!=a){Ext.fly(u).replaceClass(this.lastInsertClass,a);this.lastInsertClass=a}}}return o},onNodeOut:function(e,t,n,r){this.cancelExpand();this.removeDropIndicators(e)},onNodeDrop:function(e,t,n,r){var i=this.getDropPoint(n,e,t);var s=e.node;s.ui.startDrop();if(!this.isValidDropPoint(e,i,t,n,r)){s.ui.endDrop();return false}var o=r.node||(t.getTreeNode?t.getTreeNode(r,s,i,n):null);return this.processDrop(s,r,i,t,n,o)},onContainerDrop:function(e,t,n){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",e,t,n)){var r=this.tree.getRootNode();r.ui.startDrop();var i=n.node||(e.getTreeNode?e.getTreeNode(n,r,"append",t):null);return this.processDrop(r,n,"append",e,t,i)}return false},processDrop:function(e,t,n,r,i,s){var o={tree:this.tree,target:e,data:t,point:n,source:r,rawEvent:i,dropNode:s,cancel:!s,dropStatus:false};var u=this.tree.fireEvent("beforenodedrop",o);if(u===false||o.cancel===true||!o.dropNode){e.ui.endDrop();return o.dropStatus}e=o.target;if(n=="append"&&!e.isExpanded()){e.expand(false,null,function(){this.completeDrop(o)}.createDelegate(this))}else{this.completeDrop(o)}return true},completeDrop:function(e){var t=e.dropNode,n=e.point,r=e.target;if(!Ext.isArray(t)){t=[t]}var i;for(var s=0,o=t.length;s<o;s++){i=t[s];if(n=="above"){r.parentNode.insertBefore(i,r)}else if(n=="below"){r.parentNode.insertBefore(i,r.nextSibling)}else{r.appendChild(i)}}i.ui.focus();if(Ext.enableFx&&this.tree.hlDrop){i.ui.highlight()}r.ui.endDrop();this.tree.fireEvent("nodedrop",e)},afterNodeMoved:function(e,t,n,r,i){if(Ext.enableFx&&this.tree.hlDrop){i.ui.focus();i.ui.highlight()}this.tree.fireEvent("nodedrop",this.tree,r,t,e,n)},getTree:function(){return this.tree},removeDropIndicators:function(e){if(e&&e.ddel){var t=e.ddel;Ext.fly(t).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]);this.lastInsertClass="_noclass"}},beforeDragDrop:function(e,t,n){this.cancelExpand();return true},afterRepair:function(e){if(e&&Ext.enableFx){e.node.ui.highlight()}this.hideProxy()}})}if(Ext.dd.DragZone){Ext.tree.TreeDragZone=function(e,t){Ext.tree.TreeDragZone.superclass.constructor.call(this,e.innerCt,t);this.tree=e};Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(e,t){var n=e.node;return n&&n.draggable&&!n.disabled},onInitDrag:function(e){var t=this.dragData;this.tree.getSelectionModel().select(t.node);this.tree.eventModel.disable();this.proxy.update("");t.node.ui.appendDDGhost(this.proxy.ghost.dom);this.tree.fireEvent("startdrag",this.tree,t.node,e)},getRepairXY:function(e,t){return t.node.ui.getDDRepairXY()},onEndDrag:function(e,t){this.tree.eventModel.enable.defer(100,this.tree.eventModel);this.tree.fireEvent("enddrag",this.tree,e.node,t)},onValidDrop:function(e,t,n){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,e,t);this.hideProxy()},beforeInvalidDrop:function(e,t){var n=this.tree.getSelectionModel();n.clearSelections();n.select(this.dragData.node)},afterRepair:function(){if(Ext.enableFx&&this.tree.hlDrop){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false}})}Ext.tree.TreeEditor=function(e,t,n){t=t||{};var r=t.events?t:new Ext.form.TextField(t);Ext.tree.TreeEditor.superclass.constructor.call(this,r,n);this.tree=e;if(!e.rendered){e.on("render",this.initEditor,this)}else{this.initEditor(e)}};Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:false,hideEl:false,cls:"x-small-editor x-tree-editor",shim:false,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(e){e.on({scope:this,beforeclick:this.beforeNodeClick,dblclick:this.onNodeDblClick});this.on({scope:this,complete:this.updateNode,beforestartedit:this.fitToTree,specialkey:this.onSpecialKey});this.on("startedit",this.bindScroll,this,{delay:10})},fitToTree:function(e,t){var n=this.tree.getTreeEl().dom,r=t.dom;if(n.scrollLeft>r.offsetLeft){n.scrollLeft=r.offsetLeft}var i=Math.min(this.maxWidth,(n.clientWidth>20?n.clientWidth:n.offsetWidth)-Math.max(0,r.offsetLeft-n.scrollLeft)-5);this.setSize(i,"")},triggerEdit:function(e,t){this.completeEdit();if(e.attributes.editable!==false){this.editNode=e;if(this.tree.autoScroll){Ext.fly(e.ui.getEl()).scrollIntoView(this.tree.body)}var n=e.text||"";if(!Ext.isGecko&&Ext.isEmpty(e.text)){e.setText("&#160;")}this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[e.ui.textNode,n]);return false}},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(e,t){clearTimeout(this.autoEditTimer);if(this.tree.getSelectionModel().isSelected(e)){t.stopEvent();return this.triggerEdit(e)}},onNodeDblClick:function(e,t){clearTimeout(this.autoEditTimer)},updateNode:function(e,t){this.tree.getTreeEl().un("scroll",this.cancelEdit,this);this.editNode.setText(t)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this);if(this.editNode){this.editNode.ui.focus.defer(50,this.editNode.ui)}},onSpecialKey:function(e,t){var n=t.getKey();if(n==t.ESC){t.stopEvent();this.cancelEdit()}else if(n==t.ENTER&&!t.hasModifier()){t.stopEvent();this.completeEdit()}},onDestroy:function(){clearTimeout(this.autoEditTimer);Ext.tree.TreeEditor.superclass.onDestroy.call(this);var e=this.tree;e.un("beforeclick",this.beforeNodeClick,this);e.un("dblclick",this.onNodeDblClick,this)}});Ext.menu.Menu=Ext.extend(Ext.Container,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:false,ignoreParentClicks:false,enableScrolling:true,maxHeight:null,scrollIncrement:24,showSeparator:true,defaultOffsets:[0,0],plain:false,floating:true,zIndex:15e3,hidden:true,layout:"menu",hideMode:"offsets",scrollerHeight:8,autoLayout:true,defaultType:"menuitem",bufferResize:false,initComponent:function(){if(Ext.isArray(this.initialConfig)){Ext.apply(this,{items:this.initialConfig})}this.addEvents("click","mouseover","mouseout","itemclick");Ext.menu.MenuMgr.register(this);if(this.floating){Ext.EventManager.onWindowResize(this.hide,this)}else{if(this.initialConfig.hidden!==false){this.hidden=false}this.internalDefaults={hideOnClick:false}}Ext.menu.Menu.superclass.initComponent.call(this);if(this.autoLayout){var e=this.doLayout.createDelegate(this,[]);this.on({add:e,remove:e})}},getLayoutTarget:function(){return this.ul},onRender:function(e,t){if(!e){e=Ext.getBody()}var n={id:this.getId(),cls:"x-menu "+(this.floating?"x-menu-floating x-layer ":"")+(this.cls||"")+(this.plain?" x-menu-plain":"")+(this.showSeparator?"":" x-menu-nosep"),style:this.style,cn:[{tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"},{tag:"ul",cls:"x-menu-list"}]};if(this.floating){this.el=new Ext.Layer({shadow:this.shadow,dh:n,constrain:false,parentEl:e,zindex:this.zIndex})}else{this.el=e.createChild(n)}Ext.menu.Menu.superclass.onRender.call(this,e,t);if(!this.keyNav){this.keyNav=new Ext.menu.MenuNav(this)}this.focusEl=this.el.child("a.x-menu-focus");this.ul=this.el.child("ul.x-menu-list");this.mon(this.ul,{scope:this,click:this.onClick,mouseover:this.onMouseOver,mouseout:this.onMouseOut});if(this.enableScrolling){this.mon(this.el,{scope:this,delegate:".x-menu-scroller",click:this.onScroll,mouseover:this.deactivateActive})}},findTargetItem:function(e){var t=e.getTarget(".x-menu-list-item",this.ul,true);if(t&&t.menuItemId){return this.items.get(t.menuItemId)}},onClick:function(e){var t=this.findTargetItem(e);if(t){if(t.isFormField){this.setActiveItem(t)}else if(t instanceof Ext.menu.BaseItem){if(t.menu&&this.ignoreParentClicks){t.expandMenu();e.preventDefault()}else if(t.onClick){t.onClick(e);this.fireEvent("click",this,t,e)}}}},setActiveItem:function(e,t){if(e!=this.activeItem){this.deactivateActive();if((this.activeItem=e).isFormField){e.focus()}else{e.activate(t)}}else if(t){e.expandMenu()}},deactivateActive:function(){var e=this.activeItem;if(e){if(e.isFormField){if(e.collapse){e.collapse()}}else{e.deactivate()}delete this.activeItem}},tryActivate:function(e,t){var n=this.items;for(var r=e,i=n.length;r>=0&&r<i;r+=t){var s=n.get(r);if(s.isVisible()&&!s.disabled&&(s.canActivate||s.isFormField)){this.setActiveItem(s,false);return s}}return false},onMouseOver:function(e){var t=this.findTargetItem(e);if(t){if(t.canActivate&&!t.disabled){this.setActiveItem(t,true)}}this.over=true;this.fireEvent("mouseover",this,e,t)},onMouseOut:function(e){var t=this.findTargetItem(e);if(t){if(t==this.activeItem&&t.shouldDeactivate&&t.shouldDeactivate(e)){this.activeItem.deactivate();delete this.activeItem}}this.over=false;this.fireEvent("mouseout",this,e,t)},onScroll:function(e,t){if(e){e.stopEvent()}var n=this.ul.dom,r=Ext.fly(t).is(".x-menu-scroller-top");n.scrollTop+=this.scrollIncrement*(r?-1:1);if(r?n.scrollTop<=0:n.scrollTop+this.activeMax>=n.scrollHeight){this.onScrollerOut(null,t)}},onScrollerIn:function(e,t){var n=this.ul.dom,r=Ext.fly(t).is(".x-menu-scroller-top");if(r?n.scrollTop>0:n.scrollTop+this.activeMax<n.scrollHeight){Ext.fly(t).addClass(["x-menu-item-active","x-menu-scroller-active"])}},onScrollerOut:function(e,t){Ext.fly(t).removeClass(["x-menu-item-active","x-menu-scroller-active"])},show:function(e,t,n){if(this.floating){this.parentMenu=n;if(!this.el){this.render();this.doLayout(false,true)}this.showAt(this.el.getAlignToXY(e,t||this.defaultAlign,this.defaultOffsets),n)}else{Ext.menu.Menu.superclass.show.call(this)}},showAt:function(e,t){if(this.fireEvent("beforeshow",this)!==false){this.parentMenu=t;if(!this.el){this.render()}if(this.enableScrolling){this.el.setXY(e);e[1]=this.constrainScroll(e[1]);e=[this.el.adjustForConstraints(e)[0],e[1]]}else{e=this.el.adjustForConstraints(e)}this.el.setXY(e);this.el.show();Ext.menu.Menu.superclass.onShow.call(this);if(Ext.isIE9m){this.fireEvent("autosize",this);if(!Ext.isIE8){this.el.repaint()}}this.hidden=false;this.focus();this.fireEvent("show",this)}},constrainScroll:function(e){var t,n=this.ul.setHeight("auto").getHeight(),r=e,i,s,o,u;if(this.floating){s=Ext.fly(this.el.dom.parentNode);o=s.getScroll().top;u=s.getViewSize().height;i=e-o;t=this.maxHeight?this.maxHeight:u-i;if(n>u){t=u;r=e-i}else if(t<n){r=e-(n-t);t=n}}else{t=this.getHeight()}if(this.maxHeight){t=Math.min(this.maxHeight,t)}if(n>t&&t>0){this.activeMax=t-this.scrollerHeight*2-this.el.getFrameWidth("tb")-Ext.num(this.el.shadowOffset,0);this.ul.setHeight(this.activeMax);this.createScrollers();this.el.select(".x-menu-scroller").setDisplayed("")}else{this.ul.setHeight(n);this.el.select(".x-menu-scroller").setDisplayed("none")}this.ul.dom.scrollTop=0;return r},createScrollers:function(){if(!this.scroller){this.scroller={pos:0,top:this.el.insertFirst({tag:"div",cls:"x-menu-scroller x-menu-scroller-top",html:"&#160;"}),bottom:this.el.createChild({tag:"div",cls:"x-menu-scroller x-menu-scroller-bottom",html:"&#160;"})};this.scroller.top.hover(this.onScrollerIn,this.onScrollerOut,this);this.scroller.topRepeater=new Ext.util.ClickRepeater(this.scroller.top,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.top],false)}});this.scroller.bottom.hover(this.onScrollerIn,this.onScrollerOut,this);this.scroller.bottomRepeater=new Ext.util.ClickRepeater(this.scroller.bottom,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.bottom],false)}})}},onLayout:function(){if(this.isVisible()){if(this.enableScrolling){this.constrainScroll(this.el.getTop())}if(this.floating){this.el.sync()}}},focus:function(){if(!this.hidden){this.doFocus.defer(50,this)}},doFocus:function(){if(!this.hidden){this.focusEl.focus()}},hide:function(e){if(!this.isDestroyed){this.deepHide=e;Ext.menu.Menu.superclass.hide.call(this);delete this.deepHide}},onHide:function(){Ext.menu.Menu.superclass.onHide.call(this);this.deactivateActive();if(this.el&&this.floating){this.el.hide()}var e=this.parentMenu;if(this.deepHide===true&&e){if(e.floating){e.hide(true)}else{e.deactivateActive()}}},lookupComponent:function(e){if(Ext.isString(e)){e=e=="separator"||e=="-"?new Ext.menu.Separator:new Ext.menu.TextItem(e);this.applyDefaults(e)}else{if(Ext.isObject(e)){e=this.getMenuItem(e)}else if(e.tagName||e.el){e=new Ext.BoxComponent({el:e})}}return e},applyDefaults:function(e){if(!Ext.isString(e)){e=Ext.menu.Menu.superclass.applyDefaults.call(this,e);var t=this.internalDefaults;if(t){if(e.events){Ext.applyIf(e.initialConfig,t);Ext.apply(e,t)}else{Ext.applyIf(e,t)}}}return e},getMenuItem:function(e){e.ownerCt=this;if(!e.isXType){if(!e.xtype&&Ext.isBoolean(e.checked)){return new Ext.menu.CheckItem(e)}return Ext.create(e,this.defaultType)}return e},addSeparator:function(){return this.add(new Ext.menu.Separator)},addElement:function(e){return this.add(new Ext.menu.BaseItem({el:e}))},addItem:function(e){return this.add(e)},addMenuItem:function(e){return this.add(this.getMenuItem(e))},addText:function(e){return this.add(new Ext.menu.TextItem(e))},onDestroy:function(){Ext.EventManager.removeResizeListener(this.hide,this);var e=this.parentMenu;if(e&&e.activeChild==this){delete e.activeChild}delete this.parentMenu;Ext.menu.Menu.superclass.onDestroy.call(this);Ext.menu.MenuMgr.unregister(this);if(this.keyNav){this.keyNav.disable()}var t=this.scroller;if(t){Ext.destroy(t.topRepeater,t.bottomRepeater,t.top,t.bottom)}Ext.destroy(this.el,this.focusEl,this.ul)}});Ext.reg("menu",Ext.menu.Menu);Ext.menu.MenuNav=Ext.extend(Ext.KeyNav,function(){function e(e,t){if(!t.tryActivate(t.items.indexOf(t.activeItem)-1,-1)){t.tryActivate(t.items.length-1,-1)}}function t(e,t){if(!t.tryActivate(t.items.indexOf(t.activeItem)+1,1)){t.tryActivate(0,1)}}return{constructor:function(e){Ext.menu.MenuNav.superclass.constructor.call(this,e.el);this.scope=this.menu=e},doRelay:function(e,t){var n=e.getKey();if(this.menu.activeItem&&this.menu.activeItem.isFormField&&n!=e.TAB){return false}if(!this.menu.activeItem&&e.isNavKeyPress()&&n!=e.SPACE&&n!=e.RETURN){this.menu.tryActivate(0,1);return false}return t.call(this.scope||this,e,this.menu)},tab:function(n,r){n.stopEvent();if(n.shiftKey){e(n,r)}else{t(n,r)}},up:e,down:t,right:function(e,t){if(t.activeItem){t.activeItem.expandMenu(true)}},left:function(e,t){t.hide();if(t.parentMenu&&t.parentMenu.activeItem){t.parentMenu.activeItem.activate()}},enter:function(e,t){if(t.activeItem){e.stopPropagation();t.activeItem.onClick(e);t.fireEvent("click",this,t.activeItem);return true}}}}());Ext.menu.MenuMgr=function(){function o(){e={};t=new Ext.util.MixedCollection;n=Ext.getDoc().addKeyListener(27,u);n.disable()}function u(){if(t&&t.length>0){var e=t.clone();e.each(function(e){e.hide()});return true}return false}function a(e){t.remove(e);if(t.length<1){n.disable();Ext.getDoc().un("mousedown",h);i=false}}function f(e){var r=t.last();s=new Date;t.add(e);if(!i){n.enable();Ext.getDoc().on("mousedown",h);i=true}if(e.parentMenu){e.getEl().setZIndex(parseInt(e.parentMenu.getEl().getStyle("z-index"),10)+3);e.parentMenu.activeChild=e}else if(r&&!r.isDestroyed&&r.isVisible()){e.getEl().setZIndex(parseInt(r.getEl().getStyle("z-index"),10)+3)}}function l(e){if(e.activeChild){e.activeChild.hide()}if(e.autoHideTimer){clearTimeout(e.autoHideTimer);delete e.autoHideTimer}}function c(e){var t=e.parentMenu;if(!t&&!e.allowOtherMenus){u()}else if(t&&t.activeChild){t.activeChild.hide()}}function h(e){if(s.getElapsed()>50&&t.length>0&&!e.getTarget(".x-menu")){u()}}var e,t,n,r={},i=false,s=new Date;return{hideAll:function(){return u()},register:function(t){if(!e){o()}e[t.id]=t;t.on({beforehide:l,hide:a,beforeshow:c,show:f})},get:function(t){if(typeof t=="string"){if(!e){return null}return e[t]}else if(t.events){return t}else if(typeof t.length=="number"){return new Ext.menu.Menu({items:t})}else{return Ext.create(t,"menu")}},unregister:function(t){delete e[t.id];t.un("beforehide",l);t.un("hide",a);t.un("beforeshow",c);t.un("show",f)},registerCheckable:function(e){var t=e.group;if(t){if(!r[t]){r[t]=[]}r[t].push(e)}},unregisterCheckable:function(e){var t=e.group;if(t){r[t].remove(e)}},onCheckChange:function(e,t){if(e.group&&t){var n=r[e.group],i=0,s=n.length,o;for(;i<s;i++){o=n[i];if(o!=e){o.setChecked(false)}}}},getCheckedItem:function(e){var t=r[e];if(t){for(var n=0,i=t.length;n<i;n++){if(t[n].checked){return t[n]}}}return null},setCheckedItem:function(e,t){var n=r[e];if(n){for(var i=0,s=n.length;i<s;i++){if(n[i].id==t){n[i].setChecked(true)}}}return null}}}();Ext.menu.BaseItem=Ext.extend(Ext.Component,{canActivate:false,activeClass:"x-menu-item-active",hideOnClick:true,clickHideDelay:1,ctype:"Ext.menu.BaseItem",actionMode:"container",initComponent:function(){Ext.menu.BaseItem.superclass.initComponent.call(this);this.addEvents("click","activate","deactivate");if(this.handler){this.on("click",this.handler,this.scope)}},onRender:function(e,t){Ext.menu.BaseItem.superclass.onRender.apply(this,arguments);if(this.ownerCt&&this.ownerCt instanceof Ext.menu.Menu){this.parentMenu=this.ownerCt}else{this.container.addClass("x-menu-list-item");this.mon(this.el,{scope:this,click:this.onClick,mouseenter:this.activate,mouseleave:this.deactivate})}},setHandler:function(e,t){if(this.handler){this.un("click",this.handler,this.scope)}this.on("click",this.handler=e,this.scope=t)},onClick:function(e){if(!this.disabled&&this.fireEvent("click",this,e)!==false&&this.parentMenu&&this.parentMenu.fireEvent("itemclick",this,e)!==false){this.handleClick(e)}else{e.stopEvent()}},activate:function(){if(this.disabled){return false}var e=this.container;e.addClass(this.activeClass);this.region=e.getRegion().adjust(2,2,-2,-2);this.fireEvent("activate",this);return true},deactivate:function(){this.container.removeClass(this.activeClass);this.fireEvent("deactivate",this)},shouldDeactivate:function(e){return!this.region||!this.region.contains(e.getPoint())},handleClick:function(e){var t=this.parentMenu;if(this.hideOnClick){if(t.floating){this.clickHideDelayTimer=t.hide.defer(this.clickHideDelay,t,[true])}else{t.deactivateActive()}}},beforeDestroy:function(){clearTimeout(this.clickHideDelayTimer);Ext.menu.BaseItem.superclass.beforeDestroy.call(this)},expandMenu:Ext.emptyFn,hideMenu:Ext.emptyFn});Ext.reg("menubaseitem",Ext.menu.BaseItem);Ext.menu.TextItem=Ext.extend(Ext.menu.BaseItem,{hideOnClick:false,itemCls:"x-menu-text",constructor:function(e){if(typeof e=="string"){e={text:e}}Ext.menu.TextItem.superclass.constructor.call(this,e)},onRender:function(){var e=document.createElement("span");e.className=this.itemCls;e.innerHTML=this.text;this.el=e;Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}});Ext.reg("menutextitem",Ext.menu.TextItem);Ext.menu.Separator=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:false,activeClass:"",onRender:function(e){var t=document.createElement("span");t.className=this.itemCls;t.innerHTML="&#160;";this.el=t;e.addClass("x-menu-sep-li");Ext.menu.Separator.superclass.onRender.apply(this,arguments)}});Ext.reg("menuseparator",Ext.menu.Separator);Ext.menu.Item=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:true,showDelay:200,altText:"",hideDelay:200,ctype:"Ext.menu.Item",initComponent:function(){Ext.menu.Item.superclass.initComponent.call(this);if(this.menu){if(Ext.isArray(this.menu)){this.menu={items:this.menu}}if(Ext.isObject(this.menu)){this.menu.ownerCt=this}this.menu=Ext.menu.MenuMgr.get(this.menu);this.menu.ownerCt=undefined}},onRender:function(e,t){if(!this.itemTpl){this.itemTpl=Ext.menu.Item.prototype.itemTpl=new Ext.XTemplate('<a id="{id}" class="{cls} x-unselectable" hidefocus="true" unselectable="on" href="{href}"','<tpl if="hrefTarget">',' target="{hrefTarget}"',"</tpl>",">",'<img alt="{altText}" src="{icon}" class="x-menu-item-icon {iconCls}"/>','<span class="x-menu-item-text">{text}</span>',"</a>")}var n=this.getTemplateArgs();this.el=t?this.itemTpl.insertBefore(t,n,true):this.itemTpl.append(e,n,true);this.iconEl=this.el.child("img.x-menu-item-icon");this.textEl=this.el.child(".x-menu-item-text");if(!this.href){this.mon(this.el,"click",Ext.emptyFn,null,{preventDefault:true})}Ext.menu.Item.superclass.onRender.call(this,e,t)},getTemplateArgs:function(){return{id:this.id,cls:this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:""),href:this.href||"#",hrefTarget:this.hrefTarget,icon:this.icon||Ext.BLANK_IMAGE_URL,iconCls:this.iconCls||"",text:this.itemText||this.text||"&#160;",altText:this.altText||""}},setText:function(e){this.text=e||"&#160;";if(this.rendered){this.textEl.update(this.text);this.parentMenu.layout.doAutoSize()}},setIconClass:function(e){var t=this.iconCls;this.iconCls=e;if(this.rendered){this.iconEl.replaceClass(t,this.iconCls)}},beforeDestroy:function(){clearTimeout(this.showTimer);clearTimeout(this.hideTimer);if(this.menu){delete this.menu.ownerCt;this.menu.destroy()}Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(e){if(!this.href){e.stopEvent()}Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(e){if(Ext.menu.Item.superclass.activate.apply(this,arguments)){this.focus();if(e){this.expandMenu()}}return true},shouldDeactivate:function(e){if(Ext.menu.Item.superclass.shouldDeactivate.call(this,e)){if(this.menu&&this.menu.isVisible()){return!this.menu.getEl().getRegion().contains(e.getPoint())}return true}return false},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments);this.hideMenu()},expandMenu:function(e){if(!this.disabled&&this.menu){clearTimeout(this.hideTimer);delete this.hideTimer;if(!this.menu.isVisible()&&!this.showTimer){this.showTimer=this.deferExpand.defer(this.showDelay,this,[e])}else if(this.menu.isVisible()&&e){this.menu.tryActivate(0,1)}}},deferExpand:function(e){delete this.showTimer;this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu);if(e){this.menu.tryActivate(0,1)}},hideMenu:function(){clearTimeout(this.showTimer);delete this.showTimer;if(!this.hideTimer&&this.menu&&this.menu.isVisible()){this.hideTimer=this.deferHide.defer(this.hideDelay,this)}},deferHide:function(){delete this.hideTimer;if(this.menu.over){this.parentMenu.setActiveItem(this,false)}else{this.menu.hide()}}});Ext.reg("menuitem",Ext.menu.Item);Ext.menu.CheckItem=Ext.extend(Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:false,ctype:"Ext.menu.CheckItem",initComponent:function(){Ext.menu.CheckItem.superclass.initComponent.call(this);this.addEvents("beforecheckchange","checkchange");if(this.checkHandler){this.on("checkchange",this.checkHandler,this.scope)}Ext.menu.MenuMgr.registerCheckable(this)},onRender:function(e){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments);if(this.group){this.el.addClass(this.groupClass)}if(this.checked){this.checked=false;this.setChecked(true,true)}},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this);Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(e,t){var n=t===true;if(this.checked!=e&&(n||this.fireEvent("beforecheckchange",this,e)!==false)){Ext.menu.MenuMgr.onCheckChange(this,e);if(this.container){this.container[e?"addClass":"removeClass"]("x-menu-item-checked")}this.checked=e;if(!n){this.fireEvent("checkchange",this,e)}}},handleClick:function(e){if(!this.disabled&&!(this.checked&&this.group)){this.setChecked(!this.checked)}Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}});Ext.reg("menucheckitem",Ext.menu.CheckItem);Ext.menu.DateMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:false,hideOnClick:true,pickerId:null,cls:"x-date-menu",initComponent:function(){this.on("beforeshow",this.onBeforeShow,this);if(this.strict=Ext.isIE7&&Ext.isStrict){this.on("show",this.onShow,this,{single:true,delay:20})}Ext.apply(this,{plain:true,showSeparator:false,items:this.picker=new Ext.DatePicker(Ext.applyIf({internalRender:this.strict||!Ext.isIE9m,ctCls:"x-menu-date-item",id:this.pickerId},this.initialConfig))});this.picker.purgeListeners();Ext.menu.DateMenu.superclass.initComponent.call(this);this.relayEvents(this.picker,["select"]);this.on("show",this.picker.focus,this.picker);this.on("select",this.menuHide,this);if(this.handler){this.on("select",this.handler,this.scope||this)}},menuHide:function(){if(this.hideOnClick){this.hide(true)}},onBeforeShow:function(){if(this.picker){this.picker.hideMonthPicker(true)}},onShow:function(){var e=this.picker.getEl();e.setWidth(e.getWidth())}});Ext.reg("datemenu",Ext.menu.DateMenu);Ext.menu.ColorMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:false,hideOnClick:true,cls:"x-color-menu",paletteId:null,initComponent:function(){Ext.apply(this,{plain:true,showSeparator:false,items:this.palette=new Ext.ColorPalette(Ext.applyIf({id:this.paletteId},this.initialConfig))});this.palette.purgeListeners();Ext.menu.ColorMenu.superclass.initComponent.call(this);this.relayEvents(this.palette,["select"]);this.on("select",this.menuHide,this);if(this.handler){this.on("select",this.handler,this.scope||this)}},menuHide:function(){if(this.hideOnClick){this.hide(true)}}});Ext.reg("colormenu",Ext.menu.ColorMenu);Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:true,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:false,disabled:false,submitValue:true,isFormField:true,msgDisplay:"",hasFocus:false,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||""},onRender:function(e,t){if(!this.el){var n=this.getAutoCreate();if(!n.name){n.name=this.name||this.id}if(this.inputType){n.type=this.inputType}this.autoEl=n}Ext.form.Field.superclass.onRender.call(this,e,t);if(this.submitValue===false){this.el.dom.removeAttribute("name")}var r=this.el.dom.type;if(r){if(r=="password"){r="text"}this.el.addClass("x-form-"+r)}if(this.readOnly){this.setReadOnly(true)}if(this.tabIndex!==undefined){this.el.dom.setAttribute("tabIndex",this.tabIndex)}this.el.addClass([this.fieldClass,this.cls])},getItemCt:function(){return this.itemCt},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else if(!Ext.isEmpty(this.el.dom.value)&&this.el.dom.value!=this.emptyText){this.setValue(this.el.dom.value)}this.originalValue=this.getValue()},isDirty:function(){if(this.disabled||!this.rendered){return false}return String(this.getValue())!==String(this.originalValue)},setReadOnly:function(e){if(this.rendered){this.el.dom.readOnly=e}this.readOnly=e},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents();this.initValue()},fireKey:function(e){if(e.isSpecialKey()){this.fireEvent("specialkey",this,e)}},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this);this.mon(this.el,"focus",this.onFocus,this);this.mon(this.el,"blur",this.onBlur,this,this.inEditor?{buffer:10}:null)},preFocus:Ext.emptyFn,onFocus:function(){this.preFocus();if(this.focusClass){this.el.addClass(this.focusClass)}if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this)}},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();if(this.focusClass){this.el.removeClass(this.focusClass)}this.hasFocus=false;if(this.validationEvent!==false&&(this.validateOnBlur||this.validationEvent=="blur")){this.validate()}var e=this.getValue();if(String(e)!==String(this.startValue)){this.fireEvent("change",this,e,this.startValue)}this.fireEvent("blur",this);this.postBlur()},postBlur:Ext.emptyFn,isValid:function(e){if(this.disabled){return true}var t=this.preventMark;this.preventMark=e===true;var n=this.validateValue(this.processValue(this.getRawValue()),e);this.preventMark=t;return n},validate:function(){if(this.disabled||this.validateValue(this.processValue(this.getRawValue()))){this.clearInvalid();return true}return false},processValue:function(e){return e},validateValue:function(e){var t=this.getErrors(e)[0];if(t==undefined){return true}else{this.markInvalid(t);return false}},getErrors:function(){return[]},getActiveError:function(){return this.activeError||""},markInvalid:function(e){if(this.rendered&&!this.preventMark){e=e||this.invalidText;var t=this.getMessageHandler();if(t){t.mark(this,e)}else if(this.msgTarget){this.el.addClass(this.invalidClass);var n=Ext.getDom(this.msgTarget);if(n){n.innerHTML=e;n.style.display=this.msgDisplay}}}this.setActiveError(e)},clearInvalid:function(){if(this.rendered&&!this.preventMark){this.el.removeClass(this.invalidClass);var e=this.getMessageHandler();if(e){e.clear(this)}else if(this.msgTarget){this.el.removeClass(this.invalidClass);var t=Ext.getDom(this.msgTarget);if(t){t.innerHTML="";t.style.display="none"}}}this.unsetActiveError()},setActiveError:function(e,t){this.activeError=e;if(t!==true)this.fireEvent("invalid",this,e)},unsetActiveError:function(e){delete this.activeError;if(e!==true)this.fireEvent("valid",this)},getMessageHandler:function(){return Ext.form.MessageTargets[this.msgTarget]},getErrorCt:function(){return this.el.findParent(".x-form-element",5,true)||this.el.findParent(".x-form-field-wrap",5,true)},alignErrorEl:function(){this.errorEl.setWidth(this.getErrorCt().getWidth(true)-20)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},getRawValue:function(){var e=this.rendered?this.el.getValue():Ext.value(this.value,"");if(e===this.emptyText){e=""}return e},getValue:function(){if(!this.rendered){return this.value}var e=this.el.getValue();if(e===this.emptyText||e===undefined){e=""}return e},setRawValue:function(e){return this.rendered?this.el.dom.value=Ext.isEmpty(e)?"":e:""},setValue:function(e){this.value=e;if(this.rendered){this.el.dom.value=Ext.isEmpty(e)?"":e;this.validate()}return this},append:function(e){this.setValue([this.getValue(),e].join(""))}});Ext.form.MessageTargets={qtip:{mark:function(e,t){e.el.addClass(e.invalidClass);e.el.dom.qtip=t;e.el.dom.qclass="x-form-invalid-tip";if(Ext.QuickTips){Ext.QuickTips.enable()}},clear:function(e){e.el.removeClass(e.invalidClass);e.el.dom.qtip=""}},title:{mark:function(e,t){e.el.addClass(e.invalidClass);e.el.dom.title=t},clear:function(e){e.el.dom.title=""}},under:{mark:function(e,t){e.el.addClass(e.invalidClass);if(!e.errorEl){var n=e.getErrorCt();if(!n){e.el.dom.title=t;return}e.errorEl=n.createChild({cls:"x-form-invalid-msg"});e.on("resize",e.alignErrorEl,e);e.on("destroy",function(){Ext.destroy(this.errorEl)},e)}e.alignErrorEl();e.errorEl.update(t);Ext.form.Field.msgFx[e.msgFx].show(e.errorEl,e)},clear:function(e){e.el.removeClass(e.invalidClass);if(e.errorEl){Ext.form.Field.msgFx[e.msgFx].hide(e.errorEl,e)}else{e.el.dom.title=""}}},side:{mark:function(e,t){e.el.addClass(e.invalidClass);if(!e.errorIcon){var n=e.getErrorCt();if(!n){e.el.dom.title=t;return}e.errorIcon=n.createChild({cls:"x-form-invalid-icon"});if(e.ownerCt){e.ownerCt.on("afterlayout",e.alignErrorIcon,e);e.ownerCt.on("expand",e.alignErrorIcon,e)}e.on("resize",e.alignErrorIcon,e);e.on("destroy",function(){Ext.destroy(this.errorIcon)},e)}e.alignErrorIcon();e.errorIcon.dom.qtip=t;e.errorIcon.dom.qclass="x-form-invalid-tip";e.errorIcon.show()},clear:function(e){e.el.removeClass(e.invalidClass);if(e.errorIcon){e.errorIcon.dom.qtip="";e.errorIcon.hide()}else{e.el.dom.title=""}}}};Ext.form.Field.msgFx={normal:{show:function(e,t){e.setDisplayed("block")},hide:function(e,t){e.setDisplayed(false).update("")}},slide:{show:function(e,t){e.slideIn("t",{stopFx:true})},hide:function(e,t){e.slideOut("t",{stopFx:true,useDisplay:true})}},slideRight:{show:function(e,t){e.fixDisplay();e.alignTo(t.el,"tl-tr");e.slideIn("l",{stopFx:true})},hide:function(e,t){e.slideOut("l",{stopFx:true,useDisplay:true})}}};Ext.reg("field",Ext.form.Field);Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:false,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:false,allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:false,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this);this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this);if(this.validationEvent=="keyup"){this.validationTask=new Ext.util.DelayedTask(this.validate,this);this.mon(this.el,"keyup",this.filterValidation,this)}else if(this.validationEvent!==false&&this.validationEvent!="blur"){this.mon(this.el,this.validationEvent,this.validate,this,{buffer:this.validationDelay})}if(this.selectOnFocus||this.emptyText){this.mon(this.el,"mousedown",this.onMouseDown,this);if(this.emptyText){this.applyEmptyText()}}if(this.maskRe||this.vtype&&this.disableKeyFilter!==true&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"])){this.mon(this.el,"keypress",this.filterKeys,this)}if(this.grow){this.mon(this.el,"keyup",this.onKeyUpBuffered,this,{buffer:50});this.mon(this.el,"click",this.autoSize,this)}if(this.enableKeyEvents){this.mon(this.el,{scope:this,keyup:this.onKeyUp,keydown:this.onKeyDown,keypress:this.onKeyPress})}},onMouseDown:function(e){if(!this.hasFocus){this.mon(this.el,"mouseup",Ext.emptyFn,this,{single:true,preventDefault:true})}},processValue:function(e){if(this.stripCharsRe){var t=e.replace(this.stripCharsRe,"");if(t!==e){this.setRawValue(t);return t}}return e},filterValidation:function(e){if(!e.isNavKeyPress()){this.validationTask.delay(this.validationDelay)}},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this);if(Ext.isIE){this.el.dom.unselectable="on"}},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this);if(Ext.isIE){this.el.dom.unselectable=""}},onKeyUpBuffered:function(e){if(this.doAutoSize(e)){this.autoSize()}},doAutoSize:function(e){return!e.isNavKeyPress()},onKeyUp:function(e){this.fireEvent("keyup",this,e)},onKeyDown:function(e){this.fireEvent("keydown",this,e)},onKeyPress:function(e){this.fireEvent("keypress",this,e)},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){if(this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus){this.setRawValue(this.emptyText);this.el.addClass(this.emptyClass)}},preFocus:function(){var e=this.el,t;if(this.emptyText){if(e.dom.value==this.emptyText){this.setRawValue("");t=true}e.removeClass(this.emptyClass)}if(this.selectOnFocus||t){e.dom.select()}},postBlur:function(){this.applyEmptyText()},filterKeys:function(e){if(e.ctrlKey){return}var t=e.getKey();if(Ext.isGecko&&(e.isNavKeyPress()||t==e.BACKSPACE||t==e.DELETE&&e.button==-1)){return}var n=String.fromCharCode(e.getCharCode());if(!Ext.isGecko&&e.isSpecialKey()&&!n){return}if(!this.maskRe.test(n)){e.stopEvent()}},setValue:function(e){if(this.emptyText&&this.el&&!Ext.isEmpty(e)){this.el.removeClass(this.emptyClass)}Ext.form.TextField.superclass.setValue.apply(this,arguments);this.applyEmptyText();this.autoSize();return this},getErrors:function(e){var t=Ext.form.TextField.superclass.getErrors.apply(this,arguments);e=Ext.isDefined(e)?e:this.processValue(this.getRawValue());if(Ext.isFunction(this.validator)){var n=this.validator(e);if(n!==true){t.push(n)}}if(e.length<1||e===this.emptyText){if(this.allowBlank){return t}else{t.push(this.blankText)}}if(!this.allowBlank&&(e.length<1||e===this.emptyText)){t.push(this.blankText)}if(e.length<this.minLength){t.push(String.format(this.minLengthText,this.minLength))}if(e.length>this.maxLength){t.push(String.format(this.maxLengthText,this.maxLength))}if(this.vtype){var r=Ext.form.VTypes;if(!r[this.vtype](e,this)){t.push(this.vtypeText||r[this.vtype+"Text"])}}if(this.regex&&!this.regex.test(e)){t.push(this.regexText)}return t},selectText:function(e,t){var n=this.getRawValue();var r=false;if(n.length>0){e=e===undefined?0:e;t=t===undefined?n.length:t;var i=this.el.dom;if(i.setSelectionRange){i.setSelectionRange(e,t)}else if(i.createTextRange){var s=i.createTextRange();s.moveStart("character",e);s.moveEnd("character",t-n.length);s.select()}r=Ext.isGecko||Ext.isOpera}else{r=true}if(r){this.focus()}},autoSize:function(){if(!this.grow||!this.rendered){return}if(!this.metrics){this.metrics=Ext.util.TextMetrics.createInstance(this.el)}var e=this.el;var t=e.dom.value;var n=document.createElement("div");n.appendChild(document.createTextNode(t));t=n.innerHTML;Ext.removeNode(n);n=null;t+="&#160;";var r=Math.min(this.growMax,Math.max(this.metrics.getWidth(t)+10,this.growMin));this.el.setWidth(r);this.fireEvent("autosize",this,r)},onDestroy:function(){if(this.validationTask){this.validationTask.cancel();this.validationTask=null}Ext.form.TextField.superclass.onDestroy.call(this)}});Ext.reg("textfield",Ext.form.TextField);Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:false,editable:true,readOnly:false,wrapFocusClass:"x-trigger-wrap-focus",autoSize:Ext.emptyFn,monitorTab:true,deferHeight:true,mimicing:false,actionMode:"wrap",defaultTriggerWidth:17,onResize:function(e,t){Ext.form.TriggerField.superclass.onResize.call(this,e,t);var n=this.getTriggerWidth();if(Ext.isNumber(e)){this.el.setWidth(e-n)}this.wrap.setWidth(this.el.getWidth()+n)},getTriggerWidth:function(){var e=this.trigger.getWidth();if(!this.hideTrigger&&!this.readOnly&&e===0){e=this.defaultTriggerWidth}return e},alignErrorIcon:function(){if(this.wrap){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}},onRender:function(e,t){this.doc=Ext.isIE?Ext.getBody():Ext.getDoc();Ext.form.TriggerField.superclass.onRender.call(this,e,t);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-field-trigger-wrap"});this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.triggerClass});this.initTrigger();if(!this.width){this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())}this.resizeEl=this.positionEl=this.wrap},getWidth:function(){return this.el.getWidth()+this.trigger.getWidth()},updateEditState:function(){if(this.rendered){if(this.readOnly){this.el.dom.readOnly=true;this.el.addClass("x-trigger-noedit");this.mun(this.el,"click",this.onTriggerClick,this);this.trigger.setDisplayed(false)}else{if(!this.editable){this.el.dom.readOnly=true;this.el.addClass("x-trigger-noedit");this.mon(this.el,"click",this.onTriggerClick,this)}else{this.el.dom.readOnly=false;this.el.removeClass("x-trigger-noedit");this.mun(this.el,"click",this.onTriggerClick,this)}this.trigger.setDisplayed(!this.hideTrigger)}this.onResize(this.width||this.wrap.getWidth())}},setHideTrigger:function(e){if(e!=this.hideTrigger){this.hideTrigger=e;this.updateEditState()}},setEditable:function(e){if(e!=this.editable){this.editable=e;this.updateEditState()}},setReadOnly:function(e){if(e!=this.readOnly){this.readOnly=e;this.updateEditState()}},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this);this.updateEditState()},initTrigger:function(){this.mon(this.trigger,"click",this.onTriggerClick,this,{preventDefault:true});this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){Ext.destroy(this.trigger,this.wrap);if(this.mimicing){this.doc.un("mousedown",this.mimicBlur,this)}delete this.doc;Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this);if(!this.mimicing){this.wrap.addClass(this.wrapFocusClass);this.mimicing=true;this.doc.on("mousedown",this.mimicBlur,this,{delay:10});if(this.monitorTab){this.on("specialkey",this.checkTab,this)}}},checkTab:function(e,t){if(t.getKey()==t.TAB){this.triggerBlur()}},onBlur:Ext.emptyFn,mimicBlur:function(e){if(!this.isDestroyed&&!this.wrap.contains(e.target)&&this.validateBlur(e)){this.triggerBlur()}},triggerBlur:function(){this.mimicing=false;this.doc.un("mousedown",this.mimicBlur,this);if(this.monitorTab&&this.el){this.un("specialkey",this.checkTab,this)}Ext.form.TriggerField.superclass.onBlur.call(this);if(this.wrap){this.wrap.removeClass(this.wrapFocusClass)}},beforeBlur:Ext.emptyFn,validateBlur:function(e){return true},onTriggerClick:Ext.emptyFn});Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this);this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(e){return this.triggers[e]},afterRender:function(){Ext.form.TwinTriggerField.superclass.afterRender.call(this);var e=this.triggers,t=0,n=e.length;for(;t<n;++t){if(this["hideTrigger"+(t+1)]){e[t].hide()}}},initTrigger:function(){var e=this.trigger.select(".x-form-trigger",true),t=this;e.each(function(e,n,r){var i="Trigger"+(r+1);e.hide=function(){var e=t.wrap.getWidth();this.dom.style.display="none";t.el.setWidth(e-t.trigger.getWidth());t["hidden"+i]=true};e.show=function(){var e=t.wrap.getWidth();this.dom.style.display="";t.el.setWidth(e-t.trigger.getWidth());t["hidden"+i]=false};this.mon(e,"click",this["on"+i+"Click"],this,{preventDefault:true});e.addClassOnOver("x-form-trigger-over");e.addClassOnClick("x-form-trigger-click")},this);this.triggers=e.elements},getTriggerWidth:function(){var e=0;Ext.each(this.triggers,function(t,n){var r="Trigger"+(n+1),i=t.getWidth();if(i===0&&!this["hidden"+r]){e+=this.defaultTriggerWidth}else{e+=i}},this);return e},onDestroy:function(){Ext.destroy(this.triggers);Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn});Ext.reg("trigger",Ext.form.TriggerField);Ext.reg("twintrigger",Ext.form.TwinTriggerField);Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1e3,growAppend:"&#160;\n&#160;",enterIsSpecial:false,preventScrollbars:false,onRender:function(e,t){if(!this.el){this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"}}Ext.form.TextArea.superclass.onRender.call(this,e,t);if(this.grow){this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"});if(this.preventScrollbars){this.el.setStyle("overflow","hidden")}this.el.setHeight(this.growMin)}},onDestroy:function(){Ext.removeNode(this.textSizeEl);Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(e){if(e.isSpecialKey()&&(this.enterIsSpecial||e.getKey()!=e.ENTER||e.hasModifier())){this.fireEvent("specialkey",this,e)}},doAutoSize:function(e){return!e.isNavKeyPress()||e.getKey()==e.ENTER},filterValidation:function(e){if(!e.isNavKeyPress()||!this.enterIsSpecial&&e.keyCode==e.ENTER){this.validationTask.delay(this.validationDelay)}},autoSize:function(){if(!this.grow||!this.textSizeEl){return}var e=this.el,t=Ext.util.Format.htmlEncode(e.dom.value),n=this.textSizeEl,r;Ext.fly(n).setWidth(this.el.getWidth());if(t.length<1){t="&#160;&#160;"}else{t+=this.growAppend;if(Ext.isIE){t=t.replace(/\n/g,"&#160;<br />")}}n.innerHTML=t;r=Math.min(this.growMax,Math.max(n.offsetHeight,this.growMin));if(r!=this.lastHeight){this.lastHeight=r;this.el.setHeight(r);this.fireEvent("autosize",this,r)}}});Ext.reg("textarea",Ext.form.TextArea);Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:true,decimalSeparator:".",decimalPrecision:2,allowNegative:true,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",autoStripChars:false,initEvents:function(){var e=this.baseChars+"";if(this.allowDecimals){e+=this.decimalSeparator}if(this.allowNegative){e+="-"}e=Ext.escapeRe(e);this.maskRe=new RegExp("["+e+"]");if(this.autoStripChars){this.stripCharsRe=new RegExp("[^"+e+"]","gi")}Ext.form.NumberField.superclass.initEvents.call(this)},getErrors:function(e){var t=Ext.form.NumberField.superclass.getErrors.apply(this,arguments);e=Ext.isDefined(e)?e:this.processValue(this.getRawValue());if(e.length<1){return t}e=String(e).replace(this.decimalSeparator,".");if(isNaN(e)){t.push(String.format(this.nanText,e))}var n=this.parseValue(e);if(n<this.minValue){t.push(String.format(this.minText,this.minValue))}if(n>this.maxValue){t.push(String.format(this.maxText,this.maxValue))}return t},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(e){e=Ext.isNumber(e)?e:parseFloat(String(e).replace(this.decimalSeparator,"."));e=this.fixPrecision(e);e=isNaN(e)?"":String(e).replace(".",this.decimalSeparator);return Ext.form.NumberField.superclass.setValue.call(this,e)},setMinValue:function(e){this.minValue=Ext.num(e,Number.NEGATIVE_INFINITY)},setMaxValue:function(e){this.maxValue=Ext.num(e,Number.MAX_VALUE)},parseValue:function(e){e=parseFloat(String(e).replace(this.decimalSeparator,"."));return isNaN(e)?"":e},fixPrecision:function(e){var t=isNaN(e);if(!this.allowDecimals||this.decimalPrecision==-1||t||!e){return t?"":e}return parseFloat(parseFloat(e).toFixed(this.decimalPrecision))},beforeBlur:function(){var e=this.parseValue(this.getRawValue());if(!Ext.isEmpty(e)){this.setValue(e)}}});Ext.reg("numberfield",Ext.form.NumberField);Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",showToday:true,startDay:0,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initTime:"12",initTimeFormat:"H",safeParse:function(e,t){if(Date.formatContainsHourInfo(t)){return Date.parseDate(e,t)}else{var n=Date.parseDate(e+" "+this.initTime,t+" "+this.initTimeFormat);if(n){return n.clearTime()}}},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this);this.addEvents("select");if(Ext.isString(this.minValue)){this.minValue=this.parseDate(this.minValue)}if(Ext.isString(this.maxValue)){this.maxValue=this.parseDate(this.maxValue)}this.disabledDatesRE=null;this.initDisabledDays()},initEvents:function(){Ext.form.DateField.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{down:function(e){this.onTriggerClick()},scope:this,forceKeyDown:true})},initDisabledDays:function(){if(this.disabledDates){var e=this.disabledDates,t=e.length-1,n="(?:";Ext.each(e,function(r,i){n+=Ext.isDate(r)?"^"+Ext.escapeRe(r.dateFormat(this.format))+"$":e[i];if(i!=t){n+="|"}},this);this.disabledDatesRE=new RegExp(n+")")}},setDisabledDates:function(e){this.disabledDates=e;this.initDisabledDays();if(this.menu){this.menu.picker.setDisabledDates(this.disabledDatesRE)}},setDisabledDays:function(e){this.disabledDays=e;if(this.menu){this.menu.picker.setDisabledDays(e)}},setMinValue:function(e){this.minValue=Ext.isString(e)?this.parseDate(e):e;if(this.menu){this.menu.picker.setMinDate(this.minValue)}},setMaxValue:function(e){this.maxValue=Ext.isString(e)?this.parseDate(e):e;if(this.menu){this.menu.picker.setMaxDate(this.maxValue)}},getErrors:function(e){var t=Ext.form.DateField.superclass.getErrors.apply(this,arguments);e=this.formatDate(e||this.processValue(this.getRawValue()));if(e.length<1){return t}var n=e;e=this.parseDate(e);if(!e){t.push(String.format(this.invalidText,n,this.format));return t}var r=e.getTime();if(this.minValue&&r<this.minValue.clearTime().getTime()){t.push(String.format(this.minText,this.formatDate(this.minValue)))}if(this.maxValue&&r>this.maxValue.clearTime().getTime()){t.push(String.format(this.maxText,this.formatDate(this.maxValue)))}if(this.disabledDays){var i=e.getDay();for(var s=0;s<this.disabledDays.length;s++){if(i===this.disabledDays[s]){t.push(this.disabledDaysText);break}}}var o=this.formatDate(e);if(this.disabledDatesRE&&this.disabledDatesRE.test(o)){t.push(String.format(this.disabledDatesText,o))}return t},validateBlur:function(){return!this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(e){return Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(e)))},parseDate:function(e){if(!e||Ext.isDate(e)){return e}var t=this.safeParse(e,this.format),n=this.altFormats,r=this.altFormatsArray;if(!t&&n){r=r||n.split("|");for(var i=0,s=r.length;i<s&&!t;i++){t=this.safeParse(e,r[i])}}return t},onDestroy:function(){Ext.destroy(this.menu,this.keyNav);Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(e){return Ext.isDate(e)?e.dateFormat(this.format):e},onTriggerClick:function(){if(this.disabled){return}if(this.menu==null){this.menu=new Ext.menu.DateMenu({hideOnClick:false,focusOnSelect:false})}this.onFocus();Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,startDay:this.startDay,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))});this.menu.picker.setValue(this.getValue()||new Date);this.menu.show(this.el,"tl-bl?");this.menuEvents("on")},menuEvents:function(e){this.menu[e]("select",this.onSelect,this);this.menu[e]("hide",this.onMenuHide,this);this.menu[e]("show",this.onFocus,this)},onSelect:function(e,t){this.setValue(t);this.fireEvent("select",this,t);this.menu.hide()},onMenuHide:function(){this.focus(false,60);this.menuEvents("un")},beforeBlur:function(){var e=this.parseDate(this.getRawValue());if(e){this.setValue(e)}}});Ext.reg("datefield",Ext.form.DateField);Ext.form.DisplayField=Ext.extend(Ext.form.Field,{validationEvent:false,validateOnBlur:false,defaultAutoCreate:{tag:"div"},fieldClass:"x-form-display-field",htmlEncode:false,initEvents:Ext.emptyFn,isValid:function(){return true},validate:function(){return true},getRawValue:function(){var e=this.rendered?this.el.dom.innerHTML:Ext.value(this.value,"");if(e===this.emptyText){e=""}if(this.htmlEncode){e=Ext.util.Format.htmlDecode(e)}return e},getValue:function(){return this.getRawValue()},getName:function(){return this.name},setRawValue:function(e){if(this.htmlEncode){e=Ext.util.Format.htmlEncode(e)}return this.rendered?this.el.dom.innerHTML=Ext.isEmpty(e)?"":e:this.value=e},setValue:function(e){this.setRawValue(e);return this}});Ext.reg("displayfield",Ext.form.DisplayField);Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",listEmptyText:"",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"query",minChars:4,autoSelect:true,typeAhead:false,queryDelay:500,pageSize:0,selectOnFocus:false,queryParam:"query",loadingText:"Loading...",resizable:false,handleHeight:8,allQuery:"",mode:"remote",minListWidth:70,forceSelection:false,typeAheadDelay:250,lazyInit:true,clearFilterOnReset:true,submitValue:undefined,initComponent:function(){Ext.form.ComboBox.superclass.initComponent.call(this);this.addEvents("expand","collapse","beforeselect","select","beforequery");if(this.transform){var e=Ext.getDom(this.transform);if(!this.hiddenName){this.hiddenName=e.name}if(!this.store){this.mode="local";var t=[],n=e.options;for(var r=0,i=n.length;r<i;r++){var s=n[r],o=(s.hasAttribute?s.hasAttribute("value"):s.getAttributeNode("value").specified)?s.value:s.text;if(s.selected&&Ext.isEmpty(this.value,true)){this.value=o}t.push([o,s.text])}this.store=new Ext.data.ArrayStore({idIndex:0,fields:["value","text"],data:t,autoDestroy:true});this.valueField="value";this.displayField="text"}e.name=Ext.id();if(!this.lazyRender){this.target=true;this.el=Ext.DomHelper.insertBefore(e,this.autoCreate||this.defaultAutoCreate);this.render(this.el.parentNode,e)}Ext.removeNode(e)}else if(this.store){this.store=Ext.StoreMgr.lookup(this.store);if(this.store.autoCreated){this.displayField=this.valueField="field1";if(!this.store.expandData){this.displayField="field2"}this.mode="local"}}this.selectedIndex=-1;if(this.mode=="local"){if(!Ext.isDefined(this.initialConfig.queryDelay)){this.queryDelay=10}if(!Ext.isDefined(this.initialConfig.minChars)){this.minChars=0}}},onRender:function(e,t){if(this.hiddenName&&!Ext.isDefined(this.submitValue)){this.submitValue=false}Ext.form.ComboBox.superclass.onRender.call(this,e,t);if(this.hiddenName){this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:this.hiddenId||Ext.id()},"before",true)}if(Ext.isGecko){this.el.dom.setAttribute("autocomplete","off")}if(!this.lazyInit){this.initList()}else{this.on("focus",this.initList,this,{single:true})}},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this);if(this.hiddenField){this.hiddenField.value=Ext.value(Ext.isDefined(this.hiddenValue)?this.hiddenValue:this.value,"")}},getParentZIndex:function(){var e;if(this.ownerCt){this.findParentBy(function(t){e=parseInt(t.getPositionEl().getStyle("z-index"),10);return!!e})}return e},getZIndex:function(e){e=e||Ext.getDom(this.getListParent()||Ext.getBody());var t=parseInt(Ext.fly(e).getStyle("z-index"),10);if(!t){t=this.getParentZIndex()}return(t||12e3)+5},initList:function(){if(!this.list){var e="x-combo-list",t=Ext.getDom(this.getListParent()||Ext.getBody());this.list=new Ext.Layer({parentEl:t,shadow:this.shadow,cls:[e,this.listClass].join(" "),constrain:false,zindex:this.getZIndex(t)});var n=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setSize(n,0);this.list.swallowEvent("mousewheel");this.assetHeight=0;if(this.syncFont!==false){this.list.setStyle("font-size",this.el.getStyle("font-size"))}if(this.title){this.header=this.list.createChild({cls:e+"-hd",html:this.title});this.assetHeight+=this.header.getHeight()}this.innerList=this.list.createChild({cls:e+"-inner"});this.mon(this.innerList,"mouseover",this.onViewOver,this);this.mon(this.innerList,"mousemove",this.onViewMove,this);this.innerList.setWidth(n-this.list.getFrameWidth("lr"));if(this.pageSize){this.footer=this.list.createChild({cls:e+"-ft"});this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer});this.assetHeight+=this.footer.getHeight()}if(!this.tpl){this.tpl='<tpl for="."><div class="'+e+'-item">{'+this.displayField+"}</div></tpl>"}this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:true,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+e+"-item",emptyText:this.listEmptyText,deferEmptyText:false});this.mon(this.view,{containerclick:this.onViewClick,click:this.onViewClick,scope:this});this.bindStore(this.store,true);if(this.resizable){this.resizer=new Ext.Resizable(this.list,{pinned:true,handles:"se"});this.mon(this.resizer,"resize",function(e,t,n){this.maxHeight=n-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight;this.listWidth=t;this.innerList.setWidth(t-this.list.getFrameWidth("lr"));this.restrictHeight()},this);this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px")}}},getListParent:function(){return document.body},getStore:function(){return this.store},bindStore:function(e,t){if(this.store&&!t){if(this.store!==e&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.collapse,this)}if(!e){this.store=null;if(this.view){this.view.bindStore(null)}if(this.pageTb){this.pageTb.bindStore(null)}}}if(e){if(!t){this.lastQuery=null;if(this.pageTb){this.pageTb.bindStore(e)}}this.store=Ext.StoreMgr.lookup(e);this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.collapse});if(this.view){this.view.bindStore(e)}}},reset:function(){if(this.clearFilterOnReset&&this.mode=="local"){this.store.clearFilter()}Ext.form.ComboBox.superclass.reset.call(this)},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{up:function(e){this.inKeyMode=true;this.selectPrev()},down:function(e){if(!this.isExpanded()){this.onTriggerClick()}else{this.inKeyMode=true;this.selectNext()}},enter:function(e){this.onViewClick()},esc:function(e){this.collapse()},tab:function(e){if(this.forceSelection===true){this.collapse()}else{this.onViewClick(false)}return true},scope:this,doRelay:function(e,t,n){if(n=="down"||this.scope.isExpanded()){var r=Ext.KeyNav.prototype.doRelay.apply(this,arguments);if((Ext.isIE9&&Ext.isStrict||Ext.isIE10p||!Ext.isIE)&&Ext.EventManager.useKeydown){this.scope.fireKey(e)}return r}return true},forceKeyDown:true,defaultEventAction:"stopEvent"});this.queryDelay=Math.max(this.queryDelay||10,this.mode=="local"?10:250);this.dqTask=new Ext.util.DelayedTask(this.initQuery,this);if(this.typeAhead){this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)}if(!this.enableKeyEvents){this.mon(this.el,"keyup",this.onKeyUp,this)}},onDestroy:function(){if(this.dqTask){this.dqTask.cancel();this.dqTask=null}this.bindStore(null);Ext.destroy(this.resizer,this.view,this.pageTb,this.list);Ext.destroyMembers(this,"hiddenField");Ext.form.ComboBox.superclass.onDestroy.call(this)},fireKey:function(e){if(!this.isExpanded()){Ext.form.ComboBox.superclass.fireKey.call(this,e)}},onResize:function(e,t){Ext.form.ComboBox.superclass.onResize.apply(this,arguments);if(!isNaN(e)&&this.isVisible()&&this.list){this.doResize(e)}else{this.bufferSize=e}},doResize:function(e){if(!Ext.isDefined(this.listWidth)){var t=Math.max(e,this.minListWidth);this.list.setWidth(t);this.innerList.setWidth(t-this.list.getFrameWidth("lr"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=false}},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=true}},onBeforeLoad:function(){if(!this.hasFocus){return}this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"</div>":"");this.restrictHeight();this.selectedIndex=-1},onLoad:function(){if(!this.hasFocus){return}if(this.store.getCount()>0||this.listEmptyText){this.expand();this.restrictHeight();if(this.lastQuery==this.allQuery){if(this.editable){this.el.dom.select()}if(this.autoSelect!==false&&!this.selectByValue(this.value,true)){this.select(0,true)}}else{if(this.autoSelect!==false){this.selectNext()}if(this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE){this.taTask.delay(this.typeAheadDelay)}}}else{this.collapse()}},onTypeAhead:function(){if(this.store.getCount()>0){var e=this.store.getAt(0);var t=e.data[this.displayField];var n=t.length;var r=this.getRawValue().length;if(r!=n){this.setRawValue(t);this.selectText(r,t.length)}}},assertValue:function(){var e=this.getRawValue(),t;if(this.valueField&&Ext.isDefined(this.value)){t=this.findRecord(this.valueField,this.value)}if(!t||t.get(this.displayField)!=e){t=this.findRecord(this.displayField,e)}if(!t&&this.forceSelection){if(e.length>0&&e!=this.emptyText){this.el.dom.value=Ext.value(this.lastSelectionText,"");this.applyEmptyText()}else{this.clearValue()}}else{if(t&&this.valueField){if(this.value==e){return}e=t.get(this.valueField||this.displayField)}this.setValue(e)}},onSelect:function(e,t){if(this.fireEvent("beforeselect",this,e,t)!==false){this.setValue(e.data[this.valueField||this.displayField]);this.collapse();this.fireEvent("select",this,e,t)}},getName:function(){var e=this.hiddenField;return e&&e.name?e.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){if(this.valueField){return Ext.isDefined(this.value)?this.value:""}else{return Ext.form.ComboBox.superclass.getValue.call(this)}},clearValue:function(){if(this.hiddenField){this.hiddenField.value=""}this.setRawValue("");this.lastSelectionText="";this.applyEmptyText();this.value=""},setValue:function(e){var t=e;if(this.valueField){var n=this.findRecord(this.valueField,e);if(n){t=n.data[this.displayField]}else if(Ext.isDefined(this.valueNotFoundText)){t=this.valueNotFoundText}}this.lastSelectionText=t;if(this.hiddenField){this.hiddenField.value=Ext.value(e,"")}Ext.form.ComboBox.superclass.setValue.call(this,t);this.value=e;return this},findRecord:function(e,t){var n;if(this.store.getCount()>0){this.store.each(function(r){if(r.data[e]==t){n=r;return false}})}return n},onViewMove:function(e,t){this.inKeyMode=false},onViewOver:function(e,t){if(this.inKeyMode){return}var n=this.view.findItemFromChild(t);if(n){var r=this.view.indexOf(n);this.select(r,false)}},onViewClick:function(e){var t=this.view.getSelectedIndexes()[0],n=this.store,r=n.getAt(t);if(r){this.onSelect(r,t)}else{this.collapse()}if(e!==false){this.el.focus()}},restrictHeight:function(){this.innerList.dom.style.height="";var e=this.innerList.dom,t=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight,n=Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight),r=this.getPosition()[1]-Ext.getBody().getScroll().top,i=Ext.lib.Dom.getViewHeight()-r-this.getSize().height,s=Math.max(r,i,this.minHeight||0)-this.list.shadowOffset-t-5;n=Math.min(n,s,this.maxHeight);this.innerList.setHeight(n);this.list.beginUpdate();this.list.setHeight(n+t);this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.endUpdate()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(e,t){if(!Ext.isEmpty(e,true)){var n=this.findRecord(this.valueField||this.displayField,e);if(n){this.select(this.store.indexOf(n),t);return true}}return false},select:function(e,t){this.selectedIndex=e;this.view.select(e);if(t!==false){var n=this.view.getNode(e);if(n){this.innerList.scrollChildIntoView(n,false)}}},selectNext:function(){var e=this.store.getCount();if(e>0){if(this.selectedIndex==-1){this.select(0)}else if(this.selectedIndex<e-1){this.select(this.selectedIndex+1)}}},selectPrev:function(){var e=this.store.getCount();if(e>0){if(this.selectedIndex==-1){this.select(0)}else if(this.selectedIndex!==0){this.select(this.selectedIndex-1)}}},onKeyUp:function(e){var t=e.getKey();if(this.editable!==false&&this.readOnly!==true&&(t==e.BACKSPACE||!e.isSpecialKey())){this.lastKey=t;this.dqTask.delay(this.queryDelay)}Ext.form.ComboBox.superclass.onKeyUp.call(this,e)},validateBlur:function(){return!this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){this.assertValue()},postBlur:function(){Ext.form.ComboBox.superclass.postBlur.call(this);this.collapse();this.inKeyMode=false},doQuery:function(e,t){e=Ext.isEmpty(e)?"":e;var n={query:e,forceAll:t,combo:this,cancel:false};if(this.fireEvent("beforequery",n)===false||n.cancel){return false}e=n.query;t=n.forceAll;if(t===true||e.length>=this.minChars){if(this.lastQuery!==e){this.lastQuery=e;if(this.mode=="local"){this.selectedIndex=-1;if(t){this.store.clearFilter()}else{this.store.filter(this.displayField,e)}this.onLoad()}else{this.store.baseParams[this.queryParam]=e;this.store.load({params:this.getParams(e)});this.expand()}}else{this.selectedIndex=-1;this.onLoad()}}},getParams:function(e){var t={},n=this.store.paramNames;if(this.pageSize){t[n.start]=0;t[n.limit]=this.pageSize}return t},collapse:function(){if(!this.isExpanded()){return}this.list.hide();Ext.getDoc().un("mousewheel",this.collapseIf,this);Ext.getDoc().un("mousedown",this.collapseIf,this);this.fireEvent("collapse",this)},collapseIf:function(e){if(!this.isDestroyed&&!e.within(this.wrap)&&!e.within(this.list)){this.collapse()}},expand:function(){if(this.isExpanded()||!this.hasFocus){return}if(this.title||this.pageSize){this.assetHeight=0;if(this.title){this.assetHeight+=this.header.getHeight()}if(this.pageSize){this.assetHeight+=this.footer.getHeight()}}if(this.bufferSize){this.doResize(this.bufferSize);delete this.bufferSize}this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.setZIndex(this.getZIndex());this.list.show();if(Ext.isGecko2){this.innerList.setOverflow("auto")}this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf});this.fireEvent("expand",this)},onTriggerClick:function(){if(this.readOnly||this.disabled){return}if(this.isExpanded()){this.collapse();this.el.focus()}else{this.onFocus({});if(this.triggerAction=="all"){this.doQuery(this.allQuery,true)}else{this.doQuery(this.getRawValue())}this.el.focus()}}});Ext.reg("combo",Ext.form.ComboBox);Ext.form.Checkbox=Ext.extend(Ext.form.Field,{focusClass:undefined,fieldClass:"x-form-field",checked:false,boxLabel:"&#160;",defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},actionMode:"wrap",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this);this.addEvents("check")},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);if(!this.boxLabel&&!this.fieldLabel){this.el.alignTo(this.wrap,"c-c")}},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.mon(this.el,{scope:this,click:this.onClick,change:this.onClick})},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,onRender:function(e,t){Ext.form.Checkbox.superclass.onRender.call(this,e,t);if(this.inputValue!==undefined){this.el.dom.value=this.inputValue}this.wrap=this.el.wrap({cls:"x-form-check-wrap"});if(this.boxLabel){this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel})}if(this.checked){this.setValue(true)}else{this.checked=this.el.dom.checked}if(Ext.isIEQuirks){this.wrap.repaint()}this.resizeEl=this.positionEl=this.wrap},onDestroy:function(){Ext.destroy(this.wrap);Ext.form.Checkbox.superclass.onDestroy.call(this)},initValue:function(){this.originalValue=this.getValue()},getValue:function(){if(this.rendered){return this.el.dom.checked}return this.checked},onClick:function(){if(this.el.dom.checked!=this.checked){this.setValue(this.el.dom.checked)}},setValue:function(e){var t=this.checked,n=this.inputValue;if(e===false){this.checked=false}else{this.checked=e===true||e==="true"||e=="1"||(n?e==n:String(e).toLowerCase()=="on")}if(this.rendered){this.el.dom.checked=this.checked;this.el.dom.defaultChecked=this.checked}if(t!=this.checked){this.fireEvent("check",this,this.checked);if(this.handler){this.handler.call(this.scope||this,this,this.checked)}}return this}});Ext.reg("checkbox",Ext.form.Checkbox);Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkbox",groupCls:"x-form-check-group",initComponent:function(){this.addEvents("change");this.on("change",this.validate,this);Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(e,t){if(!this.el){var n={autoEl:{id:this.id},cls:this.groupCls,layout:"column",renderTo:e,bufferResize:false};var r={xtype:"container",defaultType:this.defaultType,layout:"form",defaults:{hideLabel:true,anchor:"100%"}};if(this.items[0].items){Ext.apply(n,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var i=0,s=this.items.length;i<s;i++){Ext.applyIf(this.items[i],r)}}else{var o,u=[];if(typeof this.columns=="string"){this.columns=this.items.length}if(!Ext.isArray(this.columns)){var a=[];for(var i=0;i<this.columns;i++){a.push(100/this.columns*.01)}this.columns=a}o=this.columns.length;for(var i=0;i<o;i++){var f=Ext.apply({items:[]},r);f[this.columns[i]<=1?"columnWidth":"width"]=this.columns[i];if(this.defaults){f.defaults=Ext.apply(f.defaults||{},this.defaults)}u.push(f)}if(this.vertical){var l=Math.ceil(this.items.length/o),c=0;for(var i=0,s=this.items.length;i<s;i++){if(i>0&&i%l==0){c++}if(this.items[i].fieldLabel){this.items[i].hideLabel=false}u[c].items.push(this.items[i])}}else{for(var i=0,s=this.items.length;i<s;i++){var h=i%o;if(this.items[i].fieldLabel){this.items[i].hideLabel=false}u[h].items.push(this.items[i])}}Ext.apply(n,{layoutConfig:{columns:o},items:u})}this.panel=new Ext.Container(n);this.panel.ownerCt=this;this.el=this.panel.getEl();if(this.forId&&this.itemCls){var p=this.el.up(this.itemCls).child("label",true);if(p){p.setAttribute("htmlFor",this.forId)}}var d=this.panel.findBy(function(e){return e.isFormField},this);this.items=new Ext.util.MixedCollection;this.items.addAll(d)}Ext.form.CheckboxGroup.superclass.onRender.call(this,e,t)},initValue:function(){if(this.value){this.setValue.apply(this,this.buffered?this.value:[this.value]);delete this.buffered;delete this.value}},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this);this.eachItem(function(e){e.on("check",this.fireChecked,this);e.inGroup=true})},doLayout:function(){if(this.rendered){this.panel.forceLayout=this.ownerCt.forceLayout;this.panel.doLayout()}},fireChecked:function(){var e=[];this.eachItem(function(t){if(t.checked){e.push(t)}});this.fireEvent("change",this,e)},getErrors:function(){var e=Ext.form.CheckboxGroup.superclass.getErrors.apply(this,arguments);if(!this.allowBlank){var t=true;this.eachItem(function(e){if(e.checked){return t=false}});if(t)e.push(this.blankText)}return e},isDirty:function(){if(this.disabled||!this.rendered){return false}var e=false;this.eachItem(function(t){if(t.isDirty()){e=true;return false}});return e},setReadOnly:function(e){if(this.rendered){this.eachItem(function(t){t.setReadOnly(e)})}this.readOnly=e},onDisable:function(){this.eachItem(function(e){e.disable()})},onEnable:function(){this.eachItem(function(e){e.enable()})},onResize:function(e,t){this.panel.setSize(e,t);this.panel.doLayout()},reset:function(){if(this.originalValue){this.eachItem(function(e){if(e.setValue){e.setValue(false);e.originalValue=e.getValue()}});this.resetOriginal=true;this.setValue(this.originalValue);delete this.resetOriginal}else{this.eachItem(function(e){if(e.reset){e.reset()}})}(function(){this.clearInvalid()}).defer(50,this)},setValue:function(){if(this.rendered){this.onSetValue.apply(this,arguments)}else{this.buffered=true;this.value=arguments}return this},onSetValue:function(e,t){if(arguments.length==1){if(Ext.isArray(e)){Ext.each(e,function(e,t){if(Ext.isObject(e)&&e.setValue){e.setValue(true);if(this.resetOriginal===true){e.originalValue=e.getValue()}}else{var n=this.items.itemAt(t);if(n){n.setValue(e)}}},this)}else if(Ext.isObject(e)){for(var n in e){var r=this.getBox(n);if(r){r.setValue(e[n])}}}else{this.setValueForItem(e)}}else{var r=this.getBox(e);if(r){r.setValue(t)}}},beforeDestroy:function(){Ext.destroy(this.panel);if(!this.rendered){Ext.destroy(this.items)}Ext.form.CheckboxGroup.superclass.beforeDestroy.call(this)},setValueForItem:function(e){e=String(e).split(",");this.eachItem(function(t){if(e.indexOf(t.inputValue)>-1){t.setValue(true)}})},getBox:function(e){var t=null;this.eachItem(function(n){if(e==n||n.dataIndex==e||n.id==e||n.getName()==e){t=n;return false}});return t},getValue:function(){var e=[];this.eachItem(function(t){if(t.checked){e.push(t)}});return e},eachItem:function(e,t){if(this.items&&this.items.each){this.items.each(e,t||this)}},getRawValue:Ext.emptyFn,setRawValue:Ext.emptyFn});Ext.reg("checkboxgroup",Ext.form.CheckboxGroup);Ext.form.CompositeField=Ext.extend(Ext.form.Field,{defaultMargins:"0 5 0 0",skipLastItemMargin:true,isComposite:true,combineErrors:true,labelConnector:", ",initComponent:function(){var e=[],t=this.items,n;for(var r=0,i=t.length;r<i;r++){n=t[r];if(!Ext.isEmpty(n.ref)){n.ref="../"+n.ref}e.push(n.fieldLabel);Ext.applyIf(n,this.defaults);if(!(r==i-1&&this.skipLastItemMargin)){Ext.applyIf(n,{margins:this.defaultMargins})}}this.fieldLabel=this.fieldLabel||this.buildLabel(e);this.fieldErrors=new Ext.util.MixedCollection(true,function(e){return e.field});this.fieldErrors.on({scope:this,add:this.updateInvalidMark,remove:this.updateInvalidMark,replace:this.updateInvalidMark});Ext.form.CompositeField.superclass.initComponent.apply(this,arguments);this.innerCt=new Ext.Container({layout:"hbox",items:this.items,cls:"x-form-composite",defaultMargins:"0 3 0 0",ownerCt:this});delete this.innerCt.ownerCt;var s=this.innerCt.findBy(function(e){return e.isFormField},this);this.items=new Ext.util.MixedCollection;this.items.addAll(s)},onRender:function(e,t){if(!this.el){var n=this.innerCt;n.render(e);this.innerCt.ownerCt=this;this.el=n.getEl();if(this.combineErrors){this.eachItem(function(e){Ext.apply(e,{markInvalid:this.onFieldMarkInvalid.createDelegate(this,[e],0),clearInvalid:this.onFieldClearInvalid.createDelegate(this,[e],0)})})}var r=this.el.parent().parent().child("label",true);if(r){r.setAttribute("for",this.items.items[0].id)}}Ext.form.CompositeField.superclass.onRender.apply(this,arguments)},onFieldMarkInvalid:function(e,t){var n=e.getName(),r={field:n,errorName:e.fieldLabel||n,error:t};this.fieldErrors.replace(n,r);if(!e.preventMark){e.el.addClass(e.invalidClass)}},onFieldClearInvalid:function(e){this.fieldErrors.removeKey(e.getName());e.el.removeClass(e.invalidClass)},updateInvalidMark:function(){var e=Ext.isIE6&&Ext.isStrict;if(this.fieldErrors.length==0){this.clearInvalid();if(e){this.clearInvalid.defer(50,this)}}else{var t=this.buildCombinedErrorMessage(this.fieldErrors.items);this.sortErrors();this.markInvalid(t);if(e){this.markInvalid(t)}}},validateValue:function(e,t){var n=true;this.eachItem(function(e){if(!e.isValid(t)){n=false}});return n},buildCombinedErrorMessage:function(e){var t=[],n;for(var r=0,i=e.length;r<i;r++){n=e[r];t.push(String.format("{0}: {1}",n.errorName,n.error))}return t.join("<br />")},sortErrors:function(){var e=this.items;this.fieldErrors.sort("ASC",function(t,n){var r=function(e){return function(t){return t.getName()==e}};var i=e.findIndexBy(r(t.field)),s=e.findIndexBy(r(n.field));return i<s?-1:1})},reset:function(){this.eachItem(function(e){e.reset()});(function(){this.clearInvalid()}).defer(50,this)},clearInvalidChildren:function(){this.eachItem(function(e){e.clearInvalid()})},buildLabel:function(e){return Ext.clean(e).join(this.labelConnector)},isDirty:function(){if(this.disabled||!this.rendered){return false}var e=false;this.eachItem(function(t){if(t.isDirty()){e=true;return false}});return e},eachItem:function(e,t){if(this.items&&this.items.each){this.items.each(e,t||this)}},onResize:function(e,t,n,r){var i=this.innerCt;if(this.rendered&&i.rendered){i.setSize(e,t)}Ext.form.CompositeField.superclass.onResize.apply(this,arguments)},doLayout:function(e,t){if(this.rendered){var n=this.innerCt;n.forceLayout=this.ownerCt.forceLayout;n.doLayout(e,t)}},beforeDestroy:function(){Ext.destroy(this.innerCt);Ext.form.CompositeField.superclass.beforeDestroy.call(this)},setReadOnly:function(e){if(e==undefined){e=true}e=!!e;if(this.rendered){this.eachItem(function(t){t.setReadOnly(e)})}this.readOnly=e},onShow:function(){Ext.form.CompositeField.superclass.onShow.call(this);this.doLayout()},onDisable:function(){this.eachItem(function(e){e.disable()})},onEnable:function(){this.eachItem(function(e){e.enable()})}});Ext.reg("compositefield",Ext.form.CompositeField);Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getGroupValue:function(){var e=this.el.up("form")||Ext.getBody();var t=e.child('input[name="'+this.el.dom.name+'"]:checked',true);return t?t.value:null},setValue:function(e){var t,n,r;if(typeof e=="boolean"){Ext.form.Radio.superclass.setValue.call(this,e)}else if(this.rendered){t=this.getCheckEl();r=t.child('input[name="'+this.el.dom.name+'"][value="'+e+'"]',true);if(r){Ext.getCmp(r.id).setValue(true)}}if(this.rendered&&this.checked){t=t||this.getCheckEl();n=this.getCheckEl().select('input[name="'+this.el.dom.name+'"]');n.each(function(e){if(e.dom.id!=this.id){Ext.getCmp(e.dom.id).setValue(false)}},this)}return this},getCheckEl:function(){if(this.inGroup){return this.el.up(".x-form-radio-group")}return this.el.up("form")||Ext.getBody()}});Ext.reg("radio",Ext.form.Radio);Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:true,blankText:"You must select one item in this group",defaultType:"radio",groupCls:"x-form-radio-group",getValue:function(){var e=null;this.eachItem(function(t){if(t.checked){e=t;return false}});return e},onSetValue:function(e,t){if(arguments.length>1){var n=this.getBox(e);if(n){n.setValue(t);if(n.checked){this.eachItem(function(e){if(e!==n){e.setValue(false)}})}}}else{this.setValueForItem(e)}},setValueForItem:function(e){e=String(e).split(",")[0];this.eachItem(function(t){t.setValue(e==t.inputValue)})},fireChecked:function(){if(!this.checkTask){this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)}this.checkTask.delay(10)},bufferChecked:function(){var e=null;this.eachItem(function(t){if(t.checked){e=t;return false}});this.fireEvent("change",this,e)},onDestroy:function(){if(this.checkTask){this.checkTask.cancel();this.checkTask=null}Ext.form.RadioGroup.superclass.onDestroy.call(this)}});Ext.reg("radiogroup",Ext.form.RadioGroup);Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",shouldLayout:false,onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg("hidden",Ext.form.Hidden);Ext.form.BasicForm=Ext.extend(Ext.util.Observable,{constructor:function(e,t){Ext.apply(this,t);if(Ext.isString(this.paramOrder)){this.paramOrder=this.paramOrder.split(/[\s,|]/)}this.items=new Ext.util.MixedCollection(false,function(e){return e.getItemId()});this.addEvents("beforeaction","actionfailed","actioncomplete");if(e){this.initEl(e)}Ext.form.BasicForm.superclass.constructor.call(this)},timeout:30,paramOrder:undefined,paramsAsHash:false,waitTitle:"Please Wait...",activeAction:null,trackResetOnLoad:false,initEl:function(e){this.el=Ext.get(e);this.id=this.el.id||Ext.id();if(!this.standardSubmit){this.el.on("submit",this.onSubmit,this)}this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(e){e.stopEvent()},destroy:function(e){if(e!==true){this.items.each(function(e){Ext.destroy(e)});Ext.destroy(this.el)}this.items.clear();this.purgeListeners()},isValid:function(){var e=true;this.items.each(function(t){if(!t.validate()){e=false}});return e},isDirty:function(){var e=false;this.items.each(function(t){if(t.isDirty()){e=true;return false}});return e},doAction:function(e,t){if(Ext.isString(e)){e=new Ext.form.Action.ACTION_TYPES[e](this,t)}if(this.fireEvent("beforeaction",this,e)!==false){this.beforeAction(e);e.run.defer(100,e)}return this},submit:function(e){e=e||{};if(this.standardSubmit){var t=e.clientValidation===false||this.isValid();if(t){var n=this.el.dom;if(this.url&&Ext.isEmpty(n.action)){n.action=this.url}n.submit()}return t}var r=String.format("{0}submit",this.api?"direct":"");this.doAction(r,e);return this},load:function(e){var t=String.format("{0}load",this.api?"direct":"");this.doAction(t,e);return this},updateRecord:function(e){e.beginEdit();var t=e.fields,n,r;t.each(function(t){n=this.findField(t.name);if(n){r=n.getValue();if(Ext.type(r)!==false&&r.getGroupValue){r=r.getGroupValue()}else if(n.eachItem){r=[];n.eachItem(function(e){r.push(e.getValue())})}e.set(t.name,r)}},this);e.endEdit();return this},loadRecord:function(e){this.setValues(e.data);return this},beforeAction:function(e){this.items.each(function(e){if(e.isFormField&&e.syncValue){e.syncValue()}});var t=e.options;if(t.waitMsg){if(this.waitMsgTarget===true){this.el.mask(t.waitMsg,"x-mask-loading")}else if(this.waitMsgTarget){this.waitMsgTarget=Ext.get(this.waitMsgTarget);this.waitMsgTarget.mask(t.waitMsg,"x-mask-loading")}else{Ext.MessageBox.wait(t.waitMsg,t.waitTitle||this.waitTitle)}}},afterAction:function(e,t){this.activeAction=null;var n=e.options;if(n.waitMsg){if(this.waitMsgTarget===true){this.el.unmask()}else if(this.waitMsgTarget){this.waitMsgTarget.unmask()}else{Ext.MessageBox.updateProgress(1);Ext.MessageBox.hide()}}if(t){if(n.reset){this.reset()}Ext.callback(n.success,n.scope,[this,e]);this.fireEvent("actioncomplete",this,e)}else{Ext.callback(n.failure,n.scope,[this,e]);this.fireEvent("actionfailed",this,e)}},findField:function(e){var t=this.items.get(e);if(!Ext.isObject(t)){var n=function(r){if(r.isFormField){if(r.dataIndex==e||r.id==e||r.getName()==e){t=r;return false}else if(r.isComposite){return r.items.each(n)}else if(r instanceof Ext.form.CheckboxGroup&&r.rendered){return r.eachItem(n)}}};this.items.each(n)}return t||null},markInvalid:function(e){if(Ext.isArray(e)){for(var t=0,n=e.length;t<n;t++){var r=e[t];var i=this.findField(r.id);if(i){i.markInvalid(r.msg)}}}else{var s,o;for(o in e){if(!Ext.isFunction(e[o])&&(s=this.findField(o))){s.markInvalid(e[o])}}}return this},setValues:function(e){if(Ext.isArray(e)){for(var t=0,n=e.length;t<n;t++){var r=e[t];var i=this.findField(r.id);if(i){i.setValue(r.value);if(this.trackResetOnLoad){i.originalValue=i.getValue()}}}}else{var s,o;for(o in e){if(!Ext.isFunction(e[o])&&(s=this.findField(o))){s.setValue(e[o]);if(this.trackResetOnLoad){s.originalValue=s.getValue()}}}}return this},getValues:function(e){var t=Ext.lib.Ajax.serializeForm(this.el.dom);if(e===true){return t}return Ext.urlDecode(t)},getFieldValues:function(e){var t={},n,r,i;this.items.each(function(s){if(!s.disabled&&(e!==true||s.isDirty())){n=s.getName();r=t[n];i=s.getValue();if(Ext.isDefined(r)){if(Ext.isArray(r)){t[n].push(i)}else{t[n]=[r,i]}}else{t[n]=i}}});return t},clearInvalid:function(){this.items.each(function(e){e.clearInvalid()});return this},reset:function(){this.items.each(function(e){e.reset()});return this},add:function(){this.items.addAll(Array.prototype.slice.call(arguments,0));return this},remove:function(e){this.items.remove(e);return this},cleanDestroyed:function(){this.items.filterBy(function(e){return!!e.isDestroyed}).each(this.remove,this)},render:function(){this.items.each(function(e){if(e.isFormField&&!e.rendered&&document.getElementById(e.id)){e.applyToMarkup(e.id)}});return this},applyToFields:function(e){this.items.each(function(t){Ext.apply(t,e)});return this},applyIfToFields:function(e){this.items.each(function(t){Ext.applyIf(t,e)});return this},callFieldMethod:function(e,t){t=t||[];this.items.each(function(n){if(Ext.isFunction(n[e])){n[e].apply(n,t)}});return this}});Ext.BasicForm=Ext.form.BasicForm;Ext.FormPanel=Ext.extend(Ext.Panel,{minButtonWidth:75,labelAlign:"left",monitorValid:false,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm();Ext.FormPanel.superclass.initComponent.call(this);this.bodyCfg={tag:"form",cls:this.baseCls+"-body",method:this.method||"POST",id:this.formId||Ext.id()};if(this.fileUpload){this.bodyCfg.enctype="multipart/form-data"}this.initItems();this.addEvents("clientvalidation");this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){var e=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,e)},initFields:function(){var e=this.form;var t=this;var n=function(r){if(t.isField(r)){e.add(r)}else if(r.findBy&&r!=t){t.applySettings(r);if(r.items&&r.items.each){r.items.each(n,this)}}};this.items.each(n,this)},applySettings:function(e){var t=e.ownerCt;Ext.applyIf(e,{labelAlign:t.labelAlign,labelWidth:t.labelWidth,itemCls:t.itemCls})},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(e,t){this.initFields();Ext.FormPanel.superclass.onRender.call(this,e,t);this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring();this.form.destroy(true);Ext.FormPanel.superclass.beforeDestroy.call(this)},isField:function(e){return!!e.setValue&&!!e.getValue&&!!e.markInvalid&&!!e.clearInvalid},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this);this.on({scope:this,add:this.onAddEvent,remove:this.onRemoveEvent});if(this.monitorValid){this.startMonitoring()}},onAdd:function(e){Ext.FormPanel.superclass.onAdd.call(this,e);this.processAdd(e)},onAddEvent:function(e,t){if(e!==this){this.processAdd(t)}},processAdd:function(e){if(this.isField(e)){this.form.add(e)}else if(e.findBy){this.applySettings(e);this.form.add.apply(this.form,e.findBy(this.isField))}},onRemove:function(e){Ext.FormPanel.superclass.onRemove.call(this,e);this.processRemove(e)},onRemoveEvent:function(e,t){if(e!==this){this.processRemove(t)}},processRemove:function(e){if(!this.destroying){if(this.isField(e)){this.form.remove(e)}else if(e.findBy){Ext.each(e.findBy(this.isField),this.form.remove,this.form);this.form.cleanDestroyed()}}},startMonitoring:function(){if(!this.validTask){this.validTask=new Ext.util.TaskRunner;this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this})}},stopMonitoring:function(){if(this.validTask){this.validTask.stopAll();this.validTask=null}},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this);if(this.form){this.form.items.each(function(){this.disable()})}},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this);if(this.form){this.form.items.each(function(){this.enable()})}},bindHandler:function(){var e=true;this.form.items.each(function(t){if(!t.isValid(true)){e=false;return false}});if(this.fbar){var t=this.fbar.items.items;for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i.formBind===true&&i.disabled===e){i.setDisabled(!e)}}}this.fireEvent("clientvalidation",this,e)}});Ext.reg("form",Ext.FormPanel);Ext.form.FormPanel=Ext.FormPanel;Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",animCollapse:false,onRender:function(e,t){if(!this.el){this.el=document.createElement("fieldset");this.el.id=this.id;if(this.title||this.header||this.checkboxToggle){this.el.appendChild(document.createElement("legend")).className=this.baseCls+"-header"}}Ext.form.FieldSet.superclass.onRender.call(this,e,t);if(this.checkboxToggle){var n=typeof this.checkboxToggle=="object"?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(n);this.checkbox.dom.checked=!this.collapsed;this.mon(this.checkbox,"click",this.onCheckClick,this)}},onCollapse:function(e,t){if(this.checkbox){this.checkbox.dom.checked=false}Ext.form.FieldSet.superclass.onCollapse.call(this,e,t)},onExpand:function(e,t){if(this.checkbox){this.checkbox.dom.checked=true}Ext.form.FieldSet.superclass.onExpand.call(this,e,t)},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()}});Ext.reg("fieldset",Ext.form.FieldSet);Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http:/"+"/",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:Ext.isOpera||Ext.isIE6?"&#160;":"&#8203;",actionMode:"wrap",validationEvent:false,deferHeight:true,initialized:false,activated:false,sourceEditMode:false,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange");Ext.form.HtmlEditor.superclass.initComponent.call(this)},createFontOptions:function(){var e=[],t=this.fontFamilies,n,r;for(var i=0,s=t.length;i<s;i++){n=t[i];r=n.toLowerCase();e.push('<option value="',r,'" style="font-family:',n,';"',this.defaultFont==r?' selected="true">':">",n,"</option>")}return e.join("")},createToolbar:function(e){function r(t,r,i){return{itemId:t,cls:"x-btn-icon",iconCls:"x-edit-"+t,enableToggle:r!==false,scope:e,handler:i||e.relayBtnCmd,clickEvent:"mousedown",tooltip:n?e.buttonTips[t]||undefined:undefined,overflowText:e.buttonTips[t].title||undefined,tabIndex:-1}}var t=[];var n=Ext.QuickTips&&Ext.QuickTips.isEnabled();if(this.enableFont&&!Ext.isSafari2){var i=new Ext.Toolbar.Item({autoEl:{tag:"select",cls:"x-font-select",html:this.createFontOptions()}});t.push(i,"-")}if(this.enableFormat){t.push(r("bold"),r("italic"),r("underline"))}if(this.enableFontSize){t.push("-",r("increasefontsize",false,this.adjustFont),r("decreasefontsize",false,this.adjustFont))}if(this.enableColors){t.push("-",{itemId:"forecolor",cls:"x-btn-icon",iconCls:"x-edit-forecolor",clickEvent:"mousedown",tooltip:n?e.buttonTips.forecolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,listeners:{scope:this,select:function(e,t){this.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+t:t);this.deferFocus()}},clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon",iconCls:"x-edit-backcolor",clickEvent:"mousedown",tooltip:n?e.buttonTips.backcolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,listeners:{scope:this,select:function(e,t){if(Ext.isGecko){this.execCmd("useCSS",false);this.execCmd("hilitecolor",t);this.execCmd("useCSS",true);this.deferFocus()}else{this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+t:t);this.deferFocus()}}},clickEvent:"mousedown"})})}if(this.enableAlignments){t.push("-",r("justifyleft"),r("justifycenter"),r("justifyright"))}if(!Ext.isSafari2){if(this.enableLinks){t.push("-",r("createlink",false,this.createLink))}if(this.enableLists){t.push("-",r("insertorderedlist"),r("insertunorderedlist"))}if(this.enableSourceEdit){t.push("-",r("sourceedit",true,function(e){this.toggleSourceEdit(!this.sourceEditMode)}))}}var s=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild,items:t});if(i){this.fontSelect=i.el;this.mon(this.fontSelect,"change",function(){var e=this.fontSelect.dom.value;this.relayCmd("fontname",e);this.deferFocus()},this)}this.mon(s.el,"click",function(e){e.preventDefault()});this.tb=s;this.tb.doLayout()},onDisable:function(){this.wrap.mask();Ext.form.HtmlEditor.superclass.onDisable.call(this)},onEnable:function(){this.wrap.unmask();Ext.form.HtmlEditor.superclass.onEnable.call(this)},setReadOnly:function(e){Ext.form.HtmlEditor.superclass.setReadOnly.call(this,e);if(this.initialized){if(Ext.isIE){this.getEditorBody().contentEditable=!e}else{this.setDesignMode(!e)}var t=this.getEditorBody();if(t){t.style.cursor=this.readOnly?"default":"text"}this.disableItems(e)}},getDocMarkup:function(){var e=Ext.fly(this.iframe).getHeight()-this.iframePad*2;return String.format('<html><head><style type="text/css">body{border: 0; margin: 0; padding: {0}px; height: {1}px; cursor: text}</style></head><body></body></html>',this.iframePad,e)},getEditorBody:function(){var e=this.getDoc();return e.body||e.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:this.iframe.contentDocument||this.getWin().document},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(e,t){Ext.form.HtmlEditor.superclass.onRender.call(this,e,t);this.el.dom.style.border="0 none";this.el.dom.setAttribute("tabIndex",-1);this.el.addClass("x-hidden");if(Ext.isIE){this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;")}this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}});this.createToolbar(this);this.disableItems(true);this.tb.doLayout();this.createIFrame();if(!this.width){var n=this.el.getSize();this.setSize(n.width,this.height||n.height)}this.resizeEl=this.positionEl=this.wrap},createIFrame:function(){var e=document.createElement("iframe");e.name=Ext.id();e.frameBorder="0";e.style.overflow="auto";e.src=Ext.SSL_SECURE_URL;this.wrap.dom.appendChild(e);this.iframe=e;this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100})},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);var e=this.getDoc();this.win=this.getWin();e.open();e.write(this.getDocMarkup());e.close();this.readyTask={run:function(){var e=this.getDoc();if(e.body||e.readyState=="complete"){Ext.TaskMgr.stop(this.readyTask);this.setDesignMode(true);this.initEditor.defer(10,this)}},interval:10,duration:1e4,scope:this};Ext.TaskMgr.start(this.readyTask)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var e=this.getDoc();if(!e){return}if(!e.editorInitialized||this.getDesignMode()!="on"){this.initFrame()}}},setDesignMode:function(e){var t=this.getDoc();if(t){if(this.readOnly){e=false}t.designMode=/on|true/i.test(String(e).toLowerCase())?"on":"off"}},getDesignMode:function(){var e=this.getDoc();if(!e){return""}return String(e.designMode).toLowerCase()},disableItems:function(e){if(this.fontSelect){this.fontSelect.dom.disabled=e}this.tb.items.each(function(t){if(t.getItemId()!="sourceedit"){t.setDisabled(e)}})},onResize:function(e,t){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.iframe){if(Ext.isNumber(e)){var n=e-this.wrap.getFrameWidth("lr");this.el.setWidth(n);this.tb.setWidth(n);this.iframe.style.width=Math.max(n,0)+"px"}if(Ext.isNumber(t)){var r=t-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(r);this.iframe.style.height=Math.max(r,0)+"px";var i=this.getEditorBody();if(i){i.style.height=Math.max(r-this.iframePad*2,0)+"px"}}}},toggleSourceEdit:function(e){var t,n;if(e===undefined){e=!this.sourceEditMode}this.sourceEditMode=e===true;var r=this.tb.getComponent("sourceedit");if(r.pressed!==this.sourceEditMode){r.toggle(this.sourceEditMode);if(!r.xtbHidden){return}}if(this.sourceEditMode){this.previousSize=this.getSize();t=Ext.get(this.iframe).getHeight();this.disableItems(true);this.syncValue();this.iframe.className="x-hidden";this.el.removeClass("x-hidden");this.el.dom.removeAttribute("tabIndex");this.el.focus();this.el.dom.style.height=t+"px"}else{n=parseInt(this.el.dom.style.height,10);if(this.initialized){this.disableItems(this.readOnly)}this.pushValue();this.iframe.className="";this.el.addClass("x-hidden");this.el.dom.setAttribute("tabIndex",-1);this.deferFocus();this.setSize(this.previousSize);delete this.previousSize;this.iframe.style.height=n+"px"}this.fireEvent("editmodechange",this,this.sourceEditMode)},createLink:function(){var e=prompt(this.createLinkText,this.defaultLinkValue);if(e&&e!="http:/"+"/"){this.relayCmd("createlink",e)}},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(e){Ext.form.HtmlEditor.superclass.setValue.call(this,e);this.pushValue();return this},cleanHtml:function(e){e=String(e);if(Ext.isWebKit){e=e.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")}if(e.charCodeAt(0)==this.defaultValue.replace(/\D/g,"")){e=e.substring(1)}return e},syncValue:function(){if(this.initialized){var e=this.getEditorBody();var t=e.innerHTML;if(Ext.isWebKit){var n=e.getAttribute("style");var r=n.match(/text-align:(.*?);/i);if(r&&r[1]){t='<div style="'+r[0]+'">'+t+"</div>"}}t=this.cleanHtml(t);if(this.fireEvent("beforesync",this,t)!==false){this.el.dom.value=t;this.fireEvent("sync",this,t)}}},getValue:function(){this[this.sourceEditMode?"pushValue":"syncValue"]();return Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var e=this.el.dom.value;if(!this.activated&&e.length<1){e=this.defaultValue}if(this.fireEvent("beforepush",this,e)!==false){this.getEditorBody().innerHTML=e;if(Ext.isGecko){this.setDesignMode(false);this.setDesignMode(true)}this.fireEvent("push",this,e)}}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){if(this.win&&!this.sourceEditMode){this.win.focus()}else{this.el.focus()}},initEditor:function(){try{var e=this.getEditorBody(),t=this.el.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),n,r;t["background-attachment"]="fixed";e.bgProperties="fixed";Ext.DomHelper.applyStyles(e,t);n=this.getDoc();if(n){try{Ext.EventManager.removeAll(n)}catch(i){}}r=this.onEditorEvent.createDelegate(this);Ext.EventManager.on(n,{mousedown:r,dblclick:r,click:r,keyup:r,buffer:100});if(Ext.isGecko){Ext.EventManager.on(n,"keypress",this.applyCommand,this)}if(Ext.isIE||Ext.isWebKit||Ext.isOpera){Ext.EventManager.on(n,"keydown",this.fixKeys,this)}n.editorInitialized=true;this.initialized=true;this.pushValue();this.setReadOnly(this.readOnly);this.fireEvent("initialize",this)}catch(i){}},beforeDestroy:function(){if(this.monitorTask){Ext.TaskMgr.stop(this.monitorTask)}if(this.readyTask){Ext.TaskMgr.stop(this.readyTask)}if(this.rendered){Ext.destroy(this.tb);var e=this.getDoc();Ext.EventManager.removeFromSpecialCache(e);if(e){try{Ext.EventManager.removeAll(e);for(var t in e){delete e[t]}}catch(n){}}if(this.wrap){this.wrap.dom.innerHTML="";this.wrap.remove()}}Ext.form.HtmlEditor.superclass.beforeDestroy.call(this)},onFirstFocus:function(){this.activated=true;this.disableItems(this.readOnly);if(Ext.isGecko){this.win.focus();var e=this.win.getSelection();if(!e.focusNode||e.focusNode.nodeType!=3){var t=e.getRangeAt(0);t.selectNodeContents(this.getEditorBody());t.collapse(true);this.deferFocus()}try{this.execCmd("useCSS",true);this.execCmd("styleWithCSS",false)}catch(n){}}this.fireEvent("activate",this)},adjustFont:function(e){var t=e.getItemId()=="increasefontsize"?1:-1,n=this.getDoc(),r=parseInt(n.queryCommandValue("FontSize")||2,10);if(Ext.isSafari&&!Ext.isSafari2||Ext.isChrome||Ext.isAir){if(r<=10){r=1+t}else if(r<=13){r=2+t}else if(r<=16){r=3+t}else if(r<=18){r=4+t}else if(r<=24){r=5+t}else{r=6+t}r=r.constrain(1,6)}else{if(Ext.isSafari){t*=2}r=Math.max(1,r+t)+(Ext.isSafari?"px":0)}this.execCmd("FontSize",r)},onEditorEvent:function(e){this.updateToolbar()},updateToolbar:function(){if(this.readOnly){return}if(!this.activated){this.onFirstFocus();return}var e=this.tb.items.map,t=this.getDoc();if(this.enableFont&&!Ext.isSafari2){var n=(t.queryCommandValue("FontName")||this.defaultFont).toLowerCase();if(n!=this.fontSelect.dom.value){this.fontSelect.dom.value=n}}if(this.enableFormat){e.bold.toggle(t.queryCommandState("bold"));e.italic.toggle(t.queryCommandState("italic"));e.underline.toggle(t.queryCommandState("underline"))}if(this.enableAlignments){e.justifyleft.toggle(t.queryCommandState("justifyleft"));e.justifycenter.toggle(t.queryCommandState("justifycenter"));e.justifyright.toggle(t.queryCommandState("justifyright"))}if(!Ext.isSafari2&&this.enableLists){e.insertorderedlist.toggle(t.queryCommandState("insertorderedlist"));e.insertunorderedlist.toggle(t.queryCommandState("insertunorderedlist"))}Ext.menu.MenuMgr.hideAll();this.syncValue()},relayBtnCmd:function(e){this.relayCmd(e.getItemId())},relayCmd:function(e,t){(function(){this.focus();this.execCmd(e,t);this.updateToolbar()}).defer(10,this)},execCmd:function(e,t){var n=this.getDoc();n.execCommand(e,false,t===undefined?null:t);this.syncValue()},applyCommand:function(e){if(e.ctrlKey){var t=e.getCharCode(),n;if(t>0){t=String.fromCharCode(t);switch(t){case"b":n="bold";break;case"i":n="italic";break;case"u":n="underline";break}if(n){this.win.focus();this.execCmd(n);this.deferFocus();e.preventDefault()}}}},insertAtCursor:function(e){if(!this.activated){return}if(Ext.isIE){this.win.focus();var t=this.getDoc(),n=t.selection.createRange();if(n){n.pasteHTML(e);this.syncValue();this.deferFocus()}}else{this.win.focus();this.execCmd("InsertHTML",e);this.deferFocus()}},fixKeys:function(){if(Ext.isIE){return function(e){var t=e.getKey(),n=this.getDoc(),r;if(t==e.TAB){e.stopEvent();r=n.selection.createRange();if(r){r.collapse(true);r.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus()}}else if(t==e.ENTER){r=n.selection.createRange();if(r){var i=r.parentElement();if(!i||i.tagName.toLowerCase()!="li"){e.stopEvent();r.pasteHTML("<br />");r.collapse(false);r.select()}}}}}else if(Ext.isOpera){return function(e){var t=e.getKey();if(t==e.TAB){e.stopEvent();this.win.focus();this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus()}}}else if(Ext.isWebKit){return function(e){var t=e.getKey();if(t==e.TAB){e.stopEvent();this.execCmd("InsertText","	");this.deferFocus()}else if(t==e.ENTER){e.stopEvent();this.execCmd("InsertHtml","<br /><br />");this.deferFocus()}}}}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}});Ext.reg("htmleditor",Ext.form.HtmlEditor);Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:undefined,maxValue:undefined,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,mode:"local",triggerAction:"all",typeAhead:false,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){if(Ext.isDefined(this.minValue)){this.setMinValue(this.minValue,true)}if(Ext.isDefined(this.maxValue)){this.setMaxValue(this.maxValue,true)}if(!this.store){this.generateStore(true)}Ext.form.TimeField.superclass.initComponent.call(this)},setMinValue:function(e,t){this.setLimit(e,true,t);return this},setMaxValue:function(e,t){this.setLimit(e,false,t);return this},generateStore:function(e){var t=this.minValue||(new Date(this.initDate)).clearTime(),n=this.maxValue||(new Date(this.initDate)).clearTime().add("mi",24*60-1),r=[];while(t<=n){r.push(t.dateFormat(this.format));t=t.add("mi",this.increment)}this.bindStore(r,e)},setLimit:function(e,t,n){var r;if(Ext.isString(e)){r=this.parseDate(e)}else if(Ext.isDate(e)){r=e}if(r){var i=(new Date(this.initDate)).clearTime();i.setHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds());this[t?"minValue":"maxValue"]=i;if(!n){this.generateStore()}}},getValue:function(){var e=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(e))||""},setValue:function(e){return Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(e)))},validateValue:Ext.form.DateField.prototype.validateValue,formatDate:Ext.form.DateField.prototype.formatDate,parseDate:function(e){if(!e||Ext.isDate(e)){return e}var t=this.initDate+" ",n=this.initDateFormat+" ",r=Date.parseDate(t+e,n+this.format),i=this.altFormats;if(!r&&i){if(!this.altFormatsArray){this.altFormatsArray=i.split("|")}for(var s=0,o=this.altFormatsArray,u=o.length;s<u&&!r;s++){r=Date.parseDate(t+e,n+o[s])}}return r}});Ext.reg("timefield",Ext.form.TimeField);Ext.form.SliderField=Ext.extend(Ext.form.Field,{useTips:true,tipText:null,actionMode:"wrap",initComponent:function(){var e=Ext.copyTo({id:this.id+"-slider"},this.initialConfig,["vertical","minValue","maxValue","decimalPrecision","keyIncrement","increment","clickToChange","animate"]);if(this.useTips){var t=this.tipText?{getText:this.tipText}:{};e.plugins=[new Ext.slider.Tip(t)]}this.slider=new Ext.Slider(e);Ext.form.SliderField.superclass.initComponent.call(this)},onRender:function(e,t){this.autoCreate={id:this.id,name:this.name,type:"hidden",tag:"input"};Ext.form.SliderField.superclass.onRender.call(this,e,t);this.wrap=this.el.wrap({cls:"x-form-field-wrap"});this.resizeEl=this.positionEl=this.wrap;this.slider.render(this.wrap)},onResize:function(e,t,n,r){Ext.form.SliderField.superclass.onResize.call(this,e,t,n,r);this.slider.setSize(e,t)},initEvents:function(){Ext.form.SliderField.superclass.initEvents.call(this);this.slider.on("change",this.onChange,this)},onChange:function(e,t){this.setValue(t,undefined,true)},onEnable:function(){Ext.form.SliderField.superclass.onEnable.call(this);this.slider.enable()},onDisable:function(){Ext.form.SliderField.superclass.onDisable.call(this);this.slider.disable()},beforeDestroy:function(){Ext.destroy(this.slider);Ext.form.SliderField.superclass.beforeDestroy.call(this)},alignErrorIcon:function(){this.errorIcon.alignTo(this.slider.el,"tl-tr",[2,0])},setMinValue:function(e){this.slider.setMinValue(e);return this},setMaxValue:function(e){this.slider.setMaxValue(e);return this},setValue:function(e,t,n){if(!n){this.slider.setValue(e,t)}return Ext.form.SliderField.superclass.setValue.call(this,this.slider.getValue())},getValue:function(){return this.slider.getValue()}});Ext.reg("sliderfield",Ext.form.SliderField);Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(e,t){if(!this.el){this.el=document.createElement("label");this.el.id=this.getId();this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):this.html||"";if(this.forId){this.el.setAttribute("for",this.forId)}}Ext.form.Label.superclass.onRender.call(this,e,t)},setText:function(e,t){var n=t===false;this[!n?"text":"html"]=e;delete this[n?"text":"html"];if(this.rendered){this.el.dom.innerHTML=t!==false?Ext.util.Format.htmlEncode(e):e}return this}});Ext.reg("label",Ext.form.Label);Ext.form.Action=function(e,t){this.form=e;this.options=t||{}};Ext.form.Action.CLIENT_INVALID="client";Ext.form.Action.SERVER_INVALID="server";Ext.form.Action.CONNECT_FAILURE="connect";Ext.form.Action.LOAD_FAILURE="load";Ext.form.Action.prototype={type:"default",run:function(e){},success:function(e){},handleResponse:function(e){},failure:function(e){this.response=e;this.failureType=Ext.form.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(e){this.response=e;if(!e.responseText&&!e.responseXML){return true}this.result=this.handleResponse(e);return this.result},decodeResponse:function(e){try{return Ext.decode(e.responseText)}catch(t){return false}},getUrl:function(e){var t=this.options.url||this.form.url||this.form.el.dom.action;if(e){var n=this.getParams();if(n){t=Ext.urlAppend(t,n)}}return t},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var e=this.form.baseParams;var t=this.options.params;if(t){if(typeof t=="object"){t=Ext.urlEncode(Ext.applyIf(t,e))}else if(typeof t=="string"&&e){t+="&"+Ext.urlEncode(e)}}else if(e){t=Ext.urlEncode(e)}return t},createCallback:function(e){var e=e||{};return{success:this.success,failure:this.failure,scope:this,timeout:e.timeout*1e3||this.form.timeout*1e3,upload:this.form.fileUpload?this.success:undefined}}};Ext.form.Action.Submit=function(e,t){Ext.form.Action.Submit.superclass.constructor.call(this,e,t)};Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var e=this.options,t=this.getMethod(),n=t=="GET";if(e.clientValidation===false||this.form.isValid()){if(e.submitEmptyText===false){var r=this.form.items,i=[],s=function(e){if(e.el.getValue()==e.emptyText){i.push(e);e.el.dom.value=""}if(e.isComposite&&e.rendered){e.items.each(s)}};r.each(s)}Ext.Ajax.request(Ext.apply(this.createCallback(e),{form:this.form.el.dom,url:this.getUrl(n),method:t,headers:e.headers,params:!n?this.getParams():null,isUpload:this.form.fileUpload}));if(e.submitEmptyText===false){Ext.each(i,function(e){if(e.applyEmptyText){e.applyEmptyText()}})}}else if(e.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}},success:function(e){var t=this.processResponse(e);if(t===true||t.success){this.form.afterAction(this,true);return}if(t.errors){this.form.markInvalid(t.errors)}this.failureType=Ext.form.Action.SERVER_INVALID;this.form.afterAction(this,false)},handleResponse:function(e){if(this.form.errorReader){var t=this.form.errorReader.read(e);var n=[];if(t.records){for(var r=0,i=t.records.length;r<i;r++){var s=t.records[r];n[r]=s.data}}if(n.length<1){n=null}return{success:t.success,errors:n}}return this.decodeResponse(e)}});Ext.form.Action.Load=function(e,t){Ext.form.Action.Load.superclass.constructor.call(this,e,t);this.reader=this.form.reader};Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(false),headers:this.options.headers,params:this.getParams()}))},success:function(e){var t=this.processResponse(e);if(t===true||!t.success||!t.data){this.failureType=Ext.form.Action.LOAD_FAILURE;this.form.afterAction(this,false);return}this.form.clearInvalid();this.form.setValues(t.data);this.form.afterAction(this,true)},handleResponse:function(e){if(this.form.reader){var t=this.form.reader.read(e);var n=t.records&&t.records[0]?t.records[0].data:null;return{success:t.success,data:n}}return this.decodeResponse(e)}});Ext.form.Action.DirectLoad=Ext.extend(Ext.form.Action.Load,{constructor:function(e,t){Ext.form.Action.DirectLoad.superclass.constructor.call(this,e,t)},type:"directload",run:function(){var e=this.getParams();e.push(this.success,this);this.form.api.load.apply(window,e)},getParams:function(){var e=[],t={};var n=this.form.baseParams;var r=this.options.params;Ext.apply(t,r,n);var i=this.form.paramOrder;if(i){for(var s=0,o=i.length;s<o;s++){e.push(t[i[s]])}}else if(this.form.paramsAsHash){e.push(t)}return e},processResponse:function(e){this.result=e;return e},success:function(e,t){if(t.type==Ext.Direct.exceptions.SERVER){e={}}Ext.form.Action.DirectLoad.superclass.success.call(this,e)}});Ext.form.Action.DirectSubmit=Ext.extend(Ext.form.Action.Submit,{constructor:function(e,t){Ext.form.Action.DirectSubmit.superclass.constructor.call(this,e,t)},type:"directsubmit",run:function(){var e=this.options;if(e.clientValidation===false||this.form.isValid()){this.success.params=this.getParams();this.form.api.submit(this.form.el.dom,this.success,this)}else if(e.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}},getParams:function(){var e={};var t=this.form.baseParams;var n=this.options.params;Ext.apply(e,n,t);return e},processResponse:function(e){this.result=e;return e},success:function(e,t){if(t.type==Ext.Direct.exceptions.SERVER){e={}}Ext.form.Action.DirectSubmit.superclass.success.call(this,e)}});Ext.form.Action.ACTION_TYPES={load:Ext.form.Action.Load,submit:Ext.form.Action.Submit,directload:Ext.form.Action.DirectLoad,directsubmit:Ext.form.Action.DirectSubmit};Ext.form.VTypes=function(){var e=/^[a-zA-Z_]+$/,t=/^[a-zA-Z0-9_]+$/,n=/^(\w+)([\-+.\'][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,r=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{email:function(e){return n.test(e)},emailText:'This field should be an e-mail address in the format "user@example.com"',emailMask:/[a-z0-9_\.\-\+\'@]/i,url:function(e){return r.test(e)},urlText:'This field should be a URL in the format "http:/'+'/www.example.com"',alpha:function(t){return e.test(t)},alphaText:"This field should only contain letters and _",alphaMask:/[a-z_]/i,alphanum:function(e){return t.test(e)},alphanumText:"This field should only contain letters, numbers and _",alphanumMask:/[a-z0-9_]/i}}();Ext.grid.GridPanel=Ext.extend(Ext.Panel,{autoExpandColumn:false,autoExpandMax:1e3,autoExpandMin:50,columnLines:false,ddText:"{0} selected row{1}",deferRowRender:true,enableColumnHide:true,enableColumnMove:true,enableDragDrop:false,enableHdMenu:true,loadMask:false,minColumnWidth:25,stripeRows:false,trackMouseOver:true,stateEvents:["columnmove","columnresize","sortchange","groupchange"],view:null,bubbleEvents:[],rendered:false,viewReady:false,initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this);if(this.columnLines){this.cls=(this.cls||"")+" x-grid-with-col-lines"}this.autoScroll=false;this.autoWidth=false;if(Ext.isArray(this.columns)){this.colModel=new Ext.grid.ColumnModel(this.columns);delete this.columns}if(this.ds){this.store=this.ds;delete this.ds}if(this.cm){this.colModel=this.cm;delete this.cm}if(this.sm){this.selModel=this.sm;delete this.sm}this.store=Ext.StoreMgr.lookup(this.store);this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","groupmousedown","rowbodymousedown","containermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","groupclick","groupdblclick","containerclick","containerdblclick","rowbodyclick","rowbodydblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","groupcontextmenu","containercontextmenu","rowbodycontextmenu","bodyscroll","columnresize","columnmove","sortchange","groupchange","reconfigure","viewready")},onRender:function(e,t){Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);var n=this.getGridEl();this.el.addClass("x-grid-panel");this.mon(n,{scope:this,mousedown:this.onMouseDown,click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu});this.relayEvents(n,["mousedown","mouseup","mouseover","mouseout","keypress","keydown"]);var r=this.getView();r.init(this);r.render();this.getSelectionModel().init(this)},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this);if(this.loadMask){this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask))}},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this);this.mon(this.colModel,"hiddenchange",this.saveState,this,{delay:100})},applyState:function(e){var t=this.colModel,n=e.columns,r=this.store,i,s,o;if(n){for(var u=0,a=n.length;u<a;u++){i=n[u];s=t.getColumnById(i.id);if(s){o=t.getIndexById(i.id);t.setState(o,{hidden:i.hidden,width:i.width,sortable:s.sortable,editable:s.editable});if(o!=u){t.moveColumn(o,u)}}}}if(r){i=e.sort;if(i){r[r.remoteSort?"setDefaultSort":"sort"](i.field,i.direction)}i=e.group;if(r.groupBy){if(i){r.groupBy(i)}else{r.clearGrouping()}}}var f=Ext.apply({},e);delete f.columns;delete f.sort;Ext.grid.GridPanel.superclass.applyState.call(this,f)},getState:function(){var e={columns:[]},t=this.store,n,r;for(var i=0,s;s=this.colModel.config[i];i++){e.columns[i]={id:s.id,width:s.width};if(s.hidden){e.columns[i].hidden=true}}if(t){n=t.getSortState();if(n){e.sort=n}if(t.getGroupState){r=t.getGroupState();if(r){e.group=r}}}return e},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);var e=this.view;this.on("bodyresize",e.layout,e);e.layout(true);if(this.deferRowRender){if(!this.deferRowRenderTask){this.deferRowRenderTask=new Ext.util.DelayedTask(e.afterRender,this.view)}this.deferRowRenderTask.delay(10)}else{e.afterRender()}this.viewReady=true},reconfigure:function(e,t){var n=this.rendered;if(n){if(this.loadMask){this.loadMask.destroy();this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:e},this.initialConfig.loadMask))}}if(this.view){this.view.initData(e,t)}this.store=e;this.colModel=t;if(n){this.view.refresh(true)}this.fireEvent("reconfigure",this,e,t)},onDestroy:function(){if(this.deferRowRenderTask&&this.deferRowRenderTask.cancel){this.deferRowRenderTask.cancel()}if(this.rendered){Ext.destroy(this.view,this.loadMask)}else if(this.store&&this.store.autoDestroy){this.store.destroy()}Ext.destroy(this.colModel,this.selModel);this.store=this.selModel=this.colModel=this.view=this.loadMask=null;Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(e,t){this.view.processEvent(e,t)},onClick:function(e){this.processEvent("click",e)},onMouseDown:function(e){this.processEvent("mousedown",e)},onContextMenu:function(e,t){this.processEvent("contextmenu",e)},onDblClick:function(e){this.processEvent("dblclick",e)},walkCells:function(e,t,n,r,i){var s=this.colModel,o=s.getColumnCount(),u=this.store,a=u.getCount(),f=true;if(n<0){if(t<0){e--;f=false}while(e>=0){if(!f){t=o-1}f=false;while(t>=0){if(r.call(i||this,e,t,s)===true){return[e,t]}t--}e--}}else{if(t>=o){e++;f=false}while(e<a){if(!f){t=0}f=false;while(t<o){if(r.call(i||this,e,t,s)===true){return[e,t]}t++}e++}}return null},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)}return this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){if(!this.view){this.view=new Ext.grid.GridView(this.viewConfig)}return this.view},getDragDropText:function(){var e=this.selModel.getCount?this.selModel.getCount():1;return String.format(this.ddText,e,e==1?"":"s")}});Ext.reg("grid",Ext.grid.GridPanel);Ext.grid.PivotGrid=Ext.extend(Ext.grid.GridPanel,{aggregator:"sum",renderer:undefined,initComponent:function(){Ext.grid.PivotGrid.superclass.initComponent.apply(this,arguments);this.initAxes();this.enableColumnResize=false;this.viewConfig=Ext.apply(this.viewConfig||{},{forceFit:true});this.colModel=new Ext.grid.ColumnModel({})},getAggregator:function(){if(typeof this.aggregator=="string"){return Ext.grid.PivotAggregatorMgr.types[this.aggregator]}else{return this.aggregator}},setAggregator:function(e){this.aggregator=e},setMeasure:function(e){this.measure=e},setLeftAxis:function(e,t){this.leftAxis=e;if(t){this.view.refresh()}},setTopAxis:function(e,t){this.topAxis=e;if(t){this.view.refresh()}},initAxes:function(){var e=Ext.grid.PivotAxis;if(!(this.leftAxis instanceof e)){this.setLeftAxis(new e({orientation:"vertical",dimensions:this.leftAxis||[],store:this.store}))}if(!(this.topAxis instanceof e)){this.setTopAxis(new e({orientation:"horizontal",dimensions:this.topAxis||[],store:this.store}))}},extractData:function(){var e=this.store.data.items,t=e.length,n=[],r,i,s,o;if(t==0){return[]}var u=this.leftAxis.getTuples(),a=u.length,f=this.topAxis.getTuples(),l=f.length,c=this.getAggregator();for(i=0;i<t;i++){r=e[i];for(s=0;s<a;s++){n[s]=n[s]||[];if(u[s].matcher(r)===true){for(o=0;o<l;o++){n[s][o]=n[s][o]||[];if(f[o].matcher(r)){n[s][o].push(r)}}}}}var h=n.length,p,d;for(i=0;i<h;i++){d=n[i];p=d.length;for(s=0;s<p;s++){n[i][s]=c(n[i][s],this.measure)}}return n},getView:function(){if(!this.view){this.view=new Ext.grid.PivotGridView(this.viewConfig)}return this.view}});Ext.reg("pivotgrid",Ext.grid.PivotGrid);Ext.grid.PivotAggregatorMgr=new Ext.AbstractManager;Ext.grid.PivotAggregatorMgr.registerType("sum",function(e,t){var n=e.length,r=0,i;for(i=0;i<n;i++){r+=e[i].get(t)}return r});Ext.grid.PivotAggregatorMgr.registerType("avg",function(e,t){var n=e.length,r=0,i;for(i=0;i<n;i++){r+=e[i].get(t)}return r/n||"n/a"});Ext.grid.PivotAggregatorMgr.registerType("min",function(e,t){var n=[],r=e.length,i;for(i=0;i<r;i++){n.push(e[i].get(t))}return Math.min.apply(this,n)||"n/a"});Ext.grid.PivotAggregatorMgr.registerType("max",function(e,t){var n=[],r=e.length,i;for(i=0;i<r;i++){n.push(e[i].get(t))}return Math.max.apply(this,n)||"n/a"});Ext.grid.PivotAggregatorMgr.registerType("count",function(e,t){return e.length});Ext.grid.GridView=Ext.extend(Ext.util.Observable,{deferEmptyText:true,scrollOffset:undefined,autoFill:false,forceFit:false,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",hideSortIcons:false,columnsText:"Columns",selectedRowClass:"x-grid3-row-selected",borderWidth:2,tdClass:"x-grid3-cell",hdCls:"x-grid3-hd",markDirty:true,cellSelectorDepth:4,rowSelectorDepth:10,rowBodySelectorDepth:10,cellSelector:"td.x-grid3-cell",rowSelector:"div.x-grid3-row",rowBodySelector:"div.x-grid3-row-body",firstRowCls:"x-grid3-row-first",lastRowCls:"x-grid3-row-last",rowClsRe:/(?:^|\s+)x-grid3-row-(first|last|alt)(?:\s+|$)/g,headerMenuOpenCls:"x-grid3-hd-menu-open",rowOverCls:"x-grid3-row-over",constructor:function(e){Ext.apply(this,e);this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh");Ext.grid.GridView.superclass.constructor.call(this)},masterTpl:new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}">{header}</div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a href="#" class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),headerTpl:new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<thead>",'<tr class="x-grid3-hd-row">{cells}</tr>',"</thead>","</table>"),bodyTpl:new Ext.Template("{rows}"),cellTpl:new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id} x-unselectable" unselectable="on" {attr}>{value}</div>',"</td>"),initTemplates:function(){var e=this.templates||{},t,n,r=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}">','<div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}",'<img alt="" class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"</div>","</td>"),i=['<tr class="x-grid3-row-body-tr" style="{bodyStyle}">','<td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on">','<div class="x-grid3-row-body">{body}</div>',"</td>","</tr>"].join(""),s=['<table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody>","<tr>{cells}</tr>",this.enableRowBody?i:"","</tbody>","</table>"].join("");Ext.applyIf(e,{hcell:r,cell:this.cellTpl,body:this.bodyTpl,header:this.headerTpl,master:this.masterTpl,row:new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}">'+s+"</div>"),rowInner:new Ext.Template(s)});for(n in e){t=e[n];if(t&&Ext.isFunction(t.compile)&&!t.compiled){t.disableFormats=true;t.compile()}}this.templates=e;this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(e){if(!this._flyweight){this._flyweight=new Ext.Element.Flyweight(document.body)}this._flyweight.dom=e;return this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var e=Ext.Element,t=Ext.get(this.grid.getGridEl().dom.firstChild),n=new e(t.child("div.x-grid3-viewport")),r=new e(n.child("div.x-grid3-header")),i=new e(n.child("div.x-grid3-scroller"));if(this.grid.hideHeaders){r.setDisplayed(false)}if(this.forceFit){i.setStyle("overflow-x","hidden")}Ext.apply(this,{el:t,mainWrap:n,scroller:i,mainHd:r,innerHd:r.child("div.x-grid3-header-inner").dom,mainBody:new e(e.fly(i).child("div.x-grid3-body")),focusEl:new e(e.fly(i).child("a")),resizeMarker:new e(t.child("div.x-grid3-resize-marker")),resizeProxy:new e(t.child("div.x-grid3-resize-proxy"))});this.focusEl.swallowEvent("click",true)},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(e){if(!e){return false}return this.fly(e).findParent(this.cellSelector,this.cellSelectorDepth)},findCellIndex:function(e,t){var n=this.findCell(e),r;if(n){r=this.fly(n).hasClass(t);if(!t||r){return this.getCellIndex(n)}}return false},getCellIndex:function(e){if(e){var t=e.className.match(this.colRe);if(t&&t[1]){return this.cm.getIndexById(t[1])}}return false},findHeaderCell:function(e){var t=this.findCell(e);return t&&this.fly(t).hasClass(this.hdCls)?t:null},findHeaderIndex:function(e){return this.findCellIndex(e,this.hdCls)},findRow:function(e){if(!e){return false}return this.fly(e).findParent(this.rowSelector,this.rowSelectorDepth)},findRowIndex:function(e){var t=this.findRow(e);return t?t.rowIndex:false},findRowBody:function(e){if(!e){return false}return this.fly(e).findParent(this.rowBodySelector,this.rowBodySelectorDepth)},getRow:function(e){return this.getRows()[e]},getCell:function(e,t){return Ext.fly(this.getRow(e)).query(this.cellSelector)[t]},getHeaderCell:function(e){return this.mainHd.dom.getElementsByTagName("td")[e]},addRowClass:function(e,t){var n=this.getRow(e);if(n){this.fly(n).addClass(t)}},removeRowClass:function(e,t){var n=this.getRow(e);if(n){this.fly(n).removeClass(t)}},removeRow:function(e){Ext.removeNode(this.getRow(e));this.syncFocusEl(e)},removeRows:function(e,t){var n=this.mainBody.dom,r;for(r=e;r<=t;r++){Ext.removeNode(n.childNodes[e])}this.syncFocusEl(e)},getScrollState:function(){var e=this.scroller.dom;return{left:e.scrollLeft,top:e.scrollTop}},restoreScroll:function(e){var t=this.scroller.dom;t.scrollLeft=e.left;t.scrollTop=e.top},scrollToTop:function(){var e=this.scroller.dom;e.scrollTop=0;e.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var e=this.scroller.dom;this.grid.fireEvent("bodyscroll",e.scrollLeft,e.scrollTop)},syncHeaderScroll:function(){var e=this.innerHd,t=this.scroller.dom.scrollLeft;e.scrollLeft=t;e.scrollLeft=t},updateSortIcon:function(e,t){var n=this.sortClasses,r=n[t=="DESC"?1:0],i=this.mainHd.select("td").removeClass(n);i.item(e).addClass(r)},updateAllColumnWidths:function(){var e=this.getTotalWidth(),t=this.cm.getColumnCount(),n=this.getRows(),r=n.length,i=[],s,o,u,a,f;for(a=0;a<t;a++){i[a]=this.getColumnWidth(a);this.getHeaderCell(a).style.width=i[a]}this.updateHeaderWidth();for(a=0;a<r;a++){s=n[a];s.style.width=e;o=s.firstChild;if(o){o.style.width=e;u=o.rows[0];for(f=0;f<t;f++){u.childNodes[f].style.width=i[f]}}}this.onAllColumnWidthsUpdated(i,e)},updateColumnWidth:function(e,t){var n=this.getColumnWidth(e),r=this.getTotalWidth(),i=this.getHeaderCell(e),s=this.getRows(),o=s.length,u,a,f;this.updateHeaderWidth();i.style.width=n;for(a=0;a<o;a++){u=s[a];f=u.firstChild;u.style.width=r;if(f){f.style.width=r;f.rows[0].childNodes[e].style.width=n}}this.onColumnWidthUpdated(e,n,r)},updateColumnHidden:function(e,t){var n=this.getTotalWidth(),r=t?"none":"",i=this.getHeaderCell(e),s=this.getRows(),o=s.length,u,a,f;this.updateHeaderWidth();i.style.display=r;for(f=0;f<o;f++){u=s[f];u.style.width=n;a=u.firstChild;if(a){a.style.width=n;a.rows[0].childNodes[e].style.display=r}}this.onColumnHiddenUpdated(e,t,n);delete this.lastViewWidth;this.layout()},doRender:function(e,t,n,r,i,s){var o=this.templates,u=o.cell,a=o.row,f=i-1,l="width:"+this.getTotalWidth()+";",c=[],h=[],p={tstyle:l},d={},v=t.length,m,g,y,b,w,E;for(w=0;w<v;w++){y=t[w];h=[];E=w+r;for(b=0;b<i;b++){g=e[b];d.id=g.id;d.css=b===0?"x-grid3-cell-first ":b==f?"x-grid3-cell-last ":"";d.attr=d.cellAttr="";d.style=g.style;d.value=g.renderer.call(g.scope,y.data[g.name],d,y,E,b,n);if(Ext.isEmpty(d.value)){d.value="&#160;"}if(this.markDirty&&y.dirty&&typeof y.modified[g.name]!="undefined"){d.css+=" x-grid3-dirty-cell"}h[h.length]=u.apply(d)}m=[];if(s&&(E+1)%2===0){m[0]="x-grid3-row-alt"}if(y.dirty){m[1]=" x-grid3-dirty-row"}p.cols=i;if(this.getRowClass){m[2]=this.getRowClass(y,E,p,n)}p.alt=m.join(" ");p.cells=h.join("");c[c.length]=a.apply(p)}return c.join("")},processRows:function(e,t){if(!this.ds||this.ds.getCount()<1){return}var n=this.getRows(),r=n.length,i,s;t=t||!this.grid.stripeRows;e=e||0;for(s=0;s<r;s++){i=n[s];if(i){i.rowIndex=s;if(!t){i.className=i.className.replace(this.rowClsRe," ");if((s+1)%2===0){i.className+=" x-grid3-row-alt"}}}}if(e===0){Ext.fly(n[0]).addClass(this.firstRowCls)}Ext.fly(n[r-1]).addClass(this.lastRowCls)},afterRender:function(){if(!this.ds||!this.cm){return}this.mainBody.dom.innerHTML=this.renderBody()||"&#160;";this.processRows(0,true);if(this.deferEmptyText!==true){this.applyEmptyText()}this.grid.fireEvent("viewready",this.grid)},afterRenderUI:function(){var e=this.grid;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on("scroll",this.syncScroll,this);if(e.enableColumnResize!==false){this.splitZone=new Ext.grid.GridView.SplitDragZone(e,this.mainHd.dom)}if(e.enableColumnMove){this.columnDrag=new Ext.grid.GridView.ColumnDragZone(e,this.innerHd);this.columnDrop=new Ext.grid.HeaderDropZone(e,this.mainHd.dom)}if(e.enableHdMenu!==false){this.hmenu=new Ext.menu.Menu({id:e.id+"-hctx"});this.hmenu.add({itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"});if(e.enableColumnHide!==false){this.colMenu=new Ext.menu.Menu({id:e.id+"-hcols-menu"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick});this.hmenu.add({itemId:"sortSep",xtype:"menuseparator"},{itemId:"columns",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})}this.hmenu.on("itemclick",this.handleHdMenuClick,this)}if(e.trackMouseOver){this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut})}if(e.enableDragDrop||e.enableDrag){this.dragZone=new Ext.grid.GridDragZone(e,{ddGroup:e.ddGroup||"GridDD"})}this.updateHeaderSortState()},renderUI:function(){var e=this.templates;return e.master.apply({body:e.body.apply({rows:"&#160;"}),header:this.renderHeaders(),ostyle:"width:"+this.getOffsetWidth()+";",bstyle:"width:"+this.getTotalWidth()+";"})},processEvent:function(e,t){var n=t.getTarget(),r=this.grid,i=this.findHeaderIndex(n),s,o,u,a;r.fireEvent(e,t);if(i!==false){r.fireEvent("header"+e,r,i,t)}else{s=this.findRowIndex(n);if(s!==false){o=this.findCellIndex(n);if(o!==false){u=r.colModel.getColumnAt(o);if(r.fireEvent("cell"+e,r,s,o,t)!==false){if(!u||u.processEvent&&u.processEvent(e,t,r,s,o)!==false){r.fireEvent("row"+e,r,s,t)}}}else{if(r.fireEvent("row"+e,r,s,t)!==false){(a=this.findRowBody(n))&&r.fireEvent("rowbody"+e,r,s,t)}}}else{r.fireEvent("container"+e,r,t)}}},layout:function(e){if(!this.mainBody){return}var t=this.grid,n=t.getGridEl(),r=n.getSize(true),i=r.width,s=r.height,o=this.scroller,u,a,f;if(i<20||s<20){return}if(t.autoHeight){u=o.dom.style;u.overflow="visible";if(Ext.isWebKit){u.position="static"}}else{this.el.setSize(i,s);a=this.mainHd.getHeight();f=s-a;o.setSize(i,f);if(this.innerHd){this.innerHd.style.width=i+"px"}}if(this.forceFit||e===true&&this.autoFill){if(this.lastViewWidth!=i){this.fitColumns(false,false);this.lastViewWidth=i}}else{this.autoExpand();this.syncHeaderScroll()}this.onLayout(i,f)},onLayout:function(e,t){},onColumnWidthUpdated:function(e,t,n){},onAllColumnWidthsUpdated:function(e,t){},onColumnHiddenUpdated:function(e,t,n){},updateColumnText:function(e,t){},afterMove:function(e){},init:function(e){this.grid=e;this.initTemplates();this.initData(e.store,e.colModel);this.initUI(e)},getColumnId:function(e){return this.cm.getColumnId(e)},getOffsetWidth:function(){return this.cm.getTotalWidth()+this.getScrollOffset()+"px"},getScrollOffset:function(){return Ext.num(this.scrollOffset,Ext.getScrollBarWidth())},renderHeaders:function(){var e=this.cm,t=this.templates,n=t.hcell,r={},i=e.getColumnCount(),s=i-1,o=[],u,a;for(u=0;u<i;u++){if(u==0){a="x-grid3-cell-first "}else{a=u==s?"x-grid3-cell-last ":""}r={id:e.getColumnId(u),value:e.getColumnHeader(u)||"",style:this.getColumnStyle(u,true),css:a,tooltip:this.getColumnTooltip(u)};if(e.config[u].align=="right"){r.istyle="padding-right: 16px;"}else{delete r.istyle}o[u]=n.apply(r)}return t.header.apply({cells:o.join(""),tstyle:String.format("width: {0};",this.getTotalWidth())})},getColumnTooltip:function(e){var t=this.cm.getColumnTooltip(e);if(t){if(Ext.QuickTips.isEnabled()){return'ext:qtip="'+t+'"'}else{return'title="'+t+'"'}}return""},beforeUpdate:function(){this.grid.stopEditing(true)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders();this.updateHeaderWidth(false)},updateHeaderWidth:function(e){var t=this.innerHd.firstChild,n=this.getTotalWidth();t.style.width=this.getOffsetWidth();t.firstChild.style.width=n;if(e!==false){this.mainBody.dom.style.width=n}},focusRow:function(e){this.focusCell(e,0,false)},focusCell:function(e,t,n){this.syncFocusEl(this.ensureVisible(e,t,n));var r=this.focusEl;if(Ext.isGecko){r.focus()}else{r.focus.defer(1,r)}},resolveCell:function(e,t,n){if(!Ext.isNumber(e)){e=e.rowIndex}if(!this.ds){return null}if(e<0||e>=this.ds.getCount()){return null}t=t!==undefined?t:0;var r=this.getRow(e),i=this.cm,s=i.getColumnCount(),o;if(!(n===false&&t===0)){while(t<s&&i.isHidden(t)){t++}o=this.getCell(e,t)}return{row:r,cell:o}},getResolvedXY:function(e){if(!e){return null}var t=e.cell,n=e.row;if(t){return Ext.fly(t).getXY()}else{return[this.el.getX(),Ext.fly(n).getY()]}},syncFocusEl:function(e,t,n){var r=e;if(!Ext.isArray(r)){e=Math.min(e,Math.max(0,this.getRows().length-1));if(isNaN(e)){return}r=this.getResolvedXY(this.resolveCell(e,t,n))}this.focusEl.setXY(r||this.scroller.getXY())},ensureVisible:function(e,t,n){var r=this.resolveCell(e,t,n);if(!r||!r.row){return null}var i=r.row,s=r.cell,o=this.scroller.dom,u=i,a=0,f=this.el.dom;while(u&&u!=f){a+=u.offsetTop;u=u.offsetParent}a-=this.mainHd.dom.offsetHeight;f=parseInt(o.scrollTop,10);var l=a+i.offsetHeight,c=o.clientHeight,h=f+c;if(a<f){o.scrollTop=a}else if(l>h){o.scrollTop=l-c}if(n!==false){var p=parseInt(s.offsetLeft,10),d=p+s.offsetWidth,v=parseInt(o.scrollLeft,10),m=v+o.clientWidth;if(p<v){o.scrollLeft=p}else if(d>m){o.scrollLeft=d-o.clientWidth}}return this.getResolvedXY(r)},insertRows:function(e,t,n,r){var i=e.getCount()-1;if(!r&&t===0&&n>=i){this.fireEvent("beforerowsinserted",this,t,n);this.refresh();this.fireEvent("rowsinserted",this,t,n)}else{if(!r){this.fireEvent("beforerowsinserted",this,t,n)}var s=this.renderRows(t,n),o=this.getRow(t);if(o){if(t===0){Ext.fly(this.getRow(0)).removeClass(this.firstRowCls)}Ext.DomHelper.insertHtml("beforeBegin",o,s)}else{var u=this.getRow(i-1);if(u){Ext.fly(u).removeClass(this.lastRowCls)}Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,s)}if(!r){this.processRows(t);this.fireEvent("rowsinserted",this,t,n)}else if(t===0||t>=i){Ext.fly(this.getRow(t)).addClass(t===0?this.firstRowCls:this.lastRowCls)}}this.syncFocusEl(t)},deleteRows:function(e,t,n){if(e.getRowCount()<1){this.refresh()}else{this.fireEvent("beforerowsdeleted",this,t,n);this.removeRows(t,n);this.processRows(t);this.fireEvent("rowsdeleted",this,t,n)}},getColumnStyle:function(e,t){var n=this.cm,r=n.config,i=t?"":r[e].css||"",s=r[e].align;i+=String.format("width: {0};",this.getColumnWidth(e));if(n.isHidden(e)){i+="display: none; "}if(s){i+=String.format("text-align: {0};",s)}return i},getColumnWidth:function(e){var t=this.cm.getColumnWidth(e),n=this.borderWidth;if(Ext.isNumber(t)){if(Ext.isBorderBox){return t+"px"}else{return Math.max(t-n,0)+"px"}}else{return t}},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(e,t,n){var r=this.grid,i=this.cm,s=i.getTotalWidth(false),o=this.getGridInnerWidth(),u=o-s,a=[],f=0,l=0,c,h,p;if(o<20||u===0){return false}var d=i.getColumnCount(true),v=i.getColumnCount(false),m=d-(Ext.isNumber(n)?1:0);if(m===0){m=1;n=undefined}for(p=0;p<v;p++){if(!i.isFixed(p)&&p!==n){c=i.getColumnWidth(p);a.push(p,c);if(!i.isHidden(p)){f=p;l+=c}}}h=(o-i.getTotalWidth())/l;while(a.length){c=a.pop();p=a.pop();i.setColumnWidth(p,Math.max(r.minColumnWidth,Math.floor(c+c*h)),true)}s=i.getTotalWidth(false);if(s>o){var g=m==d?f:n,y=Math.max(1,i.getColumnWidth(g)-(s-o));i.setColumnWidth(g,y,true)}if(e!==true){this.updateAllColumnWidths()}return true},autoExpand:function(e){var t=this.grid,n=this.cm,r=this.getGridInnerWidth(),i=n.getTotalWidth(false),s=t.autoExpandColumn;if(!this.userResized&&s){if(r!=i){var o=n.getIndexById(s),u=n.getColumnWidth(o),a=r-i+u,f=Math.min(Math.max(a,t.autoExpandMin),t.autoExpandMax);if(u!=f){n.setColumnWidth(o,f,true);if(e!==true){this.updateColumnWidth(o,f)}}}}},getGridInnerWidth:function(){return this.grid.getGridEl().getWidth(true)-this.getScrollOffset()},getColumnData:function(){var e=[],t=this.cm,n=t.getColumnCount(),r=this.ds.fields,i,s;for(i=0;i<n;i++){s=t.getDataIndex(i);e[i]={name:Ext.isDefined(s)?s:r.get(i)?r.get(i).name:undefined,renderer:t.getRenderer(i),scope:t.getRendererScope(i),id:t.getColumnId(i),style:this.getColumnStyle(i)}}return e},renderRows:function(e,t){var n=this.grid,r=n.store,i=n.stripeRows,s=n.colModel,o=s.getColumnCount(),u=r.getCount(),a;if(u<1){return""}e=e||0;t=Ext.isDefined(t)?t:u-1;a=r.getRange(e,t);return this.doRender(this.getColumnData(),a,r,e,o,i)},renderBody:function(){var e=this.renderRows()||"&#160;";return this.templates.body.apply({rows:e})},refreshRow:function(e){var t=this.ds,n=this.cm.getColumnCount(),r=this.getColumnData(),i=n-1,s=["x-grid3-row"],o={tstyle:String.format("width: {0};",this.getTotalWidth())},u=[],a=this.templates.cell,f,l,c,h,p,d;if(Ext.isNumber(e)){f=e;e=t.getAt(f)}else{f=t.indexOf(e)}if(!e||f<0){return}for(d=0;d<n;d++){c=r[d];if(d==0){p="x-grid3-cell-first"}else{p=d==i?"x-grid3-cell-last ":""}h={id:c.id,style:c.style,css:p,attr:"",cellAttr:""};h.value=c.renderer.call(c.scope,e.data[c.name],h,e,f,d,t);if(Ext.isEmpty(h.value)){h.value="&#160;"}if(this.markDirty&&e.dirty&&typeof e.modified[c.name]!="undefined"){h.css+=" x-grid3-dirty-cell"}u[d]=a.apply(h)}l=this.getRow(f);l.className="";if(this.grid.stripeRows&&(f+1)%2===0){s.push("x-grid3-row-alt")}if(this.getRowClass){o.cols=n;s.push(this.getRowClass(e,f,o,t))}this.fly(l).addClass(s).setStyle(o.tstyle);o.cells=u.join("");l.innerHTML=this.templates.rowInner.apply(o);this.fireEvent("rowupdated",this,f,e)},refresh:function(e){this.fireEvent("beforerefresh",this);this.grid.stopEditing(true);var t=this.renderBody();this.mainBody.update(t).setWidth(this.getTotalWidth());if(e===true){this.updateHeaders();this.updateHeaderSortState()}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent("refresh",this)},applyEmptyText:function(){if(this.emptyText&&!this.hasRows()){this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"</div>")}},updateHeaderSortState:function(){var e=this.ds.getSortState();if(!e){return}if(!this.sortState||this.sortState.field!=e.field||this.sortState.direction!=e.direction){this.grid.fireEvent("sortchange",this.grid,e)}this.sortState=e;var t=this.cm.findColumnIndex(e.field);if(t!=-1){var n=e.direction;this.updateSortIcon(t,n)}},clearHeaderSortState:function(){if(!this.sortState){return}this.grid.fireEvent("sortchange",this.grid,null);this.mainHd.select("td").removeClass(this.sortClasses);delete this.sortState},destroy:function(){var e=this,t=e.grid,n=t.getGridEl(),r=e.dragZone,i=e.splitZone,s=e.columnDrag,o=e.columnDrop,u=e.scrollToTopTask,a,f;if(u&&u.cancel){u.cancel()}Ext.destroyMembers(e,"colMenu","hmenu");e.initData(null,null);e.purgeListeners();Ext.fly(e.innerHd).un("click",e.handleHdDown,e);if(t.enableColumnMove){a=s.dragData;f=s.proxy;Ext.destroy(s.el,f.ghost,f.el,o.el,o.proxyTop,o.proxyBottom,a.ddel,a.header);if(f.anim){Ext.destroy(f.anim)}delete f.ghost;delete a.ddel;delete a.header;s.destroy();delete Ext.dd.DDM.locationCache[s.id];delete s._domRef;delete o.proxyTop;delete o.proxyBottom;o.destroy();delete Ext.dd.DDM.locationCache["gridHeader"+n.id];delete o._domRef;delete Ext.dd.DDM.ids[o.ddGroup]}if(i){i.destroy();delete i._domRef;delete Ext.dd.DDM.ids["gridSplitters"+n.id]}Ext.fly(e.innerHd).removeAllListeners();Ext.removeNode(e.innerHd);delete e.innerHd;Ext.destroy(e.el,e.mainWrap,e.mainHd,e.scroller,e.mainBody,e.focusEl,e.resizeMarker,e.resizeProxy,e.activeHdBtn,e._flyweight,r,i);delete t.container;if(r){r.destroy()}Ext.dd.DDM.currentTarget=null;delete Ext.dd.DDM.locationCache[n.id];Ext.EventManager.removeResizeListener(e.onWindowResize,e)},onDenyColumnHide:function(){},render:function(){if(this.autoFill){var e=this.grid.ownerCt;if(e&&e.getLayout()){e.on("afterlayout",function(){this.fitColumns(true,true);this.updateHeaders();this.updateHeaderSortState()},this,{single:true})}}else if(this.forceFit){this.fitColumns(true,false)}else if(this.grid.autoExpandColumn){this.autoExpand(true)}this.grid.getGridEl().dom.innerHTML=this.renderUI();this.afterRenderUI()},initData:function(e,t){var n=this;if(n.ds){var r=n.ds;r.un("add",n.onAdd,n);r.un("load",n.onLoad,n);r.un("clear",n.onClear,n);r.un("remove",n.onRemove,n);r.un("update",n.onUpdate,n);r.un("datachanged",n.onDataChange,n);if(r!==e&&r.autoDestroy){r.destroy()}}if(e){e.on({scope:n,load:n.onLoad,add:n.onAdd,remove:n.onRemove,update:n.onUpdate,clear:n.onClear,datachanged:n.onDataChange})}if(n.cm){var i=n.cm;i.un("configchange",n.onColConfigChange,n);i.un("widthchange",n.onColWidthChange,n);i.un("headerchange",n.onHeaderChange,n);i.un("hiddenchange",n.onHiddenChange,n);i.un("columnmoved",n.onColumnMove,n)}if(t){delete n.lastViewWidth;t.on({scope:n,configchange:n.onColConfigChange,widthchange:n.onColWidthChange,headerchange:n.onHeaderChange,hiddenchange:n.onHiddenChange,columnmoved:n.onColumnMove})}n.ds=e;n.cm=t},onDataChange:function(){this.refresh(true);this.updateHeaderSortState();this.syncFocusEl(0)},onClear:function(){this.refresh();this.syncFocusEl(0)},onUpdate:function(e,t){this.refreshRow(t)},onAdd:function(e,t,n){this.insertRows(e,n,n+(t.length-1))},onRemove:function(e,t,n,r){if(r!==true){this.fireEvent("beforerowremoved",this,n,t)}this.removeRow(n);if(r!==true){this.processRows(n);this.applyEmptyText();this.fireEvent("rowremoved",this,n,t)}},onLoad:function(){if(Ext.isGecko){if(!this.scrollToTopTask){this.scrollToTopTask=new Ext.util.DelayedTask(this.scrollToTop,this)}this.scrollToTopTask.delay(1)}else{this.scrollToTop()}},onColWidthChange:function(e,t,n){this.updateColumnWidth(t,n)},onHeaderChange:function(e,t,n){this.updateHeaders()},onHiddenChange:function(e,t,n){this.updateColumnHidden(t,n)},onColumnMove:function(e,t,n){this.indexMap=null;this.refresh(true);this.restoreScroll(this.getScrollState());this.afterMove(n);this.grid.fireEvent("columnmove",t,n)},onColConfigChange:function(){delete this.lastViewWidth;this.indexMap=null;this.refresh(true)},initUI:function(e){e.on("headerclick",this.onHeaderClick,this)},initEvents:Ext.emptyFn,onHeaderClick:function(e,t){if(this.headersDisabled||!this.cm.isSortable(t)){return}e.stopEditing(true);e.store.sort(this.cm.getDataIndex(t))},onRowOver:function(e,t){var n=this.findRowIndex(t);if(n!==false){this.addRowClass(n,this.rowOverCls)}},onRowOut:function(e,t){var n=this.findRowIndex(t);if(n!==false&&!e.within(this.getRow(n),true)){this.removeRowClass(n,this.rowOverCls)}},onRowSelect:function(e){this.addRowClass(e,this.selectedRowClass)},onRowDeselect:function(e){this.removeRowClass(e,this.selectedRowClass)},onCellSelect:function(e,t){var n=this.getCell(e,t);if(n){this.fly(n).addClass("x-grid3-cell-selected")}},onCellDeselect:function(e,t){var n=this.getCell(e,t);if(n){this.fly(n).removeClass("x-grid3-cell-selected")}},handleWheel:function(e){e.stopPropagation()},onColumnSplitterMoved:function(e,t){this.userResized=true;this.grid.colModel.setColumnWidth(e,t,true);if(this.forceFit){this.fitColumns(true,false,e);this.updateAllColumnWidths()}else{this.updateColumnWidth(e,t);this.syncHeaderScroll()}this.grid.fireEvent("columnresize",e,t)},beforeColMenuShow:function(){var e=this.cm,t=e.getColumnCount(),n=this.colMenu,r;n.removeAll();for(r=0;r<t;r++){if(e.config[r].hideable!==false){n.add(new Ext.menu.CheckItem({text:e.getColumnHeader(r),itemId:"col-"+e.getColumnId(r),checked:!e.isHidden(r),disabled:e.config[r].hideable===false,hideOnClick:false}))}}},handleHdMenuClick:function(e){var t=this.ds,n=this.cm.getDataIndex(this.hdCtxIndex);switch(e.getItemId()){case"asc":t.sort(n,"ASC");break;case"desc":t.sort(n,"DESC");break;default:this.handleHdMenuClickDefault(e)}return true},handleHdMenuClickDefault:function(e){var t=this.cm,n=e.getItemId(),r=t.getIndexById(n.substr(4));if(r!=-1){if(e.checked&&t.getColumnsBy(this.isHideableColumn,this).length<=1){this.onDenyColumnHide();return}t.setHidden(r,e.checked)}},handleHdDown:function(e,t){if(Ext.fly(t).hasClass("x-grid3-hd-btn")){e.stopEvent();var n=this.cm,r=this.findHeaderCell(t),i=this.getCellIndex(r),s=n.isSortable(i),o=this.hmenu,u=o.items,a=this.headerMenuOpenCls,f;this.hdCtxIndex=i;Ext.fly(r).addClass(a);if(this.hideSortIcons){u.get("asc").setVisible(s);u.get("desc").setVisible(s);f=u.get("sortSep");if(f){f.setVisible(s)}}else{u.get("asc").setDisabled(!s);u.get("desc").setDisabled(!s)}o.on("hide",function(){Ext.fly(r).removeClass(a)},this,{single:true});o.show(t,"tl-bl?")}},handleHdMove:function(e){var t=this.findHeaderCell(this.activeHdRef);if(t&&!this.headersDisabled){var n=this.splitHandleWidth||5,r=this.activeHdRegion,i=t.style,s=this.cm,o="",u=e.getPageX();if(this.grid.enableColumnResize!==false){var a=this.activeHdIndex,f=this.getPreviousVisible(a),l=s.isResizable(a),c=f&&s.isResizable(f),h=u-r.left<=n,p=r.right-u<=(!this.activeHdBtn?n:2);if(h&&c){o=Ext.isAir?"move":Ext.isWebKit?"e-resize":"col-resize"}else if(p&&l){o=Ext.isAir?"move":Ext.isWebKit?"w-resize":"col-resize"}}i.cursor=o}},getPreviousVisible:function(e){while(e>0){if(!this.cm.isHidden(e-1)){return e}e--}return undefined},handleHdOver:function(e,t){var n=this.findHeaderCell(t);if(n&&!this.headersDisabled){var r=this.fly(n);this.activeHdRef=t;this.activeHdIndex=this.getCellIndex(n);this.activeHdRegion=r.getRegion();if(!this.isMenuDisabled(this.activeHdIndex,r)){r.addClass("x-grid3-hd-over");this.activeHdBtn=r.child(".x-grid3-hd-btn");if(this.activeHdBtn){this.activeHdBtn.dom.style.height=n.firstChild.offsetHeight-1+"px"}}}},handleHdOut:function(e,t){var n=this.findHeaderCell(t);if(n&&(!Ext.isIE9m||!e.within(n,true))){this.activeHdRef=null;this.fly(n).removeClass("x-grid3-hd-over");n.style.cursor=""}},isMenuDisabled:function(e,t){return this.cm.isMenuDisabled(e)},hasRows:function(){var e=this.mainBody.dom.firstChild;return e&&e.nodeType==1&&e.className!="x-grid-empty"},isHideableColumn:function(e){return!e.hidden},bind:function(e,t){this.initData(e,t)}});Ext.grid.GridView.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{constructor:function(e,t){this.grid=e;this.view=e.getView();this.marker=this.view.resizeMarker;this.proxy=this.view.resizeProxy;Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,t,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.scroll=false;this.hw=this.view.splitHandleWidth||5},b4StartDrag:function(e,t){this.dragHeadersDisabled=this.view.headersDisabled;this.view.headersDisabled=true;var n=this.view.mainWrap.getHeight();this.marker.setHeight(n);this.marker.show();this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]);this.proxy.setHeight(n);var r=this.cm.getColumnWidth(this.cellIndex),i=Math.max(r-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(i,1e3);this.setYConstraint(0,0);this.minX=e-i;this.maxX=e+1e3;this.startPos=e;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,e,t)},allowHeaderDrag:function(e){return true},handleMouseDown:function(e){var t=this.view.findHeaderCell(e.getTarget());if(t&&this.allowHeaderDrag(e)){var n=this.view.fly(t).getXY(),r=n[0],i=e.getXY(),s=i[0],o=t.offsetWidth,u=false;if(s-r<=this.hw){u=-1}else if(r+o-s<=this.hw){u=0}if(u!==false){this.cm=this.grid.colModel;var a=this.view.getCellIndex(t);if(u==-1){if(a+u<0){return}while(this.cm.isHidden(a+u)){--u;if(a+u<0){return}}}this.cellIndex=a+u;this.split=t.dom;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}else if(this.view.columnDrag){this.view.columnDrag.callHandleMouseDown(e)}}},endDrag:function(e){this.marker.hide();var t=this.view,n=Math.max(this.minX,e.getPageX()),r=n-this.startPos,i=this.dragHeadersDisabled;t.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+r);setTimeout(function(){t.headersDisabled=i},50)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.PivotGridView=Ext.extend(Ext.grid.GridView,{colHeaderCellCls:"grid-hd-group-cell",title:"",getColumnHeaders:function(){return this.grid.topAxis.buildHeaders();},getRowHeaders:function(){return this.grid.leftAxis.buildHeaders()},renderRows:function(e,t){var n=this.grid,r=n.extractData(),i=r.length,s=this.templates,o=n.renderer,u=typeof o=="function",a=this.getCellCls,f=typeof a=="function",l=s.cell,c=s.row,h=[],p={},d="width:"+this.getGridInnerWidth()+"px;",v,m,g,y,b;e=e||0;t=Ext.isDefined(t)?t:i-1;for(y=0;y<i;y++){b=r[y];m=b.length;v=[];for(var w=0;w<m;w++){p.id=y+"-"+w;p.css=w===0?"x-grid3-cell-first ":w==m-1?"x-grid3-cell-last ":"";p.attr=p.cellAttr="";p.value=b[w];if(Ext.isEmpty(p.value)){p.value="&#160;"}if(u){p.value=o(p.value)}if(f){p.css+=a(p.value)+" "}v[v.length]=l.apply(p)}h[h.length]=c.apply({tstyle:d,cols:m,cells:v.join(""),alt:""})}return h.join("")},masterTpl:new Ext.Template('<div class="x-grid3 x-pivotgrid" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-title"><span>{title}</span></div>','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}"></div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-row-headers"></div>','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a href="#" class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),initTemplates:function(){Ext.grid.PivotGridView.superclass.initTemplates.apply(this,arguments);var e=this.templates||{};if(!e.gcell){e.gcell=new Ext.XTemplate('<td class="x-grid3-hd x-grid3-gcell x-grid3-td-{id} ux-grid-hd-group-row-{row} '+this.colHeaderCellCls+'" style="{style}">','<div {tooltip} class="x-grid3-hd-inner x-grid3-hd-{id} x-unselectable" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}","</div>","</td>")}this.templates=e;this.hrowRe=new RegExp("ux-grid-hd-group-row-(\\d+)","")},initElements:function(){Ext.grid.PivotGridView.superclass.initElements.apply(this,arguments);this.rowHeadersEl=new Ext.Element(this.scroller.child("div.x-grid3-row-headers"));this.headerTitleEl=new Ext.Element(this.mainHd.child("div.x-grid3-header-title"))},getGridInnerWidth:function(){var e=Ext.grid.PivotGridView.superclass.getGridInnerWidth.apply(this,arguments);return e-this.getTotalRowHeaderWidth()},getTotalRowHeaderWidth:function(){var e=this.getRowHeaders(),t=e.length,n=0,r;for(r=0;r<t;r++){n+=e[r].width}return n},getTotalColumnHeaderHeight:function(){return this.getColumnHeaders().length*21},getCellIndex:function(e){if(e){var t=e.className.match(this.colRe),n;if(t&&(n=t[1])){return parseInt(n.split("-")[1],10)}}return false},renderUI:function(){var e=this.templates,t=this.getGridInnerWidth();return e.master.apply({body:e.body.apply({rows:"&#160;"}),ostyle:"width:"+t+"px",bstyle:"width:"+t+"px"})},onLayout:function(e,t){Ext.grid.PivotGridView.superclass.onLayout.apply(this,arguments);var e=this.getGridInnerWidth();this.resizeColumnHeaders(e);this.resizeAllRows(e)},refresh:function(e){this.fireEvent("beforerefresh",this);this.grid.stopEditing(true);var t=this.renderBody();this.mainBody.update(t).setWidth(this.getGridInnerWidth());if(e===true){this.updateHeaders();this.updateHeaderSortState()}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent("refresh",this)},renderHeaders:Ext.emptyFn,fitColumns:Ext.emptyFn,resizeColumnHeaders:function(e){var t=this.grid.topAxis;if(t.rendered){t.el.setWidth(e)}},resizeRowHeaders:function(){var e=this.getTotalRowHeaderWidth(),t=String.format("margin-left: {0}px;",e);this.rowHeadersEl.setWidth(e);this.mainBody.applyStyles(t);Ext.fly(this.innerHd).applyStyles(t);this.headerTitleEl.setWidth(e);this.headerTitleEl.setHeight(this.getTotalColumnHeaderHeight())},resizeAllRows:function(e){var t=this.getRows(),n=t.length,r;for(r=0;r<n;r++){Ext.fly(t[r]).setWidth(e);Ext.fly(t[r]).child("table").setWidth(e)}},updateHeaders:function(){this.renderGroupRowHeaders();this.renderGroupColumnHeaders()},renderGroupRowHeaders:function(){var e=this.grid.leftAxis;this.resizeRowHeaders();e.rendered=false;e.render(this.rowHeadersEl);this.setTitle(this.title)},setTitle:function(e){this.headerTitleEl.child("span").dom.innerHTML=e},renderGroupColumnHeaders:function(){var e=this.grid.topAxis;e.rendered=false;e.render(this.innerHd.firstChild)},isMenuDisabled:function(e,t){return true}});Ext.grid.PivotAxis=Ext.extend(Ext.Component,{orientation:"horizontal",defaultHeaderWidth:80,paddingWidth:7,setDimensions:function(e){this.dimensions=e},onRender:function(e,t){var n=this.orientation=="horizontal"?this.renderHorizontalRows():this.renderVerticalRows();this.el=Ext.DomHelper.overwrite(e.dom,{tag:"table",cn:n},true)},renderHorizontalRows:function(){var e=this.buildHeaders(),t=e.length,n=[],r,i,s,o,u;for(o=0;o<t;o++){r=[];i=e[o].items;s=i.length;for(u=0;u<s;u++){r.push({tag:"td",html:i[u].header,colspan:i[u].span})}n[o]={tag:"tr",cn:r}}return n},renderVerticalRows:function(){var e=this.buildHeaders(),t=e.length,n=[],r=[],i,s,o,u,a,f;for(a=0;a<t;a++){s=e[a];u=s.width||80;i=s.items.length;for(f=0;f<i;f++){o=s.items[f];n[o.start]=n[o.start]||[];n[o.start].push({tag:"td",html:o.header,rowspan:o.span,width:Ext.isBorderBox?u:u-this.paddingWidth})}}i=n.length;for(a=0;a<i;a++){r[a]={tag:"tr",cn:n[a]}}return r},getTuples:function(){var e=new Ext.data.Store({});e.data=this.store.data.clone();e.fields=this.store.fields;var t=[],n=this.dimensions,r=n.length,i;for(i=0;i<r;i++){t.push({field:n[i].dataIndex,direction:n[i].direction||"ASC"})}e.sort(t);var s=e.data.items,o=[],u=[],a,f,l,c,h;r=s.length;for(i=0;i<r;i++){l=this.getRecordInfo(s[i]);c=l.data;f="";for(h in c){f+=c[h]+"---"}if(o.indexOf(f)==-1){o.push(f);u.push(l)}}e.destroy();return u},getRecordInfo:function(e){var t=this.dimensions,n=t.length,r={},i,s,o;for(o=0;o<n;o++){i=t[o];s=i.dataIndex;r[s]=e.get(s)}var u=function(e){return function(t){for(var n in e){if(t.get(n)!=e[n]){return false}}return true}};return{data:r,matcher:u(r)}},buildHeaders:function(){var e=this.getTuples(),t=e.length,n=this.dimensions,r,i=n.length,s=[],o,u,a,f,l,c,h,p,d,v;for(d=0;d<i;d++){r=n[d];u=[];l=0;c=0;for(v=0;v<t;v++){o=e[v];h=v==t-1;a=o.data[r.dataIndex];p=f!=undefined&&f!=a;if(d>0&&v>0){p=p||o.data[n[d-1].dataIndex]!=e[v-1].data[n[d-1].dataIndex]}if(p){u.push({header:f,span:l,start:c});c+=l;l=0}if(h){u.push({header:a,span:l+1,start:c});c+=l;l=0}f=a;l++}s.push({items:u,width:r.width||this.defaultHeaderWidth});f=undefined}return s}});Ext.grid.HeaderDragZone=Ext.extend(Ext.dd.DragZone,{maxDragWidth:120,constructor:function(e,t,n){this.grid=e;this.view=e.getView();this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDragZone.superclass.constructor.call(this,t);if(n){this.setHandleElId(Ext.id(t));this.setOuterHandleElId(Ext.id(n))}this.scroll=false},getDragData:function(e){var t=Ext.lib.Event.getTarget(e),n=this.view.findHeaderCell(t);if(n){return{ddel:n.firstChild,header:n}}return false},onInitDrag:function(e){this.dragHeadersDisabled=this.view.headersDisabled;this.view.headersDisabled=true;var t=this.dragData.ddel.cloneNode(true);t.id=Ext.id();t.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px";this.proxy.update(t);return true},afterValidDrop:function(){this.completeDrop()},afterInvalidDrop:function(){this.completeDrop()},completeDrop:function(){var e=this.view,t=this.dragHeadersDisabled;setTimeout(function(){e.headersDisabled=t},50)}});Ext.grid.HeaderDropZone=Ext.extend(Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,constructor:function(e,t,n){this.grid=e;this.view=e.getView();this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},true);this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},true);this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100);this.setStyle("visibility","hidden")};this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDropZone.superclass.constructor.call(this,e.getGridEl().dom)},getTargetFromEvent:function(e){var t=Ext.lib.Event.getTarget(e),n=this.view.findCellIndex(t);if(n!==false){return this.view.getHeaderCell(n)}},nextVisible:function(e){var t=this.view,n=this.grid.colModel;e=e.nextSibling;while(e){if(!n.isHidden(t.getCellIndex(e))){return e}e=e.nextSibling}return null},prevVisible:function(e){var t=this.view,n=this.grid.colModel;e=e.prevSibling;while(e){if(!n.isHidden(t.getCellIndex(e))){return e}e=e.prevSibling}return null},positionIndicator:function(e,t,n){var r=Ext.lib.Event.getPageX(n),i=Ext.lib.Dom.getRegion(t.firstChild),s,o,u=i.top+this.proxyOffsets[1];if(i.right-r<=(i.right-i.left)/2){s=i.right+this.view.borderWidth;o="after"}else{s=i.left;o="before"}if(this.grid.colModel.isFixed(this.view.getCellIndex(t))){return false}s+=this.proxyOffsets[0];this.proxyTop.setLeftTop(s,u);this.proxyTop.show();if(!this.bottomOffset){this.bottomOffset=this.view.mainHd.getHeight()}this.proxyBottom.setLeftTop(s,u+this.proxyTop.dom.offsetHeight+this.bottomOffset);this.proxyBottom.show();return o},onNodeEnter:function(e,t,n,r){if(r.header!=e){this.positionIndicator(r.header,e,n)}},onNodeOver:function(e,t,n,r){var i=false;if(r.header!=e){i=this.positionIndicator(r.header,e,n)}if(!i){this.proxyTop.hide();this.proxyBottom.hide()}return i?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(e,t,n,r){this.proxyTop.hide();this.proxyBottom.hide()},onNodeDrop:function(e,t,n,r){var i=r.header;if(i!=e){var s=this.grid.colModel,o=Ext.lib.Event.getPageX(n),u=Ext.lib.Dom.getRegion(e.firstChild),a=u.right-o<=(u.right-u.left)/2?"after":"before",f=this.view.getCellIndex(i),l=this.view.getCellIndex(e);if(a=="after"){l++}if(f<l){l--}s.moveColumn(f,l);return true}return false}});Ext.grid.GridView.ColumnDragZone=Ext.extend(Ext.grid.HeaderDragZone,{constructor:function(e,t){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,e,t,null);this.proxy.el.addClass("x-grid3-col-dd")},handleMouseDown:function(e){},callHandleMouseDown:function(e){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,e)}});Ext.grid.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{fly:Ext.Element.fly,constructor:function(e,t,n){this.grid=e;this.view=e.getView();this.proxy=this.view.resizeProxy;Ext.grid.SplitDragZone.superclass.constructor.call(this,t,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.setHandleElId(Ext.id(t));this.setOuterHandleElId(Ext.id(n));this.scroll=false},b4StartDrag:function(e,t){this.view.headersDisabled=true;this.proxy.setHeight(this.view.mainWrap.getHeight());var n=this.cm.getColumnWidth(this.cellIndex);var r=Math.max(n-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(r,1e3);this.setYConstraint(0,0);this.minX=e-r;this.maxX=e+1e3;this.startPos=e;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,e,t)},handleMouseDown:function(e){var t=Ext.EventObject.setEvent(e);var n=this.fly(t.getTarget());if(n.hasClass("x-grid-split")){this.cellIndex=this.view.getCellIndex(n.dom);this.split=n.dom;this.cm=this.grid.colModel;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}},endDrag:function(e){this.view.headersDisabled=false;var t=Math.max(this.minX,Ext.lib.Event.getPageX(e));var n=t-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+n)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GridDragZone=function(e,t){this.view=e.getView();Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,t);this.scroll=false;this.grid=e;this.ddel=document.createElement("div");this.ddel.className="x-grid-dd-wrap";this.preventDefault=true};Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(e){var t=Ext.lib.Event.getTarget(e),n,r=this.view.findRowIndex(t),i,s,o;if(r!==false){n=this.grid.selModel;if(n.getSelectedCell){i=this.view.findCellIndex(t);s=n.getSelectedCell();if(!s||s[0]!==r||s[1]!==i){n.handleMouseDown(this.grid,r,i,e)}if(this.grid.dragCell){o=n.getSelectedCell();if(!this.grid.hasOwnProperty("ddText")){this.grid.ddText="{0} selected cell{1}"}}else{o=[this.grid.store.getAt(r)]}}else{if(!n.isSelected(r)||e.hasModifier()){n.handleMouseDown(this.grid,r,e)}o=n.getSelections()}return{grid:this.grid,ddel:this.ddel,rowIndex:r,selections:o}}return false},onInitDrag:function(e){var t=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText();this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=false},getRepairXY:function(e,t){return false},onEndDrag:function(e,t){},onValidDrop:function(e,t,n){this.hideProxy()},beforeInvalidDrop:function(e,t){}});Ext.grid.ColumnModel=Ext.extend(Ext.util.Observable,{defaultWidth:100,defaultSortable:false,constructor:function(e){if(e.columns){Ext.apply(this,e);this.setConfig(e.columns,true)}else{this.setConfig(e,true)}this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","configchange");Ext.grid.ColumnModel.superclass.constructor.call(this)},getColumnId:function(e){return this.config[e].id},getColumnAt:function(e){return this.config[e]},setConfig:function(e,t){var n,r,i;if(!t){delete this.totalWidth;for(n=0,i=this.config.length;n<i;n++){r=this.config[n];if(r.setEditor){r.setEditor(null)}}}this.defaults=Ext.apply({width:this.defaultWidth,sortable:this.defaultSortable},this.defaults);this.config=e;this.lookup={};for(n=0,i=e.length;n<i;n++){r=Ext.applyIf(e[n],this.defaults);if(Ext.isEmpty(r.id)){r.id=n}if(!r.isColumn){var s=Ext.grid.Column.types[r.xtype||"gridcolumn"];r=new s(r);e[n]=r}this.lookup[r.id]=r}if(!t){this.fireEvent("configchange",this)}},getColumnById:function(e){return this.lookup[e]},getIndexById:function(e){for(var t=0,n=this.config.length;t<n;t++){if(this.config[t].id==e){return t}}return-1},moveColumn:function(e,t){var n=this.config,r=n[e];n.splice(e,1);n.splice(t,0,r);this.dataMap=null;this.fireEvent("columnmoved",this,e,t)},getColumnCount:function(e){var t=this.config.length,n=0,r;if(e===true){for(r=0;r<t;r++){if(!this.isHidden(r)){n++}}return n}return t},getColumnsBy:function(e,t){var n=this.config,r=n.length,i=[],s,o;for(s=0;s<r;s++){o=n[s];if(e.call(t||this,o,s)===true){i[i.length]=o}}return i},isSortable:function(e){return!!this.config[e].sortable},isMenuDisabled:function(e){return!!this.config[e].menuDisabled},getRenderer:function(e){return this.config[e].renderer||Ext.grid.ColumnModel.defaultRenderer},getRendererScope:function(e){return this.config[e].scope},setRenderer:function(e,t){this.config[e].renderer=t},getColumnWidth:function(e){var t=this.config[e].width;if(typeof t!="number"){t=this.defaultWidth}return t},setColumnWidth:function(e,t,n){this.config[e].width=t;this.totalWidth=null;if(!n){this.fireEvent("widthchange",this,e,t)}},getTotalWidth:function(e){if(!this.totalWidth){this.totalWidth=0;for(var t=0,n=this.config.length;t<n;t++){if(e||!this.isHidden(t)){this.totalWidth+=this.getColumnWidth(t)}}}return this.totalWidth},getColumnHeader:function(e){return this.config[e].header},setColumnHeader:function(e,t){this.config[e].header=t;this.fireEvent("headerchange",this,e,t)},getColumnTooltip:function(e){return this.config[e].tooltip},setColumnTooltip:function(e,t){this.config[e].tooltip=t},getDataIndex:function(e){return this.config[e].dataIndex},setDataIndex:function(e,t){this.config[e].dataIndex=t},findColumnIndex:function(e){var t=this.config;for(var n=0,r=t.length;n<r;n++){if(t[n].dataIndex==e){return n}}return-1},isCellEditable:function(e,t){var n=this.config[e],r=n.editable;return!!(r||!Ext.isDefined(r)&&n.editor)},getCellEditor:function(e,t){return this.config[e].getCellEditor(t)},setEditable:function(e,t){this.config[e].editable=t},isHidden:function(e){return!!this.config[e].hidden},isFixed:function(e){return!!this.config[e].fixed},isResizable:function(e){return e>=0&&this.config[e].resizable!==false&&this.config[e].fixed!==true},setHidden:function(e,t){var n=this.config[e];if(n.hidden!==t){n.hidden=t;this.totalWidth=null;this.fireEvent("hiddenchange",this,e,t)}},setEditor:function(e,t){this.config[e].setEditor(t)},destroy:function(){var e=this.config.length,t=0;for(;t<e;t++){this.config[t].destroy()}delete this.config;delete this.lookup;this.purgeListeners()},setState:function(e,t){t=Ext.applyIf(t,this.defaults);Ext.apply(this.config[e],t)}});Ext.grid.ColumnModel.defaultRenderer=function(e){if(typeof e=="string"&&e.length<1){return"&#160;"}return e};Ext.grid.AbstractSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(){this.locked=false;Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)},init:function(e){this.grid=e;if(this.lockOnInit){delete this.lockOnInit;this.locked=false;this.lock()}this.initEvents()},lock:function(){if(!this.locked){this.locked=true;var e=this.grid;if(e){e.getView().on({scope:this,beforerefresh:this.sortUnLock,refresh:this.sortLock})}else{this.lockOnInit=true}}},sortLock:function(){this.locked=true},sortUnLock:function(){this.locked=false},unlock:function(){if(this.locked){this.locked=false;var e=this.grid,t;if(e){t=e.getView();t.un("beforerefresh",this.sortUnLock,this);t.un("refresh",this.sortLock,this)}else{delete this.lockOnInit}}},isLocked:function(){return this.locked},destroy:function(){this.unlock();this.purgeListeners()}});Ext.grid.RowSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{singleSelect:false,constructor:function(e){Ext.apply(this,e);this.selections=new Ext.util.MixedCollection(false,function(e){return e.id});this.last=false;this.lastActive=false;this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect");Ext.grid.RowSelectionModel.superclass.constructor.call(this)},initEvents:function(){if(!this.grid.enableDragDrop&&!this.grid.enableDrag){this.grid.on("rowmousedown",this.handleMouseDown,this)}this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:this.onKeyPress,down:this.onKeyPress,scope:this});this.grid.getView().on({scope:this,refresh:this.onRefresh,rowupdated:this.onRowUpdated,rowremoved:this.onRemove})},onKeyPress:function(e,t){var n=t=="up",r=n?"selectPrevious":"selectNext",i=n?-1:1,s;if(!e.shiftKey||this.singleSelect){this[r](false)}else if(this.last!==false&&this.lastActive!==false){s=this.last;this.selectRange(this.last,this.lastActive+i);this.grid.getView().focusRow(this.lastActive);if(s!==false){this.last=s}}else{this.selectFirstRow()}},onRefresh:function(){var e=this.grid.store,t=this.getSelections(),n=0,r=t.length,i,s;this.silent=true;this.clearSelections(true);for(;n<r;n++){s=t[n];if((i=e.indexOfId(s.id))!=-1){this.selectRow(i,true)}}if(t.length!=this.selections.getCount()){this.fireEvent("selectionchange",this)}this.silent=false},onRemove:function(e,t,n){if(this.selections.remove(n)!==false){this.fireEvent("selectionchange",this)}},onRowUpdated:function(e,t,n){if(this.isSelected(n)){e.onRowSelect(t)}},selectRecords:function(e,t){if(!t){this.clearSelections()}var n=this.grid.store,r=0,i=e.length;for(;r<i;r++){this.selectRow(n.indexOf(e[r]),true)}},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(e){this.selectRow(this.grid.store.getCount()-1,e)},selectNext:function(e){if(this.hasNext()){this.selectRow(this.last+1,e);this.grid.getView().focusRow(this.last);return true}return false},selectPrevious:function(e){if(this.hasPrevious()){this.selectRow(this.last-1,e);this.grid.getView().focusRow(this.last);return true}return false},hasNext:function(){return this.last!==false&&this.last+1<this.grid.store.getCount()},hasPrevious:function(){return!!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(e,t){var n=this.getSelections(),r=0,i=n.length;for(;r<i;r++){if(e.call(t||this,n[r],r)===false){return false}}return true},clearSelections:function(e){if(this.isLocked()){return}if(e!==true){var t=this.grid.store,n=this.selections;n.each(function(e){this.deselectRow(t.indexOfId(e.id))},this);n.clear()}else{this.selections.clear()}this.last=false},selectAll:function(){if(this.isLocked()){return}this.selections.clear();for(var e=0,t=this.grid.store.getCount();e<t;e++){this.selectRow(e,true)}},hasSelection:function(){return this.selections.length>0},isSelected:function(e){var t=Ext.isNumber(e)?this.grid.store.getAt(e):e;return t&&this.selections.key(t.id)?true:false},isIdSelected:function(e){return this.selections.key(e)?true:false},handleMouseDown:function(e,t,n){if(n.button!==0||this.isLocked()){return}var r=this.grid.getView();if(n.shiftKey&&!this.singleSelect&&this.last!==false){var i=this.last;this.selectRange(i,t,n.ctrlKey);this.last=i;r.focusRow(t)}else{var s=this.isSelected(t);if(n.ctrlKey&&s){this.deselectRow(t)}else if(!s||this.getCount()>1){this.selectRow(t,n.ctrlKey||n.shiftKey);r.focusRow(t)}}},selectRows:function(e,t){if(!t){this.clearSelections()}for(var n=0,r=e.length;n<r;n++){this.selectRow(e[n],true)}},selectRange:function(e,t,n){var r;if(this.isLocked()){return}if(!n){this.clearSelections()}if(e<=t){for(r=e;r<=t;r++){this.selectRow(r,true)}}else{for(r=e;r>=t;r--){this.selectRow(r,true)}}},deselectRange:function(e,t,n){if(this.isLocked()){return}for(var r=e;r<=t;r++){this.deselectRow(r,n)}},selectRow:function(e,t,n){if(this.isLocked()||e<0||e>=this.grid.store.getCount()||t&&this.isSelected(e)){return}var r=this.grid.store.getAt(e);if(r&&this.fireEvent("beforerowselect",this,e,t,r)!==false){if(!t||this.singleSelect){this.clearSelections()}this.selections.add(r);this.last=this.lastActive=e;if(!n){this.grid.getView().onRowSelect(e)}if(!this.silent){this.fireEvent("rowselect",this,e,r);this.fireEvent("selectionchange",this)}}},deselectRow:function(e,t){if(this.isLocked()){return}if(this.last==e){this.last=false}if(this.lastActive==e){this.lastActive=false}var n=this.grid.store.getAt(e);if(n){this.selections.remove(n);if(!t){this.grid.getView().onRowDeselect(e)}this.fireEvent("rowdeselect",this,e,n);this.fireEvent("selectionchange",this)}},acceptsNav:function(e,t,n){return!n.isHidden(t)&&n.isCellEditable(t,e)},onEditorKey:function(e,t){var n=t.getKey(),r,i=this.grid,s=i.lastEdit,o=i.activeEditor,u=t.shiftKey,a,s,f,l;if(n==t.TAB){t.stopEvent();o.completeEdit();if(u){r=i.walkCells(o.row,o.col-1,-1,this.acceptsNav,this)}else{r=i.walkCells(o.row,o.col+1,1,this.acceptsNav,this)}}else if(n==t.ENTER){if(this.moveEditorOnEnter!==false){if(u){r=i.walkCells(s.row-1,s.col,-1,this.acceptsNav,this)}else{r=i.walkCells(s.row+1,s.col,1,this.acceptsNav,this)}}}if(r){f=r[0];l=r[1];this.onEditorSelect(f,s.row);if(i.isEditor&&i.editing){a=i.activeEditor;if(a&&a.field.triggerBlur){a.field.triggerBlur()}}i.startEditing(f,l)}},onEditorSelect:function(e,t){if(t!=e){this.selectRow(e)}},destroy:function(){Ext.destroy(this.rowNav);this.rowNav=null;Ext.grid.RowSelectionModel.superclass.destroy.call(this)}});Ext.grid.Column=Ext.extend(Ext.util.Observable,{isColumn:true,constructor:function(e){Ext.apply(this,e);if(Ext.isString(this.renderer)){this.renderer=Ext.util.Format[this.renderer]}else if(Ext.isObject(this.renderer)){this.scope=this.renderer.scope;this.renderer=this.renderer.fn}if(!this.scope){this.scope=this}var t=this.editor;delete this.editor;this.setEditor(t);this.addEvents("click","contextmenu","dblclick","mousedown");Ext.grid.Column.superclass.constructor.call(this)},processEvent:function(e,t,n,r,i){return this.fireEvent(e,this,n,r,t)},destroy:function(){if(this.setEditor){this.setEditor(null)}this.purgeListeners()},renderer:function(e){return e},getEditor:function(e){return this.editable!==false?this.editor:null},setEditor:function(e){var t=this.editor;if(t){if(t.gridEditor){t.gridEditor.destroy();delete t.gridEditor}else{t.destroy()}}this.editor=null;if(e){if(!e.isXType){e=Ext.create(e,"textfield")}this.editor=e}},getCellEditor:function(e){var t=this.getEditor(e);if(t){if(!t.startEdit){if(!t.gridEditor){t.gridEditor=new Ext.grid.GridEditor(t)}t=t.gridEditor}}return t}});Ext.grid.BooleanColumn=Ext.extend(Ext.grid.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(e){Ext.grid.BooleanColumn.superclass.constructor.call(this,e);var t=this.trueText,n=this.falseText,r=this.undefinedText;this.renderer=function(e){if(e===undefined){return r}if(!e||e==="false"){return n}return t}}});Ext.grid.NumberColumn=Ext.extend(Ext.grid.Column,{format:"0,000.00",constructor:function(e){Ext.grid.NumberColumn.superclass.constructor.call(this,e);this.renderer=Ext.util.Format.numberRenderer(this.format)}});Ext.grid.DateColumn=Ext.extend(Ext.grid.Column,{format:"m/d/Y",constructor:function(e){Ext.grid.DateColumn.superclass.constructor.call(this,e);this.renderer=Ext.util.Format.dateRenderer(this.format)}});Ext.grid.TemplateColumn=Ext.extend(Ext.grid.Column,{constructor:function(e){Ext.grid.TemplateColumn.superclass.constructor.call(this,e);var t=!Ext.isPrimitive(this.tpl)&&this.tpl.compile?this.tpl:new Ext.XTemplate(this.tpl);this.renderer=function(e,n,r){return t.apply(r.data)};this.tpl=t}});Ext.grid.ActionColumn=Ext.extend(Ext.grid.Column,{header:"&#160;",actionIdRe:/x-action-col-(\d+)/,altText:"",constructor:function(e){var t=this,n=e.items||(t.items=[t]),r=n.length,i,s;Ext.grid.ActionColumn.superclass.constructor.call(t,e);t.renderer=function(o,u){o=Ext.isFunction(e.renderer)?e.renderer.apply(this,arguments)||"":"";u.css+=" x-action-col-cell";for(i=0;i<r;i++){s=n[i];o+='<img alt="'+(s.altText||t.altText)+'" src="'+(s.icon||Ext.BLANK_IMAGE_URL)+'" class="x-action-col-icon x-action-col-'+String(i)+" "+(s.iconCls||"")+" "+(Ext.isFunction(s.getClass)?s.getClass.apply(s.scope||this.scope||this,arguments):"")+'"'+(s.tooltip?' ext:qtip="'+s.tooltip+'"':"")+" />"}return o}},destroy:function(){delete this.items;delete this.renderer;return Ext.grid.ActionColumn.superclass.destroy.apply(this,arguments)},processEvent:function(e,t,n,r,i){var s=t.getTarget().className.match(this.actionIdRe),o,u;if(s&&(o=this.items[parseInt(s[1],10)])){if(e=="click"){(u=o.handler||this.handler)&&u.call(o.scope||this.scope||this,n,r,i,o,t)}else if(e=="mousedown"&&o.stopSelection!==false){return false}}return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)}});Ext.grid.Column.types={gridcolumn:Ext.grid.Column,booleancolumn:Ext.grid.BooleanColumn,numbercolumn:Ext.grid.NumberColumn,datecolumn:Ext.grid.DateColumn,templatecolumn:Ext.grid.TemplateColumn,actioncolumn:Ext.grid.ActionColumn};Ext.grid.RowNumberer=Ext.extend(Object,{header:"",width:23,sortable:false,constructor:function(e){Ext.apply(this,e);if(this.rowspan){this.renderer=this.renderer.createDelegate(this)}},fixed:true,hideable:false,menuDisabled:true,dataIndex:"",id:"numberer",rowspan:undefined,renderer:function(e,t,n,r){if(this.rowspan){t.cellAttr='rowspan="'+this.rowspan+'"'}return r+1}});Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;</div>',width:20,sortable:false,menuDisabled:true,fixed:true,hideable:false,dataIndex:"",id:"checker",isColumn:true,constructor:function(){Ext.grid.CheckboxSelectionModel.superclass.constructor.apply(this,arguments);if(this.checkOnly){this.handleMouseDown=Ext.emptyFn}},initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this);this.grid.on("render",function(){Ext.fly(this.grid.getView().innerHd).on("mousedown",this.onHdMouseDown,this)},this)},processEvent:function(e,t,n,r,i){if(e=="mousedown"){this.onMouseDown(t,t.getTarget());return false}else{return Ext.grid.Column.prototype.processEvent.apply(this,arguments)}},onMouseDown:function(e,t){if(e.button===0&&t.className=="x-grid3-row-checker"){e.stopEvent();var n=e.getTarget(".x-grid3-row");if(n){var r=n.rowIndex;if(this.isSelected(r)){this.deselectRow(r)}else{this.selectRow(r,true);this.grid.getView().focusRow(r)}}}},onHdMouseDown:function(e,t){if(t.className=="x-grid3-hd-checker"){e.stopEvent();var n=Ext.fly(t.parentNode);var r=n.hasClass("x-grid3-hd-checker-on");if(r){n.removeClass("x-grid3-hd-checker-on");this.clearSelections()}else{n.addClass("x-grid3-hd-checker-on");this.selectAll()}}},renderer:function(e,t,n){return'<div class="x-grid3-row-checker">&#160;</div>'},onEditorSelect:function(e,t){if(t!=e&&!this.checkOnly){this.selectRow(e)}}});Ext.grid.CellSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{constructor:function(e){Ext.apply(this,e);this.selection=null;this.addEvents("beforecellselect","cellselect","selectionchange");Ext.grid.CellSelectionModel.superclass.constructor.call(this)},initEvents:function(){this.grid.on("cellmousedown",this.handleMouseDown,this);this.grid.on(Ext.EventManager.getKeyEvent(),this.handleKeyDown,this);this.grid.getView().on({scope:this,refresh:this.onViewChange,rowupdated:this.onRowUpdated,beforerowremoved:this.clearSelections,beforerowsinserted:this.clearSelections});if(this.grid.isEditor){this.grid.on("beforeedit",this.beforeEdit,this)}},beforeEdit:function(e){this.select(e.row,e.column,false,true,e.record)},onRowUpdated:function(e,t,n){if(this.selection&&this.selection.record==n){e.onCellSelect(t,this.selection.cell[1])}},onViewChange:function(){this.clearSelections(true)},getSelectedCell:function(){return this.selection?this.selection.cell:null},clearSelections:function(e){var t=this.selection;if(t){if(e!==true){this.grid.view.onCellDeselect(t.cell[0],t.cell[1])}this.selection=null;this.fireEvent("selectionchange",this,null)}},hasSelection:function(){return this.selection?true:false},handleMouseDown:function(e,t,n,r){if(r.button!==0||this.isLocked()){return}this.select(t,n)},select:function(e,t,n,r,i){if(this.fireEvent("beforecellselect",this,e,t)!==false){this.clearSelections();i=i||this.grid.store.getAt(e);this.selection={record:i,cell:[e,t]};if(!n){var s=this.grid.getView();s.onCellSelect(e,t);if(r!==true){s.focusCell(e,t)}}this.fireEvent("cellselect",this,e,t);this.fireEvent("selectionchange",this,this.selection)}},isSelectable:function(e,t,n){return!n.isHidden(t)},onEditorKey:function(e,t){if(t.getKey()==t.TAB){this.handleKeyDown(t)}},handleKeyDown:function(e){if(!e.isNavKeyPress()){return}var t=e.getKey(),n=this.grid,r=this.selection,i=this,s=function(e,t,r){return n.walkCells(e,t,r,n.isEditor&&n.editing?i.acceptsNav:i.isSelectable,i)},o,u,a,f,l;switch(t){case e.ESC:case e.PAGE_UP:case e.PAGE_DOWN:break;default:e.stopEvent();break}if(!r){o=s(0,0,1);if(o){this.select(o[0],o[1])}return}o=r.cell;a=o[0];f=o[1];switch(t){case e.TAB:if(e.shiftKey){u=s(a,f-1,-1)}else{u=s(a,f+1,1)}break;case e.DOWN:u=s(a+1,f,1);break;case e.UP:u=s(a-1,f,-1);break;case e.RIGHT:u=s(a,f+1,1);break;case e.LEFT:u=s(a,f-1,-1);break;case e.ENTER:if(n.isEditor&&!n.editing){n.startEditing(a,f);return}break}if(u){a=u[0];f=u[1];this.select(a,f);if(n.isEditor&&n.editing){l=n.activeEditor;if(l&&l.field.triggerBlur){l.field.triggerBlur()}n.startEditing(a,f)}}},acceptsNav:function(e,t,n){return!n.isHidden(t)&&n.isCellEditable(t,e)}});Ext.grid.EditorGridPanel=Ext.extend(Ext.grid.GridPanel,{clicksToEdit:2,forceValidation:false,isEditor:true,detectEdit:false,autoEncode:false,trackMouseOver:false,initComponent:function(){Ext.grid.EditorGridPanel.superclass.initComponent.call(this);if(!this.selModel){this.selModel=new Ext.grid.CellSelectionModel}this.activeEditor=null;this.addEvents("beforeedit","afteredit","validateedit")},initEvents:function(){Ext.grid.EditorGridPanel.superclass.initEvents.call(this);this.getGridEl().on("mousewheel",this.stopEditing.createDelegate(this,[true]),this);this.on("columnresize",this.stopEditing,this,[true]);if(this.clicksToEdit==1){this.on("cellclick",this.onCellDblClick,this)}else{var e=this.getView();if(this.clicksToEdit=="auto"&&e.mainBody){e.mainBody.on("mousedown",this.onAutoEditClick,this)}this.on("celldblclick",this.onCellDblClick,this)}},onResize:function(){Ext.grid.EditorGridPanel.superclass.onResize.apply(this,arguments);var e=this.activeEditor;if(this.editing&&e){e.realign(true)}},onCellDblClick:function(e,t,n){this.startEditing(t,n)},onAutoEditClick:function(e,t){if(e.button!==0){return}var n=this.view.findRowIndex(t),r=this.view.findCellIndex(t);if(n!==false&&r!==false){this.stopEditing();if(this.selModel.getSelectedCell){var i=this.selModel.getSelectedCell();if(i&&i[0]===n&&i[1]===r){this.startEditing(n,r)}}else{if(this.selModel.isSelected(n)){this.startEditing(n,r)}}}},onEditComplete:function(e,t,n){this.editing=false;this.lastActiveEditor=this.activeEditor;this.activeEditor=null;var r=e.record,i=this.colModel.getDataIndex(e.col);t=this.postEditValue(t,n,r,i);if(this.forceValidation===true||String(t)!==String(n)){var s={grid:this,record:r,field:i,originalValue:n,value:t,row:e.row,column:e.col,cancel:false};if(this.fireEvent("validateedit",s)!==false&&!s.cancel&&String(t)!==String(n)){r.set(i,s.value);delete s.cancel;this.fireEvent("afteredit",s)}}this.view.focusCell(e.row,e.col)},startEditing:function(e,t){this.stopEditing();if(this.colModel.isCellEditable(t,e)){this.view.ensureVisible(e,t,true);var n=this.store.getAt(e),r=this.colModel.getDataIndex(t),i={grid:this,record:n,field:r,value:n.data[r],row:e,column:t,cancel:false};if(this.fireEvent("beforeedit",i)!==false&&!i.cancel){this.editing=true;var s=this.colModel.getCellEditor(t,e);if(!s){return}if(!s.rendered){s.parentEl=this.view.getEditorParent(s);s.on({scope:this,render:{fn:function(e){e.field.focus(false,true)},single:true,scope:this},specialkey:function(e,t){this.getSelectionModel().onEditorKey(e,t)},complete:this.onEditComplete,canceledit:this.stopEditing.createDelegate(this,[true])})}Ext.apply(s,{row:e,col:t,record:n});this.lastEdit={row:e,col:t};this.activeEditor=s;if(s.field.isXType("checkbox")){s.allowBlur=false;this.setupCheckbox(s.field)}s.selectSameEditor=this.activeEditor==this.lastActiveEditor;var o=this.preEditValue(n,r);s.startEdit(this.view.getCell(e,t).firstChild,Ext.isDefined(o)?o:"");(function(){delete s.selectSameEditor}).defer(50)}}},setupCheckbox:function(e){var t=this,n=function(){e.el.on("click",t.onCheckClick,t,{single:true})};if(e.rendered){n()}else{e.on("render",n,null,{single:true})}},onCheckClick:function(){var e=this.activeEditor;e.allowBlur=true;e.field.focus(false,10)},preEditValue:function(e,t){var n=e.data[t];return this.autoEncode&&Ext.isString(n)?Ext.util.Format.htmlDecode(n):n},postEditValue:function(e,t,n,r){return this.autoEncode&&Ext.isString(e)?Ext.util.Format.htmlEncode(e):e},stopEditing:function(e){if(this.editing){var t=this.lastActiveEditor=this.activeEditor;if(t){t[e===true?"cancelEdit":"completeEdit"]();this.view.focusCell(t.row,t.col)}this.activeEditor=null}this.editing=false}});Ext.reg("editorgrid",Ext.grid.EditorGridPanel);Ext.grid.GridEditor=function(e,t){Ext.grid.GridEditor.superclass.constructor.call(this,e,t);e.monitorTab=false};Ext.extend(Ext.grid.GridEditor,Ext.Editor,{alignment:"tl-tl",autoSize:"width",hideEl:false,cls:"x-small-editor x-grid-editor",shim:false,shadow:false});Ext.grid.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value"]);Ext.grid.PropertyStore=Ext.extend(Ext.util.Observable,{constructor:function(e,t){this.grid=e;this.store=new Ext.data.Store({recordType:Ext.grid.PropertyRecord});this.store.on("update",this.onUpdate,this);if(t){this.setSource(t)}Ext.grid.PropertyStore.superclass.constructor.call(this)},setSource:function(e){this.source=e;this.store.removeAll();var t=[];for(var n in e){if(this.isEditableValue(e[n])){t.push(new Ext.grid.PropertyRecord({name:n,value:e[n]},n))}}this.store.loadRecords({records:t},{},true)},onUpdate:function(e,t,n){if(n==Ext.data.Record.EDIT){var r=t.data.value;var i=t.modified.value;if(this.grid.fireEvent("beforepropertychange",this.source,t.id,r,i)!==false){this.source[t.id]=r;t.commit();this.grid.fireEvent("propertychange",this.source,t.id,r,i)}else{t.reject()}}},getProperty:function(e){return this.store.getAt(e)},isEditableValue:function(e){return Ext.isPrimitive(e)||Ext.isDate(e)},setValue:function(e,t,n){var r=this.getRec(e);if(r){r.set("value",t);this.source[e]=t}else if(n){this.source[e]=t;r=new Ext.grid.PropertyRecord({name:e,value:t},e);this.store.add(r)}},remove:function(e){var t=this.getRec(e);if(t){this.store.remove(t);delete this.source[e]}},getRec:function(e){return this.store.getById(e)},getSource:function(){return this.source}});Ext.grid.PropertyColumnModel=Ext.extend(Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"m/j/Y",trueText:"true",falseText:"false",constructor:function(e,t){var n=Ext.grid,r=Ext.form;this.grid=e;n.PropertyColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:true,dataIndex:"name",id:"name",menuDisabled:true},{header:this.valueText,width:50,resizable:false,dataIndex:"value",id:"value",menuDisabled:true}]);this.store=t;var i=new r.Field({autoCreate:{tag:"select",children:[{tag:"option",value:"true",html:this.trueText},{tag:"option",value:"false",html:this.falseText}]},getValue:function(){return this.el.dom.value=="true"}});this.editors={date:new n.GridEditor(new r.DateField({selectOnFocus:true})),string:new n.GridEditor(new r.TextField({selectOnFocus:true})),number:new n.GridEditor(new r.NumberField({selectOnFocus:true,style:"text-align:left;"})),"boolean":new n.GridEditor(i,{autoSize:"both"})};this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this)},renderDate:function(e){return e.dateFormat(this.dateFormat)},renderBool:function(e){return this[e?"trueText":"falseText"]},isCellEditable:function(e,t){return e==1},getRenderer:function(e){return e==1?this.renderCellDelegate:this.renderPropDelegate},renderProp:function(e){return this.getPropertyName(e)},renderCell:function(e,t,n){var r=this.grid.customRenderers[n.get("name")];if(r){return r.apply(this,arguments)}var i=e;if(Ext.isDate(e)){i=this.renderDate(e)}else if(typeof e=="boolean"){i=this.renderBool(e)}return Ext.util.Format.htmlEncode(i)},getPropertyName:function(e){var t=this.grid.propertyNames;return t&&t[e]?t[e]:e},getCellEditor:function(e,t){var n=this.store.getProperty(t),r=n.data.name,i=n.data.value;if(this.grid.customEditors[r]){return this.grid.customEditors[r]}if(Ext.isDate(i)){return this.editors.date}else if(typeof i=="number"){return this.editors.number}else if(typeof i=="boolean"){return this.editors["boolean"]}else{return this.editors.string}},destroy:function(){Ext.grid.PropertyColumnModel.superclass.destroy.call(this);this.destroyEditors(this.editors);this.destroyEditors(this.grid.customEditors)},destroyEditors:function(e){for(var t in e){Ext.destroy(e[t])}}});Ext.grid.PropertyGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:false,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,viewConfig:{forceFit:true},initComponent:function(){this.customRenderers=this.customRenderers||{};this.customEditors=this.customEditors||{};this.lastEditRow=null;var e=new Ext.grid.PropertyStore(this);this.propStore=e;var t=new Ext.grid.PropertyColumnModel(this,e);e.store.sort("name","ASC");this.addEvents("beforepropertychange","propertychange");this.cm=t;this.ds=e.store;Ext.grid.PropertyGrid.superclass.initComponent.call(this);this.mon(this.selModel,"beforecellselect",function(e,t,n){if(n===0){this.startEditing.defer(200,this,[t,1]);return false}},this)},onRender:function(){Ext.grid.PropertyGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass("x-props-grid")},afterRender:function(){Ext.grid.PropertyGrid.superclass.afterRender.apply(this,arguments);if(this.source){this.setSource(this.source)}},setSource:function(e){this.propStore.setSource(e)},getSource:function(){return this.propStore.getSource()},setProperty:function(e,t,n){this.propStore.setValue(e,t,n)},removeProperty:function(e){this.propStore.remove(e)}});Ext.reg("propertygrid",Ext.grid.PropertyGrid);Ext.grid.GroupingView=Ext.extend(Ext.grid.GridView,{groupByText:"Group By This Field",showGroupsText:"Show in Groups",hideGroupedColumn:false,showGroupName:true,startCollapsed:false,enableGrouping:true,enableGroupingMenu:true,enableNoGroups:true,emptyGroupText:"(None)",ignoreAdd:false,groupTextTpl:"{text}",groupMode:"value",cancelEditOnToggle:true,initTemplates:function(){Ext.grid.GroupingView.superclass.initTemplates.call(this);this.state={};var e=this.grid.getSelectionModel();e.on(e.selectRow?"beforerowselect":"beforecellselect",this.onBeforeRowSelect,this);if(!this.startGroup){this.startGroup=new Ext.XTemplate('<div id="{groupId}" class="x-grid-group {cls}">','<div id="{groupId}-hd" class="x-grid-group-hd" style="{style}"><div class="x-grid-group-title">',this.groupTextTpl,"</div></div>",'<div id="{groupId}-bd" class="x-grid-group-body">')}this.startGroup.compile();if(!this.endGroup){this.endGroup="</div></div>"}},findGroup:function(e){return Ext.fly(e).up(".x-grid-group",this.mainBody.dom)},getGroups:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},onAdd:function(e,t,n){if(this.canGroup()&&!this.ignoreAdd){var r=this.getScrollState();this.fireEvent("beforerowsinserted",e,n,n+(t.length-1));this.refresh();this.restoreScroll(r);this.fireEvent("rowsinserted",e,n,n+(t.length-1))}else if(!this.canGroup()){Ext.grid.GroupingView.superclass.onAdd.apply(this,arguments)}},onRemove:function(e,t,n,r){Ext.grid.GroupingView.superclass.onRemove.apply(this,arguments);var i=document.getElementById(t._groupId);if(i&&i.childNodes[1].childNodes.length<1){Ext.removeNode(i)}this.applyEmptyText()},refreshRow:function(e){if(this.ds.getCount()==1){this.refresh()}else{this.isUpdating=true;Ext.grid.GroupingView.superclass.refreshRow.apply(this,arguments);this.isUpdating=false}},beforeMenuShow:function(){var e,t=this.hmenu.items,n=this.cm.config[this.hdCtxIndex].groupable===false;if(e=t.get("groupBy")){e.setDisabled(n)}if(e=t.get("showGroups")){e.setDisabled(n);e.setChecked(this.canGroup(),true)}},renderUI:function(){var e=Ext.grid.GroupingView.superclass.renderUI.call(this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add("-",{itemId:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"});if(this.enableNoGroups){this.hmenu.add({itemId:"showGroups",text:this.showGroupsText,checked:true,checkHandler:this.onShowGroupsClick,scope:this})}this.hmenu.on("beforeshow",this.beforeMenuShow,this)}return e},processEvent:function(e,t){Ext.grid.GroupingView.superclass.processEvent.call(this,e,t);var n=t.getTarget(".x-grid-group-hd",this.mainBody);if(n){var r=this.getGroupField(),i=this.getPrefix(r),s=n.id.substring(i.length),o=new RegExp("gp-"+Ext.escapeRe(r)+"--hd");s=s.substr(0,s.length-3);if(s||o.test(n.id)){this.grid.fireEvent("group"+e,this.grid,r,s,t)}if(e=="mousedown"&&t.button==0){this.toggleGroup(n.parentNode)}}},onGroupByClick:function(){var e=this.grid;this.enableGrouping=true;e.store.groupBy(this.cm.getDataIndex(this.hdCtxIndex));e.fireEvent("groupchange",e,e.store.getGroupState());this.beforeMenuShow();this.refresh()},onShowGroupsClick:function(e,t){this.enableGrouping=t;if(t){this.onGroupByClick()}else{this.grid.store.clearGrouping();this.grid.fireEvent("groupchange",this,null)}},toggleRowIndex:function(e,t){if(!this.canGroup()){return}var n=this.getRow(e);if(n){this.toggleGroup(this.findGroup(n),t)}},toggleGroup:function(e,t){var n=Ext.get(e),r=Ext.util.Format.htmlEncode(n.id);t=Ext.isDefined(t)?t:n.hasClass("x-grid-group-collapsed");if(this.state[r]!==t){if(this.cancelEditOnToggle!==false){this.grid.stopEditing(true)}this.state[r]=t;n[t?"removeClass":"addClass"]("x-grid-group-collapsed")}},toggleAllGroups:function(e){var t=this.getGroups();for(var n=0,r=t.length;n<r;n++){this.toggleGroup(t[n],e)}},expandAllGroups:function(){this.toggleAllGroups(true)},collapseAllGroups:function(){this.toggleAllGroups(false)},getGroup:function(e,t,n,r,i,s){var o=this.cm.config[i],u=n?n.call(o.scope,e,{},t,r,i,s):String(e);if(u===""||u==="&#160;"){u=o.emptyGroupText||this.emptyGroupText}return u},getGroupField:function(){return this.grid.store.getGroupState()},afterRender:function(){if(!this.ds||!this.cm){return}Ext.grid.GroupingView.superclass.afterRender.call(this);if(this.grid.deferRowRender){this.updateGroupWidths()}},afterRenderUI:function(){Ext.grid.GroupingView.superclass.afterRenderUI.call(this);if(this.enableGroupingMenu&&this.hmenu){this.hmenu.add("-",{itemId:"groupBy",text:this.groupByText,handler:this.onGroupByClick,scope:this,iconCls:"x-group-by-icon"});if(this.enableNoGroups){this.hmenu.add({itemId:"showGroups",text:this.showGroupsText,checked:true,checkHandler:this.onShowGroupsClick,scope:this})}this.hmenu.on("beforeshow",this.beforeMenuShow,this)}},renderRows:function(){var e=this.getGroupField();var t=!!e;if(this.hideGroupedColumn){var n=this.cm.findColumnIndex(e),r=Ext.isDefined(this.lastGroupField);if(!t&&r){this.mainBody.update("");this.cm.setHidden(this.cm.findColumnIndex(this.lastGroupField),false);delete this.lastGroupField}else if(t&&!r){this.lastGroupField=e;this.cm.setHidden(n,true)}else if(t&&r&&e!==this.lastGroupField){this.mainBody.update("");var i=this.cm.findColumnIndex(this.lastGroupField);this.cm.setHidden(i,false);this.lastGroupField=e;this.cm.setHidden(n,true)}}return Ext.grid.GroupingView.superclass.renderRows.apply(this,arguments)},doRender:function(e,t,n,r,i,s){if(t.length<1){return""}if(!this.canGroup()||this.isUpdating){return Ext.grid.GroupingView.superclass.doRender.apply(this,arguments)}var o=this.getGroupField(),u=this.cm.findColumnIndex(o),a,f="width:"+this.getTotalWidth()+";",l=this.cm.config[u],c=l.groupRenderer||l.renderer,h=this.showGroupName?(l.groupName||l.header)+": ":"",p=[],d,v,m,g;for(v=0,m=t.length;v<m;v++){var y=r+v,b=t[v],w=b.data[o];a=this.getGroup(w,b,c,y,u,n);if(!d||d.group!=a){g=this.constructId(w,o,u);this.state[g]=!(Ext.isDefined(this.state[g])?!this.state[g]:this.startCollapsed);d={group:a,gvalue:w,text:h+a,groupId:g,startRow:y,rs:[b],cls:this.state[g]?"":"x-grid-group-collapsed",style:f};p.push(d)}else{d.rs.push(b)}b._groupId=g}var E=[];for(v=0,m=p.length;v<m;v++){a=p[v];this.doGroupStart(E,a,e,n,i);E[E.length]=Ext.grid.GroupingView.superclass.doRender.call(this,e,a.rs,n,a.startRow,i,s);this.doGroupEnd(E,a,e,n,i)}return E.join("")},getGroupId:function(e){var t=this.getGroupField();return this.constructId(e,t,this.cm.findColumnIndex(t))},constructId:function(e,t,n){var r=this.cm.config[n],i=r.groupRenderer||r.renderer,s=this.groupMode=="value"?e:this.getGroup(e,{data:{}},i,0,n,this.ds);return this.getPrefix(t)+Ext.util.Format.htmlEncode(s)},canGroup:function(){return this.enableGrouping&&!!this.getGroupField()},getPrefix:function(e){return this.grid.getGridEl().id+"-gp-"+e+"-"},doGroupStart:function(e,t,n,r,i){e[e.length]=this.startGroup.apply(t)},doGroupEnd:function(e,t,n,r,i){e[e.length]=this.endGroup},getRows:function(){if(!this.canGroup()){return Ext.grid.GroupingView.superclass.getRows.call(this)}var e=[],t=this.getGroups(),n,r=0,i=t.length,s,o;for(;r<i;++r){n=t[r].childNodes[1];if(n){n=n.childNodes;for(s=0,o=n.length;s<o;++s){e[e.length]=n[s]}}}return e},updateGroupWidths:function(){if(!this.canGroup()||!this.hasRows()){return}var e=Math.max(this.cm.getTotalWidth(),this.el.dom.offsetWidth-this.getScrollOffset())+"px";var t=this.getGroups();for(var n=0,r=t.length;n<r;n++){t[n].firstChild.style.width=e}},onColumnWidthUpdated:function(e,t,n){Ext.grid.GroupingView.superclass.onColumnWidthUpdated.call(this,e,t,n);this.updateGroupWidths()},onAllColumnWidthsUpdated:function(e,t){Ext.grid.GroupingView.superclass.onAllColumnWidthsUpdated.call(this,e,t);this.updateGroupWidths()},onColumnHiddenUpdated:function(e,t,n){Ext.grid.GroupingView.superclass.onColumnHiddenUpdated.call(this,e,t,n);this.updateGroupWidths()},onLayout:function(){this.updateGroupWidths()},onBeforeRowSelect:function(e,t){this.toggleRowIndex(t,true)}});Ext.grid.GroupingView.GROUP_ID=1e3
