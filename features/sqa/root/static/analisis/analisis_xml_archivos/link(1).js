
var a={url:'/ajax/panel/view.run',fullBaseUrl:'',helpUrl:'/ajax/help/help.run',manualUrl:'/manual/CHKM',sourceUrl:'/codeviewer/getfile.run',fileByPathUrl:'/codeviewer/getfilebypath.run',exportCsvUrl:'/ajax/panelUserConfig/csv.run',popupGeometry:'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,width=450,height=350,resizable=1',helpGeometry:'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,width=500,height=350,resizable=1',sourceGeometry:'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,width=800,height=600,resizable=1',manualGeometry:'toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,width=800,height=600,resizable=1',link:function(refreshUrl,plugin,panel,element,params){var panelWindow=this._fetchPanelWindow(element);if(!panelWindow)return null;if(refreshUrl&&refreshUrl[0]!='/')refreshUrl=this._getAppContext()+'/'+refreshUrl;var dest=refreshUrl?refreshUrl:this._getAppContext()+this.url;params=params||{};params.plugin_name=plugin;params.panel_name=panel;params.navigations=this._getNavigation(panelWindow);params.paintDiv='no';panelWindow.send(dest,params,false,false);if(!panelWindow.navigation){panelWindow.navigation=new YAHOO.widget.NavigationHistory();}
panelWindow.navigation.add(dest,params);return panelWindow;},popup:function(name,url,params,geometry,useAsIs){if(!useAsIs)url=this._convertToAbsoluteUrl(url);geometry=geometry||this.popupGeometry;url=this._getUrl(url,params);var top=(screen.height-this._getDimension(geometry,'height'))/2;var left=(screen.width-this._getDimension(geometry,'width'))/2;return window.open(url,name,geometry+', top='+top+',left='+left);},linkExt:function(name,url,params,geometry,useAsIs){return this.popup(name,url,params,geometry,useAsIs);},_getDimension:function(geometry,dimension){var array=geometry.split(',');for(var i=0;i<array.length;i++){var aux=array[i].split('=');if(aux[0]==dimension){return aux[1];}}},help:function(context,category,item){context=context||this._getUrlPrefix();var url=this.helpUrl;if(!this.fullBaseUrl.endsWith(context)){url=context+url;}
var params={'category':category,'item':item};this.popup('help',url,params,this.helpGeometry,false);},manual:function(context,item){context=context||this._getUrlPrefix();var url=this.manualUrl+'/'+item;if(!this.fullBaseUrl.endsWith(context)){url=context+url;}
this.popup('manual',url,{},this.manualGeometry);},page:function(url,params,useAsIs){if(!useAsIs)url=this._convertToAbsoluteUrl(url);window.location.href=this._getUrl(url,params);},source:function(context,project,path,parameters,geometry){context=context||this._getUrlPrefix();var url=this.sourceUrl;if(!this.fullBaseUrl.endsWith(context)){url=context+url;}
var language='';var lineStart='';var lineEnd='';var linePos='';var isClass='true';var basedir='';if(parameters){if(parameters.language)language=parameters.language;if(parameters.lineStart)lineStart=parameters.lineStart;if(parameters.lineEnd)lineEnd=parameters.lineEnd;if(parameters.linePos)linePos=parameters.linePos;if(parameters.isClass)isClass=parameters.isClass;if(parameters.basedir)basedir=parameters.basedir;}
var params={'project':project,'path':path,'language':language,'lineStart':lineStart,'lineEnd':lineEnd,'linePos':linePos,'isClass':isClass};if(basedir)params.basedir=basedir;var popupGeometry=geometry||this.sourceGeometry;this.popup('source',url,params,popupGeometry,false);},showfile:function(context,path,parameters,geometry){context=context||this._getUrlPrefix();var url=this.fileByPathUrl;if(!this.fullBaseUrl.endsWith(context)){url=context+url;}
var language='';var lineStart='';var lineEnd='';var linePos='';if(parameters){if(parameters.language)language=parameters.language;if(parameters.lineStart)lineStart=parameters.lineStart;if(parameters.lineEnd)lineEnd=parameters.lineEnd;if(parameters.linePos)linePos=parameters.linePos;}
var params={'path':path,'language':language,'lineStart':lineStart,'lineEnd':lineEnd,'linePos':linePos};var popupGeometry=geometry||this.sourceGeometry;this.popup('source',url,params,popupGeometry,false);},exportCSV:function(windowId,params,popupGeometry){this.popup(windowId,this._getUrlPrefix()+this.exportCsvUrl,params,popupGeometry);},_getUrlPrefix:function(){if(this.fullBaseUrl)return this.fullBaseUrl;var url=window.location;var p=url.pathname.indexOf('/',1);return url.protocol+'//'+url.host+url.pathname.substring(0,p);},_getAppContext:function(){if(this.fullBaseUrl){var pos=this.fullBaseUrl.indexOf('://');if(pos>=0)pos+=3;else return this.fullBaseUrl;pos=this.fullBaseUrl.indexOf('/',pos);var end=this.fullBaseUrl.indexOf('/',pos+1);return end==-1?this.fullBaseUrl.substring(pos):this.fullBaseUrl.substring(pos,end);}else{var url=window.location.pathname;var pos2=url.indexOf('/',1);return url.substring(0,pos2);}},_fetchPanelWindow:function(element){var item;var parent=$($(element).parentNode);while(parent){if(parent.tagName=='DIV'&&parent.className.indexOf('checKingPanel')!=-1){item=YAHOO.checking[parent.id];break;}
parent=parent.parentNode;}
return item;},_convertToAbsoluteUrl:function(url){if(this.fullBaseUrl&&url.indexOf('http:')==-1&&url.indexOf('https:')==-1){url=this.fullBaseUrl+((url.charAt(0)!='/')?'/'+url:url);}
return url;},_getUrl:function(url,params){var hasProperties=false;params=params||{};for(var p in params){if(typeof params[p]=='function')continue;url+=(hasProperties)?'&':'?';hasProperties=true;url+=encodeURIComponent(p)+'='+encodeURIComponent(params[p]);}
return url;},_getNavigation:function(panelWindow){var nav='';if(panelWindow.navigation){panelWindow.navigation.panels().each(function(i){if(nav)nav+=',';nav+=i.plugin_name+':'+i.panel_name;});}
return nav;}};