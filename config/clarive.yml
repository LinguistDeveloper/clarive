#
# Clarive Base Config File
# ========================
#
#  DO NOT CHANGE THIS FILE!
#
#  Instead create environment files at  $CLARIVE_BASE/config/myenv.yml
#  note: after changing environment files a full stop and start 
#  of webserver/dispatcher needed. 
#  web-reload is not enough
#
lang: en_US.UTF-8
port: 3000

# number of web workers 
workers: 5

# max requests handled by each web worker before it restarts
max_requests: 100

# frequency of semaphore attempts
semaphore_wait_interval: .5
    
# cache configure
cache: mongo 
cache_config:
   expire_seconds: 90000   # a bug in mongo prevents us from setting it to a day, 86400

# redis is used by the queue workers
redis:
    server: 'localhost:6379'

# Allow api_key_authentication into the site. 
#    0 = When off (default), api-key only gives access to selected urls, mostly rule/ webservices
#    1 = Switching this on will allow access to any request url in the Clarive server with an api-key. 
api_key_authentication: 0

# mongo database setup
mongo:
    dbname: acmebank 
    retry_frequency: 5
    max_retries: 60
    client:
        host: 'localhost:27017'
        auto_reconnect: 1
        query_timeout: -1
        #auto_connect: 1
        #host: 'mongodb://localhost:27017,localhost2:27018'
        #w
        #wtimeout
        #j
        #timeout: 20000
        #username
        #password
        #db_name
        #max_bson_size
        #find_master: 1
        #ssl
        #sasl
        #sasl_mechanism
        #dt_type
        #inflate_dbrefs: 1

# control what and how mongo indexes work
index:
    weights:  
        topic: 
            mid: 10
            title: 5
        master_doc:
            mid: 10
            name: 5
# experimental: activates websockets server and socketio
websockets: 0

# configure the rule precompilation options: 
#   none     = no precompilation
#   depends  = depends on rule configuration
#   always   = always compile rules
rule_precompile: depends
    
# non ajax access to ajax defined controllers
#    0 = allow access
#    1 = deny access
deny_non_ajax_access: 0

# Baseliner Framework default config
baseliner:
    name: ϲʟᴀʀɪᴠе
    app_name: ϲʟᴀʀɪᴠе
    default_theme: clarive-flat
    default_lang: en
    logo_filename: logo.svg
    toolbar_height: 40
    #favicon: /static/themes/clarive/favicon.ico
    #login_page: /clarive/login.html
    decrypt_key: 1234567
    #time_zone: UTC
    web_host: '{{baseliner.host}}'
    web_port: '{{port}}'
    job_runner: service.job.runner.rule
    web_url: 'http://localhost:3000'
    create_user_session: 0
    ldap: no
    header_init:
        show_lifecycle: 1
    # toolbar_height: 45

#   Allow either case sensitive in login:
##   Users saved with "UPPERCASE" in database
#    user_case: uc
##   Users saved with "lowercase" in database
#    user_case: lc

# CAS authentication
    # cas_auth: 
    #   active: 1
    #   service: http://localhost3000
    #   uri: https://192.168.59.103:49163/cas
    #   verify_key: 0
    
    # allows setting 2 or more feature directories
    'CatalystX::Features':
        home: 
        - '{{CLARIVE_BASE}}/features'
        - '{{CLARIVE_HOME}}/features'
    'Plugin::Session':
        host: '{{mongo.host}}'
        expires: 2592000 # One month
        dbname: '{{mongo.dbname}}'
        collectioname: 'session'
        cookie_name: clarive-session
    
    PluginNamespace:
        prefix: BaselinerX

    'Plugin::I18N':
        languages: es en
        maketext_options:
            Style: gettext
            Decode: 1

#
# RDBMS configuration
#
    # 'Model::Baseliner':
    #    connect_info:
    #    - dbi:Oracle:host=localhost;sid=scm;port=1521
    #    - clarive
    #    - clarive
    #    - LongReadLen: '100000000'
    #      LongTruncOk: '1'
#
# Authentication Configuration
#
    #
    # Password checking configuration:
    #
    # password_rule: '(?=.*[A-Z]+)(?=.*[0-9]+)(?=.*\W+)'
    # password_min_length: 6
    # password_rule_description: 'Needs at least one uppercase, one number and one special character (dot,comma,etc.)
                
    # Authentication Realms (ldap, local, etc)
    authentication:
      default_realm: none
      realms:
          local:
            credential:
              class: Password
              password_field: password
              password_type: clear
            store:
              class: Minimal
              users:
                root:
                  api_key: 567ef8bd1ac500757e8be5b2d4c97e08
                  password: f7ef7cb69c38a5e888a9cc5824fe8398
          none:
            credential:
              class: Password
              password_field: password
              password_type: none
            store:
              class: Null
#
# Licensing - this is a default license for 5 users max and 20 nodes
#
license:
  end_date: 2017-12-31
  id: trial_customer
  lic_data: azzMqA6AaH1Cp3AhWC2mogJAAsp7YA+1+IrCFQqOUBr2OyEDFKuD9BARTfqDkcqEeB7MbusAiUoqiCoK/vpCz0McTCD1mBSCUSLMTBfJBNiD5CBLdAiWfVJDLauRIDJzOD5D53C++CY4XYxBokspPCOZngSD
  lic_key: DW1PJv6hJYbHl6uaoToNU5pl8jNPZws/6vkOWY0Cx2Z/TsjJaqTEHg/ExeIPAAD5bbpG4NANGpDrr2MQwHsjzdee/4zsRcc+8181jfHymrQRsDBlv+mveKIxDva9JvpQPUEPRnj649kzW4qibTEWMKqVfCzVCzh0i1K9dCxSRcM=
  name: Trial Customer
  nodes: 20
  private_key: |
    -----BEGIN RSA PRIVATE KEY-----
    MIICXQIBAAKBgQDPAGmxRPAlwsDJUkS/KNouxp0tT8CoVIXohWs6S45Xfcd1rmRi
    /vtHzG3OlnCETUeSfKg3xdSH5S2lxoaJS3kROJJl7h+3C+YVSq4Qa7cNnBufZUky
    zEAA4JF52D4Q9BZAiwf8y5iNQeJ3jk6NA0D6dZP9fi1Z/t6PSUL9U5j3IQIDAQAB
    AoGANlr8ZfEdQj0elH7G0I9wo2HB+hj8FPeE5ibKnlcivHSpwIwXjis4XoUevGWi
    jAsi5SNYpLSM91ZFo0c7Iqgv1M3RFdO/hLYh098yF943wu232hCkc2ZCcILljOFo
    3Ix/jlFi0jbkx4g5HbuAqgECU5ThJV9N3nIX/AP7YkidpnUCQQDvkHkZTHS5OGkK
    uzp9+tfjY4AMdiWbbZr+glGwtwCyy2fdIyouZ7i83N4f0Qv3ivXegq0SJkqQcEvV
    raoQsjKDAkEA3TQIVuUxT2H/t+TOhAwTmplF4heGXAnyuTGv7XxLP2bND+ErTwC+
    qrU132SI4+Xo34hJxAewVH7dB/rOD+wuiwJBALMbis6VUPdh63bwgEzMDDifnY6z
    jm5kRetet4CtccI7PU4iClljhsT9RLz46D+ND0Hq5UaahkjzDF+XVXziHc0CQBrR
    1jkC7OmdDi4ztb5Y4H+cGdcB1y6NnjpKBfSbX1w+kJpeSKv5gSSdd/yv6dEH7SY9
    FgSIkh6MiywOgrF3h2UCQQDVvUeRBICGt913HUajsJY1Kcp2pMIsfR0WaaBa6Cds
    KxjGCQpZHMGV6i6XBBWj7puWWGzJ3k7ZuTYRHff6Jnai
    -----END RSA PRIVATE KEY-----
  users: 5