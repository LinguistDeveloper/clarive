<%args>
    $theme_dir => ''
    $loading_mask => 1
</%args>
<%perl>
    my $debug = $c->debug ? '-debug' : '';
</%perl>
    <title><% _loc( $c->config->{name} ) %></title>
% if( my $favicon = $c->config->{favicon} ) {
    <link rel="shortcut icon" href="<% $favicon %>" mce_href="<% $favicon %>"/>
% }


    <!-- Twitter Bootstrap -->
    <link rel="stylesheet" type="text/css" href="/site/boot.css" /> 
    
    <!-- Loading masks -->                                            
% if( $loading_mask ) {
    <div id="bali-loading-mask" style="position:absolute; left:0; top:0; width:100%; height:100%; z-index:20000; background-color:white;"></div>
    <div id="bali-loading" style="position:absolute; left:45%; top:40%; padding:2px; z-index:20001; height:auto;">
      <img id="bali-loading-img" style="display: block;height:52px;width:52px;" src="/static/images/loading/loading.gif" />
      <div id="boot" class="loading-progress" style="display: none; height: 2px">
          <div class="progress" style="height: 2px" >
              <div class="bar" style="width: 0%"></div>
          </div>
      </div>
      <div id="bali-loading-text" style="text-align: center; text-transform: uppercase; font-weight: normal; font-size: 11px; color: #999; font-family: Calibri, OpenSans, Tahoma, Helvetica Neue, Helvetica, Arial, sans-serif;">
          <% _loc('Loading') %>
      </div>
    </div>
% }

<!-- ExtJS -->
<link rel="stylesheet" type="text/css" href="/static/ext/resources/css/ext-all.css" />
<!-- Gritter, used in common.js -->
<link rel="stylesheet" href="/static/gritter/css/jquery.gritter.css">
<!-- ux -->
<link rel="stylesheet" type="text/css" href="/static/ext/examples/ux/css/ux-all.css" />
<!-- datepickerplus -->
<link rel="stylesheet" href="/static/datepickerplus/datepickerplus.css" type="text/css" />
<!-- Datatables (on demand require later) -->
<link rel="stylesheet" href="/static/datatables/css/jquery.dataTables.min.css" type="text/css" />
<link rel="stylesheet" href="/static/datatables/css/dataTables.bootstrap.css" type="text/css" />
<!-- Pagedown -->
<link rel="stylesheet" href="/static/pagedown/pagedown.css">
<!-- CLEditor -->
<link rel="stylesheet" href="/static/cleditor/jquery.cleditor.css">
<!-- Highlighter.js -->
<link rel="stylesheet" href="/static/highlightjs/tomorrow.css">
<!-- Timeline Similes -->
<link rel="stylesheet" href="/static/timeline/jquery.timeline.css">
<!-- Codemirror -->
<link rel="stylesheet" href="/static/codemirror/lib/codemirror.css">
<link rel="stylesheet" href="/static/codemirror/theme/elegant.css">
<link rel="stylesheet" href="/static/codemirror/theme/night.css">
<link rel="stylesheet" href="/static/codemirror/theme/eclipse.css">
<link rel="stylesheet" href="/static/codemirror/theme/lesser-dark.css">
<link rel="stylesheet" href="/static/codemirror/lib/util/simple-hint.css">
<style type="text/css">
    .CodeMirror { border: 1px solid #eee;} 
    .CodeMirror-scroll {
        overflow: visible;
        height: 100%;
    }
    .CodeMirror-fullscreen {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
        margin: 0;
        padding: 0;
        border: 0px solid #BBBBBB;
        opacity: 1;
    }
</style>
<!-- Portal CSS -->
<link rel="stylesheet" type="text/css" href="/site/portal/portal.css" />
<!-- uploader drag-drop -->
<link rel="stylesheet" type="text/css" href="/static/valums/fileuploader.css" />
<!-- superbox -->
<link rel="stylesheet" type="text/css" href="/static/superbox/superbox.css" />
<!-- Cal -->
<link rel="stylesheet" type="text/css" href="/static/fullcalendar/fullcalendar.css" />
<link rel="stylesheet" type="text/css" href="/static/fullcalendar/fullcalendar.print.css" media="print" />
<!-- Treegrid -->
<link rel="stylesheet" type="text/css" href="/static/gridtree/css/treegrid.css" />
<!-- final css override -->
<link rel="stylesheet" type="text/css" href="/static/final.css" />
<link rel="stylesheet" type="text/css" href="/static/sprites.css" />
<!-- Ext Spinner Widget -->
<link rel="stylesheet" href="/static/ex.ux.form.spinner/Spinner.css" type="text/css" />


<!--JS libraries -->
<script type="text/javascript" src="/static/require/require.js" data-main="/static/app"></script>


    

<script>$('#bali-loading .progress .bar').width('30%');</script>
<!-- #reset namespace
    <link rel="stylesheet" type="text/css" href="/site/reset.css" /> 
-->
% if( my $theme_dir = $c->stash->{theme_dir} ) {
    <link rel="stylesheet" type="text/css" href="<% $theme_dir %>/style.css" />
% }

    

    