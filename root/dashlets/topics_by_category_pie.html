<!--
name: Topics by category
description: Chart pie (Topics by category)
url: /dashboard/topics_by_category
html: /dashlets/topics_by_category_pie.html
---
-->
<%perl>
    use Baseliner::Utils;
    my $graph_id = "topics_pie". _nowstamp;
    my @topics_by_category = $c->stash->{topics_by_category};
    my $title = $c->stash->{topics_by_category_title};
</%perl>


<script type="text/javascript">
$(function () {
var data = new Array();
%foreach my $topic (_array @topics_by_category){
    data.push({ label: "<%$topic->{category}%>",  color:"<%$topic->{color}%>", data: [[1,<%$topic->{total}%>]]});
%}

	// DEFAULT
    $.plot($("#<%$graph_id%>"), data, 
	{
        series: {
            pie: {
                show: true,
                radius: 1,
                label: {
                    show: true,
                    radius: 3/4,
                    formatter: function(label, series){
                        return '<div style="font-size:8pt;text-align:center;padding:2px;color:white;">'+Math.round(series.percent)+'%</div>';
                    },
                    background: { opacity: 0.5 }
                }
            }
        },
        legend: {
            show: true
        }
	});
});

</script>
 

	<style type="text/css">
		div.graph
		{
			width: 400px;
			height: 300px;
			float: left;
			border: 1px dashed gainsboro;
		}
    </style>
    
    <h2><%$title%></h2><br>
    <div id="<%$graph_id%>" class="graph"></div>





